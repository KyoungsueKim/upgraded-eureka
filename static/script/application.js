
var arrHakbuMj = new Array(
 ["DS03004022001","e-비즈니스학전공(과)"]
,["DS03009001001","간호학전공(과)"]
,["DS03009002001","간호학전공(특별과정)(과)"]
,["DS03001027001","건설시스템공학전공(과)"]
,["DS03001029001","건축공학전공(과)"]
,["DS03001029003","건축학전공(5년)(과)"]
,["DS03001029002","건축학전공(과)"]
,["DS03004021001","경영학전공(과)"]
,["DS03006021001","경제학전공(과)"]
,["DS03001028001","교통시스템공학전공(과)"]
,["DS03005021001","국어국문학전공(과)"]
,["DS03012001001","국제통상전공(과)"]
,["DS03004023001","금융공학전공(과)"]
,["DS03001021001","기계공학전공(과)"]
,["DS03003025001","기초의과학전공(과)"]
,["DS03006027001","문화산업과커뮤니케이션전공(과)"]
,["DS03005025001","문화콘텐츠학전공(과)"]
,["DS03003022001","물리학전공(과)"]
,["DS03002024002","미디어학전공(과)"]
,["DS03007021001","법학전공(과)"]
,["DS03005023001","불어불문학전공(과)"]
,["DS03005024001","사학전공(과)"]
,["DS03006024001","사회학전공(과)"]
,["DS03001022001","산업공학전공(과)"]
,["DS03001022002","산업정보시스템공학전공(과)"]
,["DS03001025003","생명공학전공(과)"]
,["DS03003024001","생명과학전공(과)"]
,["DS03002024003","소셜미디어전공(과)"]
,["DS03002022002","소프트웨어보안전공(과)"]
,["DS03002023001","소프트웨어융합전공(과)"]
,["DS03003021001","수학전공(과)"]
,["DS03002024001","스마트콘텐츠전공(과)"]
,["DS03006026001","스포츠레저학전공(과)"]
,["DS03004021002","스포츠마케팅학전공(과)"]
,["DS03001024001","신소재공학전공(과)"]
,["DS03006023001","심리학전공(과)"]
,["DS03013021001","약학전공(과)"]
,["DS03005022001","영어영문학전공(과)"]
,["DS03001025001","응용화학생명공학전공(과)"]
,["DS03001025002","응용화학전공(과)"]
,["DS03008002001","의학전공(과)"]
,["DS03002021001","전자공학전공(과)"]
,["DS03002022003","정보컴퓨터공학전공(과)"]
,["DS03006025001","정치외교학전공(과)"]
,["DS03012001005","지역연구전공(미국)(과)"]
,["DS03012001004","지역연구전공(유럽)(과)"]
,["DS03012001003","지역연구전공(일본)(과)"]
,["DS03012001002","지역연구전공(중국)(과)"]
,["DS03002022001","컴퓨터공학전공(과)"]
,["DS03006022001","행정학전공(과)"]
,["DS03001023001","화학공학전공(과)"]
,["DS03003023001","화학전공(과)"]
,["DS03001026001","환경공학전공(과)"]
,["DS0300202404" ,"디지털미디어전공(과)"]
,["DS03002026001","인공지능융합전공(과)"]
);

var arrHakbu = new Array(
 ["00"        ,"[공통]"]
,["DS03004022","e-비즈니스학과"]
,["DS03009001","간호학부"]
,["DS03009002","간호학부(특별과정)"]
,["DS03001027","건설시스템공학과"]
,["DS03001029","건축학과"]
,["DS03004021","경영학과"]
,["DS03006021","경제학과"]
,["DS03001028","교통시스템공학과"]
,["DS03005021","국어국문학과"]
,["DS03012001","국제학부"]
,["DS03004023","금융공학과"]
,["DS03001021","기계공학과"]
,["DS03003025","기초의과학전공"]
,["DS03006027","문화산업과 커뮤니케이션전공"]
,["DS03005025","문화콘텐츠학과"]
,["DS03003022","물리학과"]
,["DS03002024","미디어학과"]
,["DS03007021","법학과"]
,["DS03005023","불어불문학과"]
,["DS03005024","사학과"]
,["DS03006024","사회학과"]
,["DS03001022","산업공학과"]
,["DS03003024","생명과학과"]
,["DS03002023","소프트웨어융합학과"]
,["DS03003021","수학과"]
,["DS03006026","스포츠레저학과"]
,["DS03001024","신소재공학과"]
,["DS03006023","심리학과"]
,["DS03013021","약학과"]
,["DS03005022","영어영문학과"]
,["DS03001025","응용화학생명공학과"]
,["DS03008002","의학부"]
,["DS03002021","전자공학과"]
,["DS03002022","정보컴퓨터공학과"]
,["DS03006025","정치외교학과"]
,["DS03006022","행정학과"]
,["DS03001023","화학공학과"]
,["DS03003023","화학과"]
,["DS03001026","환경공학과"]
,["DS03002026","인공지능융합학과"]
);

var arrFld = new Array(
 ["U0204006","인문학1영역"]
,["U0204007","인문학2영역"]
,["U0204008","사회과학영역"]
,["U0204009","자연과학영역"]
);

var arrWonMj = new Array(
 ["DS04001001001","건축학전공"]
,["DS04001002001","건축공학전공"]
,["DS04001003001","건설교통공학전공"]
,["DS04001003002","토목공학전공"]
,["DS04001003003","교통공학전공"]
,["DS04001004001","환경공학전공"]
,["DS04001005001","화학공학전공"]
,["DS04001005002","식품공학전공"]
,["DS04001006001","재료공학전공"]
,["DS04001007001","산업공학전공"]
,["DS04001008001","기계공학전공"]
,["DS04001010001","나노정보융합기술전공"]
,["DS04001011001","간호학전공"]
,["DS04001011002","전문간호사과정"]
,["DS04001012001","의학전공"]
,["DS04001012002","의학전공(의)"]
,["DS04001012003","분자의학전공(이)"]
,["DS04001012004","신경과학전공(이)"]
,["DS04001012005","정보의학전공(이)"]
,["DS04001012006","의학전공(이)"]
,["DS04001012007","분자의학전공(의)"]
,["DS04001012008","정보의학전공(의)"]
,["DS04001012009","신경과학전공(의)"]
,["DS04001013001","의생명전공"]
,["DS04001013002","분자의학전공(이)"]
,["DS04001013003","신경과학전공(이)"]
,["DS04001013004","사회보건학(이)"]
,["DS04001013005","분자의학전공(의)"]
,["DS04001013006","신경과학전공(의)"]
,["DS04001013007","사회보건학(의)"]
,["DS04001014001","경제학전공"]
,["DS04001015001","법학전공"]
,["DS04001016001","응용사회과학전공"]
,["DS04001016002","행정학전공"]
,["DS04001016003","사회학전공"]
,["DS04001016004","응용사회학전공"]
,["DS04001016005","정치학전공"]
,["DS04001017001","심리학전공"]
,["DS04001017002","사회심리전공"]
,["DS04001017003","임상심리전공"]
,["DS04001017004","인지/언어심리전공" ]
,["DS04001017005","응용인지심리전공"]
,["DS04001017006","소비자광고심리전공"]
,["DS04001017007","직업및진로심리전공"]
,["DS04001017008","아동/청소년임상심리전공" ]
,["DS04001017009","상담심리전공"]
,["DS04001017010","인지심리전공"]
,["DS04001017011","산업및조직심리전공"]
,["DS04001017012","성인임상심리전공"]
,["DS04001018001","정치외교학전공"]
,["DS04001019001","행정학전공"]
,["DS04001020001","국어국문학전공"]
,["DS04001021001","영어영문학전공"]
,["DS04001021002","통/번역전공" ]
,["DS04001021003","영미문화학전공"]
,["DS04001021004","영어교육전공"]
,["DS04001022001","사학전공"]
,["DS04001022002","한국사(고고학전공)"]
,["DS04001023001","불어불문학전공"]
,["DS04001024001","경영정보전공"]
,["DS04001025001","경영일반전공"]
,["DS04001025002","회계전공"]
,["DS04001025003","금융공학전공"]
,["DS04001025004","인사전공"]
,["DS04001025005","생산전공"]
,["DS04001025006","마케팅전공"]
,["DS04001025007","경영정보전공"]
,["DS04001026001","물리학전공"]
,["DS04001027001","화학전공"]
,["DS04001028001","수학전공"]
,["DS04001029001","생명과학전공"]
,["DS04001030001","미디어학전공"]
,["DS04001031001","전자공학전공"]
,["DS04001031002","전기공학전공"]
,["DS04001032001","컴퓨터공학전공"]
,["DS04001032002","금융보안전공"]
,["DS04001032003","홈네트워크보안"]
,["DS04001034001","신경과학기술전공"]
,["DS04001035001","한국학전공"]
,["DS04001036001","기술경영전공"]
,["DS04001037001","지역연구학전공"]
,["DS04001038001","의용공학전공"]
,["DS04001039001","응용생명공학전공"]
,["DS04001039002","화장품과학전공"]
,["DS04001040001","우주계측정보공학전공"]
,["DS04001040002","우주측지학전공"]
,["DS04001041001","영상표시전공"]
,["DS04001043001","금융공학협동전공"]
,["DS04001044001","분자과학기술전공"]
,["DS04001044002","재료화학전공(이)"]
,["DS04001044003","재료화학전공(공)"]
,["DS04001044004","응용물리전공(이)"]
,["DS04001044005","생체소재전공"]
,["DS04001044006","분자재료공학전공"]
,["DS04001044007","물리학전공(분)"]
,["DS04001044008","의용생체공학"]
,["DS04001044009","의과학"]
,["DS04001044010","응용물리전공(공)"]
,["DS04001044011","생물공학전공"]
,["DS04001044012","의학화학전공(분)"]
,["DS04001044013","화학전공(분)"]
,["DS04001044014","공업화학전공(분)"]
,["DS04001045001","응용물리전공(에너지시스템)"]
,["DS04001045002","응용화학전공"]
,["DS04001045003","에너지화공재료전공"]
,["DS04001045004","에너지전공"]
,["DS04001045005","에너지시스템전공"]
,["DS04001046001","시스템공학전공"]
,["DS04001047001","평생교육및HRD전공" ]
,["DS04001047002","교육과정및평가전공"]
,["DS04001047003","교육정책및경영전공"]
,["DS04001047004","교육상담및심리전공"]
,["DS04001048001","NCW공학협동전공" ]
,["DS04001049001","금융공학전공"]
,["DS04001050001","금융보안전공"]
,["DS04001050002","홈네트워크보안전공"]
,["DS04001057001","생물공학전공"]
,["DS04001058001","제어계측공학전공"]
,["DS04001059001","토목공학전공(토목)"]
,["DS04001060001","공업화학전공"]
,["DS04001061001","전파공학전공"]
,["DS04001062001","교통공학전공(교통)"]
,["DS04001063001","에너지학전공"]
,["DS04001064001","건설교통공학과정전공"]
,["DS04001065001","정보과학전공"]
,["DS04001066001","사회학전공"]
,["DS04001067001","언어공학전공"]
);

var arrSWonJungboMj = new Array(["DS04002002001","정보통신공학전공"]);

function strSbjt_OnFocus(){
	
}

function strSbjtType_OnKeyPress(){
	
}


/* ======================================================================
Function :  조회버튼 클릭시 개설강의목록 조회
Param 	 :  없음
Return   :  없음
====================================================================== */
function findOpenLecture(){	
    var f = document.application;
	var strSubmattFg = f.strSubmattFg[f.strSubmattFg.selectedIndex].value;// 교과구분 
	
	if( strSubmattFg == '' || strSubmattFg.length < 3) {
		dialog.alert("교과구분을 선택하시기 바랍니다."); return;
	}
	
    var strSustMjCd  = f.strSustMjCd[f.strSustMjCd.selectedIndex].value;

	if( strSubmattFg == 'U0209001') {  // 전공과목(학부-DS03)
		if( strSustMjCd.length < 8) {
			dialog.alert("전공을 선택하세요"); return;
		}
	} else if( strSubmattFg == 'U0209002') {  // 교양과목
	} else if( strSubmattFg == 'U0209003') {  // 기초과목(학부-DS03)
		if( strSustMjCd.length < 8 && strSustMjCd != '00') {
			dialog.alert("학부를 선택하세요"); return;
		}
	} else if( strSubmattFg == 'U0209005') {  // 영역별교양
		if( strSustMjCd.length < 8) {
			dialog.alert("영역을 선택하세요"); return;
		}
	} else if( strSubmattFg == 'U0209008') {  // 일반대학원-DS04001
		if( strSustMjCd.length < 8) {
			dialog.alert("전공을 선택하세요"); return;
		}
	} else if( strSubmattFg == 'U0209015') {  // 정보통신전문대학원-DS04002 
		if( strSustMjCd.length < 8) {
			dialog.alert("전공을 선택하세요"); return;
		}
	}

	var param = $("form[name=application]").formSerializeObject();

	commonAjax("http://sugang.ajou.ac.kr/uni/tlsn/aply/findOpenLecture.ajax", param, function(data){

		if(!dataNullCheck(data["RESULT_MESG"])){
			dialog.alert(data["RESULT_MESG"]);
			return;
		}

		if(isMobile){
			setOpenLectureMobile(data["LECTURE_LIST"],data["strTlsnScheValidation"]);
		}else{
			setOpenLecture(data["LECTURE_LIST"],data["strTlsnScheValidation"]);
		}
	}, "json", true);
}

//개설교과목조회
function setOpenLecture(list,strTlsnScheValidation){
	var body = $("#tbl_lecture > tbody");
	body.empty();
	if(!isEmptyArray(list)){
		var html = '';
		$.each(list,function(idx,item){
			var btnHtml = "";
			var strOpenLtNo = nvl(item["OPEN_LT_NO"]);
			var strClssNo  = nvl(item["CLSS_NO"]);
			if("1" == nvl(strTlsnScheValidation)){
				btnHtml = "onclick=saveTakingLessonReg('"+strOpenLtNo+"','"+strClssNo+"');";
			}
			var rcapaCnt = stringCut(nvl(item["RCAPA_CNT"]), 4);
			var preRcapaCnt = stringCut(nvl(item["PRE_RCAPA_CNT"]), 4);
			
			html += '	<tr> ';
			html += '        <td><span>'+(idx+1)+'</span></td> ';
			html += '        <td> ';
			if("" != btnHtml){
			html += '            <div class="nb-buttons"> ';
			html += '                <div class="nb-btn-pop"><button type="button" '+btnHtml+'>신청</button></div> ';
			html += '            </div> ';
			}
			html += '        </td> ';
			html += '        <td><span>'+nvl(item["TLSN_NO"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["SBJT_CD"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["SBJT_KOR_NM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["SUST_LSN_NM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["PNT"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["TM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["CLSS_NO"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["MA_LECTURER_KOR_NM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["LT_TM_NM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["LT_ROOM_NM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["CAPA_CNT"])+'</span></td> ';
			html += '        <td><span>'+rcapaCnt+'</span></td> ';
			html += '        <td><span>'+preRcapaCnt+'</span></td> ';
			html += '        <td><span>'+nvl(item["DELAY_FR_DTTM"])+'</span></td> ';
			html += '    </tr> ';
		});
		body.html(html);
	}else{
		setEmptyList([$("#tbl_lecture")]);
	}
}

// 개설교과목조회
function setOpenLectureMobile(list,strTlsnScheValidation){
	var body = $("#tbl_lecture");
	body.empty();
	if(!isEmptyArray(list)){
		var html = '';
		$.each(list,function(idx,item){
			var btnHtml = "";
			var strOpenLtNo = nvl(item["OPEN_LT_NO"]);
			var strClssNo  = nvl(item["CLSS_NO"]);
			if("1" == nvl(strTlsnScheValidation)){
				btnHtml = "onclick=saveTakingLessonReg('"+strOpenLtNo+"','"+strClssNo+"');";
			}
			var rcapaCnt = stringCut(nvl(item["RCAPA_CNT"],"0"), 4);
			var preRcapaCnt = stringCut(nvl(item["PRE_RCAPA_CNT"],"0"), 4);
			var delayYn = nvl(item["DELAY_FR_DTTM"],"0");
			
			html += '	<li> ';
			html += '	<div> ';
			html += '	<div> ';
			html += '		<p class="tit">'+nvl(item["SBJT_KOR_NM"])+'</p> ';			
			html += '       <span class="blue">수강번호 : '+nvl(item["TLSN_NO"])+'</span> ';		
			html += '       <span class="blue">과목코드 : '+nvl(item["SBJT_CD"])+'</span> ';
			html += '       <span class="blue">정원 : '+nvl(item["CAPA_CNT"])+'명</span> ';
			html += '       <span class="blue">'+nvl(item["SUST_LSN_NM"])+'</span> ';
			html += '       <span class="blue">'+nvl(item["PNT"])+'학점</span> ';
			html += '       <span class="blue">'+nvl(item["TM"])+'시간</span> ';
			html += '       <span class="blue">'+nvl(item["CLSS_NO"])+'반</span> ';
			html += '       <span class="blue">'+nvl(item["MA_LECTURER_KOR_NM"])+'</span> ';
			html += '       <br/> ';
			html += '       <span>'+nvl(item["LT_TM_NM"])+'</span> ';
			html += '       <span>'+nvl(item["LT_ROOM_NM"])+'</span> ';
			if (delayYn != '0') {
				html += '       <span class="red">신청가능시간 : '+nvl(item["DELAY_FR_DTTM"])+'</span></td> ';
			}
			html += '	</div> ';		
			if("" != btnHtml){
			html += '   <div class="nb-buttons"> ';
			html += '       <div class="nb-btn-save nb-theme"><button type="button" '+btnHtml+'>신청</button></div> ';
			html += '       <span>여석 : '+rcapaCnt+'</span> ';
			html += '   </div> ';
			}
			html += '   </div> ';
			html += '   </li> ';
		});
		body.html(html);
	}else{
		setEmptyList([$("#tbl_lecture")]);
	}
}

/* ======================================================================
Function :  조회버튼 클릭시 개설강의목록 조회
Param 	 :  없음
Return   :  없음
====================================================================== */
function findTakingLessonInfo(){
    var f = document.application;

    //NetFunnel_Action( {service_id:"service_1",action_id:"search",popup_target:top,user_data:strUserNo}, function(){
        var param = $("form[name=application]").formSerializeObject();

    	commonAjax(contextPath+"/findTakingLessonInfo.ajax", param, function(data){
    		
    		if(!dataNullCheck(data["RESULT_MESG"])){
    			dialog.alert(data["RESULT_MESG"]);
    			return;
    		}
    		
    		if(isMobile){
        		setTakingLessonMobile(data["takingLessonInfoList"][0]);
        		setPreTakingLessonMobile(data["takingLessonInfoList"][1]);
    		}else{
        		setTakingLesson(data["takingLessonInfoList"][0]);
        		setPreTakingLesson(data["takingLessonInfoList"][1]);
    		}    		
    	}, "json", true);
    //});
}

// 수강신청목록
function setTakingLesson(list){	
	var body = $("#tbl_takingLesson > tbody");
	body.empty();
	var intAplyPntSum = 0.0;
	if(!isEmptyArray(list)){
		var html = '';
		$.each(list,function(idx,item){
			intAplyPntSum += Number(nvl(item["PNT"]));
			var strOpenLtNo 	= nvl(item["OPEN_LT_NO"]);
			var strClssNo  		= nvl(item["CLSS_NO"]);
			var strTlsnNo  		= nvl(item["TLSN_NO"]);
			var strTlsnDelPosbYn= nvl(item["TLSN_DEL_POSB_YN"]);
			var strSbjtPosiFg  	= nvl(item["SBJT_POSI_FG"]);
			var strSngjDetmFg	= nvl(item["SNGJ_DETM_FG"]);
			var reSugangStr		= nvl(item["TLSN_AG_YN"]);
			var isReSugang  	= ("1" == reSugangStr);
			var isAddSugang  	= ("0" == reSugangStr);
			if(isReSugang){
				reSugangStr = "재수강";
			}else if(isAddSugang){
				reSugangStr = "추가수강";
			}

			/* [shinox][2019.04.24][데이터가 없어서 하드코딩] */
			//strSbjtPosiFg = "U02010011";
			//strSngjDetmFg = "U0244002";
			//strTlsnDelPosbYn = "1";
			
			html += '	<tr> ';
			html += '        <td><span>'+(idx+1)+'</span></td> ';
			html += '        <td> ';
			if("1" == strTlsnDelPosbYn){
			html += '            <div class="nb-buttons"> ';
			html += '                <div class="nb-btn-pop"><button type="button" onclick="deleteTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\''+strTlsnNo+'\''+');">삭제</button></div> ';
			html += '            </div> ';
			}
			html += '        </td> ';
			html += '        <td><span>'+nvl(item["TLSN_NO"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["SBJT_KOR_NM"])+'</span></td> ';
			html += '        <td> ';
			if(isReSugang){
				if("1" == strTlsnDelPosbYn){
					html += '        	<span class="red"><a href="javascript:void(0);" onclick="reTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\');">재수강</a></span> ';
				}else{
					html += '        	<span class="red">재수강</span> ';
				}
			}else if(isAddSugang){
				if("1" == strTlsnDelPosbYn){
					html += '        	<span class="red"><a href="javascript:void(0);" onclick="reTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\');">추가수강</a></span> ';
				}else{
					html += '        	<span class="red">추가수강</span> ';
				}
			}else{
				html += '        	<span>'+reSugangStr+'</span> ';				
			}					
			html += '        </td> ';
			html += '        <td><span>'+nvl(item["PNT"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["TM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["CLSS_NO"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["LT_ROOM_NM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["LT_TM_NM"])+'</span></td> ';
			if("U0201001" == strSbjtPosiFg){
				html += '        <td><span></span></td> ';
				html += '        <td><span></span></td> ';
			}else if("U0244002" == strSngjDetmFg){
				if("1" == strTlsnDelPosbYn){
					html += '        <td><span class="red"><a href="javascript:void(0);" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'2\''+');">대학원</a></span></td> ';
					html += '        <td><span class="red"><a href="javascript:void(0);" onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">출력</a></span></td> ';
				}else{
					html += '        <td><span class="red">대학원</span></td> ';
					html += '        <td><span class="red"><a href="javascript:void(0);" onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">출력</a></span></td> ';
				}
			}else{
				if("1" == strTlsnDelPosbYn){
					html += '        <td><span class="red"><a href="javascript:void(0);" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'1\''+');">학부</a></span></td> ';
					html += '        <td><span class="red"><a href="javascript:void(0);" onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">출력</a></span></td> ';
				}else{
					html += '        <td><span class="red">대학원</span></td> ';
					html += '        <td><span class="red"><a href="javascript:void(0);" onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">출력</a></span></td> ';
				}
			}
			//html += '        <td><span>'+nvl(item["SBJT_CD"])+'</span></td> ';
			html += '    </tr> ';
		});
		body.html(html);
	}else{
		setEmptyList([$("#tbl_takingLesson")]);
	}
	$("#intAplyPntSum").val(intAplyPntSum.toFixed(1));
}

// 예비수강신청목록
function setPreTakingLesson(list){
	var body = $("#tbl_preTakingLesson > tbody");
	body.empty();
	var intPreAplyPntSum = 0.0;
	if(!isEmptyArray(list)){
		var html = '';
		$.each(list,function(idx,item){
			intPreAplyPntSum += Number(nvl(item["PNT"]));
			var strOpenLtNo 	= nvl(item["OPEN_LT_NO"]);
			var strClssNo  		= nvl(item["CLSS_NO"]);
			var strTlsnNo  		= nvl(item["TLSN_NO"]);
			var strTlsnDelPosbYn= nvl(item["TLSN_DEL_POSB_YN"]);
			var strTlsnAddPosbYn= nvl(item["TLSN_ADD_POSB_YN"]);
			var strSbjtPosiFg  	= nvl(item["SBJT_POSI_FG"]);
			var strSngjDetmFg	= nvl(item["SNGJ_DETM_FG"]);
			var reSugangStr		= nvl(item["TLSN_AG_YN"]);
			
			var strCapaCnt		= nvl(item["CAPA_CNT"]); 
			var strRcapaCnt		= nvl(item["RCAPA_CNT"]);
			var strPreRcapaCnt  = nvl(item["PRE_RCAPA_CNT"]);
			
			var strMaLecturerKorNm  = nvl(item["MA_LECTURER_KOR_NM"]);
			
			var isReSugang  	= ("1" == reSugangStr);
			var isAddSugang  	= ("0" == reSugangStr);
			if(isReSugang){
				reSugangStr = "재수강";
			}else if(isAddSugang){
				reSugangStr = "추가수강";
			}
			/* [shinox][dev][데이터가 없어서 하드코딩] */
			//strSbjtPosiFg = "U02010011";
			//strSngjDetmFg = "U0244002";
			//strTlsnAddPosbYn = "1";
			//strTlsnDelPosbYn = "1";
			
			html += '	<tr> ';
			html += '        <td><span>'+(idx+1)+'</span></td> ';
			html += '        <td> ';
			html += '            <div class="nb-buttons"> ';
			if("1" == strTlsnAddPosbYn){				
				html += '                <div class="nb-btn-pop"><button type="button" onclick="addPreTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\''+strTlsnNo+'\');">신청</button></div> ';
			}
			if("1" == strTlsnDelPosbYn){				
				html += '                <div class="nb-btn-pop"><button type="button" onclick="deletePreTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\''+strTlsnNo+'\');">삭제</button></div> ';
			}					
			html += '            </div> ';
			html += '        </td> ';
			html += '        <td><span>'+strTlsnNo+'</span></td> ';
			html += '        <td><span>'+nvl(item["SBJT_KOR_NM"])+'</span></td> ';
			html += '        <td> ';
			if("1" == strTlsnDelPosbYn){
				html += '        	<span class="red"><a href="javascript:void(0);" onclick="reTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">'+reSugangStr+'</a></span> ';
			}else{
				html += '        	<span class="red">'+reSugangStr+'</span> ';
			}							
			html += '        </td> ';
			html += '        <td><span>'+nvl(item["PNT"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["TM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["CLSS_NO"])+'</span></td> ';
			
			html += '        <td><span>'+nvl(item["MA_LECTURER_KOR_NM"])+'</span></td> ';
			
			html += '        <td><span>'+nvl(item["LT_ROOM_NM"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["LT_TM_NM"])+'</span></td> ';
			/*
			if("U0201001" == strSbjtPosiFg){
				html += '        <td><span></span></td> ';
			}else if("U0244002" == strSngjDetmFg){
				if("1" == strTlsnDelPosbYn){
					html += '        <td><span class="red"><a href="javascript:void(0);" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'2\''+');">대학원</a></span></td> ';
				}else{
					html += '        <td><span class="red">대학원</span></td> ';
				}
			}else{
				if("1" == strTlsnDelPosbYn){
					html += '        <td><span class="red"><a href="javascript:void(0);" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'1\''+');">학부</a></span></td> ';
				}else{
					html += '        <td><span class="red">학부</span></td> ';
				}
			}
			*/
			//html += '        <td><span>'+nvl(item["SBJT_CD"])+'</span></td> ';
			
			html += '        <td><span>'+nvl(item["CAPA_CNT"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["RCAPA_CNT"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["PRE_RCAPA_CNT"])+'</span></td> ';
			html += '        <td><span>'+nvl(item["DELAY_FR_DTTM"])+'</span></td> ';
			
			html += '    </tr> ';
		});
		body.html(html);
	}else{
		setEmptyList([$("#tbl_preTakingLesson")]);
	}
	$("#intPreAplyPntSum").val(intPreAplyPntSum.toFixed(1));
}

// 수강신청교과목 
function setTakingLessonMobile(list){	
	var body = $("#tbl_takingLesson");
	body.empty();
	var intAplyPntSum = 0.0;
	if(!isEmptyArray(list)){
		var html = '';
		$.each(list,function(idx,item){
			intAplyPntSum += Number(nvl(item["PNT"]));
			var strOpenLtNo 	= nvl(item["OPEN_LT_NO"]);
			var strClssNo  		= nvl(item["CLSS_NO"]);
			var strTlsnNo  		= nvl(item["TLSN_NO"]);
			var strTlsnDelPosbYn= nvl(item["TLSN_DEL_POSB_YN"]);
			var strSbjtPosiFg  	= nvl(item["SBJT_POSI_FG"]);
			var strSngjDetmFg	= nvl(item["SNGJ_DETM_FG"]);
			var reSugangStr		= nvl(item["TLSN_AG_YN"]);
			var isReSugang  	= ("1" == reSugangStr);
			var isAddSugang  	= ("0" == reSugangStr);
			if(isReSugang){
				reSugangStr = "재수강";
			}else if(isAddSugang){
				reSugangStr = "추가수강";
			}

			/* [shinox][dev][데이터가 없어서 하드코딩] */
			//strSbjtPosiFg = "U02010011";
			//strSngjDetmFg = "U0244002";
			//strTlsnDelPosbYn = "1";
			
			html += '	<li> ';
			var btnSngjDetmReg 			= '';
			var btnShowWonAply 			= '';
			var btnReTakingLessonReg 	= '';
			
			if("U0201001" == strSbjtPosiFg){
			}else if("U0244002" == strSngjDetmFg){
				btnSngjDetmReg = '<button type="button" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'2\''+');">대학원 성적인정</button>';
				btnShowWonAply = '<button type="button" onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">석사신청서 출력</button>';
			}else{
				btnSngjDetmReg = '<button type="button" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'1\''+');">학부 성적인정</button>';
				btnShowWonAply = '<button type="button" onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">석사신청서 출력</button>';
			}
			if(isReSugang || isAddSugang){
				btnReTakingLessonReg = '<button type="button" onclick="reTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\');">'+reSugangStr+'</button>';
			}
			
			html += '<div>';
			html += '	<div>';
			html += '		<p class="tit">'+nvl(item["SBJT_KOR_NM"])+(reSugangStr != ''?'<span class="red">'+reSugangStr+'</span>':'')+'</p>';
			html += '       <span class="blue">수강번호 : '+nvl(item["TLSN_NO"])+'</span> ';		
			html += '       <span class="blue">과목코드 : '+nvl(item["SBJT_CD"])+'</span> ';
			html += '       <span class="blue">'+nvl(item["PNT"])+'학점</span> ';
			html += '       <span class="blue">'+nvl(item["TM"])+'시간</span> ';
			html += '       <span class="blue">'+nvl(item["CLSS_NO"])+'반</span> ';
			html += '       <br/> ';
			html += '       <span>'+nvl(item["LT_TM_NM"])+'</span> ';
			html += '       <span>'+nvl(item["LT_ROOM_NM"])+'</span> ';
			html += '	</div>';
			if("1" == strTlsnDelPosbYn){
			html += '	<div class="nb-buttons">';
			html += '		<div class="nb-btn-delete nb-theme"><button type="button" onclick="deleteTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\''+strTlsnNo+'\''+');">삭제</button></div>';
			html += '	</div>';
			}
			html += '</div>';
			if("1" == strTlsnDelPosbYn){
			html += '<div class="nb-buttons nb-block">';
			if(btnSngjDetmReg != "") html += '	<div class="nb-btn-save">'+btnSngjDetmReg+'</div>';
			if(btnShowWonAply != "") html += '	<div class="nb-btn-save">'+btnShowWonAply+'</div>';
			if(btnReTakingLessonReg != "") html += '	<div class="nb-btn-save">'+btnReTakingLessonReg+'</div>';
			html += '</div>';
			}
			
			/*
			
			
			html += '	<div> ';
			html += '		<p class="tit">'+nvl(item["SBJT_KOR_NM"]);

			if(isReSugang){
				if("1" == strTlsnDelPosbYn){
					html += '        	<span class="red" onclick="reTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\');">재수강</span> ';
				}else{
					html += '        	<span class="red">재수강</span> ';
				}
			}else if(isAddSugang){
				if("1" == strTlsnDelPosbYn){
					html += '        	<span class="red" onclick="reTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\');">추가수강</span> ';
				}else{
					html += '        	<span class="red">추가수강</span> ';
				}
			}
			html += '		</p> ';	
			html += '       <span class="blue">수강번호 : '+nvl(item["TLSN_NO"])+'</span> ';		
			html += '       <span class="blue">과목코드 : '+nvl(item["SBJT_CD"])+'</span> ';
			html += '       <span class="blue">'+nvl(item["PNT"])+'학점</span> ';
			html += '       <span class="blue">'+nvl(item["TM"])+'시간</span> ';
			html += '       <span class="blue">'+nvl(item["CLSS_NO"])+'반</span> ';
			html += '       <br/> ';
			html += '       <span>'+nvl(item["LT_TM_NM"])+'</span> ';
			html += '       <span>'+nvl(item["LT_ROOM_NM"])+'</span> ';
			html += '	</div> ';
			if("1" == strTlsnDelPosbYn){
			html += '	<div class="nb-buttons"> ';
			html += '   	<div class="nb-buttons"> ';
			if("U0201001" == strSbjtPosiFg){
			}else if("U0244002" == strSngjDetmFg){
				if("1" == strTlsnDelPosbYn){
					html += '       	<div class="nb-btn-delete mb5"><button type="button" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'2\''+');">대학원</button></div> ';
					html += '       	<div class="nb-btn-delete mb5"><button type="button"  onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">출력</button></div> ';
				}else{
					html += '       	<div class="nb-btn-delete mb5"><button type="button"  onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">출력</button></div> ';
				}
			}else{
				if("1" == strTlsnDelPosbYn){
					html += '       	<div class="nb-btn-delete mb5"><button type="button" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'1\''+');">학부</button></div> ';
					html += '       	<div class="nb-btn-delete mb5"><button type="button"  onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">출력</button></div> ';
				}else{
					html += '       	<div class="nb-btn-delete mb5"><button type="button"  onclick="showWonAply(\''+strUserNo+'\',\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">출력</button></div> ';
				}
			}
			html += '       	<div class="nb-btn-delete"><button type="button" onclick="deleteTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\''+strTlsnNo+'\''+');">삭제</button></div> ';
			html += '       </div> ';
			html += '	</div> ';
			}
			*/
			html += '   </li> ';
		});
		body.html(html);
	}else{
		setEmptyList([$("#tbl_takingLesson")]);
	}
	$("#intAplyPntSum").val(intAplyPntSum.toFixed(1));
}


// 예비수강신청교과목
function setPreTakingLessonMobile(list){
	var body = $("#tbl_preTakingLesson");
	body.empty();
	var intPreAplyPntSum = 0.0;
	if(!isEmptyArray(list)){
		var html = '';
		$.each(list,function(idx,item){
			intPreAplyPntSum += Number(nvl(item["PNT"]));
			var strOpenLtNo 	= nvl(item["OPEN_LT_NO"]);
			var strClssNo  		= nvl(item["CLSS_NO"]);
			var strTlsnNo  		= nvl(item["TLSN_NO"]);
			var strTlsnDelPosbYn= nvl(item["TLSN_DEL_POSB_YN"]);
			var strTlsnAddPosbYn= nvl(item["TLSN_ADD_POSB_YN"]);
			var strSbjtPosiFg  	= nvl(item["SBJT_POSI_FG"]);
			var strSngjDetmFg	= nvl(item["SNGJ_DETM_FG"]);
			var reSugangStr		= nvl(item["TLSN_AG_YN"]);
			var isReSugang  	= ("1" == reSugangStr);
			var isAddSugang  	= ("0" == reSugangStr);
			if(isReSugang){
				reSugangStr = "재수강";
			}else if(isAddSugang){
				reSugangStr = "추가수강";
			}
			/* [shinox][dev][데이터가 없어서 하드코딩] */
			//strSbjtPosiFg = "U02010011";
			//strSngjDetmFg = "U0244002";
			//strTlsnAddPosbYn = "1";
			//strTlsnDelPosbYn = "1";
			
			html += '	<li> ';

			var btnSngjDetmReg 				= '';
			var btnAddPreTakingLessonReg	= '';
			var btnReTakingLessonReg 		= '';
			
			if("U0201001" == strSbjtPosiFg){
			}else if("U0244002" == strSngjDetmFg){
				btnSngjDetmReg = '<button type="button" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'2\''+');">대학원 성적인정</button>';
			}else{
				btnSngjDetmReg = '<button type="button" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'1\''+');">학부 성적인정</button>';
			}
			if(isReSugang || isAddSugang){
				btnReTakingLessonReg = '<button type="button" onclick="reTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\');">'+reSugangStr+'</button>';
			}
			if("1" == strTlsnAddPosbYn){
				btnAddPreTakingLessonReg = '<button type="button" onclick="addPreTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\''+strTlsnNo+'\''+');">신청</button>';
			}
			
			html += '<div>';
			html += '	<div>';
			html += '		<p class="tit">'+nvl(item["SBJT_KOR_NM"])+(reSugangStr != ''?'<span class="red">'+reSugangStr+'</span>':'')+'</p>';
			html += '       <span class="blue">수강번호 : '+nvl(item["TLSN_NO"])+'</span> ';		
			html += '       <span class="blue">과목코드 : '+nvl(item["SBJT_CD"])+'</span> ';
			html += '       <span class="blue">'+nvl(item["PNT"])+'학점</span> ';
			html += '       <span class="blue">'+nvl(item["TM"])+'시간</span> ';
			html += '       <span class="blue">'+nvl(item["CLSS_NO"])+'반</span> ';
			html += '       <span class="blue">'+nvl(item["MA_LECTURER_KOR_NM"])+'</span> ';
			html += '       <br/> ';
			html += '       <span>'+nvl(item["LT_TM_NM"])+'</span> ';
			html += '       <span>'+nvl(item["LT_ROOM_NM"])+'</span> ';
			html += '       <span class="blue">정원 : '+nvl(item["CAPA_CNT"])+'</span> ';
			html += '       <span class="blue">여석 : '+nvl(item["RCAPA_CNT"])+'</span> ';
			html += '       <span class="blue">예비신청 : '+nvl(item["PRE_RCAPA_CNT"])+'</span> ';			
			html += '       <span class="blue">신청가능시간 : '+nvl(item["DELAY_FR_DTTM"])+'</span> ';
			html += '	</div>';
			if("1" == strTlsnDelPosbYn){
			html += '	<div class="nb-buttons">';
			html += '		<div class="nb-btn-delete nb-theme"><button type="button" onclick="deletePreTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\''+strTlsnNo+'\''+');">삭제</button></div>';
			html += '	</div>';
			}
			html += '</div>';
			if("1" == strTlsnAddPosbYn){
			html += '<div class="nb-buttons nb-block">';
			if(btnAddPreTakingLessonReg != "") html += '	<div class="nb-btn-save">'+btnAddPreTakingLessonReg+'</div>';
			if(btnSngjDetmReg != "") html += '	<div class="nb-btn-save">'+btnSngjDetmReg+'</div>';
			if(btnReTakingLessonReg != "") html += '	<div class="nb-btn-save">'+btnReTakingLessonReg+'</div>';
			html += '</div>';
			}
			
			/*
			html += '	<div> ';
			html += '		<p class="tit">'+nvl(item["SBJT_KOR_NM"]);
			if("1" == strTlsnDelPosbYn){
				html += '        	<a href="javascript:void(0);" onclick="reTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\''+');">'+reSugangStr+'</a> ';
			}else{
				html += '        	<span>'+reSugangStr+'</span> ';
			}
			html += '		</p> ';	
			html += '       <span class="blue">수강번호 : '+nvl(item["TLSN_NO"])+'</span> ';		
			html += '       <span class="blue">과목코드 : '+nvl(item["SBJT_CD"])+'</span> ';
			html += '       <span class="blue">'+nvl(item["PNT"])+'학점</span> ';
			html += '       <span class="blue">'+nvl(item["TM"])+'시간</span> ';
			html += '       <span class="blue">'+nvl(item["CLSS_NO"])+'반</span> ';
			if("U0201001" == strSbjtPosiFg){
			}else if("U0244002" == strSngjDetmFg){
				if("1" == strTlsnDelPosbYn){
					html += '        <span class="blue"><a href="javascript:void(0);" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'2\''+');">대학원</a></span> ';
				}else{
					html += '        <span class="blue">대학원</span> ';
				}
			}else{
				if("1" == strTlsnDelPosbYn){
					html += '        <span class="blue"><a href="javascript:void(0);" onclick="saveSngjDetmReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\'1\''+');">학부</a></span> ';
				}else{
					html += '        <span class="blue">학부</span> ';
				}
			}
			html += '       <br/> ';
			html += '       <span>'+nvl(item["LT_TM_NM"])+'</span> ';
			html += '       <span>'+nvl(item["LT_ROOM_NM"])+'</span> ';
			html += '	</div> ';
			html += '	<div class="nb-buttons"> ';
			html += '   	<div class="nb-buttons"> ';
			if("1" == strTlsnAddPosbYn){
				html += '       	<div class="nb-btn-delete"><button type="button" onclick="addPreTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\''+strTlsnNo+'\');">신청</button></div> ';
			}
			if("1" == strTlsnDelPosbYn){
				html += '       	<div class="nb-btn-delete"><button type="button" onclick="deletePreTakingLessonReg(\''+strOpenLtNo+'\',\''+strClssNo+'\',\''+strTlsnNo+'\');">삭제</button></div> ';
			}
			html += '       </div> ';
			html += '	</div> ';
			*/
			
			html += '   </li> ';
		});
		body.html(html);
	}else{
		setEmptyList([$("#tbl_preTakingLesson")]);
	}
	$("#intPreAplyPntSum").val(intPreAplyPntSum.toFixed(1));
}

/* ======================================================================
Function :  학부(과)전공 셋팅
Param 	 :  없음
Return   :  없음
====================================================================== */
function setSustMjCd(mjCd){
    var f = document.application;
	var curi = f.strSubmattFg[f.strSubmattFg.selectedIndex].value;// 선택된 교과구분

	deleteSelectList('strSustMjCd');
	
	var tmpSub;
	
	if( curi == 'U0209001') {  // 전공과목(학부-DS03)
		f.strSustMjCd.options[0]       = new Option('<전공선택>');
		f.strSustMjCd.options[0].value = '';
		
		try{
			tmpSub = mjCdMap['DS03'];
	    } catch(err) {
	    	arrHakbuMj.sort(function(a, b){ return a[1] - b[1]; });
	        for(var i = 0; i < arrHakbuMj.length; i++) {
	            try{
			        f.strSustMjCd.options[i + 1]       = new Option( arrHakbuMj[i][1]);
					f.strSustMjCd.options[i + 1].value = arrHakbuMj[i][0];
				}catch(err2){
				   alert(err2);
				}
	        }
	        tmpSub = null;
	    }
	} else if( curi == 'U0209002') {  // 교양과목
		f.strSustMjCd.options[0]       = new Option('<선택없음>');
	} else if( curi == 'U0209003') {  // 기초과목(학부-DS03)
		f.strSustMjCd.options[0]       = new Option('<학부선택>');
		f.strSustMjCd.options[0].value = '';
		
		try{
			tmpSub = sustCdMap['DS03'];
	    } catch(err) {	    
	        for(var i = 0; i < arrHakbu.length; i++) {
	            try{
			        f.strSustMjCd.options[i + 1]       = new Option( arrHakbu[i][1]);
					f.strSustMjCd.options[i + 1].value = arrHakbu[i][0];
				}catch(err2){
				   alert(err2);
				}
	        }
	        tmpSub = null;
	    
	    }		
	} else if( curi == 'U0209005') {  // 영역별교양
		f.strSustMjCd.options[0]       = new Option('<영역선택>');
		f.strSustMjCd.options[0].value = ''; 
		
		try{
			tmpSub = submattFldFgMap['SUBMATT_FLD_FG'];
	    } catch(err) {
	        for(var i = 0; i < 4; i++) {
	            try{
			        f.strSustMjCd.options[i + 1]       = new Option( arrFld[i][1]);
					f.strSustMjCd.options[i + 1].value = arrFld[i][0];
				}catch(err2){
				   alert(err2);
				}
	        }
	        tmpSub = null;	        
	    }
	} else if( curi == 'U0209008') {  // 일반대학원-DS04001
		f.strSustMjCd.options[0]       = new Option('<전공선택>');
		f.strSustMjCd.options[0].value = '';
		
		try{
			tmpSub = mjCdMap['DS04001'];
	    } catch(err) {
	        for(var i = 0; i < 127; i++) {
	            try{
			        f.strSustMjCd.options[i + 1]       = new Option( arrWonMj[i][1]);
					f.strSustMjCd.options[i + 1].value = arrWonMj[i][0];
				}catch(err2){
				   alert(err2);
				}
	        }
	        tmpSub = null;	        
	    }
	} else if( curi == 'U0209015') {  // 정보통신전문대학원-DS04002 
		f.strSustMjCd.options[0]       = new Option('<전공선택>');
		f.strSustMjCd.options[0].value = '';
		
		try{
			tmpSub = mjCdMap['DS04002'];
	    } catch(err) {
	        for(var i = 0; i < 1; i++) {
	            try{
			        f.strSustMjCd.options[i + 1]       = new Option( arrSWonJungboMj[i][1]);
					f.strSustMjCd.options[i + 1].value = arrSWonJungboMj[i][0];
				}catch(err2){
				   alert(err2);
				}
	        }
	        tmpSub = null;	        
	    }	 
	}
	else {  //기타
		f.strSustMjCd.options[0]       = new Option('<선택없음>');
	}
	
	if ( tmpSub == null ) {
	} else {
		tmpSub.sort(function(a, b){ return a[1] < b[1] ? -1 : a[1] > b[1] ? 1 : 0; });
		for(var i=0; i < tmpSub.length; i++) {
			f.strSustMjCd.options[i+1]       = new Option(tmpSub[i][1]);
			f.strSustMjCd.options[i+1].value = tmpSub[i][0];
	
	        if(mjCd == tmpSub[i][0]) f.strSustMjCd.options[i+1].selected = true;
		}
	}
}

function saveTakingLessonReg(argOpenLtNo, argClssNo){
    if(sugangAccepting){
		dialog.alert("현재 수강신청 처리가 진행중입니다.\n\n잠시만 기다려주세요");
		return false;
	}
	
    var f = document.application;
	f.strOpenLtNo.value  = argOpenLtNo;
	f.strClssNo.value    = argClssNo;	
    
    dialog.security2("",function(data){
    	var securityNumber;
    	if(!dataNullCheck(data) && nvl(data["securityNumber"],"") != "") securityNumber = nvl(data.securityNumber,"");
    	
    	if(securityNumber != ""){
    		preprocess(true);    		
    	    NetFunnel_Action( {service_id:"service_1",action_id:"insert",popup_target:top,user_data:strUserNo}, {
    	    	success:function(){
    	    	    var param = $("form[name=application]").formSerializeObject();
    	    	    param.securityNumber = securityNumber;
    	    		commonAjax(contextPath+"/uni/tlsn/aply/saveOpenLectureReg.ajax", param, function(data){
    	    			if(!dataNullCheck(data["RESULT_MESG"])){
    	    				dialog.alert(data["RESULT_MESG"],function(){
    	       					if(Number(nvl(data["MESSAGE_CODE"])) > -1) findTakingLessonInfo();
    	    				});
    	    				NetFunnel_Complete();
    	    				return;
    	    			}
	    				NetFunnel_Complete();
    	    		}, "json", true);
    	    		preprocess(false);
    	    	},
    	    	stop:function(ev,ret){
    	    		stopNetFunnel(ev,ret);
    	    	}
    	    });    		
    	}
    });
}

function saveTlsnNo(){
    if(sugangAccepting){
		dialog.alert("현재 수강신청 처리가 진행중입니다.\n\n잠시만 기다려주세요");
		return false;
	}
    
    var f = document.application;
	if( document.application.strSbjt.value.length != 4){
		dialog.alert("수강번호를 입력하시기 바랍니다.",function(){
            f.strSbjt.value = '';
            f.strSbjt.focus();
        }); return;
	}
	
    var f2 = document.tlsnForm;
    f2.strTlsnNo.value = f.strSbjt.value;       

    /**
    *** dialog.security 보안문자 4자리 입력팝업
    *** dialog.security2 보안이미지 6자리 입력팝업
    **/
    dialog.security2("",function(data){
    	var securityNumber;
    	if(!dataNullCheck(data) && nvl(data["securityNumber"],"") != "") securityNumber = nvl(data.securityNumber,"");
    	
    	if(securityNumber != ""){
    		preprocess(true);
			var param = $("form[name=tlsnForm]").formSerializeObject();
			param.securityNumber = securityNumber;
			commonAjax(contextPath+"/saveTlsnNoAply.ajax", param, function(data){
				if(!dataNullCheck(data["RESULT_MESG"])){
					dialog.alert(data["RESULT_MESG"],function(){
						if(Number(nvl(data["MESSAGE_CODE"])) > -1) findTakingLessonInfo();
					});
					return;
				}
			}, "json", true);
			preprocess(false);
    	}
    });
}

/* ======================================================================
Function :  수강신청 정보 삭제
Param 	 :  없음
Return   :  없음
====================================================================== */
function deleteTakingLessonReg(argOpenLtNo, argClssNo, argTlsnNo){
    var f = document.cancelApplication;
    dialog.confirm("선택한 과목을 삭제하시겠습니까?",function(flag){
    	if(!flag) return;
    	
		f.strOpenLtNo.value = argOpenLtNo;
		f.strClssNo.value = argClssNo;
		f.strTlsnNo.value = argTlsnNo;

		var param = $("form[name=cancelApplication]").formSerializeObject();
		commonAjax(contextPath+"/deleteOpenLectureReg.ajax", param, function(data){
			if(!dataNullCheck(data["RESULT_MESG"])){
				dialog.alert(data["RESULT_MESG"],function(){
					if(Number(nvl(data["MESSAGE_CODE"])) > -1) findTakingLessonInfo();
				});
				return;
			}
       	}, "json", true);
    });
    return;
}

/* ======================================================================
Function :  모의수강신청 정보  수강신청
Param 	 :  argOpenLtNo, argClssNo, argTlsnNo
Return   :  없음
====================================================================== */
function addPreTakingLessonReg(argOpenLtNo, argClssNo, argTlsnNo){
    dialog.security2("",function(data){
    	var securityNumber;
    	if(!dataNullCheck(data) && nvl(data["securityNumber"],"") != "") securityNumber = nvl(data.securityNumber,"");
    	
    	if(securityNumber != ""){    		
    	    var f = document.cancelApplication;
    		f.strOpenLtNo.value = argOpenLtNo;
    		f.strClssNo.value = argClssNo;
    		f.strTlsnNo.value = argTlsnNo;
    		
    		preprocess(true);
    		NetFunnel_Action( {service_id:"service_1",action_id:"insert",popup_target:top,user_data:strUserNo}, {
            	success:function(){
            	    var param = $("form[name=cancelApplication]").formSerializeObject();
            		param.securityNumber = securityNumber;
            		commonAjax(contextPath+"/uni/tlsn/aply/addPreOpenLectureReg.ajax", param, function(data){
            			if(!dataNullCheck(data["RESULT_MESG"])){
            				dialog.alert(data["RESULT_MESG"],function(){
            					if(Number(nvl(data["MESSAGE_CODE"])) > -1) findTakingLessonInfo();
            				});
            				NetFunnel_Complete();
            				return;
            			}
            			NetFunnel_Complete();
            		}, "json", true);
            		preprocess(false);
            	},
            	stop:function(ev,ret){
            		stopNetFunnel(ev,ret);
            	}
            });
    		
    	}
    });
}

/* ======================================================================
Function :  모의수강신청 정보 삭제
Param 	 :  argOpenLtNo, argClssNo, argTlsnNo
Return   :  없음
====================================================================== */
function deletePreTakingLessonReg(argOpenLtNo, argClssNo, argTlsnNo){
    var f = document.cancelApplication;
    dialog.confirm("선택한 과목을 삭제하시겠습니까?",function(flag){
    	if(!flag) return;
    	
		f.strOpenLtNo.value = argOpenLtNo;
		f.strClssNo.value = argClssNo;
		f.strTlsnNo.value = argTlsnNo;

	    var param = $("form[name=cancelApplication]").formSerializeObject();
		commonAjax(contextPath+"/uni/tlsn/aply/deletePreOpenLectureReg.ajax", param, function(data){
			sugangAccepting = false;
			if(!dataNullCheck(data["RESULT_MESG"])){
				dialog.alert(data["RESULT_MESG"],function(){
					if(Number(nvl(data["MESSAGE_CODE"])) > -1) findTakingLessonInfo();
				});
				return;
			}
		}, "json", true);
    });
}

/* ======================================================================
Function :  saveSngjDetmReg()
Param 	 :  argOpenLtNo, argClssNo, argFg
Return   :  없음
====================================================================== */
function saveSngjDetmReg( argOpenLtNo, argClssNo, argFg){
    var f = document.sngjDetmForm;
    var strMsg = "";
	if(argFg == "1"){
		strMsg = "대학원인정과목으로 선택하시겠습니까?";
	}else if(argFg == "2"){
		strMsg = "학부인정과목으로 선택하시겠습니까?";
	}

    dialog.confirm(strMsg,function(flag){
    	if(!flag) return;
    	
		f.strOpenLtNo.value = argOpenLtNo;
		f.strClssNo.value = argClssNo;
		f.strSngjDetmFg.value = argFg;

	    var param = $("form[name=sngjDetmForm]").formSerializeObject();
		commonAjax(contextPath+"/uni/tlsn/aply/saveSngjDetmReg.ajax", param, function(data){
			sugangAccepting = false;
			if(!dataNullCheck(data["RESULT_MESG"])){
				dialog.alert(data["RESULT_MESG"],function(){
					if(Number(nvl(data["MESSAGE_CODE"])) > -1) findTakingLessonInfo();
				});
				return;
			}
		}, "json", true);
    });
}

/* ======================================================================
Function :  reTakingLessonReg()
Param 	 :  argOpenLtNo, argClssNo
Return   :  없음
====================================================================== */
function reTakingLessonReg( argOpenLtNo, argClssNo){
	openPopup({
		popId : "reTakingLessonRegPopup",
		size : "lg",
		url : contextPath+"/aply/reTakingLesson.action",
		params : {strOpenLtNo:argOpenLtNo,strClssNo:argClssNo},
		returnPopup : function(result){
			if(result && result["resultFg"] == "success") findTakingLessonInfo();
		}
	});
}

/* ======================================================================
Function :  showWonAply()
Param 	 :  argOpenLtNo, argClssNo 
Return   :  없음
====================================================================== */
function showWonAply( argStdNo, argOpenLtNo, argClssNo ){
	openPopup({
		popId : "report",
		title : "석사신청서",
		url : "/uni/cour/tlsn/sugangWonAply.mrd",
		params : {strStdNo:argStdNo,strOpenLtNo:argOpenLtNo,strClssNo:argClssNo}
	});
}


/* ======================================================================
Function :  getImage()
Param 	 :  없음
Return   :  없음
====================================================================== */
function getImage(){ 
	$("#answer").val(""); 
	var rand = Math.random(); 
	var url = contextPath+'/com/cmmn/user/captchaImg.action?rand='+rand; 	
	$("#captchaImg").attr("src", url);
}

/* ======================================================================
Function :  audioPlayer()
Param 	 :  objUrl 
Return   :  없음
====================================================================== */
function audioPlayer(objUrl){ 
	$("#ccaudio").html('<bgsound src="' +objUrl +'">'); 
}

$(document).ready(function(){
    $("#tab_title > dd").on("click",function(){
        $("#tab_title > dd").removeClass("on");
        $(this).addClass("on");

        $(".VIEW_TAB_0").hide();
        $(".VIEW_TAB_1").hide();
        $((".VIEW_TAB_"+$(this).index())).show();
        //$(".VIEW_TOP").css("padding-top","35px");
        //$(".VIEW_TOP:visible").eq(0).css("padding-top","0px");
        //$("#tab_contents > li").removeClass("on");
        //$("#tab_contents > li").eq($(this).index()).addClass("on");
    });
    $(".VIEW_TAB_0").show();
    
    $("#btn_search").on("click",findOpenLecture);
    $("#btnComment").on("click",function(){
    	openPopup({
    		popId : "commentPopup",
    		size : isMobile?"md":"lg",
    		url : contextPath+"/aply/sugang_list_comment.htm"
    	});
    });
    $("#btn_reg").on("click",function(){
		saveTlsnNo();
    });
    
    $("#reload").on("click",function(){
		getImage();
	});
    
	$("#soundOn").on("click",function(){
		var rand = Math.random(); 
		var uAgent = navigator.userAgent; 
		var soundUrl = contextPath+'/com/cmmn/user/captchaAudio.action?rand='+rand; 
		if(uAgent.indexOf('Trident')>-1 || uAgent.indexOf('MISE')>-1){ 
		   /*IE 경우 */ audioPlayer(soundUrl); 
		}else if(!!document.createElement('audio').canPlayType){ 
			/*Chrome 경우 */ 
			try { 
				new Audio(soundUrl).play(); 
			}catch (e) { 
				audioPlayer(soundUrl); 
			} 
		}else{ 
			window.open(soundUrl,'','width=1,height=1'); 
		}
	});
	
    
    $("select[name=strSubmattFg]").on("change",setSustMjCd);
    
	$("input[name=strSbjt]").on({
		focus : strSbjt_OnFocus,
		keypress : strSbjtType_OnKeyPress		
	});
	
	$("#menu").find("#aply").addClass("on");

    setEmptyList($("#tbl_lecture,#tbl_takingLesson,#tbl_preTakingLesson"));
    
    load();
});