/*!
 * Copyright(c) 2014. M2SOFT Co., Ltd. All source codes cannot be copied without permission.
 * 
 * @version: 6.4.3.377
 * @bulid date: 2016/10/07 04:03
 */
var m2soft=m2soft||{};m2soft.ns=function(e){var d=e.split("."),c=m2soft;if(d[0]==="m2soft"){d=d.slice(1)}for(var b=0,a=d.length;b<a;b++){if(typeof c[d[b]]==="undefined"){c[d[b]]={}}c=c[d[b]]}return c};m2soft.ns("m2soft.crownix.Constant");m2soft.crownix.Constant={INFO_TALK_PROTOCOL_VERSION:"1.0",SERVICE_INSERT_HANDLER:1100,SERVICE_EXPORT_HANDLER:1300,VIEWER_Z_INDEX:2147483545,VIEWER_OVERLAY_Z_INDEX:2147483544,WINDOW_Z_INDEX:2147483547,WINDOW_OVERLAY_Z_INDEX:2147483546,};m2soft.ns("m2soft.crownix.Resource");m2soft.crownix.Resource.r={close_overlay:{ko:"닫기",ja:"閉じる",en:"Close"},first_page:{ko:"첫 페이지로 이동",ja:"最初のページに移動",en:"Move to First Page"},pre_page:{ko:"앞 페이지로 이동",ja:"前のページに移動",en:"Move to Previous Page"},next_page:{ko:"뒷 페이지로 이동",ja:"次のページに移動",en:"Move to Next page"},last_page:{ko:"마지막 페이지로 이동",ja:"最後のページに移動",en:"Move to Last page"},move_page:{ko:"페이지 이동",ja:"ページの移動",en:"Go to Page"},prev_doc:{ko:"이전 문서",ja:"前のレポート",en:"Previous Report"},next_doc:{ko:"이후 문서",ja:"次のレポート",en:"Next Report"},zoom_in:{ko:"확대",ja:"拡大",en:"Zoom In"},zoom_out:{ko:"축소",ja:"縮小",en:"Zoom Out"},ratio:{ko:"비율",ja:"比率",en:"Ratio"},fit_width:{ko:"가로 맞춤",ja:"水平方向の配置",en:"Horizontal Alignment"},fit_height:{ko:"세로 맞춤",ja:"垂直方向の配置",en:"Vertical Alignment"},save_pdf:{ko:"PDF 파일로 저장",ja:"PDFファイルとして保存",en:"Save as PDF File"},save_word:{ko:"Microsoft Word 파일로 저장",ja:"Microsoft Wordファイルとして保存",en:"Save as Microsoft Word File"},save_excel:{ko:"Microsoft Excel 파일로 저장",ja:"Microsoft Excelファイルとして保存",en:"Save as Microsoft Excel File"},save_ppt:{ko:"Microsoft Powerpoint 파일로 저장",ja:"Microsoft Powerpointファイルとして保存",en:"Save as Microsoft PowerPoint File"},save_hwp:{ko:"HWP 파일로 저장",ja:"HWPファイルとして保存",en:"Save as HWP File"},save_txt:{ko:"Text 파일로 저장",ja:"Textファイルとして保存",en:"Save as Text File"},print:{ko:"인쇄",ja:"印刷",en:"Print"},print_pdf:{ko:"PDF 파일로 변환하여 인쇄",ja:"PDFファイルに変換して印刷",en:"Convert to PDF file and Print"},cancel_report:{ko:"중지",ja:"中止",en:"Stop"},storage_report:{ko:"보고서",ja:"レポート",en:"Report"},parsing_error_mml:{ko:"읽을 수 없는 포맷입니다.",ja:"読み取り不可能なファイルのフォーマットです。",en:"The file format is not readable."},storage_formdata:{ko:"폼 데이터",ja:"フォーム\nデータ",en:"Form Data"},export_file:{ko:"파일을 생성 중입니다.",ja:"ファイルを作成中です。",en:"Creating file."},print_progress:{ko:"인쇄 준비 중입니다.",ja:"印刷準備中です。",en:"Preparing to print."},print_pdf_export:{ko:"인쇄하기 위해 PDF 파일로 변환 중입니다.",ja:"印刷するために PDFファイルに変換中です。",en:"Converting to PDF file to print."},print_printviewer_title:{ko:"인쇄 미리 보기",ja:"印刷プレビュー",en:"Print Preview"},print_pdfviewer_title:{ko:"PDF 인쇄 미리 보기",ja:"PDF印刷プレビュー",en:"PDF Print Preview"},print_submit_preview:{ko:"제출 전 미리보기 생성중입니다.",ja:"印刷するために PDFファイルに変換中です。",en:"Converting to PDF file to print."},submit_preview_title:{ko:"미리 보기",ja:"プレビュー",en:"Preview"},insert_page_number:{ko:"페이지 번호를 입력하십시오.",ja:"ページ番号を入力してください。",en:"Please enter the page number."},submit_formfield:{ko:"제출 중입니다.",ja:"提出しています。",en:"Submitting."},submit_formfield_insert_ok:{ko:"제출을 완료했습니다.",ja:"提出を完了しました。",en:"Submission complete."},submit_formfield_insert_fail:{ko:"제출에 실패했습니다.",ja:"提出に失敗しました。",en:"Submission failed."},submit_fail_not_filled_required_form:{ko:"필수 항목을 입력하십시오.",ja:"必須項目を入力してください。",en:"Please fill in the required fields."},submit_button_text:{ko:"제출",ja:"提出",en:"Submit"},sign_window_title:{ko:"서명",ja:"署名",en:"Signature"},ok_button_text:{ko:"확인",ja:"OK",en:"OK"},cancel_button_text:{ko:"취소",ja:"キャンセル",en:"Cancel"},refresh_button_text:{ko:"초기화",ja:"初期化",en:"Reset"},pen_size:{ko:"두께",ja:"太さ",en:"Thickness"},pen_transparency:{ko:"투명도",ja:"透明度",en:"Transparency"},color:{ko:"색",ja:"色",en:"Color"},inquery:{ko:"조회 툴바",ja:"",en:""},report_list:{ko:"보고서 목록",ja:"レポートリスト",en:"Report List"},report_name:{ko:"이름",ja:"名前",en:"Name"},data_size:{ko:"용량",ja:"サイズ",en:"Size"},open:{ko:"열기",ja:"開く",en:"Open"},remove:{ko:"삭제",ja:"削除",en:"Delete"},saved_report_name:{ko:"저장할 보고서 명",ja:"保存するレポート名",en:"Save As.."},include_image_chart_barcode:{ko:"이미지/바코드 포함 저장",ja:"イメージ、バーコードを含む",en:"With Image and Barcode."},save:{ko:"저장",ja:"保存",en:"Save"},formdata_list:{ko:"폼 데이터 목록",ja:"フォームデータリスト",en:"Form Data List"},formdata_name:{ko:"이름",ja:"名前",en:"Name"},apply_data:{ko:"적용",ja:"インポート",en:"Import"},saved_formdata_name:{ko:"폼 데이터 명",ja:"フォームデータ名",en:"Export As.."},check_validation:{ko:"유효성 검사",ja:"検証",en:"Validataion"},extract_data:{ko:"저장",ja:"エクスポート",en:"Export"},wrong_page_number:{ko:"잘못된 페이지 번호입니다.",ja:"ページ番号が正しくありません。",en:"The page number is incorrect."},page_not_exist:{ko:"존재하지 않는 페이지입니다.",ja:"存在しないページです。",en:"The page does not exist."},page_not_create:{ko:"생성되지 않은 페이지입니다.",ja:"作成されていないページです。",en:"This page is not created."},execute_error:{ko:"문서를 실행할 수 없습니다.",ja:"レポートを実行できません。",en:"The report cannot be run."},server_connect_error:{ko:"서버와 연결할 수 없습니다.",ja:"サーバーと接続できません。",en:"Cannot connect to server."},request_server_error:{ko:"서버 오류",ja:"サーバーエラー",en:"Server Error"},request_abort_error:{ko:"요청이 중지되었습니다.",ja:"要求が停止されました。",en:"Request has been cancelled."},request_timeout_error:{ko:"네트워크 오류 (Timeout)",ja:"ネットワークエラー (Timeout)",en:"Network Error (Timeout)"},cross_origin_ie9_error:{ko:"다른 도메인의 원본을 접근할 수 없습니다. <br><br> IE9 사용자의 경우 <br> 인터넷옵션 > 보안설정 > 도메인 간의 데이터 원본 액세스 를 사용으로 설정하시기 바랍니다.",ja:"違うドメインへアクセスできません。<br><br>IE9をご利用の場合は<br>’インタネットオプション’<br>＞’セキュリティ’<br>＞’レベルのカスタマイズ’<br>＞’ドメイン間でのデータソースの<br>アクセス’<br>を有効に設定してください。",en:'Access Denied<br>The cross-origin request is <br>prohibited.<br><br>If you are using IE9, <br>go to Tools<br>->Internet Options<br>->Security tab, click on "Custom Level" button. <br>Find the Miscellaneous <br>-> Access data sources across <br>domains setting and select <br>"Enable" option.'},save_error:{ko:"파일 저장에 실패했습니다.",ja:"ファイルの保存に失敗しました。",en:"Failed to save file."},save_connect_error:{ko:"파일 저장에 실패했습니다. 서버 연결 상태를 확인하십시오.",ja:"ファイルの保存に失敗しました。サーバーの接続状態を確認してください。",en:"Failed to save file. Please check the server connection."},save_server_error:{ko:"서버에서 오류가 발생하여 파일 저장에 실패했습니다.",ja:"サーバーでエラーが発生し、ファイルの保存に失敗しました。",en:"Failed to save file due to server error."},save_timeout_error:{ko:"타임 아웃이 발생하여 파일 저장에 실패했습니다.",ja:"タイムアウトが発生し、ファイルの保存に失敗しました。",en:"Failed to save file due to timeout."},print_pdf_error:{ko:"PDF 파일 변환에 실패했습니다.",ja:"PDF ファイル変換に失敗しました。",en:"PDF file conversion failed."},print_pdf_connect_error:{ko:"PDF 파일 변환에 실패했습니다. 서버 연결 상태를 확인하십시오.",ja:"PDFファイル変換に失敗しました。サーバーの接続状態を確認してください。",en:"PDF file conversion failed. Please check the server connection."},print_pdf_server_error:{ko:"서버에서 오류가 발생하여 PDF 파일 변환에 실패했습니다.",ja:"サーバーでエラーが発生し、PDFファイル変換に失敗しました。",en:"PDF file conversion failed due to server error."},print_pdf_timeout_error:{ko:"타임 아웃이 발생하여 PDF 파일 변환에 실패했습니다.",ja:"タイムアウトが発生し、PDFファイル変換に失敗しました。",en:"PDF file conversion failed due to timeout."},print_pdf_error:{ko:"PDF 파일 변환에 실패했습니다.",ja:"PDFファイル変換に失敗しました。",en:"PDF file conversion failed."},unsupported_canvas_error:{ko:"뷰어를 실행할 수 없습니다. 캔버스를 지원하지 않는 브라우저입니다.",ja:"ビューアを実行できません。キャンバスをサポートしていないブラウザです。",en:"The viewer cannot be run. This browser does not support the canvas tag."},download_duplicate_error:{ko:"다른 파일을 다운로드 중입니다. 다운로드 완료 후에 다시 시도 하십시오",ja:"他のファイルをダウンロード中です。ダウンロード完了後にもう一度行ってください。",en:"File download in progress. Please try again after download is complete."},image_file_format_error:{ko:"지정한 파일을 삽입할 수 없습니다. 그림 필드에는 이미지 파일을 삽입해야 합니다.",ja:"指定したファイルを挿入できません。イメージのフィールドにはイメージファイルを挿入しなければなりません。",en:"The specified file cannot be inserted. You must insert an image file in an image field."},input_text_validate_error:{ko:"입력한 문장에서 오류가 발생했습니다. 유효한 형식으로 입력하십시오.",ja:"入力した構文でエラーが発生しました。有効な形式に入力してください。",en:"There is an error in the sentence you entered. Please enter a valid sentence."},form_not_submit_print_error:{ko:"보고서를 인쇄할 수 없습니다. 먼저, '제출'을 실행하십시오.",ja:"レポートを印刷できません。まず、'提出'を実行してください。",en:"The report cannot be printed. Run the 'Submit' first."},form_not_submit_save_error:{ko:"보고서를 저장할 수 없습니다. 먼저, '제출'을 실행하십시오.",ja:"レポートを保存できません。まず、'提出'を実行してください。",en:"The report cannot be saved. Run the 'Submit' first."},form_duplicated_id_error:{ko:"중복된 폼필드 ID가 존재합니다.",ja:"重複したフォー ムフィー ルドIDが存在します。",en:"There is a duplicate form field ID."},form_submit_info_leak_error:{ko:"입력된 폼필드 데이터를 서버로 전송하기 위한 정보가 부족합니다. 데이터 전송에 필요한 정보가 올바르게 지정되어 있는지 확인하십시오.",ja:"入力されたフォームフィールドデータをサーバーに送信するための情報が不足です。データ送信に必要な情報が正しく指定されているかどうかを確認してください。",en:"Information for sending the entered form field data to the server is insufficient. Please check if the required information for data transmission is correctly specified."},form_submit_not_found_form:{ko:"제출할 수 있는 폼이 없습니다.",ja:"提出できるフォームがありません。",en:"There is no form that can be submitted."},unsupported_note_error:{ko:"노트 기능을 실행할 수 없습니다. SVG를 지원하지 않는 브라우저입니다.",ja:"手書きノート機能が実行できません。SVGをサポートしていないブラウザです。",en:"The note function cannot be run. This browser does not support the SVG."},insert_inquery_condition:{ko:"검색할 조건을 입력하십시오 (총 %d건)",ja:"検索条件を入力してください。（総%d件）",en:"Please enter the values for searching.(Total %d)"},inquery_formfield_reset:{ko:"조회를 실행하면 폼 필드의 값이 모두 삭제됩니다. 계속하시겠습니까?",ja:"検索するとフォームフィールドの内容がすべて削除されます。続けますか？",en:"When you run Lookup, the entire contents of the form fields will be deleted. Continue?"},inquery_note_reset:{ko:"조회 기능을 실행하면 노트 내용이 모두 삭제됩니다. 계속하시겠습니까?",ja:"照会機能を実行するとノートの内容がすべて削除されます。続けますか？",en:"When you run Lookup, the entire content of the note will be deleted. Continue?"},inquery_calendar_format_error:{ko:"날짜 또는 시간 값이 적절하지 않습니다.",ja:"日付や時刻の値が無効です。",en:"The date or time value is invalid."},image_export_disabled_before_done:{ko:"보고서를 작성 중입니다. 잠시만 기다려 주십시오",ja:"レポートを作成中です。しばらくお待ちください。",en:"Creating a report. Please wait..."},form_allowed_only_one:{ko:"모든 보고서의 폼 ID가 동일해야 합니다.",ja:"すべてのレポートのフォームIDは同一しなければなりません。",en:"Each form ID of all reports must be same."},unsupported_localStorage_error:{ko:"지원하지 않는 브라우저입니다.",ja:"サポートしていないブラウザです。",en:"This browser does not support."},unsupported_format:{ko:"지정한 파일 포맷은 지원하지 않습니다.",ja:"指定したファイルのフォーマットはサポートされていません。",en:"The specified file format is not supported."},unsupported_feature_localStorage:{ko:"지원하지 않는 기능입니다.",ja:"サポートしていない機能です。",en:"This feature is not supported."},unsupported_feature_without_formedit_mode:{ko:"폼 편집 모드에서만 사용할 수 있습니다.",ja:"フォーム編集モードで使用してください。",en:"Only available in Form Edit Mode."},missing_input_mml_name:{ko:"이름을 입력하십시오.",ja:"名前を入力してください。",en:"Please enter the Name"},missing_input_formdata_name:{ko:"이름을 입력하십시오.",ja:"名前を入力してください。",en:"Please enter the Name"},data_save_error:{ko:"파일 저장에 실패했습니다.",ja:"ファイルの保存に失敗しました。",en:"Failed to save the file."},data_load_error:{ko:"데이터를 가져오는데에 실패했습니다.",ja:"データの読み取りに失敗しました。",en:"Failed to load the data."},storage_formfield_import:{ko:"입력한 폼필드 데이터가 모두 삭제됩니다.<br>계속하시겠습니까?",ja:"入力されたフォームフィールドデータがすべて削除されます。<br>続けますか？",en:"All the entered form field data will be deleted.<br>Continue?"},storage_duplicated_id_confirm:{ko:"이미 존재하는 이름입니다.<br>덮어쓰겠습니까?",ja:"既に同じ名前が存在します。<br>上書きしますか？",en:"This name already exists.<br> Overwrite?"},export_duplicate_error:{ko:"이미 변환된 문서입니다.",ja:"既に保存されたレポートです。",en:"The report has already been converted."},confirm_page_out:{ko:"저장되지 않은 변경 내용이 있습니다.",ja:"変更が保存されていません。",en:"There are changes that have not been saved."},confirm_hyperlink_move:{ko:"하이퍼링크 연결 대상으로 이동하시겠습니까?",ja:"ハイパーリンクの接続対象に移動しますか？",en:"Would you like to go to for hyperlink?"},formfield_event_error:{ko:"폼 필드 스크립트 실행 오류",ja:"フォームフィールドスクリプト実行エラー",en:"Form Field Script running error"},formfield_event_disable_before_done:{ko:"보고서를 작성 중입니다. 잠시만 기다려 주십시오",ja:"レポートを作成中です。しばらくお待ちください。",en:"Creating a report. Please wait..."},developer_console_warnning:{ko:"이 기능은 개발자용으로 브라우저에서 제공되는 내용입니다. 개발자 도구에서는 Crownix Viewer의 기능을 사용할 수 없으며, 문서를 수정하면 변조된 문서로 취급됩니다.",ja:"これは開発者向けのブラウザ機能です。デベロッパーツールでのCrownix Viewerの機能は使えません。また、レポートの修正は偽造されたレポートとして扱います。",en:"This is a browser feature intended for developers. In Developer tools, you cannot use the Crownix Viewer’s features. And then, if you modify this report, it will be considered a forged report."},hyperlink_full_stack_warning:{ko:"더 이상 하이퍼링크 연결 대상으로 이동할 수 없습니다.",ja:"ハイパーリンクの接続対象にこれ以上移動できません。",en:"No more the hyperlink connection can be opened."},drilldown_not_allowed:{ko:"드릴다운 기능을 사용할 수 없습니다.",ja:"ドリルダウン機能を使用することができません。",en:"The Drill-Down feature cannot be used."},no_data_message:{ko:"데이터를 찾을 수 없습니다.",ja:"データが見つかりません。",en:"Unable to find data."},submit_confirm_message:{ko:"계속 진행하시겠습니까?",ja:"続行しますか？",en:"Continue?"},share_dialog_title:{ko:"스마트폼 공유하기",ja:"スマートフォームシェアリング",en:"Smart Form Sharing"},share_list_title:{ko:"공유 리스트",ja:"共有リスト",en:"Sharing List"},share_report_title:{ko:"이름",ja:"名前",en:"Name"},share_is_public:{ko:"타입",ja:"タイプ",en:"Type"},share_user_count:{ko:"인원수",ja:"人数",en:"Count"},share_join:{ko:"참여",ja:"参加",en:"Join"},share_create_title:{ko:"공유하기",ja:"共有する",en:"Sharing"},share_public:{ko:"공개",ja:"公開",en:"Public"},share_private:{ko:"비공개",ja:"非公開",en:"Private"},share_password:{ko:"패스워드",ja:"パスワード",en:"Password"},share_create:{ko:"등록",ja:"登録",en:"Add"},share_no_select_report:{ko:"공유할 보고서를 선택하십시오.",ja:"共有するレポートを選択してください。",en:"Select a sharing report."},share_need_password:{ko:"비공개 보고서입니다. 패스워드를 입력하십시오.",ja:"非公開レポートです。パスワードを入力してください。",en:"A private report. Enter a password."},share_need_report_title:{ko:"보고서 제목을 입력하십시오.",ja:"レポートのタイトルを入力してください。",en:"Enter a report title."},do_share:{ko:"스마트폼 공유하기",ja:"スマートフォームを共有する",en:"Smart Form Sharing."},do_disconnect:{ko:"스마트폼 접속 끊기",ja:"スマートフォーム共有を解除する",en:"Disconnect Smart Form Sharing."},share_disconnect_confirm:{ko:"보고서 공유를 종료하시겠습니까?",ja:"レポートの共有を終了しますか？",en:"Are your sure to exit sharing reports?"},share_do_lock:{ko:"작성 제어권 해제 상태",ja:"作成制御解除状態",en:"User Control Unlock"},share_do_unlock:{ko:"작성 제어권 잠금 상태",ja:"作成制御ロック状態",en:"User Control Lock"},share_wrong_password:{ko:"패스워드가 틀립니다.",ja:"パスワードが正しくありません。",en:"Password is incorrect."},share_duplicated_name:{ko:"이미 등록된 제목입니다.",ja:"既に登録したタイトルです。",en:"The title is already registered."},share_session_timeout:{ko:"%s 분동안 아무동작을 하지 않았습니다. 연결을 유지하시겠습니까?",ja:"%s 分間、何の動作も感知されませんでした。接続を維持しますか？",en:"No action is made for %s mintutes. Do you want to stay connnected?"},share_undefined_room:{ko:"접속하려는 보고서가 공유 리스트에 없습니다.",ja:"接続しようとするレポートが共有リストにありません。",en:"The report to which you want to access is not in the sharing list."},share_stop_sharing:{ko:"보고서 공유가 중단되었습니다.",ja:"レポートの共有が停止されました。",en:"The Report Sharing has been Aborted."},no_share_server_url:{ko:"스마트폼 쉐어링 서비스를 위한 서버와의 연결에 실패하였습니다. 서버 주소를 확인하십시오.",ja:"スマートフォームシェアリングサービスのためのサーバーとの接続に失敗しました。サーバーのURLを確認してください。",en:"Connecting to the server for the smart form sharing service was failed. Please check the server address."},share_not_allowed_space:{ko:"패스워드에 공백 문자를 포함할 수 없습니다.",ja:"パスワードに空白文字を含めることはできません。",en:"Password should not contain blank characters."},keep_report_layout_message:{ko:"보고서 레이아웃을 유지할까요?",ja:"レポートレイアウトを維持しますか?",en:"Do you want to keep the report layout?"},yes_button_text:{ko:"네",ja:"はい",en:"Yes"},no_button_text:{ko:"아니요",ja:"いいえ",en:"No"},not_support_file_append:{ko:"첨부 기능을 사용할 수 없는 브라우저입니다. 필수로 적용된 첨부 필드는 필수 속성이 해제됩니다.",ja:"添付ファイル機能が対応しないブラウザです。必須でチェックした添付フィールドは必須プロパティが解除になります",en:"This browser does not use the attachment function. For the attachment field applied as mandatory option, the mandatory property will be canceled"},attach_file_button:{ko:"파일 선택",ja:"ァイルの選択",en:"Select File"},no_attach_file:{ko:"첨부된 파일이 없습니다.",ja:"添付したファイルがありません。",en:"There is no file attached."},file_size_over:{ko:"최대 파일 사이즈를 초과했습니다. %d MB 사이즈까지 첨부 가능 합니다.",ja:"最大ファイルサイズを超えました。%d MB までに添付できます。",en:"The max file size has been exceeded. Up to %d MB can be attached."},wrong_file_extension:{ko:"잘못된 파일 형식입니다. %s 형식의 파일을 첨부하십시오",ja:"正しくないファイルタイプです。%s タイプのファイルを添付してください。",en:"Wrong file type. extension. Please attach the file type of %s "},invalid_file_name:{ko:"잘못된 파일명입니다.",ja:"正しくないファイル名です。",en:"Wrong file name."},invalid_submit_request:{ko:"다른 사용자가 첨부한 파일은 제출할 수 없습니다.",ja:"他のユーザが添付したファイルは提出できません。",en:"The file attached by another user cannot be submitted."},mask_dialog_title:{ko:"이미지",ja:"イメージ",en:"image"},mask_dialog_black:{ko:"검정색",ja:"黒",en:"black color"},mask_dialog_white:{ko:"흰색",ja:"白",en:"white color"},mask_dialog_thin:{ko:"얇게",ja:"薄く",en:"thin"},mask_dialog_bold:{ko:"굵게",ja:"太字",en:"bold"},text_placeholder:{ko:"메모를 입력해주세요.",ja:"手書き(ノート)テキストを入力してください。",en:"Please enter your memo"},text_attr:{ko:"속성",ja:"プロパティ-",en:"Properties"},text_style:{ko:"스타일",ja:"スタイル",en:"Style"},text_font:{ko:"폰트",ja:"フォント",en:"Font"},text_outline:{ko:"테두리/배경",ja:"罫線/背景",en:"Outline/Background"},text_align:{ko:"정렬",ja:"整列",en:"Align"},text_italic:{ko:"기울임",ja:"斜体",en:"Italic"},text_strike:{ko:"취소선",ja:"取り消し線",en:"Strikeout"},text_underline:{ko:"밑줄",ja:"下線",en:"Underline"},text_fontsize:{ko:"폰트 크기",ja:"フォントのサイズ",en:"Font Size"},text_fontcolor:{ko:"폰트 색상",ja:"フォントの色",en:"Font Color"},text_outline:{ko:"테두리",ja:"罫線",en:"Outline"},text_background:{ko:"배경",ja:"背景",en:"Background"},text_leftalign:{ko:"왼쪽 정렬",ja:"左詰め",en:"Left Align"},text_centeralign:{ko:"가운데 정렬",ja:"中央揃え",en:"Horizontal Center Align"},text_rightalign:{ko:"오른쪽 정렬",ja:"右詰め",en:"Right Align"},invalid_attached_file:{ko:"첨부한 파일의 크기가 0이거나, 파일을 찾을 수 없어 제출에 실패했습니다.",ja:"提出に失敗しました。添付したファイルのサイズが０バイトか、 当該がファイルが見つかりません。",en:"You can not submitted because the attached file size is 0 or file cannot found."},textnote_format:{ko:"도형서식",ja:"図形の書式",en:"Format Shape"}};m2soft.crownix.Resource.language=undefined;m2soft.crownix.Resource.setLanguage=function(a){if(typeof a!="string"){return undefined}if(a.indexOf("ko")===0){this.language="ko"}else{if(a.indexOf("ja")===0){this.language="ja"}else{if(a.indexOf("en")===0){this.language="en"}}}return this.language};m2soft.crownix.Resource.setSystemLanguage=function(){this.setLanguage(navigator.language)||this.setLanguage(navigator.browserLanguage)||this.setLanguage(navigator.systemLanguage)||this.setLanguage(navigator.userLanguage)||this.setLanguage("en")};m2soft.crownix.Resource.setSystemLanguage();m2soft.crownix.Resource.get=function(a){try{return this.r[a][this.language]}catch(b){if(!!window.console&&typeof window.console.log==="function"){console.log("[Crownix HTML5 Viewer] resource not found: "+a)}return"RESOURCE_NOT_FOUND"}};m2soft.ns("m2soft.crownix.resource.Icon");m2soft.crownix.resource.Icon={CLOSE_OVERLAY:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="4,21 4,28.5 28,28.5 28,3.5 4,3.5 4,11"/>	<polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="21.4,13.6 12.7,13.6 12.7,10 6.1,15.1 6.1,15.3 6.12,16.551 12.671,21.758 12.671,18.1 21.4,18.1 "/></g></svg>',FIRST_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/>	<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="11.083" y1="9.814" x2="11.083" y2="22.223"/>	<g> 		<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="23.756" y1="15.93" x2="13.703" y2="15.93"/>		<polyline fill="none" stroke-width="1.3" stroke-miterlimit="10" points="19.293,9.751 13.703,15.446 13.703,16.501 19.311,22.108"/>	</g></g></svg>',PREV_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<g>		<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="23.309" y1="15.992" x2="9.429" y2="15.992"/>		<polyline fill="none" stroke-width="1.3" stroke-miterlimit="10" points="15.019,9.813 9.429,15.509 9.429,16.563 15.037,22.171"/>	</g>	<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/></g></svg>',NEXT_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<g>		<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="8.692" y1="15.992" x2="22.57" y2="15.992"/>		<polyline fill="none" stroke-width="1.3" stroke-miterlimit="10" points="16.98,9.813 22.57,15.509 22.57,16.563 16.963,22.171"/>	</g>	<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/></g></svg>',LAST_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/>	<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="20.918" y1="9.814" x2="20.918" y2="22.223"/>	<g>		<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="8.244" y1="15.93" x2="18.297" y2="15.93"/>		<polyline fill="none" stroke-width="1.3" stroke-miterlimit="10" points="12.707,9.751 18.297,15.446 18.297,16.501 12.689,22.108"/>	</g></g></svg>',MOVE_PAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="10.3,19.8 10.1,28.7 21,28.7 27.5,21.5 27.5,9.7 10.3,9.7 10.3,12.45"/>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="21.5,9 21.5,3.85 3.5,3.85 3.5,22.577 10.1,22.577"/>	<polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="8.825,14.800 14.9,14.800 14.9,12.728 18.613,15.681 18.613,16.365 18.613,17.052 14.9,20.003 14.9,17.900 8.825,17.900"/>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="27,21.5 21.5,21.5 21.5,27.7"/></g></svg>',ZOOM_IN:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="17.631" cy="14.191" r="11.000"/>	<g>		<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="17.615" y1="8.107" x2="17.615" y2="20.504"/>		<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="23.813" y1="14.306" x2="11.416" y2="14.306"/>	</g>	<polygon stroke="none" points="10.447,23.029 4.279,29.199 2.979,29.199 2.979,28.074 9.089,21.727"/></g></svg>',ZOOM_OUT:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="17.631" cy="14.191" r="11.000"/>	<g>		<line fill="none" stroke-width="1.4" stroke-miterlimit="10" x1="23.813" y1="14.306" x2="11.416" y2="14.306"/>	</g>	<polygon stroke="none" points="10.447,23.029 4.279,29.199 2.979,29.199 2.979,28.074 9.089,21.727"/></g></svg>',FIT_WIDTH:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g>	<rect x="1.649" y="2.531" fill="none" stroke-miterlimit="10" width="20.701" height="18.938"/>	<polygon stroke="none" points="17.384,9.217 20.087,11.006 20.087,12.8 17.407,14.634 17.407,12.862 14.68,12.862 14.68,11.006 17.384,11.006"/>	<polygon stroke="none" points="6.604,9.217 3.9,11.006 3.9,12.8 6.579,14.634 6.579,12.862 9.308,12.862 9.308,11.006 6.604,11.006"/></g></svg>',FIT_HEIGHT:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g>	<rect x="1.65" y="2.531" fill="none" stroke-miterlimit="10" width="20.699" height="18.938"/>	<polygon stroke="none"  points="14.709,16.479 12.92,19.182 11.127,19.182 9.291,16.502 11.063,16.502 11.063,13.774 12.92,13.774 12.92,16.479"/>	<polygon stroke="none"  points="14.709,7.447 12.92,4.743 11.127,4.743 9.291,7.422 11.063,7.422 11.063,10.15 12.92,10.15 12.92,7.447"/></g></svg>',SAVE:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<polygon fill="none" stroke-width="1.2" stroke-miterlimit="10" points="3.412,3.735 8.156,3.735 24.889,3.735 28.588,6.995 28.588,28.700 3.412,28.700"/>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="8.537,3.598 8.537,11.711 23.324,11.711 23.324,3.598"/>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="7.400,28.700 7.400,16.700 24.700,16.700 24.700,28.700"/></g></svg>',PDF:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083	c3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0	S0.505,0.262,0.505,2.993z"/><path fill="#E41737" stroke="#E41737" stroke-width="0.2" stroke-miterlimit="10" d="M11.549,9.045c0,0-4.489,10.481-7.78,11.242	c0,0-0.171-1.122,2.911-3.31c0,0-3.005,1.294-3.386,3.12c0,0,0.095,0.476,1.198,0.438c0,0,0.932,0.19,4.014-4.261	c0,0,0.026-0.04,0.075-0.114c0.44-0.678,2.685-4.181,3.216-6.049c0,0,1.121,2.929,3.252,4.47c0,0-4.311,0.605-6.624,1.641	l-0.072,0.1c0,0,3.652-1.17,7.39-1.298c0,0,4.337,2.254,5.065,0.998v-0.057c0,0-0.999,0.442-3.867-0.999	c0,0,4.052-0.171,3.938,0.828c0,0,0.756-0.757-1.256-1.228c0,0-2.026-0.229-3.566-0.1c0,0-2.994-1.228-3.901-5.521	c0,0,0.563-2.839,0.505-3.923L11.92,7.847c0,0-0.711-3.41,0.236-4.223c0,0,0.392,0.1,0.563,1.027c0,0,0.458-1.084-0.563-1.17	c0,0-0.764-0.257-0.893,1.127C11.264,4.608,10.955,7.21,11.549,9.045z"/></svg>',DOC:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083	c3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0	S0.505,0.262,0.505,2.993z"/><path fill="#3578BD" d="M4.362,6.428h5.344v0.806c0,0-1.35,0.469-1.444,1.481l-0.075,5.42l3.787-7.708h2.494v7.708L17.3,8.584	c0,0,0.618-1.237-0.749-1.313l-0.039-0.844h4.127v0.769l-0.281,0.112l-5.945,11.063h-2.438l-0.056-6.881l-3.975,6.788l-2.531,0.094	L5.394,8.697c0,0-0.169-1.257-1.031-1.388V6.428z"/></svg>',XLS:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083	c3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0	S0.505,0.262,0.505,2.993z"/><polygon fill="#6CA75C" points="4.625,6.294 9.688,6.294 12.238,9.032 15.088,6.294 20.188,6.294 14.863,12.069 20.188,18.106 	14.863,18.106 11.713,14.618 9.238,17.094 4.063,17.094 9.463,11.994 "/></svg>',PPT:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083	c3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0	S0.505,0.262,0.505,2.993z"/><path fill="#C54C1C" d="M11.52,12V7.697c0,0,3.619-0.489,3.619,2.345c0,0,0.174,1.917-3.139,1.958H8.6v6.992h2.981v-4.533h2.668	c0,0,4.063-0.271,3.906-4.625c0,0,0.136-4.652-5.26-4.826H6.844v2.679H8.6V12H11.52z"/></svg>',HWP:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083	c3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0	S0.505,0.262,0.505,2.993z"/><g>	<path fill="#00A0E9" d="M10.689,4.796c0,0,3.411,0.366,4.589,1.954c0,0,0.458,0.326-0.119-0.549c0,0-0.889-2.117-3.075-2.321		c0,0-0.794,0.021-1.25,0.57C10.834,4.451,10.49,4.77,10.689,4.796z"/>	<path fill="#3897D4" d="M17.922,9.865c0,0-2.691-1.771-6.151,0c0,0-2.667,2.056,0.601,2.809c0,0,1.802,0.081,2.306-2.158		c0,0-0.168-2.789-3.339-3.033c0,0-2.931,0.021-3.339,0.204c0,0-0.265,0.183-0.24-0.407c0,0-0.24-2.015,3.244-1.628		c0,0,5.886,0.264,5.501,5.17c0,0-0.816,3.684-5.141,3.481c0,0-3.604-0.184-3.1-3.013c0,0-0.144-2.606,4.109-3.379		c0,0,3.076-0.692,5.119,0.265c0,0,0.506,0.223,0.553,0.936C18.043,9.112,18.123,9.979,17.922,9.865z"/>	<path fill="#3897D4" d="M12.516,15.484c0,0-1.177,0.142-1.177,0.997c0,0.854,0.817,0.997,1.177,0.997		c0.361,0,1.153-0.144,1.153-0.978S12.516,15.484,12.516,15.484z"/>	<path fill="#3897D4" d="M9.201,16.033v1.588c0,0,0.192,0.896,2.018,0.896s5.959-0.121,6.704-0.346		c0.745-0.225-0.48,1.588-0.48,1.588s-4.493,0.61-7.448,0.244c0,0-2.283,0.184-2.835-2.076l-0.12-1.894H9.201z"/></g></svg>',TXT:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path fill="none" stroke="#85929E" stroke-width="1" stroke-miterlimit="10" d="M0.505,2.993v17.424c0,0-0.196,3.083,3.278,3.083	c3.473,0,16.858,0,16.858,0s2.856-0.221,2.856-2.688c0-2.463,0-17.819,0-17.819s0.234-2.488-2.645-2.488c-2.881,0-17.797,0-17.797,0	S0.505,0.262,0.505,2.993z"/><g><text x="12" y="19" font-family="Times, Arial" text-anchor="middle" font-weight="bold" font-size="20px" stroke="#566573" fill="#566573">T</text></g></svg>',STORAGE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="7.3,17.8 7.1,28.7 28.5,28.7 28.5,11.7 24.5,7.7 7.3,7.7 7.3,10.45"/>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="21.5,7 21.5,3.85 3.5,3.85 3.5,22.577 8.1,22.577"/>	<polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="6.825,12.800 12.9,12.800 12.9,10.728 16.613,13.681 16.613,14.365 16.613,15.052 12.9,18.003 12.9,15.900 6.825,15.900"/>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="15.537,13.611 23.324,13.611 23.324,7.598"/>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="11.400,28.700 11.400,19.700 24.500,19.700 24.500,28.700"/></g></svg>',PRINT:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">	<g>		<g stroke-width="1.5">			<polyline points="7.5,10.5 7.5,2.5 24.5,2.5 24.5,10.5" fill="none" />			<polyline points="7.5,23.5 2.5,23.5 2.5,10.5 29.5,10.5 29.5,23.5 24.5,23.5" stroke-linejoin="round" fill="none" />			<circle cx="26" cy="14" r="0.5" />			<rect x="7.5" y="18.5" fill="none" width="17" height="11"/>			<line fill="none" stroke-linecap="round" x1="10.5" y1="22.5" x2="21.5" y2="22.5"/>			<line fill="none" stroke-linecap="round" x1="10.5" y1="25.5" x2="18.5" y2="25.5"/>		</g>	</g></svg>',PRINT_PDF:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">	<g>		<g stroke-width="1.5">			<polyline points="7.5,10.5 7.5,2.5 24.5,2.5 24.5,10.5" fill="none" />			<polyline points="7.5,23.5 2.5,23.5 2.5,10.5 29.5,10.5 29.5,23.5 24.5,23.5" stroke-linejoin="round" fill="none" />			<circle cx="26" cy="14" r="0.5"/>			<rect x="7.5" y="18.5" fill="none" width="17" height="11"/>			<line fill="none" stroke-linecap="round" x1="10.5" y1="22.5" x2="21.5" y2="22.5"/>			<line fill="none" stroke-linecap="round" x1="10.5" y1="25.5" x2="18.5" y2="25.5"/>			<path stroke-width="0.2" stroke-miterlimit="10" d="m14.1026,8.029c-0.5108,0.44573 -1.4212,1.35355 -0.8036,1.19616c0.9955,-0.56225 1.6175,-2.36574 2.1251,-3.57195c-0.591,-1.23222 -0.021,-2.18845 0.4281,-2.21663c0.5473,-0.03425 0.6898,0.94041 0.6898,0.94041s-0.6064,-0.43074 -0.6991,-0.69333c-0.1044,0.02451 -0.2168,0.82326 0.0927,1.70676c0.3613,-0.42497 0.5424,-0.84956 0.5424,-0.84956s0.4518,0.42457 -0.2266,1.07673c0.1213,0.25232 0.7819,1.26994 1.0812,1.45393c1.8951,-0.47864 1.9854,0.4604 1.9854,0.4604c-0.2926,-0.25105 -0.94,-0.27684 -1.6594,-0.20432c0.9074,0.44805 1.6757,0.29988 1.6757,0.29988c0,0.35081 -1.2292,0.73579 -2.1369,-0.07209c-0.9502,0.14019 -1.9208,0.56979 -2.305,0.67814c-1.0262,1.68508 -2.1485,1.55138 -2.3014,1.14902c-0.2712,-0.67939 1.5116,-1.35355 1.5116,-1.35355l0,0l0,0zm1.7556,-2.06521l-0.6712,1.73893c0.3941,-0.10603 0.8296,-0.30973 1.6103,-0.4537c-0.2528,-0.17331 -0.4812,-0.38789 -0.9391,-1.28523z"/>		</g>	</g></svg>',INQUERY:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<polygon points="19.505,12.52 25.13,12.52 22.317,15.71"/>	<polygon stroke="none" points="8.124,23.268 2.358,29.279 1.058,29.279 1.058,28.154 7.167,21.804"/>	<path fill="none" stroke-width="1.3" stroke-miterlimit="10" d="M24.913,6.989c0.002,0-3.268-4.242-8.885-4.267	c0,0-6.004-0.219-9.749,5.504c0,0-2.993,4.162-1.012,9.618c0,0,1.113,3.865,5.52,6.383c0,0,3.425,2.047,7.502,1.053 c0,0,4.017-0.736,6.472-3.854"/>	<rect x="10.598" y="9.756" fill="none" stroke-width="1.3" stroke-miterlimit="10" width="17.344" height="9.047"/></g></svg>',CANCEL:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g>	<g>		<line fill="none" stroke-width="1.4" stroke-miterlimit="10" x1="22.695" y1="16" x2="9.305" y2="16"/>	</g>	<circle fill="none" stroke-width="1.3" stroke-miterlimit="10" cx="16" cy="16" r="12.700"/></g></svg>',LEFT_ITEM_MARK:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="15px" height="32px" viewBox="0 0 15 32" enable-background="new 0 0 15 32" xml:space="preserve"><g>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="11.375,25.656 2.625,16.031 11.375,6.344"/></g></svg>',RIGHT_ITEM_MARK:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="15px" height="32px" viewBox="0 0 15 32" enable-background="new 0 0 15 32" xml:space="preserve"><g>	<polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="3.625,25.656 12.375,16.031 3.625,6.344"/></g></svg>',VIEW_MODE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle fill="#318ABB" cx="17.5" cy="17.5" r="17.5"/><g>	<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M9.268,26.041c0,1.85,2.313,1.711,2.313,1.711 s11.332,0,14.015,0s2.289-2.543,2.289-2.543V14.688l-8.44-8.441h-8.049c0,0-2.358,0.046-2.358,2.636s0,6.614,0,6.614"/>	<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M19.12,6.246v6.222c0,0,0.046,2.034,2.566,2.034 s6.013,0,6.013,0"/>	<path fill="#FFFFFF" d="M3.378,20.931v-0.356c0,0,2.617-4.343,6.174-4.343h0.533h0.533c3.557,0,6.174,4.343,6.174,4.343v0.356 v-0.184v0.354c0,0-2.617,4.346-6.174,4.346h-0.533H9.552c-3.557,0-6.174-4.346-6.174-4.346v-0.354 M10.085,17.416 c-1.891,0-3.423,1.532-3.423,3.424c0,1.89,1.532,3.422,3.423,3.422s3.423-1.532,3.423-3.422 C13.508,18.948,11.976,17.416,10.085,17.416z M10.121,18.833c-1.107,0-2.005,0.899-2.005,2.007c0,1.105,0.897,2.005,2.005,2.005 c1.108,0,2.005-0.899,2.005-2.005C12.126,19.732,11.229,18.833,10.121,18.833z"/>	<path fill="#FFFFFF" d="M13.178,10.655c-3.953,3.335,1.513,4.813,4.484,4.934c-0.118-0.435-0.235-0.87-0.354-1.305c-1.255,0.821-5.835,5.793-2.786,7.007c1.405,0.559,2.96-0.313,4.224-0.899c1.099-0.511,2.224-0.963,3.394-1.278c3.602-0.972,1.057,3.864,0.276,4.842c-0.557,0.698,0.427,1.695,0.99,0.99c1.193-1.496,3.894-7.354-0.248-7.315c-1.811,0.017-3.496,0.809-5.118,1.552c-1.116,0.511-3.837,1.719-2.574-0.748c0.556-1.083,1.513-2.265,2.548-2.942c0.586-0.383,0.354-1.276-0.354-1.305c-1.2-0.048-5.783-0.611-3.494-2.543C14.859,11.062,13.864,10.077,13.178,10.655L13.178,10.655z"/></g></svg>',HIDE_MODE:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle fill="#39579a" cx="17.5" cy="17.5" r="17.5"/><g>	<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M9.268,26.041c0,1.85,2.313,1.711,2.313,1.711 s11.331,0,14.013,0s2.289-2.543,2.289-2.543V14.687l-8.44-8.441h-8.047c0,0-2.358,0.046-2.358,2.636c0,2.591,0,6.614,0,6.614"/>	<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M19.119,6.246v6.222c0,0,0.046,2.034,2.566,2.034 s6.013,0,6.013,0"/>	<path fill="#FFFFFF" d="M3.379,20.931v-0.356c0,0,2.617-4.343,6.173-4.343h0.533h0.534c3.557,0,6.173,4.343,6.173,4.343v0.356 v-0.184v0.354c0,0-2.616,4.346-6.173,4.346h-0.534H9.552c-3.556,0-6.173-4.346-6.173-4.346v-0.354 M10.085,17.415 c-1.891,0-3.423,1.533-3.423,3.425c0,1.889,1.532,3.422,3.423,3.422s3.424-1.533,3.424-3.422 C13.509,18.948,11.976,17.415,10.085,17.415z M12.31,20.174H7.676v1.576h4.634V20.174z"/></g></svg>',NORMAL_PEN:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g fill="#FFFFFF">	<g class="crownix-icon-pencolor" >		<polygon points="7.795,25.631 11.279,23.791 7.721,21.369"/>		<rect x="10.375" y="25.875" width="17.563" height="2"/>	</g>	<g>		<path d="M14.597,8.838l2.698,1.603l-1.832,1.376c0.941-1.275-0.014-1.932-0.014-1.932 c-1.162-0.861-1.981,0.877-1.981,0.877L14.597,8.838z"/>		<path fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" d="M13.822,21.635 c-1.508,1.477-2.871,0.477-2.871,0.477l-2.348-1.619v-2.62l6.849-11.308c0,0,1.472-2.369,4.578-0.756c0,0,2.785,1.453,1.365,4.383 L13.822,21.635z"/>		<line fill="none" stroke="#FFFFFF" stroke-width="1.3" stroke-miterlimit="10" x1="14.402" y1="8.294" x2="20.352" y2="11.965"/>		<path d="M12.344,19.573c-0.273,0.438-0.793,0.606-1.161,0.378l0,0c-0.366-0.226-0.442-0.766-0.168-1.202 l5.277-8.419c0.271-0.438,0.793-0.607,1.16-0.38l0,0c0.366,0.229,0.441,0.768,0.168,1.204L12.344,19.573z"/>		<path d="M17.754,10.626l2.699,1.603l-1.832,1.376c0.939-1.276-0.016-1.932-0.016-1.932 c-1.16-0.861-1.98,0.878-1.98,0.878L17.754,10.626z"/>	</g></g></svg>',HIGHLIGHTER_PEN:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><circle fill="#FFFFFF" cx="17.45" cy="5.25" r="0.79"/><g class="crownix-icon-highlightercolor">	<rect x="10.375" y="25.875" width="17.563" height="2"/>	<polygon points="5.147,25.52 8.643,25.52 9.804,24.465 9.804,23.783 6.91,22.48"/></g><g>	<polygon fill="#FFFFFF" points="7.34,21.964 9.891,23.19 10.466,23.212 13.025,21.651 13.06,20.657 7.828,17.188 7.49,17.67"/>	<path fill="none" stroke="#FFFFFF" stroke-width="1.6" stroke-miterlimit="10" d="M14.799,6.273l-5.037,7.828 c0,0-1.416,1.823,0.142,2.817l2.625,1.81c0,0,1.87,1.584,3.415-1.148c1.546-2.729,4.371-7.78,4.371-7.78s1.37-2.321-0.81-3.36 l-1.912-1.176C18.115,5.546,16.215,4.261,14.799,6.273z"/></g></svg>',TEXT:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><g>	<g id="Ellipse_1">		<g>			<circle cx="17.5" cy="17.5" r="17.5"/>		</g>	</g>			<image overflow="visible" width="21" height="22" id="Layer_66_copy_xA0_Image" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAWCAYAAAAvg9c4AAAACXBIWXMAAAsSAAALEgHS3X78AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFVJREFUeNpi/A8EDNQG1DYUbB4tXMrEQAPAQq2gYAQCmoXp4PQ+ipdpmaRo4n2QI0n2Pk4v4wpTYjQM7tgn1QdDx/tDx9ChU6DQxFBGangfPSkCBBgAtpM0FSvAneQAAAAASUVORK5CYII=" transform="matrix(1 0 0 1 7.0005 7)">	</image>	<g id="Rectangle_5_copy">		<g>			<polygon fill="#FFFFFF" points="29.348,9.015 19.828,18.534 18.002,22.088 21.576,20.319 31.113,10.78 			"/>		</g>	</g>	<g>					<rect x="25.137" y="23.795" transform="matrix(-0.7076 -0.7066 0.7066 -0.7076 24.9548 63.6009)" fill="#FFFFFF" width="0.999" height="5.684"/>		<rect x="22.985" y="23.939" fill="#FFFFFF" width="5.014" height="0.999"/>		<rect x="22.986" y="24.016" fill="#FFFFFF" width="1" height="4.983"/>	</g></g></svg>',ERASER:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g stroke="#FFFFFF">	<path fill="none" stroke-width="1.5" stroke-miterlimit="10" d="M16.452,6.824c0,0,2.003-2.438,5.795,0 c3.791,2.437,4.278,2.708,4.278,2.708s1.572,0.868,1.572,3.033c0,0,0.162,0.975-0.922,2.763 c-1.083,1.787-6.933,12.077-6.933,12.077s-1.19,1.842-2.6,1.842h-0.921c0,0-1.517,0.163-2.762-0.649 c-1.865-1.218-1.862-1.221-5.188-3.427c0,0-0.878-0.635-0.878-1.719s0-0.866,0-0.866s0-1.571,1.138-3.467 C10.169,17.223,16.452,6.824,16.452,6.824z"/>	<line fill="none" stroke-width="1.5" stroke-miterlimit="10" x1="10.158" y1="17.5" x2="21.738" y2="24.787"/></g></svg>',ERASE_ALL:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g stroke="#FFFFFF">	<path fill="none" stroke-width="1.3" stroke-miterlimit="10" d="M26.206,26.041c0,1.85-2.313,1.711-2.313,1.711 s-11.333,0-14.015,0s-2.289-2.543-2.289-2.543V14.688l8.44-8.441h8.049c0,0,2.358,0.046,2.358,2.636s0,2.59,0,2.59"/>	<path fill="none" stroke-width="1.3" stroke-miterlimit="10" d="M16.353,6.246v6.222c0,0-0.046,2.034-2.566,2.034 s-6.013,0-6.013,0"/>	<g>		<path fill="none" stroke-width="1.3" stroke-miterlimit="10" d="M25.298,13.73c0,0,0.953-1.158,2.752,0 c1.801,1.156,2.032,1.286,2.032,1.286s0.745,0.41,0.745,1.44c0,0,0.077,0.463-0.437,1.311c-0.513,0.849-3.292,5.736-3.292,5.736 s-0.565,0.874-1.234,0.874h-0.438c0,0-0.72,0.077-1.312-0.309c-0.886-0.579-0.884-0.58-2.465-1.627c0,0-0.417-0.301-0.417-0.817 c0-0.514,0-0.411,0-0.411s0-0.745,0.54-1.645C22.314,18.668,25.298,13.73,25.298,13.73z"/>		<line fill="none" stroke-width="1.3" stroke-miterlimit="10" x1="22.31" y1="19.142" x2="27.81" y2="22.425"/>	</g></g><path fill="#FFFFFF" d="M19.967,13.271c1.317,1.109-1.48,1.333-2.235,1.363c-0.708,0.029-0.939,0.921-0.354,1.305c0.595,0.389,1.049,1.006,1.448,1.579c0.923,1.328,0.086,1.162-0.941,0.705c-1.075-0.48-2.319-1.217-3.518-1.228	c-3.318-0.032-1.992,3.791-0.724,5.38c0.563,0.705,1.547-0.293,0.99-0.99c-0.558-0.699-1.146-1.689-1.02-2.619c0.131-0.966,2.644,0.262,2.974,0.396c1.026,0.42,2.213,1.221,3.352,0.768c2.362-0.939-0.806-4.514-1.854-5.2	c-0.119,0.435-0.236,0.87-0.354,1.305c2.201-0.089,6.124-1.312,3.225-3.754C20.271,11.703,19.275,12.688,19.967,13.271L19.967,13.271z"/></svg>',UNDO:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g fill="#FFFFFF">	<polyline points="14.906,10.406 14.627,10.406 14.627,14.02 9.394,10.638 14.582,6.422 14.627,10.406"/>	<path fill="none" stroke="#FFFFFF" stroke-width="1.9" stroke-miterlimit="10" d="M17.944,26.6 c0.078-0.002,5.662-2.434,5.662-8.292c0-8.152-9.125-7.829-9.125-7.829h-0.279l0,0"/>	<circle cx="17.907" cy="26.623" r="0.954"/></g></svg>',REDO:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve"><circle cx="17.5" cy="17.5" r="17.5"/><g fill="#FFFFFF">	<polyline points="19.094,10.406 19.373,10.406 19.373,14.02 24.605,10.638 19.418,6.422 19.373,10.406"/>	<path fill="none" stroke="#FFFFFF" stroke-width="1.9" stroke-miterlimit="10" d="M16.056,26.6 c-0.078-0.002-5.662-2.434-5.662-8.292c0-8.152,9.125-7.829,9.125-7.829h0.278l0,0"/>	<circle cx="16.093" cy="26.623" r="0.954"/></g></svg>',HOVER_FILTER:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="0px" height="0px" xml:space="preserve">	<defs>		<filter id="hover">			<desc>hover 효과를 위한 필터</desc>			<feGaussianBlur in="SourceGraphic" stdDeviation="3" result="blur" />			<feMerge>				<feMergeNode in="blur"/>				<feMergeNode in="SourceGraphic"/>			</feMerge>		</filter>		<filter id="active">			<desc>mousedown 효과를 위한 필터</desc>			<feGaussianBlur in="SourceGraphic" stdDeviation="6" result="active" />			<feMerge>				<feMergeNode in="active"/>				<feMergeNode in="SourceGraphic"/>			</feMerge>		</filter>	</defs></svg>',PREV_DOC:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g><polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="5.1,28.7 21,28.7 27.5,21.5 27.5,4.7 5.1,4.7 5.1,29.3"/> <polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="18.613,14.800 12.538,14.800 12.538,12.728 8.825,15.681 8.825,16.365 8.825,17.052 12.538,20.003 12.538,17.900 18.613,17.900"/> <polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="27,21.5 21.5,21.5 21.5,27.7"/> </g> </svg>',NEXT_DOC:'<svg version="1.1" id="레이어_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><g><polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="5.1,28.7 21,28.7 27.5,21.5 27.5,4.7 5.1,4.7 5.1,29.3"/> <polygon fill="none" stroke-width="1.0" stroke-miterlimit="10" points="8.825,14.800 14.9,14.800 14.9,12.728 18.613,15.681 18.613,16.365 18.613,17.052 14.9,20.005 14.9,17.933 8.825,17.933"/> <polyline fill="none" stroke-width="1.2" stroke-miterlimit="10" points="27,21.5 21.5,21.5 21.5,27.7"/> </g> </svg>',SHARE_CONNECT:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_3" class="layer">   <g class="layer" id="svg_2">    <g id="svg_1" class="layer">     <g id="svg_22">      <g id="Ellipse_2">       <g id="svg_23">        <circle cx="9" cy="16" r="5.225" id="svg_24"/>       </g>      </g>      <g id="Rectangle_4">       <g id="svg_25">        <rect x="9.538" y="12.638" transform="matrix(0.8663,-0.4994,0.4994,0.8663,-4.6546,8.8819) " fill="#FFFFFF" width="9.46" height="0.999" id="svg_26"/>       </g>      </g>      <g id="Rectangle_4_copy">       <g id="svg_27">        <polygon points="10.504,15.005 10.014,15.889 18.496,20.995 18.986,20.111" id="svg_28"/>       </g>      </g>      <g id="Ellipse_2_2_">       <g id="svg_29">        <circle fill="none" cx="23" cy="9" r="5.225" id="svg_30"/>       </g>      </g>      <g id="Ellipse_2_4_">       <g id="svg_31">        <circle fill="none" cx="23" cy="23" r="5.225" id="svg_32"/>       </g>      </g>     </g>    </g>   </g>  </g> </g></svg>',SHARE_DISCONNECT:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_2" class="layer">   <g class="layer" id="svg_1">    <g id="svg_33">     <g id="Ellipse_2_12_">      <g id="svg_34">       <circle id="svg_35" r="5.225" cy="16.014" cx="9"/>      </g>     </g>     <g id="Rectangle_4_4_">      <g id="svg_36">       <rect id="svg_37" height="0.999" width="9.46" fill="#FFFFFF" transform="matrix(0.8663,-0.4994,0.4994,0.8663,-4.6615,8.8837) " y="12.652" x="9.538"/>      </g>     </g>     <g id="Rectangle_4_copy_4_">      <g id="svg_38">       <polygon id="svg_39" points="10.504,15.019 10.014,15.902 18.496,21.009 18.986,20.125" />      </g>     </g>     <g id="Ellipse_2_6_">      <g id="svg_40">       <circle id="svg_41" r="5.225" cy="9.014" cx="23" fill="none"/>      </g>     </g>     <rect id="svg_42" height="1.012" width="11.352" fill="#FFFFFF" transform="matrix(0.7071,-0.7071,0.7071,0.7071,-8.8751,22.7281) " y="21.572" x="17.324"/>     <rect id="svg_43" height="1.013" width="11.35" fill="#FFFFFF" transform="matrix(-0.7071,-0.7071,0.7071,-0.7071,23.6499,53.9532) " y="21.572" x="17.325"/>    </g>   </g>  </g> </g></svg>',SHARE_LOCK:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer"><g id="svg_33">   <path id="svg_34" d="m24,14l-16,0c-0.553,0 -1,0.447 -1,1l0,11c0,0.553 0.447,1 1,1l16,0c0.553,0 1,-0.447 1,-1l0,-11c0,-0.553 -0.447,-1 -1,-1zm-6,10l-4,0l1.234,-3.058c-0.751,-0.303 -1.281,-1.036 -1.281,-1.896c0,-1.13 0.916,-2.046 2.047,-2.046s2.047,0.916 2.047,2.047c0,0.859 -0.53,1.593 -1.281,1.896l1.234,3.057z"/>   <g id="svg_35">    <path id="svg_36" d="m16,7c2.205,0 4,1.794 4,4l2,0c0,-3.313 -2.687,-6 -6,-6l0,0c-3.313,0 -6,2.687 -6,6l2,0c0,-2.206 1.794,-4 4,-4"/>    <rect id="svg_37" height="7.334" width="2" y="11" x="20"/>    <rect id="svg_38" height="7.334" width="2" y="11" x="10"/>   </g>  </g> </g></svg>',SHARE_UNLOCK:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer"><g id="svg_33">   <path id="svg_34" d="m24,14l-16,0c-0.553,0 -1,0.447 -1,1l0,11c0,0.553 0.447,1 1,1l16,0c0.553,0 1,-0.447 1,-1l0,-11c0,-0.553 -0.447,-1 -1,-1zm-6,10l-4,0l1.234,-3.058c-0.751,-0.303 -1.281,-1.036 -1.281,-1.896c0,-1.13 0.916,-2.046 2.047,-2.046s2.047,0.916 2.047,2.047c0,0.859 -0.53,1.593 -1.281,1.896l1.234,3.057z"/>   <g id="svg_35">    <path id="svg_36" d="m16,7c2.205,0 4,1.794 4,4l2,0c0,-3.313 -2.687,-6 -6,-6l0,0c-3.313,0 -6,2.687 -6,6l2,0c0,-2.206 1.794,-4 4,-4"/>    <rect id="svg_37" height="7.334" width="2" y="11" x="20"/>   </g>  </g> </g></svg>',FILE_CLIP:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_28">   <path id="svg_29" d="m7.085,5.799c0,0.111 -0.083,0.201 -0.183,0.201c-0.101,0 -0.183,-0.09 -0.183,-0.201c0,-0.386 0.144,-0.734 0.377,-0.989l0.012,-0.013c0.231,-0.247 0.545,-0.399 0.892,-0.399c0.352,0 0.672,0.158 0.903,0.412l0.002,0c0.23,0.254 0.375,0.603 0.375,0.989c0,0.111 -0.082,0.201 -0.184,0.201c-0.101,0 -0.182,-0.09 -0.182,-0.201c0,-0.275 -0.103,-0.523 -0.268,-0.707l-0.002,0c-0.164,-0.181 -0.392,-0.292 -0.644,-0.292c-0.247,0 -0.473,0.107 -0.636,0.282l-0.009,0.01c-0.167,0.181 -0.27,0.431 -0.27,0.707l0,0zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>   <path id="svg_30" d="m9.28,12.201c0,0.109 -0.082,0.199 -0.185,0.199c-0.101,0 -0.182,-0.09 -0.182,-0.199l0,-6.402c0,-0.11 0.082,-0.2 0.182,-0.2c0.103,0 0.185,0.09 0.185,0.2l0,6.402zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>   <g id="svg_31">    <path id="svg_32" d="m7.085,12.4c0,0.109 -0.083,0.198 -0.184,0.198c-0.101,0 -0.183,-0.089 -0.183,-0.198l0,-6.601c0,-0.11 0.083,-0.2 0.183,-0.2c0.102,0 0.184,0.09 0.184,0.2l0,6.601zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>    <path id="svg_33" d="m6.719,12.4c0,-0.11 0.083,-0.199 0.183,-0.199c0.1,0 0.181,0.089 0.181,0.199c0,0.44 0.166,0.843 0.431,1.131c0.265,0.289 0.631,0.471 1.034,0.471c0.403,0 0.768,-0.182 1.033,-0.471c0.266,-0.29 0.43,-0.692 0.43,-1.131c0,-0.11 0.083,-0.199 0.185,-0.199c0.101,0 0.182,0.089 0.182,0.199c0,0.549 -0.206,1.05 -0.537,1.413c-0.332,0.363 -0.79,0.589 -1.292,0.589c-0.503,0 -0.961,-0.226 -1.292,-0.589c-0.334,-0.363 -0.538,-0.864 -0.538,-1.413l0,0zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>    <path id="svg_34" d="m5.987,4.198c0,0.109 -0.081,0.2 -0.184,0.2c-0.101,0 -0.182,-0.091 -0.182,-0.2c0,-0.714 0.268,-1.365 0.698,-1.835l0,-0.002c0.43,-0.469 1.026,-0.763 1.681,-0.763c0.651,0 1.247,0.294 1.677,0.764l0,0.002l0.002,0c0.432,0.472 0.697,1.123 0.697,1.835c0,0.109 -0.081,0.2 -0.182,0.2s-0.183,-0.091 -0.183,-0.2c0,-0.604 -0.228,-1.155 -0.592,-1.555c-0.364,-0.399 -0.867,-0.645 -1.419,-0.645c-0.555,0 -1.058,0.246 -1.422,0.645c-0.365,0.399 -0.591,0.948 -0.591,1.554l0,0zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>   </g>   <path id="svg_35" d="m5.987,12.601c0,0.11 -0.081,0.2 -0.182,0.2c-0.103,0 -0.184,-0.09 -0.184,-0.2l0,-8.403c0,-0.111 0.082,-0.201 0.184,-0.201c0.101,0 0.182,0.09 0.182,0.201l0,8.403zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>   <path id="svg_36" d="m10.379,12.472c0,0.109 -0.082,0.198 -0.182,0.198c-0.103,0 -0.186,-0.089 -0.186,-0.198l0,-8.404c0,-0.111 0.083,-0.201 0.186,-0.201c0.1,0 0.182,0.09 0.182,0.201l0,8.404zm0,0" fill="#050008" clip-rule="evenodd" fill-rule="evenodd"/>  </g> </g></svg>',BOLD:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><text x="3" y="13" font-family="Times, Arial" font-weight="bold" font-size="80%">T</text></g></g></svg>',ITALIC:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><text x="5" y="13" font-family="Times, Arial" font-style="italic" font-size="80%">I</text></g></g></svg>',UNDERLINE:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><text x="3" y="12" font-family="Times, Arial" text-decoration="underline" font-size="75%">U</text></g></g></svg>',STRIKE:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>	<g>		<text x="4" y="13" font-family="Times, Arial" text-decoration="line-through" font-size="80%">S</text>	</g></g></svg>',FONT_COLOR:'<?xml version="1.0" encoding="utf-8"?><!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g id="svg_20">   <g id="svg_21">    <path id="svg_22" d="m9.324,8.198l-2.678,0l-0.71,2.239l-0.94,0l2.489,-7.327l1.029,0l2.489,7.326l-0.979,0l-0.7,-2.238zm-0.228,-0.74l-0.352,-1.119c-0.27,-0.83 -0.499,-1.629 -0.739,-2.479l-0.04,0c-0.23,0.86 -0.47,1.649 -0.73,2.479l-0.359,1.119l2.22,0z"/>   </g>   <rect class="crownix-textnote-fontcolor" id="svg_23" height="1.166" width="6.707" y="11.724" x="4.646"/>  </g></svg>',OUTLINE:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><rect x="2.7" y="2.7" width="11" height="11" style="fill:transparent; stroke-width:1.5;"/></g></svg>',BACKGROUND:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>	<g>	<rect x="3.5" y="3.5" width="2.5" height="2.5" stroke-width="1"/>	<rect x="4.5" y="4.5" width="1" height="1" stroke-width="1"/>	<rect x="3.5" y="10" width="2.5" height="2.5" stroke-width="1"/>	<rect x="4.5" y="10.5" width="1" height="1" stroke-width="1"/>	<rect x="6.5" y="6.5" width="2.5" height="2.5" stroke-width="1"/>	<rect x="7.5" y="7.5" width="1" height="1" stroke-width="1"/>	<rect x="10" y="3.5" width="2.5" height="2.5" stroke-width="1"/>	<rect x="10.5" y="4.5" width="1" height="1" stroke-width="1"/>	<rect x="10" y="10" width="2.5" height="2.5" stroke-width="1"/>	<rect x="10.5" y="10.5" width="1" height="1" stroke-width="1"/>	<rect x="3" y="3" width="10" height="10" stroke-width="1" fill="none"/>	</g></g></svg>',LEFT_ALIGN:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>	<g>	<rect x="3" y="3" width="10" height="0.5"/>	<rect x="3" y="5.5" width="6" height="0.5"/>	<rect x="3" y="8" width="10" height="0.5"/>	<rect x="3" y="10.5" width="6" height="0.5"/>	<rect x="3" y="13" width="10" height="0.5"/>	</g></g></svg>',CENTER_ALIGN:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>	<g>	<rect x="3" y="3" width="10" height="0.5"/>	<rect x="6" y="5.5" width="4" height="0.5"/>	<rect x="3" y="8" width="10" height="0.5"/>	<rect x="6" y="10.5" width="4" height="0.5"/>	<rect x="3" y="13" width="10" height="0.5"/>	</g></g></svg>',RIGHT_ALIGN:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g>	<g>	<rect x="3" y="3" width="10" height="0.5"/>	<rect x="6" y="5.5" width="7" height="0.5"/>	<rect x="3" y="8" width="10" height="0.5"/>	<rect x="6" y="10.5" width="7" height="0.5"/>	<rect x="3" y="13" width="10" height="0.5"/>	</g></g></svg>',MASK_BLACK:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g class="layer">  <g id="svg_1">   <g id="Shape_1_copy">    <g id="svg_2">     <path id="svg_3" d="m15.564,18.261c-0.75,-0.927 -3.047,-1.236 -4.238,0c-1.193,1.236 -0.576,5.106 -2.826,7.065c2.58,0.293 6.314,-1.236 7.064,-2.826c0.752,-1.59 0.752,-3.312 0,-4.239z"/>    </g>   </g>   <image transform="matrix(1,0,0,1,4.5,26.3389) " xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAECAYAAACUY/8YAAAACXBIWXMAAAsSAAALEgHS3X78AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACxJREFUeNpiZGBgSADieAbagIUsQEIBiB1oZMFBJgYaA0aoDxRoZP4DgAADAPOCA6qqNRP1AAAAAElFTkSuQmCC" id="Layer_52_xA0_Image" height="3" width="23"/>   <g id="Rounded_Rectangle_1">    <g id="svg_4">     <path id="svg_5" d="m24.799,4.295l-2.598,-1.5c-0.479,-0.276 -1.09,-0.112 -1.367,0.366l-7,11.855c-0.275,0.479 -0.111,1.09 0.367,1.366l2.598,1.5c0.479,0.276 1.09,0.112 1.367,-0.366l6.998,-11.855c0.277,-0.478 0.113,-1.091 -0.365,-1.366z"/>    </g>   </g>  </g> </g></svg>',MASK_WHITE:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_6">   <g id="Shape_1_copy_3_">    <g id="svg_7">     <path id="svg_8" d="m15.564,18.261c-0.75,-0.927 -3.047,-1.236 -4.238,0c-1.193,1.236 -0.576,5.106 -2.826,7.065c2.58,0.293 6.314,-1.236 7.064,-2.826c0.752,-1.59 0.752,-3.312 0,-4.239z" stroke-miterlimit="10" stroke="#000000" fill="none"/>    </g>   </g>   <g id="Rounded_Rectangle_1_3_">    <g id="svg_9">     <path id="svg_10" d="m24.799,4.295l-2.598,-1.5c-0.479,-0.276 -1.09,-0.112 -1.367,0.366l-7,11.855c-0.275,0.479 -0.111,1.09 0.367,1.366l2.598,1.5c0.479,0.276 1.09,0.112 1.367,-0.366l6.998,-11.855c0.277,-0.478 0.113,-1.09 -0.365,-1.366z" stroke-miterlimit="10" stroke="#000000" fill="none"/>    </g>   </g>   <rect id="svg_11" height="3" width="23" stroke-miterlimit="10" stroke="#000000" fill="none" y="26.339" x="4.5"/>  </g> </g></svg>',MASK_BOLD:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="Shape_3">   <g id="svg_12">    <path id="svg_13" d="m14.601,10.668c-0.299,0.251 -3.682,3.631 -3.959,3.965c-2.85,3.423 -4.947,9.005 -5.336,12.062c3.127,-0.502 8.723,-2.551 12.123,-5.391c0.238,-0.199 3.674,-3.621 4.014,-4.045c2.678,-3.333 4.758,-8.934 5.252,-11.955c-3.04,0.363 -8.651,2.48 -12.094,5.364z"/>   </g>  </g> </g></svg>',MASK_THIN:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="Shape_3_copy">   <g id="svg_14">    <path id="svg_15" d="m16.016,12.082c-0.301,0.251 -3.682,3.631 -3.961,3.966c-2.848,3.423 -4.969,8.01 -6.75,10.647c2.508,-1.873 7.311,-3.965 10.709,-6.805c0.24,-0.2 3.674,-3.623 4.014,-4.046c2.678,-3.332 4.76,-8.005 6.668,-10.54c-2.665,1.8 -7.239,3.893 -10.68,6.778z"/>   </g>  </g> </g></svg>',MASK_RESET:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="svg_16">   <g id="Shape_2">    <g id="svg_17">     <polygon id="svg_18" points="12.5,9.312 19.5,13.311 19.5,5.313          "/>    </g>   </g>   <path id="svg_19" d="m16,9.687m0,0c4.136,0 7.5,3.364 7.5,7.5c0,4.137 -3.364,7.501 -7.5,7.501s-7.5,-3.364 -7.5,-7.501c0,-2.14 0.901,-4.073 2.343,-5.441l-1.56,-1.276c-1.72,1.72 -2.783,4.095 -2.783,6.718c0,5.247 4.253,9.501 9.5,9.501c5.247,0 9.5,-4.254 9.5,-9.501c0,-5.246 -4.253,-9.5 -9.5,-9.5l0,0"/>  </g> </g></svg>',MASK_OK:'<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <g class="layer">  <g id="Rectangle_2">   <g id="svg_20">    <polygon id="svg_21" points="24.284,8.575 13.681,19.181 7.716,13.217 5.595,15.339 11.56,21.302 11.558,21.304 13.679,23.425 26.405,10.696" clip-rule="evenodd" fill-rule="evenodd"/>   </g>  </g> </g></svg>',};m2soft.ns("m2soft.crownix.Message");m2soft.crownix.Message.log=(function(){return function(a){if(!!window.console&&!!(window.console.log)){window.console.log(a)}}})();m2soft.crownix.Message.error=(function(){return function(a){if(!!window.console&&!!(window.console.error)){window.console.error(a)}}})();m2soft.crownix.Message.progress=(function(){var a="data:image/gif;base64,R0lGODlhIAAgAPMAAN7e3lxcXMHBwZ+fn7m5uaqqqnd3d4eHh8nJydDQ0Lu7u2tra11dXQAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHRLYKhKP1oZmADdEAAAh+QQACgABACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY/CZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB+A4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6+Ho7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq+B6QDtuetcaBPnW6+O7wDHpIiK9SaVK5GgV543tzjgGcghAgAh+QQACgACACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK++G+w48edZPK+M6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkEAAoAAwAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE+G+cD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm+FNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk+aV+oJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkEAAoABAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0/VNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAAKAAUALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc+XiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAAKAAYALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30/iI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE/jiuL04RGEBgwWhShRgQExHBAAh+QQACgAHACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR+ipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAAKAAgALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAAKAAkALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY+Yip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd+MFCN6HAAIKgNggY0KtEBAAh+QQACgAKACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1+vsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d+jYUqfAhhykOFwJWiAAAIfkEAAoACwAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg+ygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0+bm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h+Kr0SJ8MFihpNbx+4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX+BP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA==";var b='<div class="ers_progress"><div class="content"></div><img src="'+a+'"/></div>';return{show:function(d,c,e){c=c||"Loading";if($(d).find(".ers_progress").length>0){return}$(b).find(".content").text(c).end().appendTo(d).overlayMessageBox({load:true,closeOnClick:false,closeOnEsc:false,fixed:false,scrollArrangeDisable:true,mask:{color:"#000",loadSpeed:200,opacity:0.2,maskId:"progress_mask",viewer_id:d},onClose:function(){$("#progress_mask").remove();$(".ers_progress").remove()},top:"center",oneInstance:false}).fadeIn(100,e)},hide:function(c){if($(c).find(".ers_progress").overlayMessageBox().close){$(c).find(".ers_progress").overlayMessageBox().close()}$(c).find(".ers_progress").remove();$(c).find("#progress_mask").remove()}}})();m2soft.ns("m2soft.crownix.Dialog");m2soft.crownix.Dialog=(function(){var d=m2soft.crownix.Resource;var h="data:image/gif;base64,R0lGODlhEAAQAPIAAGdnZ////4qKitbW1v///8PDw7CwsKenpyH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQACgABACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkEAAoAAgAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkEAAoAAwAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkEAAoABAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQACgAFACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQACgAGACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAAKAAcALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==";var b;var a;var e;var c;var g;var f;f=function(j){b=$("#"+j);a=$('<div class="crownix-dialog-message-pagenum"><img src="'+h+'" /><span></span></div>');$('<div class="crownix-dialog-message">').append(a).appendTo(b)};f.prototype={constructor:m2soft.crownix.Dialog,message:function(q,m,w,o){var k=$('<div class="crownix-dialog-message">').css("right","15px").appendTo(b);var s=$('<div class="crownix-dialog-message-text"><span>'+q+"</span>").appendTo(k);var u=m2soft.crownix.Util;if(!(u.browser.msie&&u.browser.version==7)){s.prepend('<img src="'+h+'" />')}if(o!==undefined){var r={top:"15px"};var n={left:0};var t={top:"calc(100% + "+(-$(".crownix-dialog-message-text").outerHeight()-15)+"px)"};var j={left:"calc(50% + "+(-$(".crownix-dialog-message-text").outerWidth()/2-parseInt($(".crownix-dialog-message-text").css("margin-left"),10))+"px)"};var l={top:"calc(50% + "+(-$(".crownix-dialog-message-text").outerHeight()/2)+"px)"};switch(o.toLowerCase()){case"top-left":case"left-top":k.css(r).css(n);break;case"top":k.css(r).css(j);break;case"top-right":case"right-top":k.css(r);break;case"left":k.css(l).css(n);break;case"center":k.css(l).css(j);break;case"right":k.css(l);break;case"bottom-left":case"left-bottom":k.css(t).css(n);break;case"bottom":k.css(t).css(j);break;case"bottom-right":case"right-bottom":k.css(t);break}}if(w===true){k.wrap($('<div class="crownix-overlay-absolute">'));k=$(".crownix-overlay-absolute")}if(typeof m==="number"){setTimeout(function(){k.fadeOut(500,function(){k.remove()})},m)}return k},pagenum:function(k,j,l){a.css("display","inline-block").find("span").text(k+" / "+j);if(l===true){a.find("img").css("display","inline-block")}else{if(l===false){a.find("img").css("display","none")}}clearTimeout(e);e=setTimeout(function(){a.css("display","none")},3000)},show:function(m,l,o){if(b.find(".crownix-dialog-outer").length>0){return}var j={confirm:false,verify:false,input:"text",textOk:d.get("ok_button_text"),textCancel:d.get("cancel_button_text"),textYes:"Yes",textNo:"No",textAlign:"",title:""};if(l){for(var k in j){if(typeof l[k]=="undefined"){l[k]=j[k]}}}b.parent().append('<div class="crownix-dialog-overlay" id="aOverlay"></div>');$(".crownix-dialog-overlay").css("height","100%").css("width","100%").fadeIn(100);b.append('<div class="crownix-dialog-outer"></div>');$(".crownix-dialog-outer").append('<div class="crownix-dialog-inner"></div>');if(l&&l.title){$('<div class="crownix-dialog-title">').css({"font-weight":"bold","text-align":"center"}).text(l.title).appendTo(".crownix-dialog-inner");$(".crownix-dialog-inner").css("font-weight","inherit")}if(l&&l.textAlign){$(".crownix-dialog-inner").css("text-align",l.textAlign).append(m)}else{$(".crownix-dialog-inner").append(m)}$(".crownix-dialog-outer").css({left:"50%",top:"50%","margin-left":"-125px","margin-top":"-100px"}).fadeIn(200);if(l){if(l.input){if(typeof(l.input)=="string"){$(".crownix-dialog-inner").append('<div class="aInput"><input type="'+l.input+'" class="aTextbox" min="1" t="aTextbox" /></div>')}else{$(".crownix-dialog-inner").append('<div class="aInput"><input type="text" class="aTextbox" t="aTextbox" /></div>')}$(".aTextbox").focus()}}$(".crownix-dialog-inner").append('<div class="aButtons"></div>');if(l){if(l.confirm||l.input){$(".aButtons").append('<button value="ok">'+l.textOk+"</button>");$(".aButtons").append('<button value="cancel">'+l.textCancel+"</button>")}else{if(l.verify){$(".aButtons").append('<button value="ok">'+l.textYes+"</button>");$(".aButtons").append('<button value="cancel">'+l.textNo+"</button>")}else{$(".aButtons").append('<button value="ok">'+l.textOk+"</button>")}}}else{$(".aButtons").append('<button value="ok">OK</button>')}$(".crownix-dialog-outer").keydown(function(q){if($(".crownix-dialog-overlay").is(":visible")){if(q.keyCode==13){$('.aButtons > button[value="ok"]').click()}if(q.keyCode==27){$('.aButtons > button[value="cancel"]').click()}}});var n=$(".aTextbox").val();$(".aTextbox").bind("keyup mouseup",function(){n=$(this).val()});$(".aButtons > button").click(function(){$(".crownix-dialog-overlay").remove();$(".crownix-dialog-outer").remove();if(o){var q=$(this).attr("value");if(q=="ok"){if(l){if(l.input){o(n)}else{o(true)}}else{o(true)}}else{if(q=="cancel"){o(false)}}}})}};return f}());m2soft.ns("m2soft.crownix.Window");m2soft.crownix.Window=(function(){var k=m2soft.crownix.Constant;var d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAYAAABk1z2tAAACYUlEQVRIS73VTYhSURQH8KfoPGxQC/xaRVQEQjjoSqJ2IeRHGKMuBANdZJtACFRa5CoVpYUwi9yJuQiS8CuRaOFiwkAEZ2WrKKRNJiTjB09F5pzFlcc0E933oLf03XvP7/3vvUcJI+Kx2+2BZrP5+rwl3G73Rblc/mo2m8Vg3HchpSRCJuEcKF5kWfbBZrN5v1qtHlcqld/8tRAnk8k+m83mG91ud7Zer283Go0j2nqCgIgzmUz3wuGwplAocL1e7ytAbxEk4qRS6aHL5bpis9l2O50OUyqVpkKQ1ECn0/nSaDQGI5HIJZIGH4m/Ic5isVwPBoMsGVMsFhmADmu12mWaFIUA92BrP/j9fq3Vat3Or1ari3a7/QNSWgHuKh/3XxPEr4cU9+B8HQYCgV0+EiGDwWAZCoV2SEpicLgGdYKk8HlI/vaJxYkCkiTP2m58NxwOmXQ6fQxbfkfI7SUfKjhBsgDeaJ1O50skEtsLQYCZTIZbLpePAFikuRj8saKAiNNoNPuxWOwCPH8YMEWxSMHAs3Dz+Zyp1+sc9D+WgMfjMZPL5Y4nk8lBuVx+RpukIKDP54upVKrn/OQQl0wmfwHoi16vt0Sj0W2q+A6SnI9Go3fQzAM0SGqgw+G4r1Ao3qZSqR2SEsEB4CmeN0xXq9Xu85H9fp/J5/MzOJM3W63Wt39FUgPxb0wikXyCZnwN+h17GkcKezyeF2q1+kk8HlfiNmez2Z8cx9lobzQ1kAC8Xu8bg8Fgn06nHEnudCrQKx8qlcoDaDXcYrG4S4sT3QdxK6H4x7+1EURCoSMhOASeAFNOWCDr6tFoAAAAAElFTkSuQmCC";var f=30;var j="New Window";var m;var h=false;var c;var l;var e;var q;var g;var o;var a={"box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-webkit-box-sizing":"border-box",};var b;var n=function(s,r,t){if(typeof s==="string"){j=s}content_=r;if(typeof t==="boolean"){isOverlay=t}this.footerHeight=0};n.prototype={constructor:m2soft.crownix.Window,show:function(r,u){r=r||{};var t=r.parent||"body";var s=r.css;if(isOverlay){g=$("<div>").addClass("crownix-overlay").css({"z-index":k.WINDOW_OVERLAY_Z_INDEX,}).prependTo(t);if(t!=="body"){g.css("position","absolute")}t=g}c=$('<div id="crownix-window-frame">').addClass("crownix-window-frame").css({display:"none","z-index":k.WINDOW_Z_INDEX,"margin-left":window.pageXOffset,"margin-top":window.pageYOffset,}).prependTo(t);l=$("<div>").addClass("crownix-window-header").css(a).appendTo(c);$("<span>").addClass("crownix-window-title").text(j).appendTo(l);$("<span>").addClass("crownix-window-close").bind("click",this.close).append($("<img>").attr("src",d)).appendTo(l);e=$("<div>").addClass("crownix-window-body").css(a).css({width:"100%",}).appendTo(c);if(s){c.css(s)}var w=this;b=function(){e.css({height:(c.height()-f-w.footerHeight-6)+"px",});var y=t=="body"?$(window).width():$(t).width();var x=t=="body"?$(window).height():$(t).height();c.css({left:(y-c.width())/2+"px",top:(x-c.height())/2+"px",});if(r.setVerticalAlign){r.setVerticalAlign()}};setTimeout(b,0);$(window).on("resize",b);if(content_){content_.css(a).appendTo(e)}c.fadeIn(500,function(){if(typeof u=="function"){u()}})},close:function(){$(window).off("resize",b);if(c){c.fadeOut(500,function(){c.remove()})}if(isOverlay){g.fadeOut(500,function(){g.remove()})}},setFooterHeight:function(r){this.footerHeight=r},setOrientation:function(t,s){var r=t?{"max-width":"450px","max-height":"520px"}:{"max-width":"700px","max-height":"380px"};c.css(r);s();b()}};return n}());m2soft.ns("m2soft.crownix.DateParser");(function(){var g={en:{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:"AM",pm:"PM",},ko:{dayNames:["일요일","월요일","화요일","수요일","목요일","금요일","토요일","일","월","화","수","목","금","토"],monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월","1","2","3","4","5","6","7","8","9","10","11","12"],am:"오전",pm:"오후",},ja:{dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日","日","月","火","水","木","金","土"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月","1","2","3","4","5","6","7","8","9","10","11","12"],am:"午前",pm:"午後",},"zh-CN":{dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","周日","周一","周二","周三","周四","周五","周六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],am:"上午",pm:"下午",},};function e(k){return(k<0||k>9?"":"0")+k}function f(m,n,k){var l=c(m,n,k);if(l==0){return false}return true}function b(q,r,n,o,k){var m=c(r,q,k);var l=c(o,n,k);if(m==0||l==0){return -1}else{if(m>l){return 1}}return 0}function j(R,U,O){if(O==null){O="ko"}R=R+"";var w="";var G=0;var T="";var q="";var u=U.getYear()+"";var r=U.getMonth()+1;var S=U.getDate();var z=U.getDay();var x=U.getHours();var J=U.getMinutes();var B=U.getSeconds();var D,F,n,C,V,o,Q,P,L,A,X,x,W,t,l,N;var I=new Object();if(u.length<4){u=""+(u-0+1900)}I.y=""+u;I.yyyy=u;I.yy=u.substring(2,4);I.M=r;I.MM=e(r);I.MMMM=g[O].monthNames[r-1];I.MMM=g[O].monthNames[r+11];I.d=S;I.dd=e(S);I.dddd=g[O].dayNames[z];I.ddd=g[O].dayNames[z+7];I.H=x;I.HH=e(x);if(x==0){I.h=12}else{if(x>12){I.h=x-12}else{I.h=x}}I.hh=e(I.h);if(x>11){I.K=x-12}else{I.K=x}I.k=x+1;I.KK=e(I.K);I.kk=e(I.k);if(x>11){I.tt=g[O].pm;I.t=g[O].pm}else{I.tt=g[O].am;I.t=g[O].am}I.m=J;I.mm=e(J);I.s=B;I.ss=e(B);while(G<R.length){T=R.charAt(G);q="";while((R.charAt(G)==T)&&(G<R.length)){q+=R.charAt(G++)}if(I[q]!=null){w=w+I[q]}else{w=w+q}}return w}function h(m){var l="1234567890";for(var k=0;k<m.length;k++){if(l.indexOf(m.charAt(k))==-1){return false}}return true}function d(q,n,o,m){for(var k=m;k>=o;k--){var l=q.substring(n,n+k);if(l.length<o){return null}if(h(l)){return l}}return null}function c(D,L,B,l){if(typeof l==="undefined"){l=new Date()}if(typeof B==="undefined"){B="ko"}L=L+"";D=D+"";var K=0;var u=0;var G="";var o="";var J="";var r,q;var s=l.getFullYear();var I=l.getMonth()+1;var H=1;var m=l.getHours();var E=l.getMinutes();var A=l.getSeconds();var t="";while(u<D.length){G=D.charAt(u);o="";while((D.charAt(u)==G)&&(u<D.length)){o+=D.charAt(u++)}if(o=="yyyy"||o=="yy"){if(o=="yyyy"){r=4;q=4}if(o=="yy"){r=2;q=2}s=d(L,K,r,q);if(s==null){return 0}K+=s.length;if(s.length==2){if(s>70){s=1900+(s-0)}else{s=2000+(s-0)}}}else{if(o=="MMM"||o=="MMMM"){I=0;for(var C=0;C<g[B].monthNames.length;C++){var n=g[B].monthNames[C];if(L.substring(K,K+n.length).toLowerCase()==n.toLowerCase()){if((o=="MMM"&&C>11)||o=="MMMM"){I=C+1;if(I>12){I-=12}K+=n.length;break}}}if((I<1)||(I>12)){return 0}}else{if(o=="dddd"||o=="ddd"){for(var C=0;C<g[B].dayNames.length;C++){var z=g[B].dayNames[C];if(L.substring(K,K+z.length).toLowerCase()==z.toLowerCase()){K+=z.length;break}}}else{if(o=="MM"||o=="M"){I=d(L,K,o.length,2);if(I==null||(I<1)||(I>12)){return 0}K+=I.length}else{if(o=="dd"||o=="d"){H=d(L,K,o.length,2);if(H==null||(H<1)||(H>31)){return 0}K+=H.length}else{if(o=="hh"||o=="h"){m=d(L,K,o.length,2);if(m==null||(m<1)||(m>12)){return 0}K+=m.length}else{if(o=="HH"||o=="H"){m=d(L,K,o.length,2);if(m==null||(m<0)||(m>23)){return 0}K+=m.length}else{if(o=="mm"||o=="m"){E=d(L,K,o.length,2);if(E==null||(E<0)||(E>59)){return 0}K+=E.length}else{if(o=="ss"||o=="s"){A=d(L,K,o.length,2);if(A==null||(A<0)||(A>59)){return 0}K+=A.length}else{if(o=="tt"||o=="t"){var w=g[B].am;var F=g[B].pm;if(L.substring(K,K+w.length).toLowerCase()==w.toLowerCase()){t="AM";K+=w.length}else{if(L.substring(K,K+F.length).toLowerCase()==F.toLowerCase()){t="PM";K+=F.length}else{return 0}}}else{if(L.substring(K,K+o.length)!=o){return 0}else{K+=o.length}}}}}}}}}}}}if(K!=L.length){return 0}if(I==2){if(((s%4==0)&&(s%100!=0))||(s%400==0)){if(H>29){return 0}}else{if(H>28){return 0}}}if((I==4)||(I==6)||(I==9)||(I==11)){if(H>30){return 0}}if(m<12&&t=="PM"){m=m-0+12}else{if(m>11&&t=="AM"){m-=12}}var k=new Date(s,I-1,H,m,E,A);return k.getTime()}function a(s){var q=(arguments.length==2)?arguments[1]:false;generalFormats=new Array("y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d");monthFirst=new Array("M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d");dateFirst=new Array("d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M");var m=new Array("generalFormats",q?"dateFirst":"monthFirst",q?"monthFirst":"dateFirst");var r=null;for(var o=0;o<m.length;o++){var k=window[m[o]];for(var n=0;n<k.length;n++){r=c(s,k[n]);if(r!=0){return new Date(r)}}}return null}m2soft.crownix.DateParser.formatDate=j;m2soft.crownix.DateParser.getDateFromFormat=c;m2soft.crownix.DateParser.isDate=f}());m2soft.ns("m2soft.crownix.Util");m2soft.ns("m2soft.crownix.Map");m2soft.crownix.Util={hasTouch:function(){return("ontouchstart" in window)},isSupportSVG:function(){return(!!(window.SVGAngle)||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))},isSupportWebCrypto:function(){return !!(window.crypto&&window.crypto.subtle&&atob&&btoa&&Uint8Array)},base64:{toArray:function(e){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var a=/[^A-Za-z0-9\+\/\=]/g;if(a.exec(e)){alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.")}e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var b=[];var d=0;do{var j=c.indexOf(e.charAt(d++));var h=c.indexOf(e.charAt(d++));var g=c.indexOf(e.charAt(d++));var f=c.indexOf(e.charAt(d++));b.push((j<<2)|(h>>4));if(g!=64){b.push(((h&15)<<4)|(g>>2))}if(f!=64){b.push(((g&3)<<6)|f)}}while(d<e.length);return b},decode:function(b){var d=this.toArray(b);var a="";for(var c=0;c<d.length;c++){a+=String.fromCharCode(d[c])}return unescape(a)},utf8Decode:function(a){var h=this.toArray(a);var e="";var f=[];var b=0;for(var d=0;d<h.length;d++){var g=h[d];if(b==0){if((g&128)==0){b=1}else{if((g&224)==192){b=2}else{if((g&240)==224){b=3}else{b=1}}}}b--;f.push(g);if(b==0){switch(f.length){case 0:break;case 1:e+=String.fromCharCode(f[0]);break;case 2:e+=String.fromCharCode((f[0]&31)<<6|(f[1]&63));break;case 3:e+=String.fromCharCode((f[0]&15)<<12|(f[1]&63)<<6|(f[2]&63));break}f=[]}}return unescape(e)}},getUrlVars:function(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d},getUrlVar:function(a){return decodeURIComponent(m2soft.crownix.Util.getUrlVars()[a])},isArray:function(a){return a&&typeof a==="object"&&typeof a.length==="number"&&typeof a.splice==="function"&&!(a.propertyIsEnumerable("length"))},changeScrollbar:function(a,e,d,c,b){$(".iScrollHorizontalScrollbar").css({height:a});$(".iScrollVerticalScrollbar").css({width:e});$(".iScrollHorizontalScrollbar .iScrollIndicator, .iScrollVerticalScrollbar .iScrollIndicator").css({background:d,"border-radius":c+"px"});$("#crownix-note-pen-attribute, #crownix-note-toolbar").css({bottom:b})},escapeXmlEntities:function(b){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return b.replace(/[&<>"'\/]/g,function(c){return a[c]})}};m2soft.crownix.Util.browser=(function(){var u=navigator.userAgent,m=navigator.standalone,l=true,e=/edge/i.test(u),r=/(msie|trident)/i.test(u),q=/chrome|crios/i.test(u),g=/phantom/i.test(u),h=/safari/i.test(u)&&!q&&!g,b=/iphone/i.test(u),k=/ipad/i.test(u),n=/touchpad/i.test(u),A=/android/i.test(u),w=/opera/i.test(u)||/opr/i.test(u),f=/firefox/i.test(u),j=/gecko\//i.test(u),d=/seamonkey\//i.test(u),y=/version\/(\d+(\.\d+)?)/i,c=/firefox\/(\d+(\.\d+)?)/i,s,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(u);function x(){if(j){s={name:"Gecko",gecko:l,mozilla:l,version:u.match(c)[1],mobile:A||b||k};if(f){s.name="Firefox";s.firefox=l}return s}if(e){return{name:"Edge",edge:u.match(/edge/i)?u.match(/edge\/(\d+(\.\d+)?)/i)[1]:undefined}}if(r){return{name:"Internet Explorer",msie:l,version:u.match(/(msie |rv:)(\d+(\.\d+)?)/i)[2],trident:u.match(/trident/i)?u.match(/trident\/(\d+(\.\d+)?)/i)[2]:undefined}}if(w){return{name:"Opera",opera:l,webkit:u.match(/AppleWebKit/i),version:u.match(y)?u.match(y)[1]:u.match(/opr\/(\d+(\.\d+)?)/i)[1],mobile:A||b||k}}if(A){return{name:"Android",webkit:l,android:l,mobile:l,version:u.match(/Android\s([0-9\.]*)/)[1],chrome:q?{name:"Chrome",webkit:l,version:u.match(/(?:chrome|crios)\/(\d+(\.\d+)?)/i)[1]}:undefined}}if(b||k){s={name:b?"iPhone":"iPad",webkit:l,mobile:l,ios:l,iphone:b,ipad:k,uiwebview:(l&&!m&&!h)};if(y.test(u)){s.version=u.match(y)[1]}return s}if(q){return{name:"Chrome",webkit:l,chrome:l,version:u.match(/(?:chrome|crios)\/(\d+(\.\d+)?)/i)[1]}}if(g){return{name:"PhantomJS",webkit:l,phantom:l,version:u.match(/phantomjs\/(\d+(\.\d+)+)/i)[1]}}if(n){return{name:"TouchPad",webkit:l,touchpad:l,version:u.match(/touchpad\/(\d+(\.\d+)?)/i)[1]}}if(h){return{name:"Safari",webkit:l,safari:l,version:u.match(y)[1]}}if(d){return{name:"SeaMonkey",seamonkey:l,version:u.match(/seamonkey\/(\d+(\.\d+)?)/i)[1]}}return{}}var z=x();if((z.msie&&z.version>=8)||(z.chrome&&z.version>=10)||(z.firefox&&z.version>=4)||(z.safari&&z.version>=5)||(z.opera&&z.version>=10)){z.a=l}else{if((z.msie&&z.version<8)||(z.chrome&&z.version<10)||(z.firefox&&z.version<4)||(z.safari&&z.version<5)||(z.opera&&z.version<10)){z.c=l}else{z.x=l}}return z})();m2soft.crownix.Util.os=(function(){var b=navigator.userAgent;function a(){if(b.indexOf("NT 7.0")!=-1){return{name:"Windows 7",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("NT 6.0")!=-1){return{name:"Windows Vista/Server 2008",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("NT 5.2")!=-1){return{name:"Windows Server 2003",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("NT 5.1")!=-1||b.indexOf("XP")!=-1){return{name:"Windows XP",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("NT 5.0")!=-1||b.indexOf("2000")!=-1){return{name:"Windows 2000",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("NT")!=-1){return{name:"Windows NT",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("9x 4.90")!=-1||b.indexOf("ME")!=-1){return{name:"Windows Me",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("98")!=-1){return{name:"Windows 98",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("95")!=-1){return{name:"Windows 95",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("Win16")!=-1){return{name:"Windows 3.x",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("Windows")!=-1){return{name:"Windows",windows:true,openbsd:false,sunos:false,linux:false,macos:false}}else{if(b.indexOf("OpenBSD")!=-1){return{name:"Open BSD",windows:false,openbsd:true,sunos:false,linux:false,macos:false}}else{if(b.indexOf("SunOS")!=-1){return{name:"Sun OS",windows:false,openbsd:false,sunos:true,linux:false,macos:false}}else{if(b.indexOf("Linux")!=-1||b.indexOf("X11")!=-1){return{name:"Linux",windows:false,openbsd:false,sunos:false,linux:true,macos:false}}else{if(b.indexOf("Macintosh")!=-1||b.indexOf("Mac_PowerPC")!=-1){return{name:"Mac OS",windows:false,openbsd:false,sunos:false,linux:false,macos:true}}else{if(b.indexOf("iPhone")!=-1||b.indexOf("iPad")!=-1){return{name:"iOS",majorVersion:b.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],windows:false,openbsd:false,sunos:false,linux:false,macos:false}}else{return""}}}}}}}}}}}}}}}}}return a()})();m2soft.crownix.Util.getAcrobatInfo=function(){var e=function(f){try{return new ActiveXObject(f)}catch(g){}};var b=function(f){for(key in navigator.plugins){var g=navigator.plugins[key];if(g.name==f){return g}}};var c=function(){return this.plugin=this.plugin||function(){if(m2soft.crownix.Util.browser.msie){return e("AcroPDF.PDF")||e("PDF.PdfCtrl")}else{return b("Adobe Acrobat")||b("Chrome PDF Viewer")||b("WebKit built-in PDF")}}()};var d=function(){return !!c()};var a=function(){try{var h=c();if(m2soft.crownix.Util.browser.msie){var f=h.GetVersions().split(",");var g=f[0].split("=");return parseFloat(g[1])}if(h.version){return parseInt(h.version)}return h.name}catch(j){return null}};return{isInstalled:d(),version:a()}};m2soft.crownix.Util.formatPageNumber=function(d,c,b){var a=function(j,h){var g=j.split("");var f=false;for(var e=0;e<g.length;e++){if(f||h.length-1>=e&&(h[h.length-1-e]=="＃"||h[h.length-1-e]=="＄")){if(h.length-1==e){f=true}g[g.length-1-e]=String.fromCharCode(j.charCodeAt(g.length-1-e)+65248)}}return g.join("")};d=d.replace(/(#|＃)+/g,function(f){var e=f;var h=e.length-1;var g=b.toString();while(g.length<f.length){g="0"+g}g=a(g,e);return g});d=d.replace(/(\$|＄)+/g,function(f){var e=f;var h=e.length-1;var g=c.toString();while(g.length<f.length){g="0"+g}g=a(g,e);return g});return d};m2soft.crownix.Map=function(){var a=new Object();this.put=function(b,c){a[b]=c};this.get=function(b){return a[b]};this.containsKey=function(b){return b in a};this.containsValue=function(b){for(var c in a){if(a[c]==b){return true}}return false};this.isEmpty=function(b){return(size()==0)};this.clear=function(){for(var b in a){delete a[b]}};this.remove=function(b){delete a[b]};this.keys=function(){var b=new Array();for(var c in a){b.push(c)}return b};this.values=function(){var b=new Array();for(var c in a){b.push(a[c])}return b};this.size=function(){var b=0;for(var c in a){b++}return b};this.toString=function(){var b=[];for(var c in a){b.push(c+"="+a[c])}return b.join("\n")}};$.extend({objectSize:function(c){var b=0;for(var a in c){if(c.hasOwnProperty(a)){b++}}return b}});(function(c){c.crownixtools=c.crownixtools||{version:"@VERSION"};c.crownixtools.overlay={addEffect:function(e,f,g){b[e]=[f,g]},conf:{position:"absolute",close:null,closeOnClick:true,closeOnEsc:true,closeSpeed:"fast",effect:"default",fixed:!m2soft.crownix.Util.browser.msie||m2soft.crownix.Util.browser.version>6,left:"center",load:false,mask:null,oneInstance:true,speed:"normal",target:null,top:"10%"}};var d=[],b={};c.crownixtools.overlay.addEffect("default",function(h,g){var f=this.getConf(),e=c(window);if(!f.fixed&&f.position!="relative"&&!f.scrollArrangeDisable){h.top+=e.scrollTop();h.left+=e.scrollLeft()}h.position=f.fixed?"fixed":f.position;this.getOverlay().css(h).fadeIn(f.speed,g)},function(e){this.getOverlay().fadeOut(this.getConf().closeSpeed,e)});function a(h,n){var q=this,f=h.add(q),o=c(n.mask.viewer_id==document?window:(n.mask.viewer_id)),l,k,j,e=c.crownixtools.expose&&(n.mask||n.expose),m=Math.random().toString().slice(10);if(e){if(typeof e=="string"){e={color:e}}e.closeOnClick=e.closeOnEsc=false}var g=n.target||h.attr("rel");k=g?c(g):null||h;if(!k.length){throw"Could not find Overlay: "+g}if(h&&h.index(k)==-1){h.click(function(r){q.load(r);return r.preventDefault()})}c.extend(q,{load:function(x){if(q.isOpened()){return q}var t=b[n.effect];if(!t){throw'Overlay: cannot find effect : "'+n.effect+'"'}if(n.oneInstance){c.each(d,function(){this.close(x)})}x=x||c.Event();x.type="onBeforeLoad";f.trigger(x);if(x.isDefaultPrevented()){return q}j=true;if(e){c(k).expose(e)}var w=n.top,u=n.left,r=k.outerWidth({margin:true}),s=k.outerHeight({margin:true});if(typeof w=="string"){w=w=="center"?Math.max((o.height()-s)/2,0):parseInt(w,10)/100*o.height()}if(u=="center"){u=Math.max((o.width()-r)/2,0)}t[0].call(q,{top:w,left:u},function(){if(j){x.type="onLoad";f.trigger(x)}});if(e&&n.closeOnClick){c.mask.getMask().one("click",q.close)}if(n.closeOnClick){c(document).on("click."+m,function(y){if(!c(y.target).parents(k).length){q.close(y)}})}if(n.closeOnEsc){c(document).on("keydown."+m,function(y){if(y.keyCode==27){q.close(y)}})}return q},close:function(r){if(!q.isOpened()){return q}r=r||c.Event();r.type="onBeforeClose";f.trigger(r);if(r.isDefaultPrevented()){return}j=false;b[n.effect][1].call(q,function(){r.type="onClose";f.trigger(r)});c(document).off("click."+m+" keydown."+m);if(e){c.mask.close(e)}return q},getOverlay:function(){return k},getTrigger:function(){return h},getClosers:function(){return l},isOpened:function(){return j},getConf:function(){return n}});c.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(s,r){if(c.isFunction(n[r])){c(q).on(r,n[r])}q[r]=function(t){if(t){c(q).on(r,t)}return q}});l=k.find(n.close||".close");if(!l.length&&!n.close){l=c('<a class="close"></a>');k.prepend(l)}l.click(function(r){q.close(r)});if(n.load){q.load()}}c.fn.overlayMessageBox=function(e){var f=this.data("overlay");if(f){return f}if(c.isFunction(e)){e={onBeforeLoad:e}}e=c.extend(true,{},c.crownixtools.overlay.conf,e);this.each(function(){f=new a(c(this),e);d.push(f);c(this).data("overlay",f)});return e.api?f:this}})(jQuery);(function(b){b.crownixtools=b.crownixtools||{version:"@VERSION"};var e;e=b.crownixtools.expose={conf:{viewer_id:document,maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:true,closeOnEsc:true,zIndex:9998,opacity:0.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};function f(m){if(m2soft.crownix.Util.browser.msie){var l=b(m).height(),k=b(window).height();return[b(m).width()||window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l-k<20?k:l]}return[b(m).width(),b(m).height()]}function h(k){if(k){return k.call(b.mask)}}var j={},d,c={},a,g;b.mask={load:function(k,m){if(typeof k=="string"){k={color:k}}k=k||a;a=k=b.extend(b.extend({},e.conf),k);if(c[k.maskId]){return this}j[k.maskId]=b("#"+k.maskId);if(!j[k.maskId].length){j[k.maskId]=b("<div/>").attr("id",k.maskId);b("body").append(j[k.maskId]);b(k.viewer_id==document?"body":(k.viewer_id)).append(j[k.maskId])}var l=f(k.viewer_id==document?document:(k.viewer_id));j[k.maskId].css({position:"absolute",top:0,left:0,width:l[0],height:l[1],display:"none",opacity:k.startOpacity,zIndex:k.zIndex});if(k.color){j[k.maskId].css("backgroundColor",k.color)}if(h(k.onBeforeLoad)===false){return this}if(k.closeOnEsc){b(document).on("keydown.mask",function(n){if(n.keyCode==27){b.mask.close(n)}})}if(k.closeOnClick){j[k.maskId].on("click.mask",function(n){b.mask.close(n)})}b(window).on("resize.mask",function(){b.mask.fit()});if(m&&m.length){g=m.css("z-index");b.each(m,function(){var n=b(this);if(!/relative|absolute|fixed/i.test(n.css("position"))){n.css("position","relative")}});d=m.css({zIndex:Math.max(k.zIndex+1,g=="auto"?0:g)})}j[k.maskId].css({display:"block"}).fadeTo(k.loadSpeed,k.opacity,function(){b.mask.fit();h(k.onLoad);c[k.maskId]=false});c[k.maskId]=true;return this},close:function(k){if(c[k.maskId]){if(h(a.onBeforeClose)===false){return this}j[k.maskId].fadeOut(a.closeSpeed,function(){h(a.onClose);if(d){}c[k.maskId]=false});b(document).off("keydown.mask");j[k.maskId].off("click.mask");b(window).off("resize.mask")}return this},fit:function(){var k=b.extend(b.extend({},e.conf),a);if(c[k.maskId]){var l=f(k.viewer_id==document?document:k.viewer_id);j[k.maskId].css({width:l[0],height:l[1]})}},getMask:function(){var k=b.extend(b.extend({},e.conf),a);return j[k.maskId]},isLoaded:function(k){var l=b.extend(b.extend({},e.conf),a);return k?c[l.maskId]=="full":c[l.maskId]},getConf:function(){return a},getExposed:function(){return d}};b.fn.mask=function(k){b.mask.load(k);return this};b.fn.expose=function(k){b.mask.load(k,this);return this}})(jQuery);m2soft.ns("m2soft.crownix.Util.StopWatch");m2soft.crownix.Util.StopWatch=function(){var c=0,a=0,b=0,d=0;this.start=function(){c=a=Date.now();b=d=0};this.stop=function(){var e=Date.now();b=e-c;d=e-a};this.lab=function(){var e=Date.now();d=e-a;b=e-c;a=e};this.getElapsedTimeMillis=function(){return b};this.getLabTimeMillis=function(){return d};this.toString=function(){return"elapsedTime="+b}};m2soft.ns("m2soft.crownix.util.Unit");m2soft.crownix.util.Unit={dpi:undefined,detectDPI:function(){if(this.dpi===undefined){var a=$("<div>").css({width:"1in",height:"1in",display:"none"}).appendTo("body");this.dpi=a.width();a.remove();if(window.console){console.log("[Crownix Viewer] detect "+this.dpi+" device DPI.")}}},inToPx:function(a){this.detectDPI();return a*this.dpi},pxToIn:function(a){this.detectDPI();return a/this.dpi},ptToPx:function(a){this.detectDPI();return a/72*this.dpi},pxToPt:function(a){this.detectDPI();return a/this.dpi*72}};m2soft.ns("m2soft.crownix.util.Converter");m2soft.crownix.util.Converter={xml2json:function(b,a){var c=new X2JS(a);return c.xml_str2json(b)},json2xml:function(b,a){var c=new X2JS(a);return c.json2xml_str(b)}};m2soft.ns("m2soft.crownix.util.SingleTone");m2soft.crownix.util.SingleTone=function(a){var b;var d=function(){if(b===undefined){var f=function(){};f.prototype=a.prototype;var e=new f();var c=a.apply(e,Array.prototype.slice.call(arguments));b=(typeof c==="object")?c:e}return b};d.getInstance=function(){return d.apply(null,Array.prototype.slice.call(arguments))};d.dispose=function(){b=undefined};return d};m2soft.ns("m2soft.crownix.util.DateUtil");m2soft.crownix.util.DateUtil.convertDateFormat=function(c,b,e){var d=m2soft.crownix.DateParser.getDateFromFormat(b,c);if(d===0){return""}var a=new Date(d);return m2soft.crownix.DateParser.formatDate(e,a)};m2soft.crownix.Util.deserialize=function(a){var j={};if(!a){return j}var e=a.split("&");for(var c=0,d=e.length;c<d;c++){var b=e[c];var g=b.indexOf("=");if(g!=-1){var h=decodeURI(b.substring(0,g));var f=decodeURI(b.substring(g+1));j[h]=f}}return j};m2soft.crownix.Util.ASCENDING_COMPARATOR=function(a,b){if(a<b){return -1}else{if(a>b){return 1}else{return 0}}};m2soft.crownix.Util.DESCENDING_COMPARATOR=function(a,b){if(a>b){return -1}else{if(a<b){return 1}else{return 0}}};m2soft.ns("m2soft.crownix.Layout");(function(){var u=m2soft.crownix.Layout;var g=m2soft.crownix.Util;var l=g.browser.msie&&g.browser.version<9;var q={toolbarColor:"#777777",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#D0D0D0",pageBorderColor:"#E0E0E0"};var x={toolbarColor:"#E0E0E0",toolbarIconColor:"#4D4D4D",toolbarEffectColor:"#333333",containerColor:"#F0F0F0",pageBorderColor:"#E0E0E0"};var c={toolbarColor:"#141414",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#F5F5F5",containerColor:"#3F3F3F",pageBorderColor:"#2F2F2F"};var n={toolbarColor:"#185C91",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#6D88B7",pageBorderColor:"#7F7F7F"};var t={toolbarColor:"#E17E4C",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#B8886F",pageBorderColor:"#7F7F7F"};var f={toolbarColor:"#48B7A7",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#6FB8AD",pageBorderColor:"#7F7F7F"};var a={toolbarColor:"#D26A8B",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#B86F87",pageBorderColor:"#7F7F7F"};var e={toolbarColor:"#76BB51",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#8AB86F",pageBorderColor:"#7F7F7F"};var d={toolbarColor:"#4AABD7",toolbarIconColor:"#FFFFFF",toolbarEffectColor:"#FFFFFF",containerColor:"#6FA1B8",pageBorderColor:"#7F7F7F"};var w=function(z,A){var y=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z);if(y===null){throw Error("[Crownix Viewer] Invalid Color Value("+z+")")}if(typeof A!=="number"){A=0}return[parseInt(y[1],16)+A,parseInt(y[2],16)+A,parseInt(y[3],16)+A]};var r=function(z){for(var A=0,y=z.length;A<y;A++){if(z[A]<0){z[A]=0}if(z[A]>255){z[A]=255}}return"#"+z[0].toString(16)+z[1].toString(16)+z[2].toString(16)};var m=function(y,z){if(typeof z==="number"){return"rgba("+y.join(",")+","+z+")"}else{return"rgb("+y.join(",")+")"}};var j=function(z){var B=z[0],A=z[1],y=z[2];return Math.sqrt(B*B*0.241+A*A*0.691+y*y*0.068)};var s=["background: %TOP_COLOR%;","background: -moz-linear-gradient(top, %TOP_COLOR% 0%, %BOTTOM_COLOR% 100%);","background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,%TOP_COLOR%), color-stop(100%,%BOTTOM_COLOR%));","background: -webkit-linear-gradient(top, %TOP_COLOR% 0%,%BOTTOM_COLOR% 100%);","background: -o-linear-gradient(top, %TOP_COLOR% 0%,%BOTTOM_COLOR% 100%);","background: -ms-linear-gradient(top, %TOP_COLOR% 0%,%BOTTOM_COLOR% 100%);","background: linear-gradient(to bottom, %TOP_COLOR% 0%,%BOTTOM_COLOR% 100%);",'filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="%IE9_TOP_COLOR%", endColorstr="%IE9_BOTTOM_COLOR%",GradientType=0 );'];var k=["border: 1px solid %BORDER_COLOR% !important;","box-shadow: inset 0 0 7px %SHADOW_COLOR%;"];var b=['content: "";',"width: 0;","height: 0;","position: absolute;","right: 5px;","top: 50%;","margin-top: -3px;","border-width: 9px 6px 0 6px;","border-style: solid;","border-color: %BORDER_COLOR% transparent;"];var o=["border: 1px solid %BORDER_COLOR%;","box-shadow: 2px 2px 5px %SHADOW_COLOR%;"];var h=function(C){var B=[],A,z,y;C=$.extend({},q,C);B.push('<style class="crownix-theme" type="text/css">');if(C.toolbarColor){z=w(C.toolbarColor);y=w(C.toolbarColor,20);B.push(".crownix-toolbar-gradient {");B.push(s.join("\n").replace(/%TOP_COLOR%/g,m(z)).replace(/%BOTTOM_COLOR%/g,m(y)).replace(/%IE9_TOP_COLOR%/g,C.toolbarColor).replace(/%IE9_BOTTOM_COLOR%/g,r(y)));B.push("}");if(l&&j(w(C.toolbarColor))>210){B.push(".crownix-toolbar-icon-filter {filter: invert(1)}");B.push(".crownix-toobar-dropitem-enable:after {");B.push(b.join("\n").replace(/%BORDER_COLOR%/g,"#212F3C"));B.push("}")}}if(C.containerColor){z=w(C.containerColor,40);y=w(C.containerColor);B.push(".crownix-container-gradient {");B.push(s.join("\n").replace(/%TOP_COLOR%/g,m(z)).replace(/%BOTTOM_COLOR%/g,m(y)).replace(/%IE9_TOP_COLOR%/g,r(z)).replace(/%IE9_BOTTOM_COLOR%/g,C.containerColor));B.push("}")}if(C.toolbarIconColor&&!l){B.push(".crownix-toobar-dropitem-enable:after {");B.push(b.join("\n").replace(/%BORDER_COLOR%/g,C.toolbarIconColor));B.push("}");B.push(".crownix-toolbar-icon-color {");B.push("color: "+C.toolbarIconColor+";");B.push("stroke: "+C.toolbarIconColor+";");B.push("fill: "+C.toolbarIconColor+";");B.push("}");B.push(".crownix-toolbar-icon-border {");B.push("border: 1px solid "+m(w(C.toolbarIconColor),0.3)+";");B.push("}");B.push(".crownix-toolbar-icon-svg {");B.push("stroke: "+C.toolbarIconColor+";");B.push("fill: "+C.toolbarIconColor+";");B.push("}")}if(C.toolbarEffectColor&&!l){A=k.join("\n").replace(/%BORDER_COLOR%/g,m(w(C.toolbarEffectColor),0.8)).replace(/%SHADOW_COLOR%/g,m(w(C.toolbarEffectColor),0.8));B.push(".crownix-toolbar-item-enable:hover {");B.push(A);B.push("}");B.push(".crownix-toobar-dropitem-enable:hover {");B.push(A);B.push("}");A=k.join("\n").replace(/%BORDER_COLOR%/g,m(w(C.toolbarEffectColor),0.5)).replace(/%SHADOW_COLOR%/g,m(w(C.toolbarEffectColor),0.3));B.push(".crownix-toolbar-item-enable:active {");B.push(A);B.push("}");B.push(".crownix-toobar-dropitem-enable:active {");B.push(A);B.push("}")}if(C.pageBorderColor){B.push(".crownix-page {");B.push(o.join("\n").replace(/%BORDER_COLOR%/g,m(w(C.pageBorderColor))).replace(/%SHADOW_COLOR%/g,m(w(C.pageBorderColor,-50))));B.push("}")}B.push("</style>");$(".crownix-theme").remove();$(B.join("\n")).appendTo("head")};u.setTheme=function(y){if(typeof y==="string"){y=y.toUpperCase()}if(y==="GRAY"){h(q)}else{if(y==="WHITE"){h(x)}else{if(y==="BLACK"){h(c)}else{if(y==="BLUE"){h(n)}else{if(y==="ORANGE"){h(t)}else{if(y==="MINT"){h(f)}else{if(y==="PINK"){h(a)}else{if(y==="GREEN"){h(e)}else{if(y==="SKYBLUE"){h(d)}else{if(typeof y==="object"){h(y)}}}}}}}}}}}})();m2soft.ns("m2soft.crownix.License");m2soft.crownix.License=(function(){var b=m2soft.crownix.Util;var a=function(){this.feature={}};a.prototype.init=function(d){var c=this;$(b.base64.decode(d)).filter("feature").find("item").each(function(){var e=$(this);c.feature[e.attr("type")]=e.attr("allow")==="1"});$(b.base64.decode(d)).filter("server").find("item").each(function(){var e=$(this);if(e.attr("type")=="ShareServer(7)"&&e.attr("allow")==="1"){c.feature.ShareServer=true}})};a.prototype.isAllowedFeature=function(c){return this.feature[c]};return a})();m2soft.ns("m2soft.crownix.Toolbar");m2soft.crownix.Toolbar=(function(){var e=m2soft.crownix.Resource;var d=m2soft.crownix.resource.Icon;var f=m2soft.crownix.Util;var q;var t;var x;var k;var g;var c;var s;var b;var j;var y=1;var o=false;var u=function(){var z=45;c.children().each(function(){if($(this).is(":visible")){z+=$(this).outerWidth()+5}});c.css("width",z+"px")};var w=function(){if(j.x===0){s.hide()}else{s.show()}if(j.x===j.maxScrollX){b.hide()}else{b.show()}};var h=function(A){var z=t.find("#crownix-toolbar-"+A);if(q[A].type==="item"){z.removeClass("crownix-toolbar-item-disable").addClass("crownix-toolbar-item-enable");if(q[A].handler){z.off().on("click tab",q[A].handler)}}else{if(q[A].type==="drop-item"){z.removeClass("crownix-toobar-dropitem-disable").addClass("crownix-toobar-dropitem-enable")}}};var r=function(A){var z=t.find("#crownix-toolbar-"+A);if(q[A].type==="item"){z.removeClass("crownix-toolbar-item-enable").addClass("crownix-toolbar-item-disable").off()}else{if(q[A].type==="drop-item"){z.removeClass("crownix-toobar-dropitem-enable").addClass("crownix-toobar-dropitem-disable")}}};var n=function(C,B){var A=$("<button>").attr({type:"button",title:B.title}).addClass("crownix-toolbar-button");var z=$("<li>").attr({id:"crownix-toolbar-"+C,title:B.title}).addClass("crownix-toolbar-item").bind("click tab",B.handler);if(B.svg){$(B.svg).attr("class","crownix-toolbar-icon-svg").attr("focusable","false").appendTo(A)}else{if(B.img){$("<img>").attr("src",B.img).appendTo(A)}else{if(B.text){$("<div>").text(B.text).addClass("crownix-toolbar-icon-color").appendTo(A)}}}A.appendTo(z);return z};var m=function(A,H){var D=$("<li>").attr("id","crownix-toolbar-"+A).addClass("crownix-toobar-dropitem").addClass("crownix-toolbar-icon-border").attr("title",H.title);if(!f.browser.safari){D.addClass("crownix-toolbar-button-zindex")}D.bind("click tab",function(I){$('.crownix-toobar-dropitem[id!="'+$(this).attr("id")+'"]').removeClass("active");$(this).toggleClass("active");return false});if(H.text){var E=$("<div>").addClass("crownix-toolbar-icon-color").appendTo(D);$("<button>").attr({type:"button",title:H.title}).addClass("crownix-toolbar-button").appendTo(E)}if(H.svg){var C=$("<button>").attr({type:"button",title:H.title}).addClass("crownix-toolbar-button").appendTo(D);$(H.svg).attr("class","crownix-toolbar-icon-svg").attr("focusable","false").appendTo(C)}else{if(H.img){var C=$("<button>").attr({type:"button",title:H.title}).addClass("crownix-toolbar-button").appendTo(D);$("<img/>").attr("src",H.img).appendTo(C)}}var G=$("<ul>").addClass("dropdown").appendTo(D);for(var F in H.items){var B=H.items[F];var z=$("<li>").attr("id",("crownix-toolbar-"+F)).bind("click tab",B.handler).appendTo(G);var C=$("<button>").attr({type:"button",title:B.title}).addClass("crownix-toolbar-button").appendTo(z);if(B.text){C.text(B.text);C.attr("title",B.text)}if(B.svg){$(B.svg).prependTo(C)}else{if(B.img){$("<img/>").attr("src",B.img).prependTo(C)}}if(B.visible!==true){z.css("display","none")}}return D};var a=function(A){q={close:{type:"item",svg:d.CLOSE_OVERLAY,title:e.get("close_overlay"),visible:false,handler:function(){$(".crownix-close-button").click()},separator:true,},first:{type:"item",svg:d.FIRST_PAGE,title:e.get("first_page"),visible:true,handler:function(){k.moveFirstPage()},},prev:{type:"item",svg:d.PREV_PAGE,title:e.get("pre_page"),visible:true,handler:function(F){k.prevPage()},},next:{type:"item",svg:d.NEXT_PAGE,title:e.get("next_page"),visible:true,handler:function(){k.nextPage()},},last:{type:"item",svg:d.LAST_PAGE,title:e.get("last_page"),visible:true,handler:function(){k.moveLastPage()},separator:true,},move:{type:"item",svg:d.MOVE_PAGE,title:e.get("move_page"),visible:true,handler:function(){k.showMovePageDialog()},separator:true,},prevDoc:{type:"item",svg:d.PREV_DOC,title:e.get("prev_doc"),visible:false,handler:function(){k.prevDoc()},},nextDoc:{type:"item",svg:d.NEXT_DOC,title:e.get("next_doc"),visible:false,handler:function(){k.nextDoc()},separator:true,},zoomin:{type:"item",svg:d.ZOOM_IN,title:e.get("zoom_in"),visible:true,handler:function(){var F=k.zoomIn();$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(F*100)+"%")},},zoomout:{type:"item",svg:d.ZOOM_OUT,title:e.get("zoom_out"),visible:true,handler:function(){var F=k.zoomOut();$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(F*100)+"%")},},ratio:{type:"drop-item",text:"100%",title:e.get("ratio"),visible:true,items:{"25":{type:"item",text:"25%",visible:true,handler:function(){var F=k.zoom(0.25);$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},},"50":{type:"item",text:"50%",visible:true,handler:function(){var F=k.zoom(0.5);$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},},"75":{type:"item",text:"75%",visible:true,handler:function(){var F=k.zoom(0.75);$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},},"100":{type:"item",text:"100%",visible:true,handler:function(){var F=k.zoom(1);$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},},"125":{type:"item",text:"125%",visible:true,handler:function(){var F=k.zoom(1.25);$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},},"150":{type:"item",text:"150%",visible:true,handler:function(){var F=k.zoom(1.5);$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},},"200":{type:"item",text:"200%",visible:true,handler:function(){var F=k.zoom(2);$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},},"250":{type:"item",text:"250%",visible:true,handler:function(){var F=k.zoom(2.5);$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},},width:{type:"item",text:e.get("fit_width"),visible:true,handler:function(){var F=g.getWidthFitRatio();k.zoom(F);setTimeout(function(){$("#crownix-toolbar #crownix-toolbar-ratio div button").html($(d.FIT_WIDTH).attr("focusable","false"));$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},0)},},height:{type:"item",text:e.get("fit_height"),visible:true,handler:function(){var F=g.getHeightFitRatio();k.zoom(F);setTimeout(function(){$("#crownix-toolbar #crownix-toolbar-ratio div button").html($(d.FIT_HEIGHT).attr("focusable","false"));$("#crownix-toolbar #crownix-toolbar-ratio div button").focus()},0)},}},separator:true,},save:{type:"drop-item",svg:d.SAVE,title:e.get("save"),visible:true,items:{pdf:{type:"item",text:"PDF",title:e.get("save_pdf"),svg:d.PDF,visible:true,handler:function(){k.downloadFile("pdf")},},doc:{type:"item",text:"DOC",title:e.get("save_word"),svg:d.DOC,visible:true,handler:function(){k.downloadFile("doc")},},xls:{type:"item",text:"XLS",title:e.get("save_excel"),svg:d.XLS,visible:true,handler:function(){k.downloadFile("xls")},},ppt:{type:"item",text:"PPT",title:e.get("save_ppt"),svg:d.PPT,visible:true,handler:function(){k.downloadFile("ppt")},},hwp:{type:"item",text:"HWP",title:e.get("save_hwp"),svg:d.HWP,visible:true,handler:function(){k.downloadFile("hwp")},},txt:{type:"item",text:"TXT",title:e.get("save_txt"),svg:d.TXT,visible:false,handler:function(){k.downloadFile("txt")}}},},storage:{type:"drop-item",svg:d.STORAGE,title:e.get("storage_report"),visible:false,items:{"storage-mml":{type:"item",text:e.get("storage_report"),title:e.get("storage_report"),visible:true,handler:function(){k.showMMLStorageDialog()},},"storage-formdata":{type:"item",text:e.get("storage_formdata"),title:e.get("storage_formdata"),visible:false,handler:function(){k.showFormDataStorageDialog()},}},separator:true,},print:{type:"item",svg:d.PRINT,title:e.get("print"),visible:f.browser.edge?true:false,handler:function(){k.print({isServerSide:false,})},},print_pdf:{type:"item",svg:d.PRINT_PDF,title:e.get("print_pdf"),visible:f.browser.edge?false:true,handler:function(){k.print({isServerSide:true,})},separator:true,},inquery:{type:"item",svg:d.INQUERY,title:e.get("inquery"),visible:true,handler:function(){k.showInqueryDialog()},separator:true,},cancel:{type:"item",svg:d.CANCEL,title:e.get("cancel_report"),visible:true,handler:function(){k.cancel()},},share:{type:"item",svg:d.SHARE_CONNECT,title:e.get("do_share"),visible:true,handler:function(){k.showShareDialog()},},};var D;var B;x=$("<div>").addClass("crownix-toolbar-warp").appendTo(A);y=g.scale;if(isNaN(y)){y=1}else{if(y<0.5){y=0.5}else{if(y>2){y=2}}}y!=1&&x.css("zoom",y);t=$("<div>").attr("id","crownix-toolbar").addClass("crownix-toolbar-gradient").appendTo(x);c=$("<ul>").attr("id","#crownix-toolbar-menu").appendTo(t);for(var E in q){D=q[E];if(D.type==="item"){B=n(E,D)}else{if(D.type==="drop-item"){B=m(E,D)}}if(D.visible!==true){B.css("display","none")}B.appendTo(c);if(D.separator===true){$("<div>").addClass("crownix-toolbar-separator").css({display:D.visible?"block":"none",}).appendTo(c)}}var C=$(d.LEFT_ITEM_MARK).attr("class","crownix-toolbar-icon-svg");s=$("<span>").addClass("crownix-toolbar-mark").addClass("crownix-toolbar-gradient").css({left:"0px",}).append(C).appendTo(x);var z=$(d.RIGHT_ITEM_MARK).attr("class","crownix-toolbar-icon-svg");b=$("<span>").addClass("crownix-toolbar-mark").addClass("crownix-toolbar-gradient").css({right:"0px",}).append(z).appendTo(x);u();j=new IScroll("#crownix-toolbar",{useTransition:true,scrollX:true,interactiveScrollbars:true,click:f.browser.mobile,disableMouse:true,});j.on("refresh",function(){w()});j.on("scrollEnd",function(){w()});w();s.bind("click",function(){var F=j.x+t.width()*2/3;if(F>0){j.scrollTo(0,0,1000)}else{j.scrollTo(F,0,1000)}});b.bind("click",function(){var F=j.x-t.width()*2/3;if(F<j.maxScrollX){j.scrollTo(j.maxScrollX,0,1000)}else{j.scrollTo(F,0,1000)}});if(f.browser.mobile){l.prototype.hideToolbarItem(["print","print_pdf"])}$(A).bind("click tab",function(F){$(".crownix-toobar-dropitem").removeClass("active")})};var l=function(z,B,A){k=B;g=A;a(z)};l.prototype={hideToolbar:function(){x.css("display","none");o=true},showToolbar:function(){x.css("display","block");u();o=false},isHideToolbar:function(){return o},hideToolbarItem:function(B){for(var A=0,z=B.length;A<z;A++){t.find("#crownix-toolbar-"+B[A]).css("display","none")}t.find(".crownix-toolbar-separator").each(function(){var D=$(this);var E=D.prevAll().filter(":visible");var C=D.nextAll().filter(":visible");if(E.length==0||C.length==0||$(E[0]).attr("class").indexOf("crownix-toolbar-separator")>=0||$(C[0]).attr("class").indexOf("crownix-toolbar-separator")>=0){$(this).css("display","none")}});u();j.refresh();w()},showToolbarItem:function(B){for(var A=0,z=B.length;A<z;A++){t.find("#crownix-toolbar-"+B[A]).css("display","list-item")}t.find(".crownix-toolbar-separator").each(function(){var D=$(this);var E=D.prevAll().filter(":visible");var C=D.nextAll().filter(":visible");if(E.length!=0&&C.length!=0&&$(E[0]).attr("class").indexOf("crownix-toolbar-separator")<0&&$(C[0]).attr("class").indexOf("crownix-toolbar-separator")<0){$(this).css("display","block")}});u();j.refresh();w()},addToolbarItem:function(B){var C=t.find("#crownix-toolbar-"+B.id);if(C.length>0){throw Error("[Crownix Viewer] could not add item (duplicate id: "+B.id+")")}var A=n(B.id,B).addClass("crownix-toolbar-item-enable");var z=$(c.children("li:visible"));if(B.index<0){c.prepend(A)}else{if(isNaN(B.index)||B.index>z.length){c.append(A)}else{$(z.get(B.index-1)).before(A)}}if(B.separator===true){A.after($("<div>").addClass("crownix-toolbar-separator"))}u();j.refresh();w()},disableToolbarItem:function(B){for(var A=0,z=B.length;A<z;A++){q[B[A]]&&r(B[A])}},enableToolbarItem:function(B){for(var A=0,z=B.length;A<z;A++){q[B[A]]&&h(B[A])}},disableAllItems:function(){for(var z in q){r(z)}},toggleShareButton:function(C){var B=q.share;var z=$("#crownix-toolbar-share");var A=$('button[title="'+B.title+'"]');z.off("click tab",B.handler);A.children().remove();if(C){z.attr("title",e.get("do_disconnect"));A.attr("title",e.get("do_disconnect"));B.title=e.get("do_disconnect");B.svg=d.SHARE_DISCONNECT;B.handler=function(){k.shareDisconnect()}}else{z.attr("title",e.get("do_share"));A.attr("title",e.get("do_share"));B.title=e.get("do_share");B.svg=d.SHARE_CONNECT;B.handler=function(){k.showShareDialog()}}z.bind("click tab",B.handler);$(B.svg).attr("class","crownix-toolbar-icon-svg").attr("focusable","false").css("display","none").appendTo(A).fadeIn(500)},getHeight:function(){return t.outerHeight()*y},};return l})();m2soft.ns("m2soft.crownix.Ajax");m2soft.crownix.Ajax=function(){var o=m2soft.crownix.Util;var n=m2soft.crownix.Message;var k=m2soft.crownix.Resource;var f=o.browser.msie&&o.browser.version==8;var e=o.browser.msie&&o.browser.version==9;var l=f?new XDomainRequest():new XMLHttpRequest();var d="POST";var m=true;var j={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"};var c;var q=30*1000;var h;var g=false;var b=m2soft.crownix.Ajax.debug;if("withCredentials" in l&&m2soft.crownix.Ajax.withCredentials){l.withCredentials=true}var a=function(r){if((window.FormData&&(r instanceof window.FormData))){return r}var s=[];for(var t in r){s.push(encodeURIComponent(t)+"="+encodeURIComponent(r[t]))}return s.join("&")};this.setHandler=function(r){c=r};this.invoke=function(s,w){if(typeof s!="string"){throw new Error("invalid url: "+s)}if(typeof w=="object"){w=a(w)}g=false;if(b){n.log("[Ajax] url="+s);n.log("[Ajax] parmeters="+w);n.log("[Ajax] method="+d);n.log("[Ajax] async="+m)}if(f){l.onload=function(){c.done(l)}}else{var r=null;var u=300;l.onreadystatechange=function(){var B=l.readyState;var y;var C;var A;if(B===1){if(b){n.log("[Ajax][State 1] OPEND")}if(!h){h=setTimeout(function(){g=true;l.abort("connect timeout");if(typeof c.timeout=="function"){c.timeout("connet timeout")}},q)}}else{if(B===2){clearTimeout(h);if(b){n.log("[Ajax][State 2] HEADER_RECEIVED")}}else{if(B===3){clearTimeout(h);if(b){if(o.browser.msie&&o.browser.version<10){n.log("[Ajax][State 3] LOADING")}else{n.log("[Ajax][State 3] LOADING (status: "+l.status+", statusText: "+l.statusText+")")}}if(typeof c.load=="function"){var z=o.browser.msie&&o.browser.version<10;if(z){return}if(!r){r=setTimeout(function(){c.load(l);clearTimeout(r);r=null},u)}}}else{if(B===4){clearTimeout(h);clearTimeout(r);if(g){return}y=l.status;C=l.statusText;A=l.responseText;if(b){n.log("[Ajax][State 4] DONE (status: "+y+", statusText: "+C+", data length: "+A.length+")")}if(y>=200&&y<300||y===304){if(typeof c.done=="function"){c.done(l)}}else{if(!g){c.error(l)}}}}}}}}try{l.open(d,(d==="GET")?(s+"?"+w):s,m)}catch(x){n.log("[Crownix][Ajax] "+x.toString());if(e){c.error(l,k.get("cross_origin_ie9_error"))}else{c.error(l)}return}if(!f){for(var t in j){if(t==="Content-Type"&&j[t]===null){continue}l.setRequestHeader(t,j[t])}}l.send((d==="GET")?null:w)};this.setMethod=function(r){if(r==="GET"||r==="POST"){d=r}};this.getMethod=function(){return d};this.setAsync=function(r){if(typeof sync=="boolean"){m=r}};this.getAsync=function(){return m};this.abort=function(){g=true;if(typeof c.abort=="function"){c.abort()}l.abort()};this.getResponseHeader=function(){return l.getResponseHeader()};this.setRequestHeader=function(r,s){j[r]=s};this.setConnectTimeout=function(r){q=r*1000}};m2soft.ns("m2soft.crownix.Font");m2soft.crownix.Font=(function(){var c="arial,'URW Gothic L',sans-serif";var b="Georgia,'Century Schoolbook L',serif";var f="";var g=function(n){var l=navigator.userAgent.toLowerCase();var m=l.indexOf("android")>-1;var k=!m?'local("'+n+'"),':"";var j='url("'+f+n+'.woff") format("woff"), url("'+f+n+'.ttf") format("truetype")';return k+j};var e=function(j,l){var m=$("<style/>").attr("type","text/css").attr("id",j);var k="@font-face {font-family:'"+j+"';src:"+g(l)+"}";if($("#"+j).length==0){m.text(k);m.appendTo("head")}};var d=function(j,l){var k="BEiwyaY";var m={position:"absolute",top:"-999px",left:"-999px","font-size":"300px",width:"auto",height:"auto","line-height":"normal",margin:0,padding:0,"font-variant":"normal","font-family":"'"+j+"',"+l};var n=$("<span>").text(k).css(m).appendTo("body");return n};var a=function(){return(new Date()).getTime()};var h=function(j,k){this.fontFamily=h.FONT_FAMILY_PREFIX+j;this.fontName=k;this.fontId=j;this.requestedFontA=d(this.fontFamily,c);this.requestedFontB=d(this.fontFamily,b);this.originalSizeA=this.requestedFontA.width();this.originalSizeB=this.requestedFontB.width()};h.FONT_FAMILY_PREFIX="crownix-font-";h.prototype={fontFamily:"",fontName:"",fontId:"",originalSizeA:0,originalSizeB:0,requestedFontA:null,requestedFontB:null,load:function(){e(this.fontFamily,this.fontName);this.check()},finish:function(j){clearInterval(j)},setFontURL:function(j){f=j},check:function(){var o=0;var l=this;var n=a();var k=l.requestedFontA.width();var j=l.requestedFontB.width();if(k==j){this.finish(null);return}var m=setInterval(function(){var r=l.requestedFontA.width();var q=l.requestedFontB.width();if((r!=l.originalSizeA||q!=l.originalSizeB)&&(r==q)){l.finish(m)}else{if((a()-n)>=5000){l.finish(m)}}},75)}};return h})();m2soft.ns("m2soft.crownix.ImageLoader");m2soft.crownix.ImageLoader=function(){var h=m2soft.crownix.Util;var a=[];var f;var d=0;var c=false;var b=function(){if(c){return}for(var k=0,j=a.length;k<j;k++){if(!a[k].isLoaded()){return}}c=true;f()};var e=function(j){var k;var l=j;this.load=function(){k=new Image();k.onload=b;k.onabort=b;k.onerror=b;k.src=l};this.getImage=function(){return k};this.isLoaded=function(){if(h.browser.msie){return k}else{return k&&k.complete}}};var g=function(k){var j=k;this.load=function(){j.complete&&b();j.onload=b;j.onabort=b;j.onerror=b};this.getImage=function(){return j};this.isLoaded=function(){return j.complete}};this.loadImage=function(n,l,k){f=k;n.find("IM").each(function(){var q;var r=$(this);var o=r.attr("id");if(o){q=new g(l[o])}else{q=new e(r.attr("dt"))}a.push(q)});for(var m=0,j=a.length;m<j;m++){a[m].load()}if(a.length==0){f()}};this.nextImage=function(){return a[d++].getImage()}};m2soft.ns("m2soft.crownix.Canvas");m2soft.crownix.Canvas=function(d,k){var z=m2soft.crownix.util.Unit;var c=d;var b=c.getContext("2d");var t=k;var q=(typeof b.setLineDash==="function");var w=0;var s=1;var r=2;var n=3;var l=4;var B=[2,2];var o=[2,2];var m=[10,2,2,2];var e=[10,2,2,2,2,2];var y={pattern1:function(C,D){img=document.createElement("canvas");img.width=1;img.height=8;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,3,10);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(0,-0.5);imgCtx.lineTo(0,0.5);imgCtx.stroke();return b.createPattern(img,"repeat")},pattern2:function(C,D){img=document.createElement("canvas");img.width=8;img.height=1;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,10,3);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(-0.5,0);imgCtx.lineTo(0.5,0);imgCtx.stroke();return b.createPattern(img,"repeat")},pattern3:function(C,D){img=document.createElement("canvas");img.width=8;img.height=8;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,10,10);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(4.5,-0.5);imgCtx.lineTo(-0.5,4.5);imgCtx.moveTo(8.5,3.5);imgCtx.lineTo(3.5,8.5);imgCtx.stroke();return b.createPattern(img,"repeat")},pattern4:function(C,D){img=document.createElement("canvas");img.width=8;img.height=8;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,10,10);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(-0.5,4.5);imgCtx.lineTo(4.5,-0.5);imgCtx.moveTo(3.5,8.5);imgCtx.lineTo(8.5,3.5);imgCtx.stroke();return b.createPattern(img,"repeat")},pattern5:function(C,D){img=document.createElement("canvas");img.width=8;img.height=8;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,10,10);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(0.5,9);imgCtx.lineTo(0.5,0.5);imgCtx.lineTo(9,0.5);imgCtx.stroke();return b.createPattern(img,"repeat")},pattern6:function(C,D){img=document.createElement("canvas");img.width=8;img.height=8;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,10,10);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(-1,-1);imgCtx.lineTo(9,9);imgCtx.moveTo(-1,9);imgCtx.lineTo(9,-1);imgCtx.stroke();return b.createPattern(img,"repeat")},pattern7:function(C,D){img=document.createElement("canvas");img.width=8;img.height=8;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,10,10);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(4.5,-0.5);imgCtx.lineTo(4.5,0.5);imgCtx.stroke();return b.createPattern(img,"repeat")},pattern8:function(C,D){img=document.createElement("canvas");img.width=4;img.height=4;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,6,6);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(0.5,-0.5);imgCtx.lineTo(0.5,0.5);imgCtx.stroke();return b.createPattern(img,"repeat")},pattern9:function(C,D){img=document.createElement("canvas");img.width=4;img.height=2;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,6,4);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(3.5,-0.5);imgCtx.lineTo(3.5,0.5);imgCtx.stroke();return b.createPattern(img,"repeat")},pattern10:function(C,D){img=document.createElement("canvas");img.width=2;img.height=2;imgCtx=img.getContext("2d");imgCtx.fillStyle=D||"#fff";imgCtx.fillRect(-1,-1,4,4);imgCtx.strokeStyle=C||"#000";imgCtx.strokeWidth=1;imgCtx.moveTo(0.5,-0.5);imgCtx.lineTo(0.5,0.5);imgCtx.stroke();return b.createPattern(img,"repeat")}};var g=function(D,C,F,E){b.lineCap="butt";b.beginPath();b.moveTo(D,C);b.lineTo(F,E)};var a=function(I,F,P,O,C,M){var J=I,E=F,N=0,H=true,K=0,D=Math.atan2(O-F,P-I);var L=I<P;var G=F<O;b.lineCap="round";b.beginPath();b.moveTo(I,F);while(L?P>J:P<J||G?O>E:O<E){K=M[N]*C;J=L?Math.min(J+(Math.cos(D)*K),P):Math.max(J+(Math.cos(D)*K),P);E=G?Math.min(E+(Math.sin(D)*K),O):Math.max(E+(Math.sin(D)*K),O);if(H){b.lineTo(J,E)}else{b.moveTo(J,E)}N=(N+1)%M.length;H=!H}b.closePath()};var j=function(E,F){b.beginPath();b.moveTo(E[0][0],E[0][1]);for(var D=1,C=E.length;D<C;D++){b.lineTo(E[D][0],E[D][1])}if(F){b.closePath()}};var f=function(M,K,D,F){var J=F.ap,L=F.lc,G=F.wd,C=F.at,E=F.as,I=(1+G/5)*8*E,H=C==1?I/Math.sqrt(3):I/3;if(G==0||J==0){return}b.save();b.translate(M,K);b.rotate(D);b.lineJoin="miter";b.globalAlpha=1;b.strokeStyle=L;b.lineWidth=G;if(q){b.setLineDash([])}b.beginPath();if(J==1||J==2||J==3){b.moveTo(I,-H);b.lineTo(0,0);b.lineTo(I,H);b.lineCap="round";b.stroke()}else{b.moveTo(0,0);b.lineTo(I,-H);b.lineTo(I,H);b.lineTo(0,0);b.closePath();if(J==4||J==5||J==6){b.fillStyle="#FFFFFF"}else{b.fillStyle=b.strokeStyle}b.fill();b.stroke()}b.restore()};var x=function(E,D){if(!E){return}var G=E.fc;var C=E.pt;var F=E.al;b.save();if(C!==0){b.fillStyle=y["pattern"+C](D.lc,G)}else{b.fillStyle=G}b.globalCompositeOperation="source-over";b.globalAlpha=F;b.fill();b.restore()};var h=function(E){if(!E){return}var J=E.lc;var D=E.wd;var I=E.al;if(D==0){return}var H=[];var G=[];b.save();if(q){if(E.st==s){H=B}else{if(E.st==r){H=o}else{if(E.st==n){H=m}else{if(E.st==l){H=e}}}}for(var F=0,C=H.length;F<C;F++){G[F]=H[F]*D}b.setLineDash(G)}b.lineCap="round";b.lineJoin="round";b.strokeStyle=J;b.lineWidth=D;b.globalAlpha=I;b.stroke();b.restore()};this.setClip=function(C){if(C==="1"){b.save();b.clip()}else{if(C==="2"){b.restore()}}};this.drawLine=function(H,G,E,D,C){if(q){g(H,G,E,D)}else{if(C.st==w){g(H,G,E,D)}else{if(C.st==s){a(H,G,E,D,C.wd,B)}else{if(C.st==r){a(H,G,E,D,C.wd,o)}else{if(C.st==n){a(H,G,E,D,C.wd,m)}else{if(C.st==l){a(H,G,E,D,C.wd,e)}else{g(H,G,E,D)}}}}}}h(C);var F=C.ap;if(F==1||F==3||F==4||F==6||F==7||F==9){f(H,G,Math.atan2(G-D,H-E)+Math.PI,C)}if(F==2||F==3||F==5||F==6||F==8||F==9){f(E,D,Math.atan2(D-G,E-H)+Math.PI,C)}};this.drawScribble=function(E,G){var I,H;var D=[];b.beginPath();b.moveTo(G[0][0],G[0][1]);for(var F=0,C=G.length-1;F<C;F++){I=G[F];H=G[F+1];D[0]=(I[0]+H[0])/2;D[1]=(I[1]+H[1])/2;if(F==0){b.lineTo(D[0],D[1])}else{b.quadraticCurveTo(I[0],I[1],D[0],D[1])}if(F==C-1){b.lineTo(H[0],H[1])}}h(E)};this.drawRect=function(I,H,G,F,E,K,J,C,D){if(typeof J==="number"&&typeof C==="number"){b.beginPath();b.moveTo(I,H+C);b.lineTo(I,F-C);if(D){if(D&4){b.quadraticCurveTo(I,F,I+J,F)}else{b.lineTo(I,F)}b.lineTo(G-J,F);if(D&8){b.quadraticCurveTo(G,F,G,F-C)}else{b.lineTo(G,F)}b.lineTo(G,H+C);if(D&2){b.quadraticCurveTo(G,H,G-J,H)}else{b.lineTo(G,H)}b.lineTo(I+J,H);if(D&1){b.quadraticCurveTo(I,H,I,H+C)}else{b.lineTo(I,H)}}else{b.quadraticCurveTo(I,F,I+J,F);b.lineTo(G-J,F);b.quadraticCurveTo(G,F,G,F-C);b.lineTo(G,H+C);b.quadraticCurveTo(G,H,G-J,H);b.lineTo(I+J,H);b.quadraticCurveTo(I,H,I,H+C)}b.closePath()}else{b.beginPath();b.moveTo(I,H);b.lineTo(G,H);b.lineTo(G,F);b.lineTo(I,F);b.lineTo(I,H);b.closePath()}x(K,E);h(E)};this.drawCylinder=function(K,J,H,F,D,M,I){var E;var C=H-K;var L=F-J;var G=(L-I)/C;b.save();b.translate(K,J);b.scale(1,G);E=C/2;b.beginPath();b.arc(E,E,E,0,Math.PI*2,false);b.lineTo(E*2,(L/G)-E);b.arc(E,(L/G)-E,E,0,Math.PI,false);b.lineTo(0,E);b.restore();x(M,D);h(D)};this.drawCurve=function(K,J,H,F,E,I,D,G,C){b.beginPath();if(typeof G==="number"&&typeof C==="number"){b.moveTo(K,J);b.bezierCurveTo(I,D,G,C,H,F)}else{b.moveTo(K,J);b.quadraticCurveTo(I,D,H,F)}h(E);var L=E.ap;if(L==1||L==3||L==4||L==6||L==7||L==9){f(K,J,Math.atan2(J-D,K-I)+Math.PI,E)}if(L==2||L==3||L==5||L==6||L==8||L==9){f(H,F,Math.atan2(F-C,H-G)+Math.PI,E)}};this.drawEllipse=function(I,H,G,F,D,K){var E;var C=G-I;var J=F-H;b.save();b.translate(I+(C/2),H+(J/2));if(C>J){b.scale(1,J/C);E=C/2}else{b.scale(C/J,1);E=J/2}b.beginPath();b.arc(0,0,E,0,Math.PI*2,false);b.restore();x(K,D);h(D)};this.drawDiamond=function(H,G,E,D,C,F){b.beginPath();b.moveTo((H+E)/2,G);b.lineTo(E,(G+D)/2);b.lineTo((H+E)/2,D);b.lineTo(H,(G+D)/2);b.lineTo((H+E)/2,G);b.closePath();x(F,C);h(C)};this.drawParallelogram=function(K,J,G,E,D,M,C){C=K+C;var L=[K,E];var I=[G+K-C,E];var H=[G,J];var F=[C,J];b.beginPath();b.moveTo(L[0],L[1]);b.lineTo(I[0],I[1]);b.lineTo(H[0],H[1]);b.lineTo(F[0],F[1]);b.lineTo(L[0],L[1]);b.closePath();x(M,D);h(D)};this.drawPolygon=function(C,E,D){j(D,true);x(E,C);h(C)};this.drawPolyLine=function(C,D){j(D,false);h(C);var E=C.ap;if(E==1||E==3||E==4||E==6||E==7||E==9){f(D[0][0],D[0][1],Math.atan2(D[0][1]-D[1][1],D[0][0]-D[1][0])+Math.PI,C)}if(E==2||E==3||E==5||E==6||E==8||E==9){f(D[D.length-1][0],D[D.length-1][1],Math.atan2(D[D.length-1][1]-D[D.length-2][1],D[D.length-1][0]-D[D.length-2][0])+Math.PI,C)}};this.drawHexaheron=function(O,M,J,H,D,C,E,P){D=O+D;C=M+C;var N=[O,H];var L=[O,C];var K=[O+J-D,M];var I=[J,M];var G=[J,H+M-C];var F=[D,H];b.beginPath();b.moveTo(N[0],N[1]);b.lineTo(L[0],L[1]);b.lineTo(K[0],K[1]);b.lineTo(I[0],I[1]);b.lineTo(G[0],G[1]);b.lineTo(F[0],F[1]);b.lineTo(N[0],N[1]);b.closePath();x(P,E);h(E);b.beginPath();b.moveTo(F[0],F[1]);b.lineTo(D,C);b.lineTo(I[0],I[1]);b.moveTo(D,C);b.lineTo(L[0],L[1]);h(E)};this.drawImage=function(H,D,C,E,G,F){if(F=="1"){b.save();b.translate(D,C);b.fillStyle=b.createPattern(H,"repeat");b.fillRect(0,0,E,G);b.restore()}else{if(H.naturalWidth+H.naturalHeight>0){b.drawImage(H,D,C,E,G)}}};this.measureText=function(E,D){if(typeof D==="object"){var C=[D.fontStyle,D.fontWeight,D.fontSize,D.fontFamily];b.font=C.join(" ")}return b.measureText(E)};var u=function(C){return Math.floor(C)+0.5};var A=function(M,J,I,K,C){var D=M.split(""),G,F=J,L=1;if(b.textAlign==="right"){D=D.reverse();L=-1;F-=K}else{if(b.textAlign==="center"){F=J-(C-K)/2;b.textAlign="left"}}for(var E=0,H=D.length;E<H;E++){G=D[E];b.fillText(G,F,I);F+=L*(b.measureText(G).width+K)}};this.drawText=function(P,M,K,I,H,C){if(!P||typeof P!=="string"){return}b.save();if(typeof C==="object"){var F=[C.fontStyle,C.fontWeight,C.fontSize,C.fontFamily];b.font=F.join(" ");b.textBaseline=C.textBaseline;b.textAlign=C.textAlign;b.fillStyle=b.strokeStyle=C.fillStyle}var N=(typeof C.letterSpacing==="number")?C.letterSpacing:0;var D=b.measureText(P).width+(N*P.length);var O=z.ptToPx(parseFloat(C.fontSize));var L,J,G,E;if(C.textAlign==="left"){L=G=M}else{if(C.textAlign==="center"){L=M+(I-M)/2;G=L-(D-N)/2}else{if(C.textAlign==="right"){L=I;G=L-D}}}if(C.textBaseline==="top"){J=E=K}else{if(C.textBaseline==="middle"){J=K+(H-K)/2;E=J-O/2}else{if(C.textBaseline==="bottom"){J=H;E=J-O}}}b.beginPath();b.rect(M-1,K-1,I-M+2,H-K+2);b.clip();if(C.shade){b.fillStyle=b.strokeStyle="#000000";b.fillRect(u(G),u(E),u(D)+1,u(O));b.fillStyle=b.strokeStyle=(C.fillStyle==="#000000")?"#ffffff":C.fillStyle}if(N!==0){A(P,L,J,C.letterSpacing,D)}else{b.fillText(P,L,J)}b.closePath();if(C.underLine){b.beginPath();b.moveTo(G,u(E+O));b.lineTo(G+D,u(E+O));b.stroke();b.closePath()}if(C.lineThrough){b.beginPath();b.moveTo(G,u(E+O/2));b.lineTo(G+D,u(E+O/2));b.stroke();b.closePath()}b.restore()};this.wrapText=function(J,N,K,T,S,R){var H=N,G=K,O=T-N,M=S-K;b.save();if(typeof R==="object"){var L=[R.fontStyle,R.fontWeight,R.fontSize,R.fontFamily];b.font=L.join(" ");b.fillStyle=b.strokeStyle=R.fillStyle}var E=z.ptToPx(parseInt(R.fontSize,10))*1.2;b.textBaseline="top";b.textAlign="left";b.beginPath();b.rect(N-1,K-1,T-N+1,S-K+1);b.clip();b.closePath();var D=J.split("\n");for(var Q=0,C=D.length;Q<C;Q++){var I=D[Q];var P=I.length;var F=0;if(P==0){G+=E;continue}while(F<P){var U=1;while(true){if(F+U>P){break}if(b.measureText(I.substring(F,F+U)).width>O){U--;break}else{U++}}this.drawText(I.substring(F,F+U),H,G,T,S,R);G+=E;F+=U}}b.restore()};this.toDataURL=function(C){return c.toDataURL(C)};this.setOffset=function(C){b.translate(C.x,C.y)};this.clear=function(){b.fillStyle="#FFFFFF";b.fillRect(0,0,c.width,c.height)}};m2soft.ns("m2soft.crownix.ColorPicker");m2soft.crownix.ColorPicker=(function(){var d=m2soft.crownix.Resource;var e;var a;var f;var k;var c={width:2,color:"000000",transparency:0,};var j={width:10,color:"FFFF00",transparency:50,};var g={kind:"pen",attribute:c,};var b=function(){var n=function(){if(k==="pen"){c.width=$("#crownix-note-pen-width-slider").val();c.transparency=$("#crownix-note-pen-transparency-slider").val();c.color=$(".color-selected").attr("id");g.kind=k;g.attribute=c}else{j.width=$("#crownix-note-pen-width-slider").val();j.transparency=$("#crownix-note-pen-transparency-slider").val();j.color=$(".color-selected").attr("id");g.kind=k;g.attribute=j}f(g);$("#crownix-note-pen-attribute").fadeOut();a.fadeOut()};var m=function(){$("#crownix-note-pen-attribute").fadeOut();a.fadeOut()};var q=function(w,y){for(var x=0;x<w.length;x++){$("<div>").addClass("colorPicker-swatch").attr("id",w[x]).attr({style:"background-color: #"+w[x]+";"}).appendTo(y)}};a=$("<div>").addClass("crownix-overlay").css({display:"none",position:"absolute","z-index":9,}).appendTo(e);a[0].addEventListener("touchstart",function(w){w.preventDefault()});var u=$("<div>").attr("id","crownix-note-pen-attribute").css("display","none").addClass("crownix-note-pen-attribute").appendTo(e);var o=$("<div>").attr("id","crownix-note-pen-width").appendTo(u);$("<label>",{"for":"crownix-note-pen-width-slider",text:d.get("pen_size")}).appendTo(o);$("<div>").attr("id","crownix-note-pen-width-slider").addClass("pen-slider").appendTo(o);$("<input>",{type:"number",id:"crownix-note-pen-width-val"}).addClass("slider-value").appendTo(o);var r=$("<div>").attr("id","crownix-note-pen-color").appendTo(u);$("<label>",{"for":"colorPicker_palette",text:d.get("color")}).appendTo(r);var t=$("<div>").attr("id","colorPicker_palette").addClass("colorPicker_palette").appendTo(r);q(["000000","808080","C0C0C0","FFFFFF","FFFF00","00FF00","00FFFF","FF00FF","FF0000","008000","0000FF","000080","800000","808000","008080","800080"],t);var l=$("<div>").attr("id","crownix-note-pen-transparency").appendTo(u);$("<label>",{"for":"crownix-note-pen-transparency-slider",text:d.get("pen_transparency")}).appendTo(l);$("<div>").attr("id","crownix-note-pen-transparency-slider").addClass("pen-slider").appendTo(l);$("<input>",{type:"number",id:"crownix-note-pen-transparency-val"}).addClass("slider-value").appendTo(l);var s=$("<div>").attr("id","crownix-note-pen-button").appendTo(u);$("<button>",{text:d.get("ok_button_text"),value:"ok"}).bind("click",n).appendTo(s);$("<button>",{text:d.get("cancel_button_text"),value:"cancel"}).bind("click",m).appendTo(s);$(".colorPicker-swatch").click(function(){$(".colorPicker-swatch").removeClass("color-selected");$(this).addClass("color-selected")})};var h=function(m,l){e=m;f=l;b()};h.prototype={show:function(o){a.fadeIn();k=o;var n,r,l,m;var s=$("#crownix-note-pen-width-slider");var q=$("#crownix-note-pen-transparency-slider");$("#crownix-note-pen-attribute").fadeIn();if(o==="pen"){n=[1,10];r=c.width;l=c.transparency;m=c.color}else{n=[5,18];r=j.width;l=j.transparency;m=j.color}s.crownixNoUiSlider({range:n,start:r,handles:1,step:1,margin:20,connect:"lower",direction:"rtl",orientation:"vertical",behaviour:"extend-tap",serialization:{to:$("#crownix-note-pen-width-val"),resolution:1,},},true);q.crownixNoUiSlider({range:[0,100],start:l,handles:1,step:1,margin:20,connect:"lower",direction:"rtl",orientation:"vertical",behaviour:"extend-tap",serialization:{to:$("#crownix-note-pen-transparency-val"),resolution:1,},},true);if(o==="pen"){q.removeAttr("disabled");$("#crownix-note-pen-transparency-val").removeAttr("disabled")}else{q.attr("disabled","disabled");$("#crownix-note-pen-transparency-val").attr("disabled","disabled")}$(".colorPicker-swatch").removeClass("color-selected");$("#"+m).addClass("color-selected")},hide:function(){$("#crownix-note-pen-attribute").fadeOut();a.fadeOut()},getPen:function(){return c},getHighlighter:function(){return j},};return h})();m2soft.ns("m2soft.crownix.NoteToolbar");m2soft.crownix.NoteToolbar=(function(){var e=m2soft.crownix.Resource;var a=m2soft.crownix.resource.Icon;var k=m2soft.crownix.Util;var f=m2soft.crownix.ColorPicker;var h;var b;var g=k.hasTouch()?"touchstart mousedown":"click";var l;var c=true;var d=function(C){var A="view_mode";var s="pen";var u="#000000";var w="#FFFF00";h={area:{type:"area",id:"note_area",click:function(H){H.preventDefault();H.stopPropagation();z()},},edit:{type:"mode",svg:a.NORMAL_PEN,id:"edit_mode",click:function(H){H.preventDefault();H.stopPropagation();l.setMode("editable");n(H.data)},},view:{type:"mode",svg:a.VIEW_MODE,id:"view_mode",click:function(H){H.preventDefault();H.stopPropagation();l.setMode("disable");n(H.data)},},hide:{type:"mode",svg:a.HIDE_MODE,id:"hide_mode",click:function(H){H.preventDefault();H.stopPropagation();l.setMode("hide");n(H.data)},},pen:{type:"attr",svg:a.NORMAL_PEN,id:"pen",click:function(H){H.preventDefault();H.stopPropagation();if(y(H.data)){m()}else{E(H.data);B(H.data);l.setTool("scribble")}},},highlighter:{type:"attr",svg:a.HIGHLIGHTER_PEN,id:"highlighter",click:function(H){H.preventDefault();H.stopPropagation();if(y(H.data)){m()}else{E(H.data);B(H.data);l.setTool("scribble")}},},textNote:{type:"attr",svg:a.TEXT,id:"text",click:function(H){H.preventDefault();H.stopPropagation();E(H.data);B(H.data);l.setTool("text")},},eraser:{type:"attr",svg:a.ERASER,id:"eraser",click:function(H){H.preventDefault();H.stopPropagation();E(H.data);B(H.data);l.setTool("eraser")},},eraseAll:{type:"attr",svg:a.ERASE_ALL,id:"eraseAll",click:function(H){H.preventDefault();H.stopPropagation();if(!l.isLock()){l.clear()}},},undo:{type:"attr",svg:a.UNDO,id:"undo",click:function(H){H.preventDefault();H.stopPropagation();if(!l.isLock()){l.undo()}},},redo:{type:"attr",svg:a.REDO,id:"redo",click:function(H){H.preventDefault();H.stopPropagation();if(!l.isLock()){l.redo()}},},};var r=function(H){if(H.kind==="pen"){u="#"+H.attribute.color;$(".crownix-icon-pencolor").css("fill",u)}else{if(H.kind==="highlighter"){w="#"+H.attribute.color;$(".crownix-icon-highlightercolor").css("fill",w)}}l.setShapeAttribute({stroke:"#"+H.attribute.color,"stroke-width":H.attribute.width+"pt","stroke-opacity":(100-H.attribute.transparency)/100,})};var F;var D;var x=new f(C,r);var G;var t;var o;var q=function(){G=$("<ul>").addClass("crownix-note-mode").appendTo(b);t=$("<ul>").addClass("crownix-note-area").appendTo(b);o=$("<ul>").addClass("crownix-note-attr").appendTo(b);for(var H in h){F=h[H];if(F.type==="mode"&&F.id!=="view_mode"){D=$("<li>").attr({id:H}).addClass("crownix-note-icon").addClass("crownix-note-mode-icon").appendTo(G).prepend(F.svg).bind(g,F,F.click)}else{if(F.type==="attr"){D=$("<li>").attr({id:H}).addClass("crownix-note-icon").addClass("crownix-note-attr-icon").appendTo(o).prepend(F.svg).bind(g,F,F.click);if(F.id==="pen"){D.addClass("crownix-icon-select")}}else{if(F.type==="area"){t.addClass("crownix-note-icon").addClass("crownix-note-area-icon").prepend(h.view.svg).bind(g,F,F.click)}}}}};var z=function(){if(c){c=false;$(".crownix-note-mode").fadeIn(400);setTimeout(function(){if(A!=="edit_mode"){c=true}$(".crownix-note-mode").fadeOut(400)},3000);if(A==="edit_mode"){$(".crownix-note-attr").fadeIn(400)}}else{c=true;$(".crownix-note-mode").fadeOut(400);if(A==="edit_mode"){$(".crownix-note-attr").fadeOut(400)}}};var n=function(H){A=H.id;if(A==="edit_mode"){$(".crownix-note-attr").attr({style:"display: block;"})}else{$(".crownix-note-attr").attr({style:"display: none"})}$(".crownix-note-area > svg").remove();$(".crownix-note-area").prepend(H.svg);$(".crownix-note-mode > li").remove();for(var I in h){F=h[I];if(F.type==="mode"&&F.id!==H.id){D=$("<li>").attr({id:I,style:"display: list-item"}).addClass("crownix-note-icon").addClass("crownix-note-mode-icon").appendTo(G).prepend(F.svg).bind(g,F,F.click)}}$(".crownix-icon-pencolor").css("fill",u);$(".crownix-icon-highlightercolor").css("fill",w)};var E=function(H){h.edit.svg=H.svg;$(".crownix-note-area > svg").remove();$(".crownix-note-area").prepend(H.svg);$(".crownix-icon-pencolor").css("fill",u);$(".crownix-icon-highlightercolor").css("fill",w)};var B=function(I){s=I.id;$(".crownix-note-attr-icon").each(function(){$(this).removeClass("crownix-icon-select")});$("#"+I.id).addClass("crownix-icon-select");var H;if(s==="pen"){H=x.getPen()}else{if(s==="highlighter"){H=x.getHighlighter()}else{return}}l.setShapeAttribute({stroke:"#"+H.color,"stroke-width":H.width+"pt","stroke-opacity":(100-H.transparency)/100,})};var y=function(H){return H.id===s};var m=function(H){x.show(s)};if(typeof b!="undefined"){b.remove();z()}b=$("<div>").attr("id","crownix-note-toolbar").addClass("crownix-note-toolbar").appendTo(C);q();j.prototype.disableToolbarItem(["undo","redo","eraseAll"])};var j=function(m,n){d(m);l=n};j.prototype={hideToolbar:function(){b.css("display","none")},showToolbar:function(){b.css("display","block")},disableToolbarItem:function(o){for(var n=0,m=o.length;n<m;n++){if(!h[o[n]]){continue}if(h[o[n]].type==="attr"){b.find("#"+o[n]).removeClass("crownix-note-icon").addClass("crownix-note-icon-disable").off()}}},enableToolbarItem:function(o){for(var n=0,m=o.length;n<m;n++){if(!h[o[n]]){continue}if(h[o[n]].type==="attr"){b.find("#"+o[n]).removeClass("crownix-note-icon-disable").addClass("crownix-note-icon");if(h[o[n]].click){b.find("#"+o[n]).off().on(g,h[o[n]].click)}}}},destroy:function(){b.remove()},};return j})();m2soft.ns("m2soft.crownix.security.IKE");m2soft.crownix.security.IKE=(function(){var k=m2soft.crownix.Util;var j=m2soft.crownix.Message;var e="";var a={};var h=function(m){return a[m].secretKey};var d=function(m){return a[m].algorithm};var f=function(m){delete a[m]};var c=function(m){secretKey="";e=m.serverUrl;return b().pipe(l)};var b=function(){$.support.cors=true;return $.ajax(e,{type:"OPTIONS",headers:{"crownix-command":0}}).pipe(function(o,s,r){try{var n=JSON.parse(r.responseText);var m=n.algorithm;if(!k.isSupportWebCrypto()||!k.browser.firefox){n.algorithm="seed"}j.log("[Crownix Viewer] encrypt enabled. server["+m+"] client["+n.algorithm+"]");n.rdid=r.getResponseHeader("crownix-rdid")}catch(q){j.log("[Crownix Viewer] response parsing error: "+r.responseText);return $.Deferred().reject(q.message)}if(n.status){return $.Deferred().resolve(n)}else{return $.Deferred().reject(n.message)}})};var l=function(n){var s=new JSEncrypt();s.setPublicKey(n.pubkey);var q=g(128);var o=s.encrypt(q);var r=n.rdid;var m=n.algorithm;a[r]={secretKey:q,algorithm:m};return $.ajax(e,{type:"OPTIONS",headers:{"crownix-command":1,"crownix-rdid":r,"crownix-encrypt-algorithm":m,"crownix-encrypt-key":o}}).pipe(function(u,y,x){try{var t=JSON.parse(x.responseText)}catch(w){j.log("[Crownix Viewer] response parsing error: "+x.responseText);return $.Deferred().reject(w.message)}if(t.status){return $.Deferred().resolve(r)}else{return $.Deferred().reject(t.message)}})};var g=function(o){var n="";for(var m=0;m<o/4;m++){n+=Math.floor(Math.random()*(16)).toString(16)}return n};return{getKey:h,getAlgorithm:d,removeSession:f,request:c}})();m2soft.ns("m2soft.crownix.security.SEED");m2soft.crownix.security.SEED=(function(){function e(g,f){g=g||{};for(var h in f){if(typeof f[h]==="object"){g[h]=e(g[h],f[h])}else{if(f[h]===null){g[h]=null}else{g[h]=f[h]}}}return g}var a=a||function(x,g){var k={},h=k.lib={},z=h.Base=function(){function l(){}return{extend:function(s){l.prototype=this;var m=new l;s&&m.mixIn(s);m.hasOwnProperty("init")||(m.init=function(){m.$super.init.apply(this,arguments)});m.init.prototype=m;m.$super=this;return m},create:function(){var m=this.extend();m.init.apply(m,arguments);return m},init:function(){},mixIn:function(m){for(var s in m){m.hasOwnProperty(s)&&(this[s]=m[s])}m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),y=h.WordArray=z.extend({init:function(l,m){l=this.words=l||[];this.sigBytes=m!=g?m:4*l.length},toString:function(l){return(l||f).stringify(this)},concat:function(l){var m=this.words,t=l.words,u=this.sigBytes;l=l.sigBytes;this.clamp();if(u%4){for(var s=0;s<l;s++){m[u+s>>>2]|=(t[s>>>2]>>>24-8*(s%4)&255)<<24-8*((u+s)%4)}}else{if(65535<t.length){for(s=0;s<l;s+=4){m[u+s>>>2]=t[s>>>2]}}else{m.push.apply(m,t)}}this.sigBytes+=l;return this},clamp:function(){var l=this.words,m=this.sigBytes;l[m>>>2]&=4294967295<<32-8*(m%4);l.length=x.ceil(m/4)},clone:function(){var l=z.clone.call(this);l.words=this.words.slice(0);return l},random:function(l){for(var m=[],s=0;s<l;s+=4){m.push(4294967296*x.random()|0)}return new y.init(m,l)}}),n=k.enc={},f=n.Hex={stringify:function(l){var m=l.words;l=l.sigBytes;for(var t=[],u=0;u<l;u++){var s=m[u>>>2]>>>24-8*(u%4)&255;t.push((s>>>4).toString(16));t.push((s&15).toString(16))}return t.join("")},parse:function(l){for(var m=l.length,s=[],t=0;t<m;t+=2){s[t>>>3]|=parseInt(l.substr(t,2),16)<<24-4*(t%8)}return new y.init(s,m/2)}},r=n.Latin1={stringify:function(l){var m=l.words;l=l.sigBytes;for(var s=[],t=0;t<l;t++){s.push(String.fromCharCode(m[t>>>2]>>>24-8*(t%4)&255))}return s.join("")},parse:function(l){for(var m=l.length,s=[],t=0;t<m;t++){s[t>>>2]|=(l.charCodeAt(t)&255)<<24-8*(t%4)}return new y.init(s,m)}},o=n.Utf8={stringify:function(l){try{return decodeURIComponent(escape(r.stringify(l)))}catch(m){log(m);throw Error("Malformed UTF-8 data")}},parse:function(l){return r.parse(unescape(encodeURIComponent(l)))}},j=h.BufferedBlockAlgorithm=z.extend({reset:function(){this._data=new y.init;this._nDataBytes=0},_append:function(l){"string"==typeof l&&(l=o.parse(l));this._data.concat(l);this._nDataBytes+=l.sigBytes},_process:function(l){var s=this._data,u=s.words,B=s.sigBytes,t=this.blockSize,m=B/(4*t),m=l?x.ceil(m):x.max((m|0)-this._minBufferSize,0);l=m*t;B=x.min(4*l,B);if(l){for(var A=0;A<l;A+=t){this._doProcessBlock(u,A)}A=u.splice(0,l);s.sigBytes-=B}return new y.init(A,B)},clone:function(){var l=z.clone.call(this);l._data=this._data.clone();return l},_minBufferSize:0});h.Hasher=j.extend({cfg:z.extend(),init:function(l){this.cfg=this.cfg.extend(l);this.reset()},reset:function(){j.reset.call(this);this._doReset()},update:function(l){this._append(l);this._process();return this},finalize:function(l){l&&this._append(l);return this._doFinalize()},blockSize:16,_createHelper:function(l){return function(m,s){return(new l.init(s)).finalize(m)}},_createHmacHelper:function(l){return function(m,s){return(new q.HMAC.init(l,s)).finalize(m)}}});var q=k.algo={};return k}(Math);(function(){var g=a,f=g.lib.WordArray;g.enc.Base64={stringify:function(q){var j=q.words,h=q.sigBytes,n=this._map;q.clamp();q=[];for(var r=0;r<h;r+=3){for(var o=(j[r>>>2]>>>24-8*(r%4)&255)<<16|(j[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|j[r+2>>>2]>>>24-8*((r+2)%4)&255,k=0;4>k&&r+0.75*k<h;k++){q.push(n.charAt(o>>>6*(3-k)&63))}}if(j=n.charAt(64)){for(;q.length%4;){q.push(j)}}return q.join("")},parse:function(q){var j=q.length,n=this._map,m=n.charAt(64);m&&(m=q.indexOf(m),-1!=m&&(j=m));for(var m=[],r=0,o=0;o<j;o++){if(o%4){if(n.indexOf(q.charAt(o-1))<0||n.indexOf(q.charAt(o))<0){throw"invalid base64"}var k=n.indexOf(q.charAt(o-1))<<2*(o%4),h=n.indexOf(q.charAt(o))>>>6-2*(o%4);m[r>>>2]|=(k|h)<<24-8*(r%4);r++}}return f.create(m,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(q){function g(s,m,l,y,u,x,t){s=s+(m&l|~m&y)+u+t;return(s<<x|s>>>32-x)+m}function j(s,m,l,y,u,x,t){s=s+(m&y|l&~y)+u+t;return(s<<x|s>>>32-x)+m}function h(s,m,l,y,u,x,t){s=s+(m^l^y)+u+t;return(s<<x|s>>>32-x)+m}function w(t,z,s,x,l,y,u){t=t+(s^(z|~x))+l+u;return(t<<y|t>>>32-y)+z}var r=a,k=r.lib,f=k.WordArray,o=k.Hasher,k=r.algo,n=[];(function(){for(var l=0;64>l;l++){n[l]=4294967296*q.abs(q.sin(l+1))|0}})();k=k.MD5=o.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(X,Y){for(var Z=0;16>Z;Z++){var N=Y+Z,R=X[N];X[N]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}var Z=this._hash.words,N=X[Y+0],R=X[Y+1],S=X[Y+2],P=X[Y+3],s=X[Y+4],m=X[Y+5],K=X[Y+6],G=X[Y+7],I=X[Y+8],l=X[Y+9],Q=X[Y+10],O=X[Y+11],M=X[Y+12],L=X[Y+13],J=X[Y+14],H=X[Y+15],W=Z[0],V=Z[1],U=Z[2],T=Z[3],W=g(W,V,U,T,N,7,n[0]),T=g(T,W,V,U,R,12,n[1]),U=g(U,T,W,V,S,17,n[2]),V=g(V,U,T,W,P,22,n[3]),W=g(W,V,U,T,s,7,n[4]),T=g(T,W,V,U,m,12,n[5]),U=g(U,T,W,V,K,17,n[6]),V=g(V,U,T,W,G,22,n[7]),W=g(W,V,U,T,I,7,n[8]),T=g(T,W,V,U,l,12,n[9]),U=g(U,T,W,V,Q,17,n[10]),V=g(V,U,T,W,O,22,n[11]),W=g(W,V,U,T,M,7,n[12]),T=g(T,W,V,U,L,12,n[13]),U=g(U,T,W,V,J,17,n[14]),V=g(V,U,T,W,H,22,n[15]),W=j(W,V,U,T,R,5,n[16]),T=j(T,W,V,U,K,9,n[17]),U=j(U,T,W,V,O,14,n[18]),V=j(V,U,T,W,N,20,n[19]),W=j(W,V,U,T,m,5,n[20]),T=j(T,W,V,U,Q,9,n[21]),U=j(U,T,W,V,H,14,n[22]),V=j(V,U,T,W,s,20,n[23]),W=j(W,V,U,T,l,5,n[24]),T=j(T,W,V,U,J,9,n[25]),U=j(U,T,W,V,P,14,n[26]),V=j(V,U,T,W,I,20,n[27]),W=j(W,V,U,T,L,5,n[28]),T=j(T,W,V,U,S,9,n[29]),U=j(U,T,W,V,G,14,n[30]),V=j(V,U,T,W,M,20,n[31]),W=h(W,V,U,T,m,4,n[32]),T=h(T,W,V,U,I,11,n[33]),U=h(U,T,W,V,O,16,n[34]),V=h(V,U,T,W,J,23,n[35]),W=h(W,V,U,T,R,4,n[36]),T=h(T,W,V,U,s,11,n[37]),U=h(U,T,W,V,G,16,n[38]),V=h(V,U,T,W,Q,23,n[39]),W=h(W,V,U,T,L,4,n[40]),T=h(T,W,V,U,N,11,n[41]),U=h(U,T,W,V,P,16,n[42]),V=h(V,U,T,W,K,23,n[43]),W=h(W,V,U,T,l,4,n[44]),T=h(T,W,V,U,M,11,n[45]),U=h(U,T,W,V,H,16,n[46]),V=h(V,U,T,W,S,23,n[47]),W=w(W,V,U,T,N,6,n[48]),T=w(T,W,V,U,G,10,n[49]),U=w(U,T,W,V,J,15,n[50]),V=w(V,U,T,W,m,21,n[51]),W=w(W,V,U,T,M,6,n[52]),T=w(T,W,V,U,P,10,n[53]),U=w(U,T,W,V,Q,15,n[54]),V=w(V,U,T,W,R,21,n[55]),W=w(W,V,U,T,I,6,n[56]),T=w(T,W,V,U,H,10,n[57]),U=w(U,T,W,V,K,15,n[58]),V=w(V,U,T,W,L,21,n[59]),W=w(W,V,U,T,s,6,n[60]),T=w(T,W,V,U,O,10,n[61]),U=w(U,T,W,V,S,15,n[62]),V=w(V,U,T,W,l,21,n[63]);Z[0]=Z[0]+W|0;Z[1]=Z[1]+V|0;Z[2]=Z[2]+U|0;Z[3]=Z[3]+T|0},_doFinalize:function(){var m=this._data,u=m.words,l=8*this._nDataBytes,t=8*m.sigBytes;u[t>>>5]|=128<<24-t%32;var s=q.floor(l/4294967296);u[(t+64>>>9<<4)+15]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360;u[(t+64>>>9<<4)+14]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360;m.sigBytes=4*(u.length+1);this._process();m=this._hash;u=m.words;for(l=0;4>l;l++){t=u[l],u[l]=(t<<8|t>>>24)&16711935|(t<<24|t>>>8)&4278255360}return m},clone:function(){var l=o.clone.call(this);l._hash=this._hash.clone();return l}});r.MD5=o._createHelper(k);r.HmacMD5=o._createHmacHelper(k)})(Math);(function(){var h=a,f=h.lib,k=f.Base,g=f.WordArray,f=h.algo,j=f.EvpKDF=k.extend({cfg:k.extend({keySize:4,hasher:f.MD5,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(s,t){for(var n=this.cfg,o=n.hasher.create(),x=g.create(),q=x.words,y=n.keySize,n=n.iterations;q.length<y;){u&&o.update(u);var u=o.update(s).finalize(t);o.reset();for(var l=1;l<n;l++){u=o.finalize(u),o.reset()}x.concat(u)}x.sigBytes=4*y;return x}});h.EvpKDF=function(m,n,l){return j.create(l).compute(m,n)}})();a.lib.Cipher||function(B){var h=a,n=h.lib,j=n.Base,D=n.WordArray,C=n.BufferedBlockAlgorithm,o=h.enc.Base64,g=h.algo.EvpKDF,z=n.Cipher=C.extend({cfg:j.extend(),createEncryptor:function(m,l){return this.create(this._ENC_XFORM_MODE,m,l)},createDecryptor:function(m,l){return this.create(this._DEC_XFORM_MODE,m,l)},init:function(m,l,r){this.cfg=this.cfg.extend(r);this._xformMode=m;this._key=l;this.reset()},reset:function(){C.reset.call(this);this._doReset()},process:function(l){this._append(l);return this._process()},finalize:function(l){l&&this._append(l);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){return function(l){return{encrypt:function(m,s,r){return("string"==typeof s?A:f).encrypt(l,m,s,r)},decrypt:function(m,s,r){return("string"==typeof s?A:f).decrypt(l,m,s,r)}}}}()});n.StreamCipher=z.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var x=h.mode={},k=n.BlockCipherMode=j.extend({createEncryptor:function(m,l){return this.Encryptor.create(m,l)},createDecryptor:function(m,l){return this.Decryptor.create(m,l)},init:function(m,l){this._cipher=m;this._iv=l}}),x=x.CBC=function(){function m(r,w,u){var t=this._iv;t?this._iv=B:t=this._prevBlock;for(var s=0;s<u;s++){r[w+s]^=t[s]}}var l=k.extend();l.Encryptor=l.extend({processBlock:function(r,u){var t=this._cipher,s=t.blockSize;m.call(this,r,u,s);t.encryptBlock(r,u);this._prevBlock=r.slice(u,u+s)}});l.Decryptor=l.extend({processBlock:function(r,w){var u=this._cipher,s=u.blockSize,t=r.slice(w,w+s);u.decryptBlock(r,w);m.call(this,r,w,s);this._prevBlock=t}});return l}(),y=(h.pad={}).Pkcs7={pad:function(m,l){for(var u=4*l,u=u-m.sigBytes%u,t=u<<24|u<<16|u<<8|u,s=[],r=0;r<u;r+=4){s.push(t)}u=D.create(s,u);m.concat(u)},unpad:function(l){l.sigBytes-=l.words[l.sigBytes-1>>>2]&255}};n.BlockCipher=z.extend({cfg:z.cfg.extend({mode:x,padding:y}),reset:function(){z.reset.call(this);var m=this.cfg,l=m.iv,m=m.mode;if(this._xformMode==this._ENC_XFORM_MODE){var r=m.createEncryptor}else{r=m.createDecryptor,this._minBufferSize=1}this._mode=r.call(m,this,l&&l.words)},_doProcessBlock:function(m,l){this._mode.processBlock(m,l)},_doFinalize:function(){var m=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){m.pad(this._data,this.blockSize);var l=this._process(!0)}else{l=this._process(!0),m.unpad(l)}return l},blockSize:4});var q=n.CipherParams=j.extend({init:function(l){this.mixIn(l)},toString:function(l){return(l||this.formatter).stringify(this)}}),x=(h.format={}).OpenSSL={stringify:function(m){var l=m.ciphertext;m=m.salt;return(m?D.create([1398893684,1701076831]).concat(m).concat(l):l).toString(o)},parse:function(l){l=o.parse(l);var r=l.words;if(1398893684==r[0]&&1701076831==r[1]){var m=D.create(r.slice(2,4));r.splice(0,4);l.sigBytes-=16}return q.create({ciphertext:l,salt:m})}},f=n.SerializableCipher=j.extend({cfg:j.extend({format:x}),encrypt:function(l,t,s,r){r=this.cfg.extend(r);var m=l.createEncryptor(s,r);t=m.finalize(t);m=m.cfg;return q.create({ciphertext:t,key:s,iv:m.iv,algorithm:l,mode:m.mode,padding:m.padding,blockSize:l.blockSize,formatter:r.format})},decrypt:function(m,l,s,r){r=this.cfg.extend(r);l=this._parse(l,r.format);return m.createDecryptor(s,r).finalize(l.ciphertext)},_parse:function(m,l){return"string"==typeof m?l.parse(m,this):m}}),h=(h.kdf={}).OpenSSL={execute:function(l,s,r,m){m||(m=D.random(8));l=g.create({keySize:s+r}).compute(l,m);r=D.create(l.words.slice(s),4*r);l.sigBytes=4*s;return q.create({key:l,iv:r,salt:m})}},A=n.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:h}),encrypt:function(m,l,s,r){r=this.cfg.extend(r);s=r.kdf.execute(s,m.keySize,m.ivSize);r.iv=s.iv;m=f.encrypt.call(this,m,l,s.key,r);m.mixIn(s);return m},decrypt:function(m,l,s,r){r=this.cfg.extend(r);l=this._parse(l,r.format);s=r.kdf.execute(s,m.keySize,m.ivSize,l.salt);r.iv=s.iv;return f.decrypt.call(this,m,l,s.key,r)}})}();(function(){function h(l){return g[3][l>>>24&255]^g[2][l>>>16&255]^g[1][l>>>8&255]^g[0][l&255]}var f=a,n=f.lib.BlockCipher,g=[[696885672,92635524,382128852,331600848,340021332,487395612,747413676,621093156,491606364,54739776,403181592,504238620,289493328,1020063996,181060296,591618912,671621160,71581764,536879136,495817116,549511392,583197408,147374280,386339604,629514660,261063564,50529024,994800504,999011256,318968592,314757840,785310444,809529456,210534540,1057960764,680042664,839004720,500027868,919007988,876900468,751624428,361075092,185271048,390550356,474763356,457921368,1032696252,16843008,604250148,470552604,860058480,411603096,268439568,214745292,851636976,432656856,738992172,667411428,843215472,58950528,462132120,297914832,109478532,164217288,541089888,272650320,595829664,734782440,218956044,914797236,512660124,256852812,931640244,441078360,113689284,944271480,646357668,302125584,797942700,365285844,557932896,63161280,881111220,21053760,306336336,1028485500,227377548,134742024,521081628,428446104,0,420024600,67371012,323179344,935850996,566354400,1036907004,910586484,789521196,654779172,813740208,193692552,235799052,730571688,578986656,776888940,327390096,223166796,692674920,1011642492,151585032,168428040,1066382268,802153452,868479984,96846276,126321540,335810580,1053750012,608460900,516870876,772678188,189481800,436867608,101057028,553722144,726360936,642146916,33686016,902164980,310547088,176849544,202113036,864269232,1045328508,281071824,977957496,122110788,377918100,633725412,637936164,8421504,764256684,533713884,562143648,805318704,923218740,781099692,906375732,352653588,570565152,940060728,885321972,663200676,88424772,206323788,25264512,701096424,75792516,394761108,889532724,197903304,248431308,1007431740,826372464,285282576,130532292,160006536,893743476,1003222008,449499864,952692984,344232084,424235352,42107520,80003268,1070593020,155795784,956903736,658989924,12632256,265274316,398971860,948482232,252642060,244220556,37896768,587408160,293704080,743202924,466342872,612671652,872689716,834793968,138952776,46318272,793731948,1024274748,755835180,4210752,1049539260,1041117756,1015853244,29475264,713728680,982168248,240009804,356864340,990589752,483184860,675831912,1062171516,478974108,415813848,172638792,373707348,927429492,545300640,768467436,105267780,897954228,722150184,625303908,986379000,600040416,965325240,830583216,529503132,508449372,969535992,650568420,847426224,822161712,717939432,760045932,525292380,616882404,817950960,231588300,143163528,369496596,973746744,407392344,348442836,574775904,688464168,117900036,855847728,684253416,453710616,84214020,961114488,276861072,709517928,705307176,445289112],[943196208,3894986976,741149985,2753988258,3423588291,3693006546,2956166067,3090712752,2888798115,1612726368,1410680145,3288844227,1141130304,1815039843,1747667811,1478183763,3221472195,1612857954,808649523,3023406513,673777953,2686484640,3760374498,2754054051,3490956243,2417066385,269549841,67503618,471600144,3158084784,875955762,1208699715,3962556387,2282260608,1814842464,2821228704,337053459,3288646848,336987666,4097098992,3221406402,1141196097,3760308705,3558262482,1010765619,1010634033,2349764226,2551744656,673712160,1276005954,4097230578,1010699826,2753922465,4164536817,202181889,3693072339,3625502928,673909539,1680229986,2017086066,606537507,741281571,4029792753,1882342002,1073889858,3558130896,1073824065,3221274816,1882407795,1680295779,2888600736,2282457987,4097296371,2888666529,2147516544,471797523,3356150466,741084192,2821360290,875824176,3490890450,134941443,3962490594,3895052769,1545424209,2484372624,404228112,4164471024,1410811731,2888732322,134744064,3288712641,269681427,3423456705,2215020162,3090778545,4232040435,2084392305,3221340609,808517937,4097164785,2282392194,1747602018,2956034481,3490824657,538968096,3558328275,131586,539099682,67372032,1747470432,1882276209,67569411,3625700307,2619182481,2551810449,1612792161,3158216370,3827746530,1478052177,3692940753,1343308113,2417000592,3692874960,2551876242,2686682019,2821426083,3490758864,2147582337,202313475,1141327683,404359698,3760440291,3962359008,2349698433,3158282163,2484504210,2017151859,1545358416,2686616226,2686550433,1612923747,539165475,1275940161,3356018880,2619248274,2619116688,943327794,202116096,741215778,3090844338,1814974050,2619314067,1478117970,4029858546,2417132178,4029924339,1208568129,2016954480,3423390912,336921873,4164668403,1882210416,1949648241,2084523891,875889969,269484048,197379,1680098400,1814908257,3288778434,1949582448,3558196689,3023340720,3895118562,134809857,1949714034,404293905,4231974642,1073758272,269615634,3760242912,3158150577,67437825,4164602610,65793,4029726960,673843746,1545490002,2821294497,1410745938,1073955651,2214954369,336856080,2282326401,2551942035,2955968688,3827680737,1208502336,2017020273,2484570003,4231843056,471731730,2147648130,539033889,2349632640,404425491,1545555795,1949779827,1410614352,2956100274,471665937,606405921,1276071747,0,1141261890,3962424801,1477986384,1343373906,3895184355,2084458098,3625634514,3356084673,4231908849,808452144,2484438417,1680164193,1010568240,3023472306,3827614944,3090910131,2084326512,202247682,1343242320,943262001,606471714,808583730,2214888576,1747536225,2417197971,876021555,3827812323,606340128,2753856672,3356216259,1343439699,134875650,2215085955,3625568721,1275874368,2147713923,2349830019,3423522498,943393587,1208633922,3023538099],[2712152457,2172913029,3537114822,3553629123,1347687492,287055117,2695638156,556016901,1364991309,1128268611,270014472,303832590,1364201793,4043062476,3267889866,1667244867,539502600,1078199364,538976256,2442927501,3772784832,3806339778,3234334920,320083719,2711889285,2206994319,50332419,1937259339,3015195531,319820547,3536851650,3807129294,1886400576,2156661900,859586319,2695374984,842019330,3520863693,4076091078,1886663748,3773574348,2442401157,50858763,1398019911,1348213836,1398283083,2981903757,16777473,539239428,270277644,1936732995,2425886856,269488128,3234598092,4075827906,3520600521,539765772,3823380423,1919955522,2206204803,2476219275,3520074177,2189690502,3251112393,1616912448,1347424320,2745181059,3823643595,17566989,2998154886,2459704974,1129058127,3014932359,1381505610,3267626694,1886926920,2728666758,303043074,2745970575,3520337349,1633689921,3284140995,2964599940,1094713665,1380979266,1903967565,2173439373,526344,320610063,2442664329,0,286791945,263172,1397756739,4092868551,3789562305,4059839949,1920218694,590098191,589571847,2964336768,2206731147,34344462,2745707403,2728403586,1651256910,2475692931,1095503181,1634216265,1887190092,17303817,34081290,3015458703,3823906767,4092605379,3250849221,2206467975,269751300,4076617422,1617175620,3537641166,573320718,1128794955,303569418,33818118,555753729,1667771211,1650730566,33554946,4059313605,2458915458,2189953674,789516,3014669187,1920745038,3503296704,1920481866,1128531783,2459178630,3789825477,572794374,2155872384,2712415629,3554418639,2711626113,808464384,859059975,2729193102,842282502,286528773,572531202,808990728,4042536132,2745444231,1094976837,1078725708,2172649857,3790088649,2156135556,2475956103,825505029,3284667339,3268153038,809253900,1903178049,286265601,3284404167,2173176201,1903441221,4093131723,3537377994,4042799304,2425623684,1364728137,2189427330,3234071748,4093394895,1095240009,825768201,1667508039,3233808576,3284930511,3553892295,2964863112,51121935,2190216846,1111491138,589308675,2442137985,1617701964,3554155467,2695111812,808727556,4059050433,1078462536,3267363522,1668034383,826031373,556543245,1077936192,2998681230,842808846,2965126284,3250586049,2728929930,2998418058,1112280654,1364464965,859323147,3504086220,1617438792,1937522511,2426150028,3503823048,1112017482,1381242438,1936996167,2694848640,3790351821,1111754310,2981377413,589835019,1633953093,4076354250,3823117251,2981640585,2981114241,2476482447,1381768782,4059576777,3806602950,2997891714,825241857,3806866122,1634479437,1398546255,3773048004,4042272960,3251375565,2156398728,303306246,842545674,1347950664,3503559876,1650467394,556280073,50595591,858796803,3773311176,320346891,17040645,1903704393,2425360512,1650993738,573057546,2459441802],[137377848,3370182696,220277805,2258805798,3485715471,3469925406,2209591347,2293282872,2409868335,1080057888,1162957845,3351495687,1145062404,1331915823,1264805931,1263753243,3284385795,1113743394,53686323,2243015733,153167913,2158010400,3269648418,2275648551,3285438483,2173800465,17895441,100795398,202382364,2360392764,103953462,1262700555,3487820847,2290124808,1281387564,2292230184,118690839,3300967428,101848086,3304125492,3267543042,1161905157,3252805665,3335705622,255015999,221330493,2390920206,2291177496,136325160,1312967694,3337810998,238173246,2241963045,3388078137,218172429,3486768159,3369130008,186853419,1180853286,1249015866,119743527,253963311,3253858353,1114796082,1111638018,3302020116,1094795265,3233857536,1131638835,1197696039,2359340076,2340653067,3354653751,2376182829,2155905024,252910623,3401762826,203435052,2325915690,70267956,3268595730,184748043,3470978094,3387025449,1297177629,2224067604,135272472,3371235384,1196643351,2393025582,134219784,3317810181,51580947,3452029965,2256700422,2310125625,3488873535,1299283005,3250700289,20000817,3320968245,2323810314,1247963178,2175905841,3251752977,2105376,3352548375,33685506,35790882,67109892,1214277672,1097953329,117638151,3419658267,2375130141,2308020249,1096900641,2394078270,3336758310,1230067737,3453082653,1095847953,2156957712,3436239900,2324863002,2208538659,2342758443,3234910224,2172747777,251857935,1195590663,168957978,3286491171,3437292588,2374077453,2410921023,2257753110,1265858619,1280334876,2191695906,2174853153,1130586147,52633635,1296124941,3368077320,2391972894,2358287388,171063354,201329676,237120558,2326968378,1315073070,2408815647,1246910490,3270701106,2190643218,3287543859,1229015049,1215330360,3435187212,85005333,3421763643,1081110576,1165063221,1332968511,87110709,1052688,50528259,1147167780,1298230317,3334652934,1148220468,3318862869,2226172980,3403868202,151062537,1181905974,152115225,3472030782,1077952512,34738194,3235962912,2377235517,83952645,3404920890,16842753,3237015600,170010666,1314020382,2309072937,1179800598,1128480771,2239857669,68162580,2306967561,2341705755,2159063088,3319915557,1212172296,1232173113,2274595863,3438345276,236067870,2189590530,18948129,2357234700,185800731,1330863135,1198748727,1146115092,2192748594,219225117,86058021,1329810447,0,1178747910,3454135341,1213224984,1112690706,3420710955,1316125758,3402815514,3384920073,3455188029,3158064,2240910357,1164010533,204487740,2259858486,3303072804,2343811131,1282440252,235015182,1079005200,154220601,102900774,36843570,2223014916,1231120425,2207485971,120796215,3353601063,69215268,2225120292,3418605579,1129533459,167905290,2273543175,3385972761,1279282188,2206433283,2407762959,3468872718,187906107,1245857802,2276701239]],k=[2654435769,1013904243,2027808486,4055616972,3816266649,3337566003,2380164711,465362127,930724254,1861448508,3722897016,3150826737,2006686179,4013372358,3731777421,3168587547],j=f.algo.SEED=n.extend({_doReset:function(){for(var w=this._key,u=w.words[0],q=w.words[1],s=w.words[2],w=w.words[3],t=[],r=0;16>r;r++){if(t[r]=[],t[r][0]=h(u+s-k[r]),t[r][1]=h(q-w+k[r]),0==r%2){var o=u,u=u>>>8|q<<24,q=q>>>8|o<<24}else{o=s,s=s<<8|w>>>24,w=w<<8|o>>>24}}this._roundKeys=t;this._invRoundKeys=t.slice().reverse()},encryptBlock:function(m,l){this._doCryptBlock(m,l,this._roundKeys)},decryptBlock:function(m,l){this._doCryptBlock(m,l,this._invRoundKeys)},_doCryptBlock:function(y,x,q){for(var t=y.slice(x,x+2),w=y.slice(x+2,x+4),s=[t,w],t=0;16>t;t++){var w=q[t],o=s[0],s=s[1],u=[];u[0]=s[0]^w[0];u[1]=s[1]^w[1];u[1]^=u[0];u[1]=h(u[1]);u[0]+=u[1];u[0]=h(u[0]);u[1]+=u[0];u[1]=h(u[1]);u[0]+=u[1];o[0]^=u[0];o[1]^=u[1];s=[s,o]}s.reverse();y.splice(x,4,s[0][0],s[0][1],s[1][0],s[1][1])},keySize:4,ivSize:4,blockSize:4});f.SEED=n._createHelper(j)})();var c=function(g,f){if(!f){throw"Key must be shared with server before"}this.key=a.enc.Hex.parse(f);this.iv=this.key;this.buffer={sigBytes:0,words:[]};if(g=="encrypt"){e(this,b)}else{if(g=="decrypt"){e(this,d)}}};var b={finalize:function(f){var g=a.SEED.encrypt(f.toString(),this.key,{mode:a.mode.CBC,iv:this.iv,padding:a.pad.Pkcs7});return g.toString()}};var d={offset:0,offset2:0,decryptor:null,getDecryptor:function(){if(!this.decryptor.process){this.decryptor=a.algo.SEED.createDecryptor(this.key,{mode:a.mode.CBC,iv:this.iv,padding:a.pad.Pkcs7})}return this.decryptor},plainTextBuffer:"",failedBuffer:"",process:function(k){var l=128*3/2;this.offset2=Math.floor(k.length/l)*l;var j=a.enc.Base64.parse(k.substring(this.offset,this.offset2));this.offset=this.offset2;var f=this.getDecryptor().process(j);try{var g=f.toString(a.enc.Latin1);this.plainTextBuffer+=decodeURIComponent(escape(this.failedBuffer+g));this.failedBuffer=""}catch(h){this.failedBuffer+=g}return this.plainTextBuffer},finalize:function(h){param=a.enc.Base64.parse(h.substring(this.offset));var g=this.getDecryptor().process(param);var f=this.getDecryptor().finalize();this.plainTextBuffer+=decodeURIComponent(escape(this.failedBuffer+g.toString(a.enc.Latin1)+f.toString(a.enc.Latin1)));return this.plainTextBuffer}};return c});m2soft.ns("m2soft.crownix.WorkerUtil");m2soft.crownix.WorkerUtil=(function(){var b=m2soft.crownix.Util;var a=function(d,j){if(typeof d.workerFunction!="function"){throw"worker must be function"}j=j===true;var g=function(k){var m=k.workerFunction,e=k.dependency,l=["(function(){"];for(var n in e){if(e.hasOwnProperty(n)){l.push("var ");l.push(n);l.push("=(");l.push(e[n].toString());l.push(")();")}}l.push("(");l.push(m.toString());l.push(")();");l.push("})()");return l};var f=function(k){var e=new Blob(g(k),{type:"application/javascript"});var l=URL.createObjectURL(e);return new Worker(l)};var c=function(e){var k=g(e).join("");return new FakeWorker(k)};if(window.Worker&&window.Blob&&!j&&!b.browser.mobile){try{return f(d)}catch(h){return c(d)}}else{return c(d)}};return{getCryptoWorker:function(e,c,d){if(c=="aes"){var f=a(m2soft.crownix.worker.security.AES,true)}else{var f=a(m2soft.crownix.worker.security.SEED)}f.postMessage({method:"create",crypt:e,key:d});return f},getIdentifyWorker:function(){return a(m2soft.crownix.worker.Identity)}}})();m2soft.ns("m2soft.crownix.ExportAgent");m2soft.crownix.ExportAgent=(function(){var g=m2soft.crownix.Resource;var h=m2soft.crownix.Message;var k=m2soft.crownix.Ajax;var a=m2soft.crownix.WorkerUtil;var l=m2soft.crownix.security.IKE;var m=m2soft.crownix.Util;var n=m2soft.crownix.Window;var d;var c=function(q,r){return a.getCryptoWorker("encrypt",q,r)};var j=function(q,r){return a.getCryptoWorker("decrypt",q,r)};var b=function(t,r,s,q){d=t;this.dialog=r;this.toolbar=s;this.options=q};b.prototype["export"]=function(z,t,q,H,A,w,r,C,s,B){var u=new k();var F=this.dialog;var y=this.toolbar;var E="";var K="";var I="";u.setConnectTimeout(d.options.timeout);y.disableToolbarItem(["save","print","print_pdf"]);var x=F.message(s.notice_message);var D=500;if(d.options.saveMmlToPdf){D=503}var G={opcode:D,mrd_path:q,mrd_param:H,export_type:t,protocol:"sync"};if(w!=null&&w!=""){G.mrd_data=w}if(r.toJson()!=""){G.runtime_param=r.toJson()}if(d.options.downloadFileName&&H.indexOf("/rpdfprintdialog ")==-1){G.export_name=d.options.downloadFileName+"."+t}if(d.options.saveMmlToPdf){G.rdid=d.rdid;G.totalpage=d.totalPage}if(d.encType>3&&(!B||B.isEmptyPrevDocStack())){G.enc_type=d.encType;if(A){G.mrd_plain_param=A}}if(this.options.enableSecure){var J=l.request({serverUrl:z}).pipe(function(L){I=L;E=l.getAlgorithm(I);K=l.getKey(I);return f(G,E,K)},function(L){h.error(L.stack);F.show("Key exchange error("+L+")");return $.Deferred().reject(L)}).pipe(function(L){return e(z,L,s,F,true,I)}).pipe(function(L){return o(L,E,K)}).pipe(function(L){C(L)})}else{var J=e(z,G,s,F).pipe(function(L){C(L)})}return J.always(function(L){x.fadeOut(500,function(){x.remove()});y.enableToolbarItem(["save","print","print_pdf"]);l.removeSession(I);return L})};b.prototype.downloadFile=function(r,x,y,z,q,A,B,s){var w=this.dialog;var t={notice_message:x+" "+g.get("export_file"),connect_error:g.get("save_connect_error"),server_error:g.get("save_server_error"),timeout_error:g.get("save_timeout_error")};if(typeof B==="function"){var u=function(F){if(F.indexOf("1|")==0){var E=F.split("|");var C=E[0];var D=E[1];if((m.browser.msie||m.browser.edge)&&m.browser.version<11){D=encodeURIComponent(D)}B(r.replace("/service","/download")+"?filename="+D+"&delete=true")}else{B(g.get("save_error")+"("+F.replace("0|","")+")")}}}else{var u=function(F){if(F.indexOf("1|")==0){var E=F.split("|");var C=E[0];var D=E[1];if((m.browser.msie||m.browser.edge)&&m.browser.version<11){D=encodeURIComponent(D)}var G=d.options.exportMethod||(m.browser.android?"post":"get");if(G==="post"){$("#crownix-download-form input[name=filename]").attr("value",D);$("#crownix-download-form").attr("action",r.replace("/service","/download?filename="+D)).submit()}else{$("#crownix-download-iframe").attr("src",r.replace("/service","/download")+"?filename="+D+"&delete=true&attatchment=true")}}else{w.show(g.get("save_error")+"("+F.replace("0|","")+")")}}}return this["export"](r,x,y,z,d.mrdPlainParam,q,A,u,t,s)};b.prototype.showPdfWindow=function(u,x,y,q,z,r){var w=this.dialog;var s={notice_message:g.get("print_pdf_export"),connect_error:g.get("print_pdf_connect_error"),server_error:g.get("print_pdf_server_error"),timeout_error:g.get("print_pdf_timeout_error")};var t=function(H){if(H.indexOf("1|")==0){var C=H.split("|");var A=C[0];var B=C[1];var G=m.browser.edge?"true":"false";var F=(d.options.pdfPrintSpoolName?"/"+d.options.pdfPrintSpoolName:"");var E=$('<iframe id="crownix-pdf-viewer">').attr("src",u.replace("/service","/download")+F+"?filename="+B+"&delete=true&attatchment="+G);if(m.browser.firefox||(m.os.macos&&m.browser.safari)){E.css({width:"100%",height:"100%"});var D=new n(g.get("print_pdfviewer_title"),E,true);D.show()}else{$("#crownix-pdf-viewer").remove();E.css("display","none").appendTo("body")}}else{w.show(g.get("print_pdf_error")+"("+H.replace("0|","")+")")}};if(d.encType>3&&(!r||r.isEmptyPrevDocStack())){if(!d.mrdPlainParam){d.mrdPlainParam=""}return this["export"](u,"pdf",x,y,"/rpdfprintdialog "+d.mrdPlainParam,q,z,t,s,r)}else{return this["export"](u,"pdf",x,"/rpdfprintdialog "+y,d.mrdPlainParam,q,z,t,s,r)}};b.prototype.downloadFileDirect=function(r,w,x,z,q,A,s){var u=this.dialog;var y=this.toolbar;var t={notice_message:w+" "+g.get("export_file")};y.disableToolbarItem(["save","print","print_pdf"]);var B=u.message(t.notice_message);$("#crownix-download-form").empty();$('<input type="hidden" name="opcode"/><input type="hidden" name="mrd_path"/><input type="hidden" name="mrd_param"/><input type="hidden" name="export_type"/><input type="hidden" name="protocol"/><input type="hidden" name="delete"/><input type="hidden" name="attatchment"/>').appendTo("#crownix-download-form");if(q!=null&&q!=""){$('<input type="hidden" name="mrd_data"/>').appendTo("#crownix-download-form");$("#crownix-download-form input[name=mrd_data]").attr("value",q)}if(A.toJson()!=""){$('<input type="hidden" name="runtime_param"/>').appendTo("#crownix-download-form");$("#crownix-download-form input[name=runtime_param]").attr("value",A.toJson())}if(d.options.downloadFileName){$('<input type="hidden" name="export_name"/>').appendTo("#crownix-download-form");$("#crownix-download-form input[name=export_name]").attr("value",d.options.downloadFileName+"."+w)}if(d.encType>3&&(!s||s.isEmptyPrevDocStack())){$('<input type="hidden" name="enc_type"/>').appendTo("#crownix-download-form");$("#crownix-download-form input[name=enc_type]").attr("value",d.encType);if(d.mrdPlainParam!=null&&d.mrdPlainParam!=""){$('<input type="hidden" name="mrd_plain_param"/>').appendTo("#crownix-download-form");$("#crownix-download-form input[name=mrd_plain_param]").attr("value",d.mrdPlainParam)}}$("#crownix-download-form").on("submit",function(C){this.submit();C.preventDefault();setTimeout(function(){B.fadeOut(500,function(){B.remove();y.enableToolbarItem(["save","print","print_pdf"])})},1000)});$("#crownix-download-form input[name=opcode]").attr("value",500);$("#crownix-download-form input[name=mrd_path]").attr("value",x);$("#crownix-download-form input[name=mrd_param]").attr("value",z);$("#crownix-download-form input[name=export_type]").attr("value",w);$("#crownix-download-form input[name=protocol]").attr("value","file");$("#crownix-download-form input[name=delete]").attr("value",true);$("#crownix-download-form input[name=attatchment]").attr("value",true);$("#crownix-download-form").attr("action",r).attr("target","crownix-download-iframe").submit()};b.prototype.showPdfWindowDirect=function(w,z,C,q,D,r){var x=this.dialog;var B=this.toolbar;var s={notice_message:g.get("print_pdf_export")};B.disableToolbarItem(["save","print","print_pdf"]);var E=x.message(s.notice_message);var u=$('<iframe id="crownix-pdf-viewer" name="crownix-pdf-viewer">');$("#crownix-download-form").empty();$('<input type="hidden" name="opcode"/><input type="hidden" name="mrd_path"/><input type="hidden" name="mrd_param"/><input type="hidden" name="export_type"/><input type="hidden" name="protocol"/><input type="hidden" name="delete"/><input type="hidden" name="attatchment"/>').appendTo("#crownix-download-form");if(q!=null&&q!=""){$('<input type="hidden" name="mrd_data"/>').appendTo("#crownix-download-form");$("#crownix-download-form input[name=mrd_data]").attr("value",q)}if(D.toJson()!=""){$('<input type="hidden" name="runtime_param"/>').appendTo("#crownix-download-form");$("#crownix-download-form input[name=runtime_param]").attr("value",D.toJson())}var t="";if(d.encType>3&&(!r||r.isEmptyPrevDocStack())){$('<input type="hidden" name="enc_type"/>').appendTo("#crownix-download-form");$("#crownix-download-form input[name=enc_type]").attr("value",d.encType);if(d.mrdPlainParam!=undefined){$('<input type="hidden" name="mrd_plain_param"/>').appendTo("#crownix-download-form");$("#crownix-download-form input[name=mrd_plain_param]").attr("value","/rpdfprintdialog "+d.mrdPlainParam)}}else{t="/rpdfprintdialog "}$("#crownix-download-form input[name=opcode]").attr("value",500);$("#crownix-download-form input[name=mrd_path]").attr("value",z);$("#crownix-download-form input[name=mrd_param]").attr("value",t+C);$("#crownix-download-form input[name=export_type]").attr("value","pdf");$("#crownix-download-form input[name=protocol]").attr("value","file");$("#crownix-download-form input[name=delete]").attr("value",true);$("#crownix-download-form input[name=attatchment]").attr("value",false);$("#crownix-download-form").on("submit",function(F){this.submit();F.preventDefault();setTimeout(function(){E.fadeOut(500,function(){E.remove();B.enableToolbarItem(["save","print","print_pdf"])})},1000)});var A=(d.options.pdfPrintSpoolName?"/"+d.options.pdfPrintSpoolName:"");if(m.browser.firefox||(m.os.macos&&m.browser.safari)){u.css({width:"100%",height:"100%"});var y=new n(g.get("print_pdfviewer_title"),u,true);y.show();$("#crownix-download-form").attr("action",w+A).attr("target","crownix-pdf-viewer").submit()}else{u.appendTo("body");$("#crownix-download-form").attr("action",w+A).attr("target","crownix-pdf-viewer").submit();u.css("display","none")}};var f=function(t,r,s){var u=c(r,s);var q=$.Deferred();u.addEventListener("message",function(x){var y=x.data.method;if(y==="object"){var w=x.data.obj;q.resolve(w);u.terminate()}});u.postMessage({method:"object",obj:t});return q};var e=function(s,x,y,u,r,w){var q=new k();var t=$.Deferred();q.setConnectTimeout(d.options.timeout);q.setHandler({load:function(z){},done:function(z){t.resolve(z.responseText)},error:function(z){if(status==0){u.show(y.connect_error)}else{u.show(y.server_error+"("+z.status+")")}t.reject(z.status)},abort:function(){t.reject(xhr.status)},timeout:function(){u.show(y.timeout_error);t.reject(xhr.status)}});if(r&&w){x.rdid=w;q.setRequestHeader("crownix-rdid",w);q.setRequestHeader("crownix-encrypt-type","parameter")}q.invoke(s+(w?"?rdid="+w:""),x);return t};var o=function(q,s,t){var u=j(s,t);var r=$.Deferred();u.addEventListener("message",function(x){var w=x.data.text;var y=x.data.method;if(y==="finalize"){r.resolve(w);u.terminate()}});u.postMessage({method:"finalize",text:q});return r};return b})();m2soft.ns("m2soft.crownix.ParameterBuilder");m2soft.crownix.ParameterBuilder=function(d,b){var c=d,a=b;this.concatMrdPath=function(e){if(typeof e=="string"){return e}else{return e.join("\u0004")}};this.concatMrdParam=function(h,j,f){if(!j){j=""}var k=function(n,m){var l=[];if($.isEmptyObject(h)){l=[m]}else{l=[c.formManager.makeFormParameter(h,m)]}var q=c.report.getDocumentList()[n+1];if(q){if((f===undefined&&a("includeNoteInExport"))||(f&&a("includeNoteInPrint"))){l.push(c.noteManager.toNoteParameter(q.firstPage,q.lastPage))}}if(c.drilldownManager.getDrilldownLength()){l.push(" /rdrilldowninfo ["+c.drilldownManager.toXML()+"]")}if(n==0&&!f&&c.options.download.partsave!=undefined){if(c.options.download.partsave==0){l.push(" /rpartsavedialog [1] ["+c.currentPage+"]")}else{l.push(" /rpartsavedialog [1] ["+c.options.download.partsave+"]")}}var o=c.report.getRemovedPage();if(n==0&&o.length>0){l.push(" /rsavepageexcept ["+o.join()+"]")}return l.join("")};if(typeof j=="string"){return k(0,j)}else{var e=[];for(var g=0;g<j.length;g++){e.push(k(g,j[g]))}return e.join("\u0004")}}};m2soft.ns("m2soft.crownix.worker.Identity");m2soft.crownix.worker.Identity=(function(){var a=function(){addEventListener("message",function(b){postMessage(b.data)})};return{workerFunction:a}})();m2soft.ns("m2soft.crownix.worker.security.SEED");m2soft.crownix.worker.security.SEED=(function(){var a=function(){var c=function(d){if(typeof console!="undefined"){console.log(d)}};c("[Crownix Viewer] use SEED with CryptoJS");var b=null;addEventListener("message",function(k){try{var d=k.data;var l=k.data.method;if(l=="process"){var j=k.data.text;d.text=b.process(j);postMessage(d)}else{if(l=="finalize"){var j=k.data.text;d.text=b.finalize(j);postMessage(d)}else{if(l==="create"){b=new SEED(k.data.crypt,k.data.key)}else{if(l==="object"){var h=k.data.obj;d.obj={};for(var f in h){if(h.hasOwnProperty(f)){d.obj[f]=b.finalize(h[f])}}postMessage(d)}}}}}catch(g){postMessage(d)}})};return{workerFunction:a,dependency:{SEED:m2soft.crownix.security.SEED}}})();m2soft.ns("m2soft.crownix.worker.security.AES");m2soft.crownix.worker.security.AES=(function(){var a=function(){var f=function(r){if(typeof console!="undefined"){console.log(r)}};f("[Crownix Viewer] use AES with WebCrypto");var l=crypto;var d="";var n="";var m=null;var h={name:"AES-CBC",length:128};var c={name:"AES-CBC",iv:null};var q=function(w){var u=(unescape(encodeURIComponent(w)));var r=u.split("");var t=[];for(var s=0;s<r.length;s++){t.push(r[s].charCodeAt(0))}return new Uint8Array(t)};var o=function(u){var t="";for(var s=0;s<u.length;s+=10000){t+=String.fromCharCode.apply(null,u.subarray(s,s+10000))}var r=decodeURIComponent(escape(t));return r};var b=function(r){return btoa(String.fromCharCode.apply(null,r))};var j=function(r){var w=atob(r);var s=w.split("");var u=[];for(var t=0;t<s.length;t++){u.push(s[t].charCodeAt(0))}return new Uint8Array(u)};var g=function(x){var t=new ArrayBuffer(x.length/2);var s=new Uint8Array(t);for(var u=0,r=0,w=x.length;u<w;u+=2,r++){s[r]=parseInt("0x"+x[u]+x[u+1])}return s};var e=function(r){var s=g(r);c.iv=s;return l.subtle.importKey("raw",s.buffer,c,true,["encrypt","decrypt"])};var k=function(r){return l.subtle.exportKey("raw",r)};addEventListener("message",function(y){try{var r=y.data;var z=y.data.method;if(z=="process"){}else{if(z=="finalize"){if(y.data.text){var x=j(y.data.text)}m.then(function(A){l.subtle[n](c,A,x).then(function(B){r.text=o(new Uint8Array(B));postMessage(r)})},function(){postMessage(r)})}else{if(z==="create"){n=y.data.crypt;m=e(y.data.key)}else{if(z==="object"){var w=y.data.obj;var t=[];for(var s in w){if(w.hasOwnProperty(s)){(function(B){var A=m.then(function(C){return l.subtle.encrypt(c,C,q(""+w[B])).then(function(D){r.obj[B]=b(new Uint8Array(D));return Promise.resolve(r.obj[B])})});t.push(A)})(s)}}Promise.all(t).then(function(){postMessage(r)},function(){postMessage(r)})}}}}}catch(u){postMessage(r)}})};return{workerFunction:a,}})();var encCode="bQkwidivMO7RMQLGgVmT/uxsrn7Q9VzfTfAiRIH9csUUwuBXcA8alu/fBE2ASHzvckRSuuWGx1jmEhBSpAuCed6mEUZ+zZBgkkYKyZG+20LkSse+JdwKThdtnTbi88aqyknS1pd3DBOVufTb/RNk8wSlBIlfWau2WXLy0IyMrmGjRIKEGEEkeSsfKqv5aiNZI9bL2jAW8AKviOOPQJVg+xAIuQfgH0hk4GEhv6GVRg0MKf1dT/L4JhAYJpO2vmm7hkeckdGyAoIC40njZ0teSyaNXXODChL+GfMiVVgtBYxbQ4hfuhH+frwwt5C3+dFigmpR+adBO00w2mC4og6Jc9O/HILBF//7ZRWPRVHu8PUfq9PhexKoyE85clBCXrrXIdJIId8f+xzosxrtBaktp4ZMPpj5tTPR6RT4THE0tMaztUC3pJCFVwdqCGui1k/8RY0ChQR/qpZ6aL0JWkPMBDOiFNuMw9ZiE1Uy5BI0pIfWtCOwzVQuMQSw50tKEpNHRFVfWoATiSNRLYyqXvPvDYW5xd2M+DYJpi+aSN4ODdgh1hdsvMK31xmt4dr50JWXC+lXYUJO2bxK8sjFE7ahqhCfiXAB5THIzojKv8hvZz/Rkk6kH6IrGW+xwiSAn2M/jv0becjRsT96InU4fnmm2ysxaawWJfNsCrwxeZ5el582N/ChCuZu4o0M1Der6KLPjq6+pMbqltRk/zvcs42GUsW7JnLVrdOgX3fE8DfSF/6BV18EYN5+OPWvtQtDtsqPZ+uqG0xWbX4yxZEqDqE0pQQV+c07He/t6RXMEeRy13Tpf5x1EdlqDjrpT5LMkfE6+yy7HInFdTWxQNCQPuZlU4Sg4jpHWt5ensxIwt5puIguEVudh1MuSkMeTG9ASjN+lTxwoTWFA4VVUbJ+zoYVEL6S9efIK/UUdUeZ3qNyE97G9wXCyeC3Mkrki1c7PxcWqh2O67BN/urflgfVcQ3ZE62E/2ZU9TyEX0SawXceZpDCMOHRUKHBRb09QCBuXO/XxA1Ai6dNoQ9N54YiHQNTLyHeIPlPyxMYwBPPECklc0wBdyUqBq2bTto6OSJwMGdWuLjjAZ4tHJR4J8bCujjzgCkCz2NhjcaPlSVNfor+pxTFgfChZuQmEYfChfzjQ9Df29PrziPKMfCilXVD0UHl8ByNYX6npMCs0nFo4ObvzS9BKRiFCCFqgfPzyu5QcxaV5vj2d2kEhtQ3zT/H55zJuV7hkXATbA/lSGkJ0UljFmR80rGlNxzhv6DdLzdBfq5+uHDVjRgAxx8F0aZS4Jsl7AGGhNYcsqzj7XHxx5bIdnm3xhoC4bJ05f2kh8+OM7/uUTO5/au7cnoZdnXDllmYsXIr1p00ZFYFEmJUDZe7ih9ZYd2m6ZElyPkf/3AspkwqGCyMAVG1+DmiT3iSfh93W9BU+DUyefaaoLJ0/D6tqORSXZW74IAag0qYKDaTRZXMcVbC0kxueZoEFMoGbP3h9+vxN2I1k/pILz2nU+OM4nOYaUK7uM8nc/TMpTV8dgCCh81QhtvrmGiZ1IlewFt8Eo/tS2Ep6i6mSFiLjyEyLS64jhEaNi7Bxx1he56usAF0x/1HQOxV443ELL+qsHs9QisneQystADfQY+kc8wHPvVD4rg9aib10iVX404dvNZpTfzwe9IxWQYZI49M0ErAvgVuzvjporEyBd35MHRg0Opc+X69/fCxBGlTfOGRlHPivSFmbkrp+MqmlDgDo1IncF4x/Lpu5iuH0r5VCra+XUdY1D4qP76vE/Ya5zP3St4jYynHbsjC+tQlxV7QiNaZ8j3SOGlu9qBFR92aSB4arDybkcPACKitj/SLSsDBKyw+WDQDsVENo8oq2nuFVF2ETVavzE1RLru7IIDBQhU2g9fT3U4QfyNg2Jlwf3xpkFcWARnr7ufXDzNhkvnOPlssnD3HyhpZZy3/sC3lIf5Cxm/1/gZ+HWO0Wh/YoPKflVVJ5mkOyKQI1rx/wNeX6JA+MUh5gmGcOG4shdg3lkjbrYIfiZXNnMp/UkhlcRhBe9c/Xt8rVQQK/+ddxin0l8rRp4QMrAtDFNZZJLNTACwAADrCtU4tc2xI+ktDthTi0ggy48xmh25A1JCb8/pTTYcjGStjqa+53CBCOdTbsjlER/LnWTsEsMkSu9HR8H/JfTZcb5El8h+U97lAyjr7HpQyCJw2PihmYbMKZlIX31ISLz+e8jnn3Kb5Cc3ITe+nR5f81ZIvsFEF0ku8yyaxEVE2X40QzV6UrCMsMYtGQPFemYbRyzqW8oFrdDK+aMxm7Vxe1O4+HzPJMNulHMUVu96Ep39jT0um9TDXLWKugLxji1i8IW+rpAAJheM5LzmJ7ZkdDSl98IjD9qlQSdpQYV0Tu3sJTwGGmupEQMIk1unPT2PVrXc0vzjAkofbCFTJFl9TZGn7Y0njvvsF3mTEL4j6h6qv8m3B/ruhogXNbxul1dWxQLrYZjlOTz5vzYHCTQ+NnQF5W0LLmS5ZiMtXuzdGLkYmsC/Uc+BO2xiLz95Hx2sM5xAS+6jkPNODPkM0eIECVZv464rWoM215y0WUUL/W7+ISIiCDOdonZnSgUrOpU+YKQQbhSxkzVhchOr96l9mHGRZMlY8kAH2Zh88Rht+LGCuS9zP/d7a6GdSjIMyc875nfdiPMQ94sVzGVWjHLTE+ukfwoKZ/xVyFDqDHYso0MSweekPDLMr7WKK9sdvmvT2oiVhwnsnT1UiXsjCtFr7dmI0ErqsPo0g0Wv9lCPDjOsHeOiZvY5a1TceBAi3pdvPmi2os/QJMsrpSv3anptYDQEUAAoVpX2hiVIPc46f77FFoScolds+8v2hWGIZvxBvqm4FtZmxu48TWwOZyoKzawrKIUrVkD2YKPeCUsTDUZNk2Ji68R09QkaRmEeP3ZFttrdwms4STiHlzYyVAP/Sl96bqkFuQ4vbbQ6D6HvbGxy2BwBxZet71lYK9zh7o9At0QhQkIDgVfIRXpIKvPqRYk0eyhcx37M94LAbhqEoqKRYLkvVQDw++/3uxzt2TRVbCjfte+b4epkhB0O0zuFhK4DqbeTIQyRkcDiA7ywunXIifTV/yfvVYu+Qu/zmX1DAnFSTviVA4zhmx3haF4MrBpypqnv8ldnnHRKrbSV9iuyFbgnEt3OseVnHTDJEFTwvdgV2UhXCDI48ubQntWACvOVBz1q5usmZ6AjoPIJD9qmLYVNqZE6l2+s+jG67cNAH3oWmVPIMRZdMyAKO/r7SYS4YFDP1yNJYATs8MW5NK/iq5ilsB1U7gNf7o+XhdMc8n8TDNSXoWl7H/V7sCNUFkdaaysoNvKjY7lxqnuooA0aampFjgstCpM/hsgeglIja6plB5O7evy0kilnph5C0/zN/j4PYH3IaOuO0Qmwb0By/uofFWIoLrKe2iYHDOWkZS7hBosTPyKb8bjw+RTTh9k3PWiVjBUlqJSxk55IlN+TWqDAiSulY1OsVa1C86i31JJFT2o/0svTrA/ATYNMQyIAqCN64hure+gExoFiQVW237oiUBIPAYJVU0k0nM/XS8TxL2XcXLnq7vKjUM1H3YGrPs2fvJjVH1csg7mSIKGqS8nl+DdhiaYwW5M1UAqFGyu8JMgq4qefsVBIb/S1wVrSpDsQrjaK6vWG40hA5LHL1LWOsR7xB1VOfpJN+SdDhFKS8L197puEgOKh0aXgjU5SimfnuGD/ejXqqSlzOHO8XzE29oNPNRsy9E7NlhldYKRzRl6Sf3jbaagP4wLxnp3/LeaEDV0H0V5UCAqJC/6Yn2vW8RSBndFIexvm/Klljhw/VeoKzQUH2tcD6UVyvffLZ6FOzPxLqYHbHHuaUoPu41zDSu8qnfmeQdBNlEtRZZ/cNxX3E1SfsDew97iA86RvY/7Rk7Kn9e5EjYI0d1vVWm61uupBcjP8E3wo7r3lK7UXBY5CAmid7PsZei2D+mjgin/5EYAy8qMmClgHadaimu3ntoGlxuGHox7oyimrKKFTFPsjAfQrNA8oix0awpgj2jo103hDVs80FmCIzzH+u9JNuWHKT5lvVDVKF/Ys2lWAKxDwiFo3RUBORJ38bjO5XrQnGRKmRwGNRlxUTlhYauKoDj2KLzzgKzGYY/BII9DstjwL0PZxEcwOOY4yuzXB9e3WE+Fkc1kF/YZPJ8SXqQSy5ysLunCHfQyMhgYyv4mybXARYrXPe5UcP+b1HZD59mK/E8cqt2dn2cyBbCvkGdqc1NIvxd9mj3Si0s8/i9XFtGAGk73aOU7qrJ93Gas2ha4mqUfZFw6ijnLED/lq1uCdjFGMotif/t3emofPQ8fdPPLhSZ21ndvRKWkLOzs31Ea35bzzYV3+RSwC6qW7D2f/V2FNcdhkoUSyP8rMu0HYxdyBkaYCOEee1SNv9UDLTMEPtWRLVilEhxkE/1tBE3B2y/9vwjiv54VOI2I01efdNuCqEMXA2Tkpq+G5wvcwY8IMqjWO7yP06uMav1Gz7spONBiTMbejRMJMFUiMCJCUf6eqBawc1wwuUZ233/8x5VcBrsLGqHtbfUAXxtXm41THuPrGfFgcj/sK3NbqOdDHCUApp12P27DyvrHJ/X46sfQyBxaq74E+tyyXAEqQ/lhWuN9axCYX6K3sx6wXGuUVxw+pf4WRxBh9ORj+2a5qMrY5L4mhuqdjWDtk1QSs1K7cHqFVoLWeZ0fRjTEOICWf4E4oE1NJ89YaG/TYDRKGxQUBIweT6jiVw0geMF/JJJZLNyJa3A34RJQOGZo1w5Xpg/P/ygYQYji05Mcfhi5Tf9XvCfxpxxKtDAvHM+aVj9qVkmTUwlIhieWJCD/oWKWVYCsFNtOYIlRyniIgc3QZYkuTypOhWguHjtjIAmcJdVIFpqhdg3UnlSXvdXjmycVZF9tCkrOJ5Nzd/ndrJNJKAcVoYkDo4AsmdnWAR7yEhkot/c+oah5nfh+gGHbZy23DerQar/LDwatrd2kB/DKl5qbhYfNJ+X56szDfCnoF5LG0L1/JwMXywODo65Dys1vLq/e7kJ0GQfZn26t+xjxu10WJlJvhGF/wu3uT1dl8s9mNBpFHHxyqS555kp6vxJPzWd7eUx+tR2+4bHj7924VreSP6jyjS1P1Qa9sGtC/SND0pIG63NJcbPGKHANv8TUgH4xLEBLFMBgS9wvzET11pV7vIxZiZKZCxdOFeRNCc3oMNeD9HCmjh6qTicKTUw7tCxywhDTDm2ldNvg5lkOV32B5+F/UIyWMf/7DthqEiNehHVq+H5or6BKDMr3IgTnsNOLBS5vuepphVWaX24L31AJwUJvFk0WKCTudsGLLc4g+XDvqthEecvVqlucH+uqxivYkyhM/IwZl2mtpbhrPjwXrFYBMQzFeTlgWkWHqRISC8dxlUfGhzVG233hnPjNQqEd/yoC6GHokJaoZdIPkQ1rZu2ssGMlI4C9yyE8iyqQ0xIeuHHg8iTPkFko7JJKBc4urSQiJaIrOg9zOcD+P/PayC4rFM+uSyoaZOWwiJfNq70ToxxmFuPE+noM05aFPZ6CcVz3CE7mF5yrAHaO/KHuXx/b28fXHWZKBDY30l1cVebo9kbU8EnzO275szf97XxZbv9ILZXFSlpMuNJpEXAZ9Xv/mraa4mE1m8BRFjLrTZ+TLgX0mZvO2mb292ocvoIlCPMG3Cn0bLtxlrbiG0w1KBTR9czgQbgmklmnC0LDLBUtorPaP/E2TBjNM=";m2soft.ns("m2soft.crownix.EncEval");m2soft.crownix.EncEval.eval=function(){var C;var type;var fk=["\u0030\x38\u0062","\u0034\x31\u0066","\x38\u0063\x35","\x33\u0064\x37","\u0032\x30\u0037","\u0066\x33\u0030","\x30\u0031\x39","\x62\u0064\x63"];var ek=[49,48,49,98,51,98,100,56];var kk="";for(var i=0;i<8;i++){kk+=fk[i]+String.fromCharCode(ek[i])}var SEED=m2soft.crownix.security.SEED();var seed=new SEED("decrypt",kk);eval(seed.finalize(encCode));encCode=undefined;delete encCode};m2soft.ns("m2soft.crownix.FieldOrder");(function(){var b=function(){var f=0;var c=[];var d=function(h){var g=h.indexOf("-");return(g==-1)?0:parseInt(h.substring(g+1))};var e=function(h){var g=h.indexOf("-");return(g==-1)?h:h.substring(0,h.indexOf("-"))};this.push=function(l,n){var k=l.attr("fi");var h=l.attr("id");var o=l.attr("ty");var g=l.attr("ti");var m=l.attr("hd");var j=l.attr("ed");if(o==="cb"||o==="rb"||g==undefined||m==="1"||j!=="1"){return}var q={id:"crownix_form_field_"+k+"_"+h,formID:e(k),fieldID:h,formRepeat:d(k),fieldRepeat:d(h),type:o,page:n,priority:parseInt(g),};c.push(q);c.sort(function(s,r){if(s.formID==r.formID&&s.formRepeat>0&&r.formRepeat>0){if(s.page>r.page){return 1}else{if(s.page<r.page){return -1}else{if(s.formRepeat>r.formRepeat){return 1}else{if(s.formRepeat<r.formRepeat){return -1}else{if(s.fieldRepeat>0&&r.fieldRepeat>0&&s.fieldRepeat>r.fieldRepeat){return 1}else{if(s.fieldRepeat>0&&r.fieldRepeat>0&&s.fieldRepeat<r.fieldRepeat){return -1}else{if(s.priority==r.priority){return 0}else{return s.priority<r.priority?-1:1}}}}}}}}else{if(s.page>r.page){return 1}else{if(s.page<r.page){return -1}else{if(s.fieldRepeat>0&&r.fieldRepeat>0&&s.fieldRepeat>r.fieldRepeat){return 1}else{if(s.fieldRepeat>0&&r.fieldRepeat>0&&s.fieldRepeat<r.fieldRepeat){return -1}else{if(s.priority==r.priority){return 0}else{return s.priority<r.priority?-1:1}}}}}}})};this.remove=function(k,h){for(var j=0,g=c.length;j<g;j++){if(c[j].id==="crownix_form_field_"+k+"_"+h){c.splice(j,1);break}}};this.getNext=function(){if(f==c.length){return null}else{return c[f+1]}};this.getPrev=function(){if(f==0){return null}else{return c[f-1]}};this.getCurr=function(){return c[f]};this.setCurr=function(j){for(var h=0,g=c.length;h<g;h++){if(c[h].id===j){f=h;return c[f]}}};this.setPage=function(j){for(var h=0,g=c.length;h<g;h++){if(c[h].page>=j){f=h;break}}};this.exist=function(j){for(var h=0,g=c.length;h<g;h++){if(c[h].id===j){return true}}return false};this.length=function(){return c.length};this.clear=function(){c=[]}};var a=function(h){var g=m2soft.crownix.Util;var u=h;var n=h.containerDom;var t=new b();var f;var c;var C=false;var q=false;var k=null;var d=false;var m=true;var e;var z=$("<div>").attr("class","crownix-tab-buttons").appendTo(n);var j=function(){if(!k&&!t.exist(document.activeElement.id)){o(t.getCurr())}else{o(t.getPrev())}};var l=function(){if(!k&&!t.exist(document.activeElement.id)){o(t.getCurr())}else{o(t.getNext())}};var w=$(m2soft.crownix.resource.Icon.LEFT_ITEM_MARK).attr("class","crownix-toolbar-icon-color crownix-toolbar-gradient crownix-tab-button").on("touchstart click",j).appendTo(z);var r=$(m2soft.crownix.resource.Icon.RIGHT_ITEM_MARK).attr("class","crownix-toolbar-icon-color crownix-toolbar-gradient crownix-tab-button").on("touchstart click",l).appendTo(z);var B=function(G,D,E){clearInterval(f);$('[id^="crownix_form_field_"]').removeClass("crownix-formfield-blink");var F=function(){$("#"+G+"-canvas").toggleClass("crownix-formfield-blink");$("#"+G).toggleClass("crownix-formfield-blink")};F();if(D==="SELECT"||(E&&E.indexOf("crownix_form_field_file")>-1)){return}if(D){f=setInterval(F,500)}};var o=function(D){if(!D||q){return}q=true;if(D.page!=u.currentPage){d=true;u.viewer.movePage(D.page)}t.setCurr(D.id);q=true;if(g.browser.mobile){$(":focus").blur()}setTimeout(function(){var E=$("#"+D.id);if(u.shareManager&&u.shareManager.isConnected()){if(E.hasClass("crownix-auth-lock")||E.hasClass("crownix-field-lock")){x();B(E[0].id,E[0].tagName)}}if(D.type=="sg"){setTimeout(function(){if(g.browser.mobile){E.trigger("tap")}else{E.click()}},g.browser.mobile?500:0)}else{E.focus();s(E)}},0);k=D;d=false};var s=function(G){q=false;if($(G).is("button")){return}G=G.parent();if(G.parent().hasClass("commonFieldHinting")){G=G.parent()}var E=n.scrollLeft(),I=n.scrollTop(),D=G.position(),H=G.offset(),F=n.offset();if(g.browser.mobile||F.left-H.left>0||F.top-H.top>0){setTimeout(function(){var J=-D.left,K=-D.top+45+$(document).scrollTop();if(J>0){J=0}else{if(J<scroll.maxScrollX){J=scroll.maxScrollX}}if(K>0){K=0}else{if(K<scroll.maxScrollY){K=scroll.maxScrollY}}scroll.scrollToKeepCenter(J,K,0)},g.browser.mobile?500:0)}};n.on("scroll",function(){var D=n.scrollLeft(),E=n.scrollTop();u.scroll.scrollBy(-D,-E);n.scrollLeft(0);n.scrollTop(0)});var A=function(D){c=$("<input>").attr({id:"crownix_hidden_tab",type:"radio"}).css({opacity:0,width:0,height:0,}).prependTo(D);if(!d&&!g.browser.mobile){setTimeout(function(){c.focus()},100)}};var y=function(D){z.show();if(!t.exist(D)||t.getPrev()!=null){w.css("visibility","visible")}else{w.css("visibility","hidden")}if(!t.exist(D)||t.getNext()!=null){r.css("visibility","visible")}else{r.css("visibility","hidden")}};var x=function(){clearInterval(f);if(e){e.find('[id^="crownix_form_field_"]').removeClass("crownix-formfield-blink");e.find(":focus").blur();c.focus()}k=null;if(g.browser.mobile&&!g.browser.ios&&t.length()>0){z.hide()}};this.bind=function(G,F,E){clearInterval(f);scroll=F;e=G;t.setPage(E);A(e);k=null;e.on("keydown",function(H){if(H.keyCode!=9){return}H.preventDefault();H.stopPropagation();if(!m){return}if(!k&&!t.exist(document.activeElement.id)){o(t.getCurr())}else{if(H.shiftKey){o(t.getPrev())}else{o(t.getNext())}}});e.on("focus",'[id^="crownix_form_field_"][readonly!="readonly"][disabled!="disabled"][fieldtype!=file]',function(H){H.preventDefault();H.stopPropagation();if(H.currentTarget.type==="checkbox"||H.currentTarget.type==="radio"){return}B(document.activeElement.id,document.activeElement.tagName,$(document.activeElement).attr("class"));if(t.exist(document.activeElement.id)){k=t.setCurr(document.activeElement.id)}else{k=null}if(C&&document.activeElement.tagName!=="SELECT"){s($(H.currentTarget))}if(g.browser.mobile&&!g.browser.ios&&t.length()>0){y(document.activeElement.id)}if(u.shareManager&&u.shareManager.isConnected()&&H.currentTarget.type!=="submit"&&H.currentTarget.type!=="file"&&(document.activeElement.getAttribute("formid")||document.activeElement.getAttribute("formname"))){u.shareManager.sendFocusOnField(document.activeElement.getAttribute("formid")||document.activeElement.getAttribute("formname"),document.activeElement.name||$(document.activeElement).attr("name"))}});var D=g.browser.edge?"click touchstart":"mousedown touchstart";$(scroll.scroller).on(D,function(H){var J=H.target.nodeName;var I=$(H.target).attr("id");if(I&&(I.indexOf("crownix_form_field")!=-1||I.indexOf("m2soft-crownix-normal-combo")!=-1)||J=="OPTION"){C=true;return}else{C=false}x();if(u.shareManager&&u.shareManager.isConnected()){u.shareManager.sendFocusOutField()}})};this.movePrev=function(){j()};this.moveNext=function(){l()};this.hasPrev=function(){return t.getPrev()!=null};this.hasNext=function(){return t.getNext()!=null};this.exist=function(D){return t.exist(D)};this.length=function(){return t.length()};this.focus=function(D){if(t.exist(D)){k=t.setCurr(D)}else{k=null}B(D);if(g.browser.mobile&&!g.browser.ios&&t.length()>0){y(D)}};this.blur=function(){x()};this.focusHiddenTab=function(){c.focus()};this.push=function(D,E){t.push(D,E)};this.removeField=function(D){for(var E in D){t.remove(D[E].formId,D[E].fieldId)}t.setPage(u.currentPage)};this.clear=function(){t.clear()};this.setPreventMove=function(D){q=D};this.enable=function(){m=true};this.disable=function(){m=false};this.scrollToField=function(D){s(D)}};m2soft.crownix.FieldOrder=m2soft.crownix.util.SingleTone(a)})();m2soft.ns("m2soft.crownix.SignWindow");m2soft.crownix.SignWindow=(function(){var g=m2soft.crownix.Resource;var c=m2soft.crownix.Constant;var h=m2soft.crownix.Util;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAYAAABk1z2tAAACYUlEQVRIS73VTYhSURQH8KfoPGxQC/xaRVQEQjjoSqJ2IeRHGKMuBANdZJtACFRa5CoVpYUwi9yJuQiS8CuRaOFiwkAEZ2WrKKRNJiTjB09F5pzFlcc0E933oLf03XvP7/3vvUcJI+Kx2+2BZrP5+rwl3G73Rblc/mo2m8Vg3HchpSRCJuEcKF5kWfbBZrN5v1qtHlcqld/8tRAnk8k+m83mG91ud7Zer283Go0j2nqCgIgzmUz3wuGwplAocL1e7ytAbxEk4qRS6aHL5bpis9l2O50OUyqVpkKQ1ECn0/nSaDQGI5HIJZIGH4m/Ic5isVwPBoMsGVMsFhmADmu12mWaFIUA92BrP/j9fq3Vat3Or1ari3a7/QNSWgHuKh/3XxPEr4cU9+B8HQYCgV0+EiGDwWAZCoV2SEpicLgGdYKk8HlI/vaJxYkCkiTP2m58NxwOmXQ6fQxbfkfI7SUfKjhBsgDeaJ1O50skEtsLQYCZTIZbLpePAFikuRj8saKAiNNoNPuxWOwCPH8YMEWxSMHAs3Dz+Zyp1+sc9D+WgMfjMZPL5Y4nk8lBuVx+RpukIKDP54upVKrn/OQQl0wmfwHoi16vt0Sj0W2q+A6SnI9Go3fQzAM0SGqgw+G4r1Ao3qZSqR2SEsEB4CmeN0xXq9Xu85H9fp/J5/MzOJM3W63Wt39FUgPxb0wikXyCZnwN+h17GkcKezyeF2q1+kk8HlfiNmez2Z8cx9lobzQ1kAC8Xu8bg8Fgn06nHEnudCrQKx8qlcoDaDXcYrG4S4sT3QdxK6H4x7+1EURCoSMhOASeAFNOWCDr6tFoAAAAAElFTkSuQmCC";var w=30;var a=44;var l="New Window";var z=false;var C;var u;var m;var q;var b;var F;var B;var s;var y=false;var A;var f;var j;var o={"box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-webkit-box-sizing":"border-box",};var t=function(){y=false;C.remove();B.remove();var G=$("body");G.off("mousedown",f.mousedown);G.off("mousemove",f.mousemove);G.off("mouseup",f.mouseup);window.removeEventListener("orientationchange",D,false);F.removeClass("crownix-formfield-blink");s.enable();s.restore();j.focusHiddenTab()};var d=function(K,H){b=$("<canvas>").css(o).css("border","1px solid grey").attr({width:K+"px",height:H+"px",}).appendTo(m);var I=b[0].getContext("2d");I.strokeStyle="#000000";I.lineWidth=K/F.width()+1;I.lineJoin="round";I.lineCap="round";var N=b.offset(),M=N.left,J=N.top;f=new k(I,M,J);var G=$("body");G.on("mousedown",f.mousedown);G.on("mousemove",f.mousemove);G.on("mouseup",f.mouseup);if("ontouchstart" in window&&!(/hp-tablet/gi).test(navigator.appVersion)){var L=new r(I,M,J);b[0].addEventListener("touchstart",L.touchstart,false);b[0].addEventListener("touchmove",L.touchmove,false);b[0].addEventListener("touchend",L.touchend,false)}s.disable()};var k=function(N,M,L){var G=N;var J=M;var H=L;var I=false;var K={x:-1,y:-1,};this.mousedown=function(O){O.preventDefault();K.x=O.pageX-J;K.y=O.pageY-H;I=true};this.mousemove=function(O){if(I){O.preventDefault();G.beginPath();G.moveTo(K.x,K.y);K.x=O.pageX-J;K.y=O.pageY-H;G.lineTo(K.x,K.y);G.stroke();G.closePath()}};this.mouseup=function(O){if(I){O.preventDefault();I=false}}};var r=function(N,M,L){var G=N;var J=M;var H=L;var I=false;var K={x:-1,y:-1,};this.touchstart=function(P){P.preventDefault();var O=P.touches[0];K.x=O.pageX-J;K.y=O.pageY-H;I=true};this.touchmove=function(P){P.preventDefault();if(I){var O=P.touches[0];G.beginPath();G.moveTo(K.x,K.y);K.x=O.pageX-J;K.y=O.pageY-H;G.lineTo(K.x,K.y);G.stroke();G.closePath()}};this.touchend=function(O){O.preventDefault();if(I){I=false}}};var x=function(G){var G=$("#m2soft-crownix-container");B=$("<div>").addClass("crownix-overlay").css({display:"none","z-index":c.WINDOW_OVERLAY_Z_INDEX,}).prependTo(G);B[0].addEventListener("touchstart",function(H){H.preventDefault()});if(z){B.fadeIn(100)}};var E=function(){var H=$("#m2soft-crownix-container");var Q=H.width();var T=H.height();var L=F.width();var U=F.height();var G=T*0.5;var M=G*L/U;var K=h.browser.mobile?2048:780;var R=Math.min(K,Q-20);if(M>R){M=R;G=M*U/L}var O=Math.max(M+2,130);var J=G+w+a;var I=(T-J)-20;C=$('<div id="crownix-window-frame">').addClass("crownix-window-frame").css({display:"none",left:(Q-O)/2,top:I,width:O+"px",height:J+"px","z-index":c.WINDOW_Z_INDEX,background:"#FFFFFF","text-align":"center",}).prependTo(H);s.save();s.zoom(1);s.scrollToElementWithFrame(F[0],1000,J+20);u=$("<div>").addClass("crownix-window-header").css(o).appendTo(C);var N=$("<div>").css({position:"absolute",left:"4px",top:"4px",height:"18px",}).appendTo(u);if(j.length()>0&&!j.exist(F.attr("id"))||j.hasPrev()){$(m2soft.crownix.resource.Icon.LEFT_ITEM_MARK).attr("class","crownix-toolbar-icon-color crownix-toolbar-gradient crownix-window-tab").on("click",function(){if(j.hasPrev()){t();j.movePrev()}}).appendTo(N)}if(j.length()>0&&!j.exist(F.attr("id"))||j.hasNext()){$(m2soft.crownix.resource.Icon.RIGHT_ITEM_MARK).attr("class","crownix-toolbar-icon-color crownix-toolbar-gradient crownix-window-tab").on("click",function(){if(j.hasNext()){t();j.moveNext()}}).appendTo(N)}$("<span>").addClass("crownix-window-title").text(l).appendTo(u);$("<span>").addClass("crownix-window-close").bind("click",t).append($("<img>").attr("src",e)).appendTo(u);m=$("<div>").addClass("crownix-window-body").css(o).css({width:"100%",height:(J-w-a-6)+"px"}).appendTo(C);q=$("<div>").addClass("crownix-window-footer").css(o).css("text-align","right").appendTo(C);var P=$('<button type="button"></button>').addClass("crownix-dialog-button").addClass("crownix-dialog-button-action").text(g.get("ok_button_text")).css({"margin-right":10,"font-size":"11pt","font-weight":"bold",width:"80px",height:"40px"}).bind("click",function(Y){var X=b[0].getContext("2d");var W=F[0].getContext("2d");var V=X.getImageData(0,0,b.width(),b.height());W.clearRect(0,0,F.width(),F.height());W.drawImage(b[0],0,0,F.width(),F.height());if(typeof A==="function"){A(V)}t();Y.preventDefault();Y.stopPropagation()}).on("keydown",function(V){V.preventDefault();V.stopPropagation();if(y&&V.keyCode===9){if(V.shiftKey){if(j.hasPrev()){t();j.movePrev()}}else{if(j.hasNext()){t();j.moveNext()}}}});var S=$('<button type="button"></button>').addClass("crownix-dialog-button").addClass("crownix-dialog-button-action").text(g.get("refresh_button_text")).css({"margin-right":10,"font-size":"11pt","font-weight":"bold",width:"80px",height:"40px"}).bind("click",function(W){var V=b[0].getContext("2d");V.clearRect(0,0,b.width(),b.height());W.preventDefault()});q.append(S,P);C.fadeIn(500,function(){d(M,G);P.focus();j.setPreventMove(false);y=true})};var D=function(){z&&B.remove();C.remove();F.removeClass("crownix-formfield-blink");x();setTimeout(function(){s.scrollToElementWithFrame(F[0],1000,10);E()},500)};var n=function(G){if(typeof G==="string"){l=G}j=m2soft.crownix.FieldOrder.getInstance()};n.prototype={constructor:m2soft.crownix.SignWindow,show:function(H,J,I,G){F=H;A=J;z=I;s=G;x();setTimeout(function(){E()},h.browser.mobile?500:0);window.addEventListener("orientationchange",D,false)},};return n}());m2soft.ns("m2soft.crownix.MaskWindow");m2soft.crownix.MaskWindow=(function(){var k=m2soft.crownix.Resource,d=m2soft.crownix.Constant,g=m2soft.crownix.resource.Icon,a=m2soft.crownix.Util;var D=30,ab=44,Q=k.get("mask_dialog_title"),M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAYAAABk1z2tAAACYUlEQVRIS73VTYhSURQH8KfoPGxQC/xaRVQEQjjoSqJ2IeRHGKMuBANdZJtACFRa5CoVpYUwi9yJuQiS8CuRaOFiwkAEZ2WrKKRNJiTjB09F5pzFlcc0E933oLf03XvP7/3vvUcJI+Kx2+2BZrP5+rwl3G73Rblc/mo2m8Vg3HchpSRCJuEcKF5kWfbBZrN5v1qtHlcqld/8tRAnk8k+m83mG91ud7Zer283Go0j2nqCgIgzmUz3wuGwplAocL1e7ytAbxEk4qRS6aHL5bpis9l2O50OUyqVpkKQ1ECn0/nSaDQGI5HIJZIGH4m/Ic5isVwPBoMsGVMsFhmADmu12mWaFIUA92BrP/j9fq3Vat3Or1ari3a7/QNSWgHuKh/3XxPEr4cU9+B8HQYCgV0+EiGDwWAZCoV2SEpicLgGdYKk8HlI/vaJxYkCkiTP2m58NxwOmXQ6fQxbfkfI7SUfKjhBsgDeaJ1O50skEtsLQYCZTIZbLpePAFikuRj8saKAiNNoNPuxWOwCPH8YMEWxSMHAs3Dz+Zyp1+sc9D+WgMfjMZPL5Y4nk8lBuVx+RpukIKDP54upVKrn/OQQl0wmfwHoi16vt0Sj0W2q+A6SnI9Go3fQzAM0SGqgw+G4r1Ao3qZSqR2SEsEB4CmeN0xXq9Xu85H9fp/J5/MzOJM3W63Wt39FUgPxb0wikXyCZnwN+h17GkcKezyeF2q1+kk8HlfiNmez2Z8cx9lobzQ1kAC8Xu8bg8Fgn06nHEnudCrQKx8qlcoDaDXcYrG4S4sT3QdxK6H4x7+1EURCoSMhOASeAFNOWCDr6tFoAAAAAElFTkSuQmCC",m="#ffffff",ae="#000000",B=16,G=4,af=a.browser.mobile?2048:780,V={"box-sizing":"border-box","-moz-box-sizing":"border-box","-ms-box-sizing":"border-box","-webkit-box-sizing":"border-box",};var e,T,c,K,L,S,r,l;var A;var O;var ac;var ad;var aj;var u;var f;var q;var aa;var C;var ai;var N;var z;var w;var E;var F;var Z;var Y;var H;var ah;var J;var s;var P=function(ak,al,R){return(ak-al.left)*(R/al.width)};var j=function(ak,al,R){return(ak-al.top)*(R/al.height)};var I=function(){var R=H[0].getBoundingClientRect();var am={width:H[0].width,height:H[0].height};var ak=false;var al={x:-1,y:-1,};this.mousedown=function(an){an.preventDefault();al.x=P(an.pageX,R,am.width);al.y=j(an.pageY,R,am.height);ak=true};this.mousemove=function(an){if(ak){an.preventDefault();ah.beginPath();ah.moveTo(al.x,al.y);al.x=P(an.pageX,R,am.width);al.y=j(an.pageY,R,am.height);ah.lineTo(al.x,al.y);ah.stroke();ah.closePath()}};this.mouseup=function(an){if(ak){an.preventDefault();ak=false}};this.updateCanvasInfo=function(an,ao){R=an;am.width=am.width;am.height=ao.height}};var y=function(){var R=H[0].getBoundingClientRect();var am={width:H[0].width,height:H[0].height};var ak=false;var al={x:-1,y:-1,};this.touchstart=function(ao){ao.preventDefault();var an=ao.touches[0];al.x=P(an.pageX,R,am.width);al.y=j(an.pageY,R,am.height);ak=true};this.touchmove=function(ao){ao.preventDefault();if(ak){var an=ao.touches[0];ah.beginPath();ah.moveTo(al.x,al.y);al.x=P(an.pageX,R,am.width);al.y=j(an.pageY,R,am.height);ah.lineTo(al.x,al.y);ah.stroke();ah.closePath()}};this.touchend=function(an){an.preventDefault();if(ak){ak=false}};this.updateCanvasInfo=function(an,ao){R=an;am.width=am.width;am.height=ao.height}};var n=function(){q=O.width();aa=O.height();C=aa*0.5;ai=e.width;N=e.height;z=N>C?C:N;w=z*(ai/N);E=Math.min(af,q-20);if(w>E){w=E;z=w*(N/ai)}F=Math.max(w+2,210);Z=z+D+ab;Y=(aa-Z)-20};var U=function(){n();ad.css({left:(q-F)/2,top:Y,width:F+"px",height:Z+"px",});u.css("height",(Z-D-ab-6)+"px");$(H[0]).width(w).height(z);J.updateCanvasInfo(H[0].getBoundingClientRect(),{width:H[0].width,height:H[0].height});if(s){s.updateCanvasInfo(H[0].getBoundingClientRect(),{width:H[0].width,height:H[0].height})}setTimeout(function(){L.scrollToElementWithFrame(c[0],1000,Z+20)},500)};var X=function(){ad.remove();ac.remove();var R=$("body");R.off("mousedown",J.mousedown);R.off("mousemove",J.mousemove);R.off("mouseup",J.mouseup);window.removeEventListener("resize",U,false);c.removeClass("crownix-formfield-blink");L.enable();L.restore();l.focusHiddenTab()};var ag=function(){ah.clearRect(0,0,H[0].width,H[0].height);ah.drawImage(e,0,0,H[0].width,H[0].height)};var x=function(al,ak){H=$("<canvas>").css(V).css({border:"1px solid grey",cursor:"crosshair"}).attr({width:al+"px",height:ak+"px",}).appendTo(u);ah=H[0].getContext("2d");ah.strokeStyle=ae;ah.lineWidth=G;ah.lineJoin="round";ah.lineCap="round";ag();J=new I();var R=$("body");R.on("mousedown",J.mousedown);R.on("mousemove",J.mousemove);R.on("mouseup",J.mouseup);if("ontouchstart" in window&&!(/hp-tablet/gi).test(navigator.appVersion)){s=new y();H[0].addEventListener("touchstart",s.touchstart,false);H[0].addEventListener("touchmove",s.touchmove,false);H[0].addEventListener("touchend",s.touchend,false)}L.disable()};var h=function(){O=$("#m2soft-crownix-container");ac=$("<div>").addClass("crownix-overlay").css({display:"none","z-index":d.WINDOW_OVERLAY_Z_INDEX,}).prependTo(O);ac[0].addEventListener("touchstart",function(R){R.preventDefault()});if(K){ac.fadeIn(100)}};var t=function(am){var ak=$("<li>").addClass("crownix-mask-item");var an=(typeof am.title)==="string"?am.title:am.title[0];var al=(typeof am.svg==="string"?am.svg:am.svg[0]);var R=$("<button>").attr({type:"button",title:an,id:"crownix-mask-button-"+an,}).addClass("crownix-mask-button").on("click tab",am.handler);R.appendTo(ak);$(al).appendTo(R);return ak};var o=function(){n();ad=$('<div id="crownix-window-frame">').addClass("crownix-window-frame").css({display:"none",left:(q-F)/2,top:Y,width:F+"px",height:Z+"px","z-index":d.WINDOW_Z_INDEX,background:"#FFFFFF","text-align":"center",}).prependTo(O);L.save();L.zoom(1);L.scrollToElementWithFrame(c[0],1000,Z+20);aj=$("<div>").addClass("crownix-window-header").css(V).appendTo(ad);$("<span>").addClass("crownix-window-title").text(Q).appendTo(aj);$("<span>").addClass("crownix-window-close").bind("click",X).append($("<img>").attr("src",M)).appendTo(aj);u=$("<div>").addClass("crownix-window-body").css(V).css({width:"100%",height:(Z-D-ab-6)+"px"}).appendTo(ad);f=$("<div>").addClass("crownix-window-footer").css("text-align","right").appendTo(ad);var R=$("<ul>").css({"list-style-type":"none",padding:"0px",margin:"0px"}).appendTo(f);for(var ak in A){t(A[ak]).appendTo(R)}ad.fadeIn(500,function(){x(w,z)})};var W=function(an,am,R){var ak=$("#crownix-mask-button-"+an);var an=A[am].title[R];var al=A[am].svg[R];$(ak).attr({title:an,id:"crownix-mask-button-"+an}).children().remove();$(al).appendTo(ak)};var b=function(ao,ak,R,ap,al,an,am){e=ao;T=ak;c=R;K=ap;L=al;S=an;r=am;l=m2soft.crownix.FieldOrder.getInstance();A={ok:{svg:g.MASK_OK,title:k.get("ok_button_text"),handler:function(){var aq=c[0].getContext("2d");r(aq,H[0],c);X();S()}},init:{svg:g.MASK_RESET,title:k.get("refresh_button_text"),handler:function(){ag()}},weight:{svg:[g.MASK_THIN,g.MASK_BOLD],title:[k.get("mask_dialog_thin"),k.get("mask_dialog_bold")],handler:function(aq){ah.lineWidth=ah.lineWidth===G?B:G;W(A.weight.title[Number(ah.lineWidth===G)],"weight",Number(ah.lineWidth===B))}},color:{svg:[g.MASK_BLACK,g.MASK_WHITE],title:[k.get("mask_dialog_black"),k.get("mask_dialog_white")],handler:function(aq){ah.strokeStyle=ah.strokeStyle===ae?m:ae;W(A.color.title[Number(ah.strokeStyle===ae)],"color",Number(ah.strokeStyle===m))}},}};b.prototype={show:function(){h();o();window.addEventListener("resize",U,false)},};return b})();m2soft.ns("m2soft.crownix.submit.Preview");m2soft.crownix.submit.Preview=(function(){var h=m2soft.crownix.Resource;var k=m2soft.crownix.Window;var e=m2soft.crownix.resource.Icon;var j=m2soft.crownix.Util;var x;var u;var A;var t;var c;var B=1;var w;var b;var n;var s;var m="crownix-submit-preview-viewer";var o="crownix-submit-preview-canvas";var f="#5874AD";var C=20;var l=function(){var E=w.innerWidth()-2;var D=b.width();var F=C*2*E/D;return(E-F)/D};var z=function(D,E){x=D;s={zoomin:{svg:e.ZOOM_IN,title:h.get("zoom_in"),handler:function(){B+=0.2;if(B>c.options.zoomMax){B=c.options.zoomMax}c.zoom(B,w.width()/2,w.height()/2)},},zoomout:{svg:e.ZOOM_OUT,title:h.get("zoom_out"),handler:function(){B-=0.2;if(B<c.options.zoomMin){B=c.options.zoomMin}c.zoom(B,w.width()/2,w.height()/2)},},submit:{text:h.get("submit_button_text"),title:h.get("submit_button_text"),handler:function(){if(typeof E=="function"){E()}},},cancel:{text:h.get("cancel_button_text"),title:h.get("cancel_button_text"),handler:function(){t.close()},},};r()};var g=function(){return $("<div>").attr("id","crownix-toolbar").css({"float":"left",width:"50%",padding:"0px 0px","border-bottom":"0px",})};var y=function(D){return $("<ul>").attr("id","#crownix-toolbar-menu").css({"float":D,padding:"0px 10px",})};var r=function(){w=$("<div>").attr("id",m).addClass("crownix-container-gradient").addClass("crownix-storage-dialog").css({width:"100%",overflow:"hidden","text-align":"center","-moz-border-radius":"0px 0px 0px 0px","-webkit-border-radius":"0px 0px 0px 0px","-ms-border-radius":"0px 0px 0px 0px","-o-border-radius":"0px 0px 0px 0px","order-radius":"0px 0px 0px 0px",});b=$("<div>").attr("id",o).css("padding",C+"px").appendTo(w);n=$("<div>").addClass("crownix-window-footer").css("height","50px");var H=y("left").appendTo(g().appendTo(n));var E=y("right").appendTo(g().appendTo(n));var F;var D;for(var G in s){F=s[G];D=$("<li>").attr({id:G,title:F.title}).bind("click tab",F.handler).addClass("crownix-toolbar-item-enable").addClass("crownix-toobar-dropitem").css({width:"inherit","border-color":f,"min-width":75});if(F.svg){D.appendTo(H);$(F.svg).attr("class","crownix-toolbar-icon-svg").css({fill:f,stroke:f,}).appendTo(D)}else{if(F.text){D.appendTo(E);$("<div>").text(F.text).addClass("crownix-toolbar-icon-color").css({color:f,"margin-top":0,"line-height":"32px",}).appendTo(D)}}}};var a=function(){if((x.license.isAllowedFeature("Note")&&x.options.enableNote)&&(x.noteManager.getMode()==="editable"||x.noteManager.getMode()==="disable")){A.setNoteManager(x.noteManager)}};var d=function(){if(x.formManager){A.setFormManager(x.formManager)}};var q=function(){c=new IScroll("#"+m,{zoom:true,zoomMin:0.25,zoomMax:2.5,useTransition:true,scrollX:true,scrollY:true,scrollbars:"custom",interactiveScrollbars:true,freeScroll:true,keepCenter:true,tap:j.hasTouch(),doubleTap:j.hasTouch(),mouseWheel:true,click:false,});var D=l();if(D<1){B=D;c.zoom(B,w.width()/2,w.height()/2,0)}};z.prototype={show:function(D){A=new m2soft.crownix.ImageConverter();d();a();A.convert(x.report,"canvas",function(F){var H=0;var G=0;for(var E in F){if(F[E].attr("width")>H){H=F[E].attr("width")}G+=parseInt(F[E].attr("height"))}b.css({width:H,height:G}).append(F);t=new k(h.get("submit_preview_title"),w,true);t.setFooterHeight(50);t.show({},q);n.appendTo($("#crownix-window-frame").css("height","90%"));if(typeof D=="function"){D()}})},close:function(){t.close()},};return z})();m2soft.ns("m2soft.crownix.ChartConverter");m2soft.crownix.ChartConverter=function(){this.convertMml=function(element){var series,options;element.find("CC").children().each(function(){var elementName=this.tagName;var element=$(this);if(elementName=="SR"){series=eval("("+$(this).text()+")")}else{options=eval("("+$(this).text()+")")}});return{series:series,options:options,}}};m2soft.ns("m2soft.crownix.Field");m2soft.crownix.Field=(function(){var R=m2soft.crownix.Resource;var Util=m2soft.crownix.Util;var Constructor=function(){this.type="";this.id="";this.value="";this.page="";this.required="1";this.editable="1";this.index=0;this.ignore=false;drilldownId=null;this.reset_=function(){this.value=this.originalValue;this.editable=this.originalEditable};this.reset=this.reset_};Constructor.prototype={toData:function(){return{id:this.id,value:this.value,type:this.type}},validate:function(value){if(!value){value=this.value}if(this.required=="1"&&!value){return false}else{return true}},getEventHandler:function(name){return(this.eventHandler&&this.eventHandler[name])||null},setEventHandler:function(name,handler){if(!this.eventHandler){this.eventHandler={}}this.eventHandler[name]=handler},getEventList:function(){var ret=[];if(this.eventList){for(var eventName in this.eventList){ret.push(eventName)}}return ret},getEvent:function(name){return(this.eventList&&this.eventList[name])||null},setEvent:function(element){if(!this.eventList){this.eventList={}}var evc=element.attr("evc");if(evc){this.eventList.change=evc}var click=element.attr("click");if(click){this.eventList.click=click}},setElementId:function(elementId){this.elementId=elementId},setIndex:function(index){if(index==null){index=0}this.index=parseInt(index)},getValue:function(){return null},setValue:function(value){},getLabel:function(){return null},setLabel:function(value){},getEditable:function(){return null},setEditable:function(value){},getRequired:function(){return this.required==="1"},setRequired:function(value,reqColor){if(!!value){this.required="1";this.showRequiredMark(reqColor)}else{this.required="0";this.hideRequiredMark()}},getSelected:function(){return null},setSelected:function(value){},getIgnore:function(){return this.ignore},setIgnore:function(ignore){this.ignore=ignore},trigger:function(eventName,formWrapper,viewer){var encodedScript=this.getEvent(eventName);if(!encodedScript){return}var eventHandler=this.getEventHandler(eventName);if(!eventHandler){eventHandler=this.bindEvent(encodedScript,eventName)}eventHandler(formWrapper,this.index,viewer)},bindEvent:function(encodedScript,eventName){var eventHandler=this.decodeFormFieldScriptFunction(encodedScript);this.setEventHandler(eventName,eventHandler);return eventHandler},decodeFormFieldScriptFunction:function(encodedScript){var planeScript=Util.base64.utf8Decode(encodedScript);eval('var func = function(form, index, viewer) { "use strict"; '+planeScript+"}");return func},showRequiredMark:function(color,wrapper){if(color!=""&&this.required=="1"){var reqDom=$("#"+this.elementId).parents("#m2soft-crownix-field-wrapper").children(".requiredFieldHinting");if(reqDom.length!=0){reqDom.show()}else{if(!wrapper){wrapper=$("#"+this.elementId).parents("#m2soft-crownix-field-wrapper")}reqDom=$(document.createElement("div")).css({"border-color":color+" transparent"}).attr("id","crownix_form_field_hintingbox").addClass("requiredFieldHinting").appendTo(wrapper)}}return reqDom},hideRequiredMark:function(){var reqDom=$("#"+this.elementId).parents("#m2soft-crownix-field-wrapper").children(".requiredFieldHinting");if(reqDom.length!=0){reqDom.hide()}return reqDom}};return Constructor})();m2soft.ns("m2soft.crownix.Field.CheckBox");m2soft.crownix.Field.CheckBox=(function(){var a=m2soft.crownix.Field;var b=function(c,d){this.type="cb";this.id=c.attr("id");this.originalValue=this.value=c.attr("se")||"0";this.required=c.attr("rq")||"1";this.originalEditable=this.editable=c.attr("ed")||"1";this.setEvent(c);this.page=d;this.originalLabel=this.label=c.attr("lb")};b.prototype=new a();b.prototype.reset=function(){this.reset_();this.label=this.originalLabel};b.prototype.validate=function(c){if(!c){c=this.value}if(this.required=="1"&&c=="0"){return false}else{return true}};b.prototype.getLabel=function(){return this.label};b.prototype.setLabel=function(c){this.label=c;$("[for="+this.elementId+"] [class=crownix_form_field_label]").text(c)};b.prototype.getEditable=function(){return this.editable==="1"};b.prototype.setEditable=function(d){var c=$("#"+this.elementId);this.editable=(!!d)?"1":"0";if(this.editable==="0"||(this.editable==="1"&&!c.hasClass("crownix-field-lock")&&!c.hasClass("crownix-auth-lock"))){c.attr("disabled",this.editable==0)}};b.prototype.getSelected=function(){return this.value==="1"};b.prototype.setSelected=function(d){var c=$("#"+this.elementId);if(!!d){this.value="1";c.val("1");c.prop("checked",true)}else{this.value="0";c.val("0");c.prop("checked",false)}};return b})();m2soft.ns("m2soft.crownix.Field.ComboBox");m2soft.crownix.Field.ComboBox=(function(){var a=m2soft.crownix.Field;var b=function(f,h){this.type="co";this.id=f.attr("id");this.value="";this.required=f.attr("rq")||"1";this.originalEditable=this.editable=f.attr("ed")||"1";this.selectedIndex=-1;this.setEvent(f);this.displayValues=[];this.actualValues=[];var e=f.attr("sv");var g=f.children("item");for(var c=0;c<g.length;c++){var d=g[c].getAttribute("sd");var j=g[c].getAttribute("ad");this.displayValues.push(d);this.actualValues.push(j);if(e===d){this.originalSelectedIndex=this.selectedIndex=c;this.originalValue=this.value=j}}this.page=h};b.prototype=new a();b.prototype.reset=function(){this.reset_();this.selectedIndex=this.originalSelectedIndex};b.prototype.validate=function(c){if(!c){c=this.value}if(this.required=="1"){return !!c}else{return true}};b.prototype.getValue=function(){return this.value};b.prototype.setValue=function(d){var e=$("#"+this.elementId);var c=this.actualValues.indexOf(d);if(c!=-1||d===""){e.children("option").prop("selected",false);e.children('[value="'+d+'"]').prop("selected",true);this.value=d;this.selectedIndex=c}};b.prototype.setValueByIndex=function(c){var e=$("#"+this.elementId);var d=this.actualValues[c];if(c==-1){d=""}e.children("option").prop("selected",false);e.children('[value="'+d+'"]').prop("selected",true);this.value=d;this.selectedIndex=c};b.prototype.getEditable=function(){return this.editable==="1"};b.prototype.setEditable=function(c){var d=$("#"+this.elementId);this.editable=(!!c)?"1":"0";if(this.editable==="0"||(this.editable==="1"&&!d.hasClass("crownix-field-lock")&&!d.hasClass("crownix-auth-lock"))){d.attr("disabled",this.editable==="0")}};return b})();m2soft.ns("m2soft.crownix.Field.RadioButton");m2soft.crownix.Field.RadioButton=(function(){var a=m2soft.crownix.Field;var b=m2soft.crownix.Resource;var c=function(d,e){this.type="rb";this.id=d.attr("id");this.gid=d.attr("gi");this.originalValue=this.value=d.attr("vl");this.selected=(d.attr("se")=="1")?true:false;this.required=d.attr("rq")||"1";this.originalEditable=this.editable=d.attr("ed")||"1";this.invalid=false;this.originalLabel=this.label=d.attr("lb");this.setEvent(d)};c.prototype=new a();c.prototype.reset=function(){this.reset_();this.label=this.originalLabel};c.prototype.getValue=function(){return this.value};c.prototype.setValue=function(e,d){if(d.selectedId===this.id){d.value=e}this.value=e;$("#"+this.elementId).attr("value",e)};c.prototype.getLabel=function(){return this.label};c.prototype.setLabel=function(d){this.label=d;$("[for="+this.elementId+"] [class=crownix_form_field_label]").text(d)};c.prototype.getEditable=function(){return this.editable==="1"};c.prototype.setEditable=function(e){var d=$("#"+this.elementId);this.editable=(!!e)?"1":"0";if(this.editable==="0"||(this.editable==="1"&&!d.hasClass("crownix-field-lock")&&!d.hasClass("crownix-auth-lock"))){d.attr("disabled",this.editable==0)}};c.prototype.getSelected=function(){return this.selected};c.prototype.setSelected=function(f,e){var d=$("#"+this.elementId);if(!!f){f="1";e.select(this.id);$("[name="+d.attr("name")+"]").prop("checked",false)}else{f="0";e.unselect(this.id)}d.prop("checked",f==="1")};return c})();m2soft.ns("m2soft.crownix.Field.RadioGroup");m2soft.crownix.Field.RadioGroup=(function(){var a=m2soft.crownix.Field;var b=m2soft.crownix.Resource;var c=function(d,e){this.type="rg";this.id=d.attr("gi");this.value="";this.selectedId="";this.required=d.attr("rq")||"1";this.originalEditable=this.editable=d.attr("ed")||"1";this.invalid=false;this.buttonList={};this.page=e};c.prototype=new a();c.prototype.reset=function(){this.reset_();this.selectedId=this.originalSelectedId};c.prototype.putButton=function(e,f){var d=this.buttonList;if(!f&&d[e.id]){throw new Error(b.get("form_duplicated_id_error")+"("+this.id+"."+e.id+")")}if(e.selected){this.originalSelectedId=this.selectedId=e.id;this.originalValue=this.value=e.value}d[e.id]=e};c.prototype.isSelected=function(d){return this.selectedId==d};c.prototype.validate=function(){if(this.required=="1"&&this.selectedId===""){return false}else{return true}};c.prototype.select=function(g){var e=this.buttonList;for(var f in e){e[f].selected=false}var d=e[g];if(d){d.selected=true;this.selectedId=d.id;this.value=d.value}};c.prototype.unselect=function(e){var d=this.buttonList;var f=d[e];if(f){f.selected=false;if(this.selectedId===f.id){this.selectedId="";this.value=""}}};c.prototype.getValue=function(){return this.selectedId?this.buttonList[this.selectedId].getValue():""};c.prototype.setValue=function(e){var d;for(buttonId in this.buttonList){if(this.buttonList[buttonId].value===e){d=this.buttonList[buttonId];break}}if(d){this.value=e;this.selectedId=d.id;d.setSelected(true,this)}};c.prototype.getEditable=function(){return this.editable==="1"};c.prototype.setEditable=function(f){this.editable=(!!f)?"1":"0";for(var e in this.buttonList){var d=this.buttonList[e];d.setEditable(this.editable==="1")}};c.prototype.getRequired=function(){return this.required==="1"};c.prototype.setRequired=function(e,d){this.required=(!!e)?"1":"0";for(var f in this.buttonList){this.buttonList[f].setRequired(e,d)}};return c})();m2soft.ns("m2soft.crownix.Field.Signature");m2soft.crownix.Field.Signature=(function(){var a=m2soft.crownix.Field;var b=function(c,d){this.type="sg";this.id=c.attr("id");this.originalValue=this.value=c.attr("dt")||"";this.required=c.attr("rq")||"1";this.originalEditable=this.editable=c.attr("ed")||"1";this.setEvent(c);this.placeHolder=null;this.page=d};b.prototype=new a();b.prototype.toData=function(){var c;if(this.value){c=this.value.split(",")[1]||""}return{id:this.id,value:c,type:this.type}};b.prototype.getValue=function(){return this.value};b.prototype.setValue=function(g){var e=$("#"+this.elementId)[0];var d;if(!g){if(e){d=e.getContext("2d");d.clearRect(0,0,e.width,e.height);this.placeHolder&&this.placeHolder.show()}this.value=g}else{if(typeof g=="string"){var c=new Image();var f=this;c.onload=function(){if(e){d=e.getContext("2d");d.clearRect(0,0,e.width,e.height);setTimeout(function(){d.drawImage(c,0,0,e.width,e.height)},0);f.placeHolder&&f.placeHolder.hide()}f.value=g};c.src=g}}};b.prototype.getEditable=function(){return this.editable==="1"};b.prototype.setEditable=function(d){var c=$("#"+this.elementId);this.editable=(!!d)?"1":"0";if(this.editable==="0"||(this.editable==="1"&&!c.hasClass("crownix-field-lock")&&!c.hasClass("crownix-auth-lock"))){c.attr("disabled",this.editable==="0")}};return b})();m2soft.ns("m2soft.crownix.Field.TextArea");m2soft.crownix.Field.TextArea=(function(){var a=m2soft.crownix.Field;var b=function(c,d){this.type="ta";this.id=c.attr("id");this.originalValue=this.value=c.text();this.required=c.attr("rq")||"1";this.originalEditable=this.editable=c.attr("ed")||"1";this.regExpression=c.attr("re");this.referenceId=c.attr("rfi");this.limitiedLineLength=c.attr("ll");this.setEvent(c);this.disableColor=(c.attr("nc")?(c.attr("nc")!=="0"):true);this.page=d;this.valid=true};b.prototype=new a();b.prototype.validateRegEx=function(e){if(!e){e=this.value}if(this.regExpression){var d=new RegExp(this.regExpression);var c=$("#crownix_form_field_"+this.id+"_warnning");if(e==""||d.test(e)){c.hide();this.valid=true}else{c.show();this.valid=false}}};b.prototype.spreadToShareField=function(d,c,f){if(this.referenceId){c[this.referenceId].spreadToShareField(d,c,f);return}if(this.id!=d.id){this.value=d.value;this.validateRegEx();$("#crownix_form_field_"+ +f+"_"+this.id).val(d.value)}$('textarea[rfi="crownix_form_field_'+f+"_"+this.id+'"][id!="crownix_form_field_'+f+"_"+d.id+'"]').val(d.value);for(var e in c){if(c[e].referenceId==this.id){c[e].value=d.value;c[e].validateRegEx()}}};b.prototype.getValue=function(){return this.value};b.prototype.setValue=function(c){this.value=c;$("#"+this.elementId).val(c)};b.prototype.getEditable=function(){return this.editable==="1"};b.prototype.setEditable=function(c){var d=$("#"+this.elementId);this.editable=(!!c)?"1":"0";if(this.editable==="0"||(this.editable==="1"&&!d.hasClass("crownix-field-lock")&&!d.hasClass("crownix-auth-lock"))){d.attr({readonly:this.editable==="0"})}};return b})();m2soft.ns("m2soft.crownix.Field.TextField");m2soft.crownix.Field.TextField=(function(){var b=m2soft.crownix.Field;var a=m2soft.crownix.util.DateUtil;var c=function(d,e){this.type="tf";this.id=d.attr("id");this.originalValue=this.value=d.text();this.originalEditable=this.editable=d.attr("ed")||"1";this.required=d.attr("rq")||"1";this.regExpression=d.attr("re");this.referenceId=d.attr("rfi");this.password=d.attr("pw");this.inputType=d.attr("it")||"text";this.realDateFormat=d.attr("df")||"yyyy-MM-dd";this.displayDateFormat=d.attr("dfv")||"yyyy-MM-dd";this.disableColor=(d.attr("nc")?(d.attr("nc")!=="0"):true);if(this.inputType==="date"){this.value=a.convertDateFormat(this.value,this.realDateFormat,"yyyy-MM-dd")}this.setEvent(d);this.page=e;this.valid=true};c.prototype=new b();c.prototype.validateRegEx=function(f){if(!f){f=this.value}if(this.regExpression){var e=new RegExp(this.regExpression);var d=$("#crownix_form_field_"+this.id+"_warnning");if(f==""||e.test(f)){d.hide();this.valid=true}else{d.show();this.valid=false}}};c.prototype.toData=function(){return{id:this.id,value:this.inputType==="date"?a.convertDateFormat(this.value,"yyyy-MM-dd",this.realDateFormat):this.value,type:this.type}};c.prototype.spreadToShareField=function(e,d,g){if(this.referenceId){d[this.referenceId].spreadToShareField(e,d,g);return}if(this.id!=e.id){this.value=e.value;this.validateRegEx();$("#crownix_form_field_"+g+"_"+this.id).val(e.value)}$('input[rfi="crownix_form_field_'+g+"_"+this.id+'"][id!="crownix_form_field_'+g+"_"+e.id+'"]').val(e.value);for(var f in d){if(d[f].referenceId==this.id){d[f].value=e.value;d[f].validateRegEx()}}};c.prototype.getValue=function(){return this.value};c.prototype.setValue=function(d){if(this.inputType==="date"){this.value=a.convertDateFormat(d,this.realDateFormat,"yyyy-MM-dd");if(this.value){$("#"+this.elementId).val(this.value)}}else{this.value=d;$("#"+this.elementId).val(this.value)}};c.prototype.getEditable=function(){return this.editable==="1"};c.prototype.setEditable=function(d){var e=$("#"+this.elementId);this.editable=(!!d)?"1":"0";if(this.editable==="0"||(this.editable==="1"&&!e.hasClass("crownix-field-lock")&&!e.hasClass("crownix-auth-lock"))){e.attr({readonly:this.editable==="0"})}};return c})();m2soft.crownix.Field.Picture=(function(){var a=m2soft.crownix.Field;var b=function(c,d){this.type="im";this.id=c.attr("id");this.originalValue=this.value=c.attr("dt")||"";this.required=c.attr("rq")||"1";this.originalEditable=this.editable=c.attr("ed")||"1";this.setEvent(c);this.ratio=c.attr("ra")||0;this.placeHolder=null;this.page=d};b.prototype=new a();b.prototype.toData=function(){var c;if(this.value){c=this.value.split(",")[1]||""}return{id:this.id,value:c,type:this.type}};b.prototype.getValue=function(){return this.value};b.prototype.setValue=function(f){var d=$("#"+this.elementId+"-canvas")[0];var c;if(!f){if(d){c=d.getContext("2d");c.clearRect(0,0,d.width,d.height);this.placeHolder&&this.placeHolder.show()}this.value=""}else{if(typeof f=="string"){var g=new Image();var e=this;g.onload=function(){if(d){c=d.getContext("2d");if(e.ratio==1){var l=g.width/g.height;var j=d.width/d.height;if(l>j){var n=d.height*(j/l);var h=(d.height-n)/2;c.drawImage(g,0,h,d.width,n)}else{var m=d.width*(l/j);var k=(d.width-m)/2;c.drawImage(g,k,0,m,d.height)}}else{if(e.ratio==2){c.drawImage(g,0,0)}else{c.drawImage(g,0,0,d.width,d.height)}}e.placeHolder&&e.placeHolder.hide()}e.value=f};g.src=f}}};b.prototype.getEditable=function(){return this.editable==="1"};b.prototype.setEditable=function(d){var c=$("#"+this.elementId+"-canvas");this.editable=(!!d)?"1":"0";if(this.editable==="0"||(this.editable==="1"&&!c.hasClass("crownix-field-lock")&&!c.hasClass("crownix-auth-lock"))){c.attr("disabled",this.editable==="0")}};return b})();m2soft.crownix.Field.Submit=(function(){var e=m2soft.crownix.Resource;var k=m2soft.crownix.security.IKE;var b=m2soft.crownix.WorkerUtil;var d=m2soft.crownix.Constant;var j=m2soft.crownix.Message;var f;var g;var a={};var h=function(n,m,o){this.type="sm";this.id=n.attr("id");this.url=n.attr("su");this.datasource=n.attr("ds");this.service=n.attr("sc");this.editable=n.attr("ed")||"1";this.target=n.attr("sf");this.formId=n.attr("fi");this.mode=n.attr("rf")||"0";this.builder=m;secure=o;f=m2soft.crownix.FieldOrder.getInstance()};var l=function(q,r,n,o){var s=b.getCryptoWorker(q,n,o);var m=$.Deferred();s.addEventListener("message",function(t){if(t.data.method==="finalize"){m.resolve(t.data.text);s.terminate()}});s.postMessage({method:"finalize",text:r,});return m};var c=function(q,s,t,r){var n=new m2soft.crownix.Ajax();var o=$.Deferred();n.setConnectTimeout(t);n.setHandler({done:function(w){o.resolve(w.responseText)},error:function(w){if(w.status==0){o.reject({status:false,code:"error",message:e.get("server_connect_error")})}else{o.reject({status:false,code:"error",message:e.get("request_server_error")})}},abort:function(){o.reject({status:false,code:"abort",message:e.get("request_abort_error")})},timeout:function(){o.reject({status:false,code:"timeout",message:e.get("request_timeout_error")})},});n.setRequestHeader("crownix-version",d.INFO_TALK_PROTOCOL_VERSION);if(secure){n.setRequestHeader("crownix-encrypt-type","content");n.setRequestHeader("crownix-rdid",r)}if(Object.keys(a).length>0){var u=new FormData();u.append("request",s);for(var m in a){u.append(m,a[m])}n.setRequestHeader("Content-Type",null);n.invoke(q,u)}else{n.invoke(q,s)}return o};h.prototype={submit:function(m,H,x,G,E,B,A,D){if(!this.url||!this.service||!this.datasource){E.show(e.get("form_submit_info_leak_error"));return}var C={};if(!this.target){C=B}else{if(this.target.indexOf(",")>=0){var w=this.target.split(",");for(var q in w){if(A[w[q]].isRepeated){for(var r in B){if(r.indexOf(w[q]+"-")>=0){C[r]=B[r]}}}else{C[w[q]]=B[w[q]]}}}else{if(B[this.formId]&&!B[this.formId].isRepeatForm()){C[this.formId]=B[this.formId]}else{if(B[this.formId]&&B[this.formId].isRepeatForm()&&this.mode=="1"){C[this.formId]=B[this.formId]}else{for(var r in B){if(r.indexOf("-")>=0&&this.target==r.substring(0,r.indexOf("-"))){C[r]=B[r]}}}}}}if($.isEmptyObject(C)){j.log(e.get("form_submit_not_found_form")+" [form id:"+this.formId+"] [target:"+this.target+"]");E.show(e.get("form_submit_not_found_form"),null,function(){f.blur()});return}var F=[];F.push({formId:this.formId,fieldId:this.id});var s=[];for(var J in C){var I=B[J].validate();B[J].highlightInvalid(I);var t=B[J].setFiles(a);if(I.isInvalid||!t){return}var o=[];var K=B[J].getFields();for(var r in K){if(K[r].ignore){continue}if(!K[r].referenceId){o.push(K[r].toData())}F.push({formId:J,fieldId:r})}if(J.indexOf("-")>0){J=J.substring(0,J.indexOf("-"))}var n={id:J,fields:o,};s.push(n)}var y=function(){var L={};if(this.service==d.SERVICE_EXPORT_HANDLER||this.service>=2000){L={mrd_path:m,mrd_param:H};var Q=this.builder();L.mrd_path=Q.concatMrdPath(L.mrd_path);if(x!=null&&x!=""){L.mrd_data=Q.concatMrdPath(x)}if(D.encType>3){L.mrd_param=Q.concatMrdPath(L.mrd_param);L.enc_type=D.encType;L.mrd_plain_param=Q.concatMrdParam(C,D.mrdPlainParam?D.mrdPlainParam:"")}else{L.mrd_param=Q.concatMrdParam(C,L.mrd_param?L.mrd_param:"")}}var P={version:d.INFO_TALK_PROTOCOL_VERSION,service:this.service,datasource:this.datasource,forms:s,parameters:L,};var V=E.message(e.get("submit_formfield"),null,true,D.options.submitMsgPosition);var U;var S;var N;var T;var R=this;var O=function(W){try{var X=$.parseJSON(W);if(X.status){for(var Z in C){B[Z].unbindEvent();B[Z].disableEdit();B[Z].isSubmitted=true}R.disableEdit();M({status:true})}else{M({status:false,code:"insert error",message:X.message})}}catch(Y){j.log(Y.stack);M({status:false,code:"invalid protocol",message:e.get("invalid_protocol")})}};var M=function(W){if(W.status===true){E.show(e.get("submit_formfield_insert_ok"),null,function(){f.removeField(F);f.blur()})}else{E.show(W.message,null,function(){f.blur()})}V.fadeOut(500,function(){V.remove()});G(W,C);if(g){g.close()}};if(secure){U=k.request({serverUrl:this.url}).pipe(function(W){S=k.getAlgorithm(W);N=W;T=k.getKey(W);P.rdid=W;P=JSON.stringify(P).split("\\u0004").join("\u0004");return l("encrypt",P,S,T)},function(W){return $.Deferred().reject({status:false,code:"security error",message:W})}).pipe(function(W){return c(R.url,W,D.options.infotalk.timeout,N)},function(W){M(W)}).pipe(function(W){return l("decrypt",W,S,T)}).pipe(function(W){O(W)})}else{P=JSON.stringify(P).split("\\u0004").join("\u0004");U=c(this.url,P,D.options.infotalk.timeout).pipe(function(W){O(W)},function(W){M({status:false,message:W.message})})}};if(D.options.submitPreview&&!this.target){var z=E.message(e.get("print_submit_preview"));var u=this;setTimeout(function(){g=new m2soft.crownix.submit.Preview(D,function(){if(D.shareManager&&D.shareManager.isConnected()){D.shareManager.submitRequest(u.formId,u.id,u.target,function(){y.call(u)})}else{y.call(u)}});g.show(function(){z.remove()})},0)}else{var u=this;if(D.shareManager&&D.shareManager.isConnected()){D.shareManager.submitRequest(u.formId,u.id,u.target,function(){y.call(u)})}else{y.call(u)}}},disableEdit:function(){this.editable="0";$("[formid="+this.formId+"][fieldid="+this.id+"]").removeClass("crownix-dialog-button-action").attr("disabled",true).off()},};return h})();m2soft.ns("m2soft.crownix.Field.File");m2soft.crownix.Field.File=(function(){var a=m2soft.crownix.Field;var b=m2soft.crownix.FieldOrder;var c=function(d,e){this.type="fl";this.file=null;this.value=d.attr("vl")||"";this.formId=d.attr("fi");this.id=d.attr("id");this.required=d.attr("rq")||"0";this.editable=d.attr("ed")||"1";this.placeHolder=d.attr("ph")||"";this.drilldownId;this.page=e;this.setEvent(d);this.setFileName;this.editableMode;this.readonlyMode};c.prototype=new a();c.prototype.validate=function(d){if(!d){d=this.file||this.value}if(this.required=="1"){return !!d}else{return true}};c.prototype.toData=function(){return{id:this.id,value:this.value,type:this.type}};c.prototype.getValue=function(){return this.value};c.prototype.getEditable=function(){return this.editable==="1"};c.prototype.setEditable=function(d){if(this.editable!=d){this.editable=(!!d)?"1":"0";this.editable==="1"?this.editableMode():this.readonlyMode()}};return c})();m2soft.ns("m2soft.crownix.Form");m2soft.crownix.Form=(function(){var R=m2soft.crownix.Resource;var Util=m2soft.crownix.Util;var Message=m2soft.crownix.Message;var TextField=m2soft.crownix.Field.TextField;var TextArea=m2soft.crownix.Field.TextArea;var CheckBox=m2soft.crownix.Field.CheckBox;var ComboBox=m2soft.crownix.Field.ComboBox;var RadioGroup=m2soft.crownix.Field.RadioGroup;var RadioButton=m2soft.crownix.Field.RadioButton;var Signature=m2soft.crownix.Field.Signature;var Picture=m2soft.crownix.Field.Picture;var File=m2soft.crownix.Field.File;var Converter=m2soft.crownix.util.Converter;var DateUtil=m2soft.crownix.util.DateUtil;var Constructor=function(formId,go,param){this.formId=formId;this.go=go;this.eventNameList=[];this.fieldList={};if(!param){param={}}this.commonFieldHint={type:param.commonFieldHintingType,color:param.commonFieldHintingColor};this.requiredFieldHint={color:param.requiredFieldHintingColor};this.eventList={};var evt=param.formLoadComplete;if(evt){this.eventList.formLoadComplete=evt}this.formLoadComplete=false;this.isSubmitted=false;if(param.isRepeated){this.isRepeated=true}};var decodeFormFieldScriptFunction=function(encodedScript){var planeScript=Util.base64.utf8Decode(encodedScript);eval('var func = function(form, viewer) { "use strict"; '+planeScript+"}");return func};Constructor.prototype={disableEdit:function(){$(":not(button)[formId="+this.formId+"], label","#m2soft-crownix-text").off().attr("disabled",true).bind("touchstart mousedown focus",function(e){e.preventDefault()});for(var id in this.fieldList){var field=this.fieldList[id];field.editable="0";if(field.type==="rg"){for(var _bid in field.buttonList){field.buttonList[_bid].editable="0"}}else{if(field.type==="fl"){field.readonlyMode()}}}},validate:function(customFieldList){var invalid=[];var valid=[];var invalidfield="";var isCustomValue=!!customFieldList;var effectiveFieldList=customFieldList||this.fieldList;for(var id in effectiveFieldList){var field=this.fieldList[id];if(isCustomValue){var value=effectiveFieldList[id]}if(field.validate(value)){valid.push(id)}else{invalid.push(id)}}var isValidRegExp=true;for(var id in effectiveFieldList){var field=this.fieldList[id];if(field.type==="tf"||field.type==="ta"){if(isCustomValue){var value=effectiveFieldList[id]}field.validateRegEx(value);if(field.valid==false){isValidRegExp=false}}}return{valid:valid,invalid:invalid,isValidRegExp:isValidRegExp,isInvalid:invalid.length>0||!isValidRegExp}},highlightInvalid:function(validationInfo){var valid=validationInfo.valid,invalid=validationInfo.invalid,isValidRegExp=validationInfo.isValidRegExp,fieldList=this.fieldList,formId=this.formId,message=validationInfo.message;var getSelector=function(fieldIDList){var result=[];for(var i in fieldIDList){var id=fieldIDList[i];var field=fieldList[id];if(field.type=="cb"||field.type=="rg"){result.push("."+id+" > span > [formid="+formId+"]")}else{result.push("[formid="+formId+'][name="'+id+'"]')}}return result};var highlight=function(selectorList,highlightFunc){$(selectorList.join(",")).each(function(){highlightFunc($(this).parents("#m2soft-crownix-field-wrapper"))})};var invalidList=getSelector(invalid);var validList=getSelector(valid);highlight(validList,this.toValid);if(invalidList.length>0){var first=fieldList[invalid[0]],page=first.page,id=first.elementId,removedPage=this.go.report.getRemovedPage();removedPage.forEach(function(n){if(n<=page){page--}});this.go.viewer.movePage(page);var scroll=this.go.scroll,dialog=this.go.dialog;var self_=this;setTimeout(function(){highlight(invalidList,self_.toInvalid);var element,min=Number.MAX_VALUE;$("#m2soft-crownix-container .invalid-field").each(function(){var top=$(this).offset().top;if(top<min){min=top;element=this}});dialog.show(R.get(message?message:"submit_fail_not_filled_required_form"),null,function(){scroll.scrollToElement(element)})},0)}$('input[type="text"],input[type="password"],textarea').blur();if(!isValidRegExp){this.go.dialog.show(R.get("input_text_validate_error"))}},toValid:function(el){if(el.hasClass("invalid-field")){var height=parseInt(el.css("height"));var width=parseInt(el.css("width"));var left=parseInt(el.css("left"));var top=parseInt(el.css("top"));el.css({height:height-6,width:width-6,left:left+3,top:top+3,});el.removeClass("invalid-field")}},toInvalid:function(el){if(!el.hasClass("invalid-field")){var height=parseInt(el.css("height"));var width=parseInt(el.css("width"));var left=parseInt(el.css("left"));var top=parseInt(el.css("top"));el.css({height:height+6,width:width+6,left:left-3,top:top-3,});el.addClass("invalid-field")}},putField:function(element,pagenum,allowDuplicate,drilldownId){var fieldId=element.attr("id");var type=element.attr("ty");var index=element.attr("idx");var field=null;if(!allowDuplicate&&this.fieldList[fieldId]){throw new Error(R.get("form_duplicated_id_error")+"("+fieldId+")")}var self=this;var init=function(field){field.setIndex(index);var fieldEventList=field.getEventList();for(var i in fieldEventList){var eventName=fieldEventList[i];if(self.eventNameList.indexOf(eventName)<0){self.eventNameList.push(eventName)}}};if(type==="tf"){field=new TextField(element,pagenum)}else{if(type==="ta"){field=new TextArea(element,pagenum)}else{if(type==="cb"){field=new CheckBox(element,pagenum)}else{if(type==="co"){field=new ComboBox(element,pagenum)}else{if(type==="sg"){field=new Signature(element,pagenum)}else{if(type==="im"){field=new Picture(element,pagenum)}else{if(type==="rb"){fieldId=element.attr("gi");field=this.fieldList[fieldId];if(!field){field=new RadioGroup(element,pagenum)}var button=new RadioButton(element,pagenum);init(button);field.putButton(button,allowDuplicate)}else{if(type==="fl"){field=new File(element,pagenum)}}}}}}}}field.drilldownId=drilldownId;if(field){init(field);this.fieldList[fieldId]=field}},getField:function(fieldId){var field=this.fieldList[fieldId];if(field){return field}else{for(var fieldName in this.fieldList){field=this.fieldList[fieldName];if(field.type==="rg"){var radio=field.buttonList[fieldId];if(radio){return radio}}}}},getFields:function(){return this.fieldList},getFieldsWithRadioBtns:function(){var list={};for(var id in this.fieldList){var field=this.fieldList[id];list[id]=field;if(field.type=="rg"){for(var btnId in field.buttonList){list[btnId]=field.buttonList[btnId]}}}return list},makeFormDataParameter:function(){var buf=[];for(var id in this.fieldList){var field=this.fieldList[id];buf.push(this.formId+"."+field.id);buf.push("[");if(field.type==="sg"||field.type==="im"){buf.push("<*BASE64_DATA*>");if(field.value){buf.push(field.value.split(",")[1])}}else{if(field.value){if(field.inputType==="date"){buf.push(DateUtil.convertDateFormat(field.value,"yyyy-MM-dd",field.displayDateFormat))}else{buf.push(field.value)}}}buf.push("] ")}return buf.join("")},makeFormInfoParameter:function(){var buf=[];var list=this.getFieldsWithRadioBtns();for(var id in list){var field=list[id];var separator=String.fromCharCode(5);buf.push(this.formId+"."+field.id);buf.push("[");buf.push(separator);if(typeof field.editable==="string"){buf.push(field.editable)}buf.push(separator);buf.push(separator);if(typeof field.label==="string"){buf.push(field.label)}buf.push(separator);if(typeof field.value==="string"&&field.type==="rb"){buf.push(field.value)}buf.push("] ")}return buf.join("")},getHintingColor:function(fieldId){if(!this.commonFieldHint||!this.commonFieldHint.type){return""}var field=this.getField(fieldId);if(typeof field!="undefined"&&this.commonFieldHint.type.indexOf(field.type)>=0){return this.commonFieldHint.color}return""},getRequiredHintingColor:function(fieldId){if(!this.requiredFieldHint.color){return""}return this.requiredFieldHint.color},"export":function(checkValid){var container={id:this.formId,fields:{field:[],}};var item;var list=this.getFieldsWithRadioBtns();for(var fieldId in list){if(list[fieldId].type==="fl"&&!(this.go.shareManager&&this.go.shareManager.isConnected())){continue}item={id:fieldId,value:{__cdata:list[fieldId].value},type:list[fieldId].type,label:{__cdata:list[fieldId].label},editable:list[fieldId].editable,required:list[fieldId].required};if(list[fieldId].type==="co"){item.selectedIndex=list[fieldId].selectedIndex}else{if(list[fieldId].type==="rg"){item.selectedId=list[fieldId].selectedId}}container.fields.field.push(item)}return container},"import":function(container,version){var id;var field;var fieldList=container.fields.field;for(var i in this.fieldList){field=this.fieldList[i];field.reset()}for(var i=0;i<fieldList.length;i++){field=fieldList[i];id=field.id;if(field.type=="rb"){for(var fieldId in this.fieldList){if(this.fieldList[fieldId].type=="rg"&&this.fieldList[fieldId].buttonList[field.id]){this.fieldList[fieldId].buttonList[field.id].value=field.value.__cdata;this.fieldList[fieldId].buttonList[field.id].label=field.label.__cdata;this.fieldList[fieldId].buttonList[field.id].editable=field.editable;this.fieldList[fieldId].buttonList[field.id].required=field.required;break}}}else{if(!this.fieldList[id]){continue}if(field.type==="cb"){if(field.value.__cdata==="1"||field.value.__cdata===true){this.fieldList[id].value="1"}else{this.fieldList[id].value="0"}}else{this.fieldList[id].value=field.value.__cdata}this.fieldList[id].label=field.label.__cdata;this.fieldList[id].editable=field.editable;this.fieldList[id].required=field.required;if(field.type==="co"){this.fieldList[id].setValueByIndex(field.selectedIndex)}else{if((version==="1.0"&&field.type==="rb")||(version==="1.1"&&field.type==="rg")){this.fieldList[id].select(field.selectedId)}}if((field.type==="tf"||field.type==="ta")&&field.value.__cdata!==""){this.fieldList[id].validateRegEx()}}}},unbindEvent:function(){$("#m2soft-crownix-container").off(".formfield","[formId="+this.formId+"]")},bindEvent:function(formWrapper,viewer){this.unbindEvent();for(var i in this.eventNameList){var eventName=this.eventNameList[i];var self=this;$("#m2soft-crownix-container").on(eventName+".formfield","[formId="+this.formId+"]",function(evt){try{var target=$(evt.target);var fieldId=target.attr("buttonId")||target.attr("name");var field=self.getField(fieldId);if(!field){return}field.trigger(evt.type,formWrapper,viewer)}catch(e){Message.error(e.stack);self.go.dialog.show(R.get("formfield_event_error")+"<br>(fieldId:"+field.id+")")}})}},onLoadComplete:function(formWrapper,viewer){if(!this.formLoadComplete){try{var loadCompleteEvent=this.eventList.formLoadComplete;if(loadCompleteEvent){var eventHandler=decodeFormFieldScriptFunction(loadCompleteEvent);eventHandler(formWrapper,viewer)}}catch(e){Message.error(e.stack);this.go.dialog.show(R.get("formfield_event_error")+"<br>(formId:"+this.formId+")")}this.removePreventEvent()}},removePreventEvent:function(){$("*","#m2soft-crownix-text").off(".prevent");this.formLoadComplete=true},isRepeatForm:function(){return this.isRepeated},resetLoadingState:function(){this.formLoadComplete=false},isLoadingComplete:function(){return this.formLoadComplete},setFiles:function(files){for(var fieldId in this.fieldList){var field=this.fieldList[fieldId];if(field.type==="fl"){if(field.file){if(field.file.size===0){this.highlightInvalid({invalid:[fieldId],isValidRegExp:true,formId:this.formId,message:"invalid_attached_file"});return false}else{this.highlightInvalid({valid:[fieldId],isValidRegExp:true,formId:this.formId,});files[this.formId+"."+fieldId]=field.file}}else{if(field.value){this.highlightInvalid({invalid:[fieldId],isValidRegExp:true,formId:this.formId,message:(this.go.shareManager&&this.go.shareManager.isConnected())?"invalid_submit_request":"invalid_attached_file"});return false}}}}return true},};return Constructor})();m2soft.ns("m2soft.crownix.FormWrapper");m2soft.crownix.FormWrapper=function(a,c){var b=a,d=c;this.get=function(f,e){f=(typeof e==="number")?f+"-"+e:f;return b.getFieldWrapper(d,f)};this.getList=function(e){return b.getFieldWrapperList(d,e)}};m2soft.ns("m2soft.crownix.FieldWrapper");m2soft.crownix.FieldWrapper=function(j,a,e,b){var f=a,c=e,h=j,d=b,g={OnChange:"change",change:"change",OnClick:"click",click:"click"};this.getValue=function(){return f.getValue()};this.setValue=function(m,k){if(m==null){return}var l;if(f.type=="rb"){l=c.getField(h,f.gid)}f.setValue(m.toString(),l);if(f.type==="tf"||f.type==="ta"){f.spreadToShareField(f,c.getFields(h),h)}if(!k){c.sendScript({formId:h,fieldId:f.id,value:f.type=="co"?f.selectedIndex:m})}};this.getLabel=function(){return f.getLabel()};this.setLabel=function(l,k){if(l==null){return}f.setLabel(l.toString());if(!k){c.sendScript({name:"label",formId:h,fieldId:f.id,value:l.toString()})}};this.getEditable=function(){return f.getEditable()};this.setEditable=function(l,k){f.setEditable(l);if(!k){c.sendScript({name:"editable",formId:h,fieldId:f.id,value:l})}if(f.type!="cb"&&f.type!="rb"&&f.type!="fl"&&(f.type!="tf"&&f.type!="ta")||f.disableColor){var m=$("#"+f.elementId).parent();if(l){m.removeClass("crownix-formfield-disable")}else{m.addClass("crownix-formfield-disable")}}};this.getRequired=function(){return f.getRequired()};this.setRequired=function(m,k){var l=c.getRequiredHintingColor(h,a.id)||"";if(f.type=="rb"){btnGroupField=c.getField(h,f.gid);btnGroupField.setRequired(m,l)}else{f.setRequired(m,l);if(!k){c.sendScript({name:"required",formId:h,fieldId:f.id,value:m})}}};this.getSelected=function(){return f.getSelected()};this.setSelected=function(m,k){var l;if(f.type=="rb"){l=c.getField(h,f.gid)}f.setSelected(m,l);if(!k){c.sendScript({name:"selected",formId:h,fieldId:f.id,groupId:f.gid,value:m})}};this.expandDrilldown=function(k){return d.open(h+"."+a.id,k)};this.collapseDrilldown=function(){return d.close(h+"."+a.id)};this.getDrilldownInfo=function(){return d.getDrilldownInfo(h+"."+a.id)};this.isDrilldownOpened=function(){return d.isOpened(h+"."+a.id)};this.trigger=function(k){f.trigger(g[k],c.getFormWrapper(h))}};m2soft.ns("m2soft.crownix.FormManager");m2soft.crownix.FormManager=(function(){var g=m2soft.crownix.Form;var j=m2soft.crownix.Field.Submit;var e=m2soft.crownix.Resource;var t=m2soft.crownix.FormWrapper;var z=m2soft.crownix.FieldWrapper;var w=m2soft.crownix.FieldOrder;var r;var o={};var n={};var d={};var m;var b;var u;var a;var y;var h;var x;var q;var f=false;var l=function(A){if(A.indexOf(".")>=0){var B=A.split(".");A=B[1]}return A};var c;var s=function(){c={moveFirstPage:r.viewer.moveFirstPage,moveLastPage:r.viewer.moveLastPage,movePage:r.viewer.movePage,prevPage:r.viewer.prevPage,nextPage:r.viewer.nextPage,hidePage:function(){r.report.removePage(arguments)},showPage:function(){r.report.restorePage(arguments)},}};var k=function(C,B,A){r=A;u=r.dialog;b=r.viewer.movePage;a=r.mrdPath;y=r.mrdParam;h=r.mrdData;x=C;o={};n={};d={};q=B;s()};k.prototype={submit:function(C){var D=$(C.currentTarget).attr("formid");var B=$(C.currentTarget).attr("fieldid");var A=D+"."+B;r.emit("before-submit",this.getFormWrapper(D));if(r.options.showSubmitConfirm.show){u.show(r.options.showSubmitConfirm.message||e.get("submit_confirm_message"),{verify:true,input:false,title:r.options.showSubmitConfirm.title,textYes:r.options.showSubmitConfirm.textYes,textNo:r.options.showSubmitConfirm.textNo},function(E){if(E){d[A].submit(a,y,h,x,u,o,n,r)}})}else{d[A].submit(a,y,h,x,u,o,n,r)}},addFormAttr:function(B){var A=B.id;if(A&&!n[A]){n[A]=B}},validateForm:function(B,A){return o[B].validate(A)},buildFormField:function(F,B,C,D){var E=$(F);var A=this.isLoadComplete;E.children("FF").each(function(){var J=$(this);var K=J.attr("ty");var M=J.attr("fi");var I=J.attr("id");if(o[M]&&o[M].getField(I)){return true}if(!A){w.getInstance().push(J,B)}if(K==="sm"){var I=J.attr("id");var H=M+"."+I;d[H]=new j(J,q,r.options.enableSecure)}else{if(!o[M]){var G;if(M.indexOf("-")>0){var L=M.substring(0,M.indexOf("-"));G=n[L];G.isRepeated=true}else{G=n[M];G.isRepeated=false}o[M]=new g(M,r,G)}o[M].resetLoadingState();o[M].putField(J,B,C,D)}})},"export":function(A){var C={formdata:{version:"1.1",form:[]}};var B;for(var E in o){B=o[E];if(A===true){var D=B.validate();B.highlightInvalid(D);if(D.isInvalid){throw e.get("submit_fail_not_filled_required_form")}}C.formdata.form.push(B["export"](A))}return C},"import":function(B){var C=B.formdata.form;for(var A in C){if(!o[C[A].id]){continue}o[C[A].id]["import"](C[A],B.formdata.version)}},getFormList:function(){return o},getHintingColor:function(B,A){if(!o[B]){return""}return o[B].getHintingColor(A)},getRequiredHintingColor:function(B,A){if(!o[B]){return""}return o[B].getRequiredHintingColor(A)},getField:function(B,A){if(!o[B]){return{}}return o[B].getField(A)},getFields:function(A){return o[A].getFields()},getSubmit:function(A){return d[A]},disableEdit:function(){for(var B in o){o[B].disableEdit()}for(var A in d){d[A].disableEdit()}},makeFormParameter:function(B,D){var A=[];A.push("/rformmode [0] ");A.push(D);A.push(" /rformdata ");for(var C in B){A.push(o[C].makeFormDataParameter())}A.push(" /rforminfo ");for(var C in B){A.push(o[C].makeFormInfoParameter())}A.push(" /rformmode [0]");return A.join("")},modified:function(){if(!f){f=true;$(window).bind("beforeunload",function(A){var B=e.get("confirm_page_out");(A||window.event).returnValue=B;return B})}},isModified:function(){return f},saved:function(){if(f){f=false;$(window).unbind("beforeunload")}},getFormWrapper:function(A){return new t(this,A)},getFieldWrapper:function(C,B){B=l(B);var A=this.getField(C,B);if(A){return new z(C,A,this,r.drilldownManager)}else{return null}},getFieldWrapperList:function(G,A){var J=[],C=[],E=this.getFields(G),H;if(A.indexOf(".")>=0){var D=A.split(".");H=D[0];A=D[1]}for(var F in E){if(H&&E[F].type==="rg"&&F.indexOf(H+"-")===0){var B=E[F].buttonList;for(var I in B){if(I.indexOf(A+"-")===0){C.push(I)}}}else{if(F.indexOf(A+"-")===0){C.push(F)}}}C=C.sort(function(K,L){return K.split("-")[1]-L.split("-")[1]});for(var F in C){J.push(new z(G,this.getField(G,C[F]),this,r.drilldownManager))}return J},bindEvent:function(){for(var A in o){o[A].bindEvent(this.getFormWrapper(A),c)}},trigger:function(B,D,A){var C=o[D].getField(A);C.trigger(B,this.getFormWrapper(D),c)},isLoadComplete:false,fireLoadCompleteEvent:function(){this.isLoadComplete=true;if(r.shareManager&&r.shareManager.isConnected()&&!r.shareManager.isHost()){return}for(var A in o){o[A].onLoadComplete(this.getFormWrapper(A),c)}},checkFormLoadComplete:function(B){var A=o[B];return A?A.formLoadComplete:false},removePreventEvent:function(){for(var A in o){o[A].removePreventEvent()}},isAllFormSubmitted:function(){for(var A in o){if(!o[A].isSubmitted){return false}}return true},submitForMethod:function(D,B,A,F){var E=$("<element>").attr({su:D,ds:B,sc:A,target:F});var C=new j(E,q,r.options.enableSecure);C.submit(a,y,h,x,u,o,n,r)},ignoreField:function(C,E){var D,B,A;for(D in o){A=o[D].getFields();for(D in A){field=A[D];if(field.page==C){field.ignore=E}}}},removeDrilldownField:function(C){var D,B,A;for(D in o){A=o[D].getFields();for(D in A){field=A[D];if(field.drilldownId===C){delete A[D]}}}},sendScript:function(A){if(r.shareManager&&r.shareManager.isConnected()){r.shareManager.sendScript(A)}},existRequiredFileField:function(){var C,A;for(var D in o){A=o[D].getFields();for(var B in A){C=A[B];if(C.type==="fl"&&C.editable&&C.editable==="1"&&C.required&&C.required==="1"){return true}}}return false},getRequiredFileFields:function(){var D,A;var C=[];for(var E in o){A=o[E].getFields();for(var B in A){D=A[B];if(D.type==="fl"&&D.editable&&D.editable==="1"&&D.required&&D.required==="1"){C.push(D)}}}return C},};return k})();m2soft.ns("m2soft.crownix.ImageConverter");m2soft.crownix.ImageConverter=function(){var k=m2soft.crownix.Resource;var l=m2soft.crownix.Util;var I=m2soft.crownix.util.Unit;var b=m2soft.crownix.util.DateUtil;var s=null;var o=null;var B={};var r=[];var n=function(J,K){if(K){return Math.floor(J/10.3+24.3)+((K%2===0)?0:0.5)}else{return Math.floor(J/10.3+24.3)}};var j=function(J,M){var L=J.attr("fc");var O=J.attr("pt");var N=J.attr("al");if(L||O||N){var K=$.extend({},M);L&&(K.fc=L);O&&(K.pt=O);N&&(K.al=N);return K}else{return M}};var d=function(L,K){var J=L.attr("lc");var N=L.attr("wd");var M=L.attr("st");var P=L.attr("ap");if(J||N||M||P){var O=$.extend({},K);J&&(O.lc=J);N&&(O.wd=m2soft.crownix.Painter.adjustWidth(N));M&&(O.st=M);P&&(O.ap=P);return O}else{return K}};var x=function(N,M,K){var P=n(M.attr("sx"),K.wd);var O=n(M.attr("sy"),K.wd);var L=n(M.attr("ex"),K.wd);var J=n(M.attr("ey"),K.wd);N.drawLine(P,O,L,J,K)};var F=function(N,L,M){var T=n(L.attr("sx"),M.wd);var S=n(L.attr("sy"),M.wd);var Q=n(L.attr("ex"),M.wd);var P=n(L.attr("ey"),M.wd);var R=n(L.attr("cx1"),M.wd);var K=n(L.attr("cy1"),M.wd);var O=n(L.attr("cx2"),M.wd);var J=n(L.attr("cy2"),M.wd);N.drawCurve(T,S,Q,P,M,R,K,O,J)};var q=function(N,K,M){var J=K.attr("dt").split("|");var S=[];for(var L=0,P=J.length;L<P;L++){var R=J[L].split(",");var Q=n(R[0],M.wd);var O=n(R[1],M.wd);S.push([Q,O])}N.drawPolyLine(M,S)};var E=function(N,K,M){var J=K.attr("dt").split("|");var S=[];for(var L=0,P=J.length;L<P;L++){var R=J[L].split(",");var Q=n(R[0]);var O=n(R[1]);S.push([Q,O])}N.drawScribble(M,S)};var f=function(O,M,K,N){var Q=n(M.attr("sx"),K.wd);var P=n(M.attr("sy"),K.wd);var L=n(M.attr("ex"),K.wd);var J=n(M.attr("ey"),K.wd);O.drawRect(Q,P,L,J,K,N)};var a=function(N,L,M,T){var S=n(L.attr("sx"),M.wd);var R=n(L.attr("sy"),M.wd);var P=n(L.attr("ex"),M.wd);var O=n(L.attr("ey"),M.wd);var J=L.attr("aw")/10.3;var Q=L.attr("ah")/10.3;var K=L.attr("ap");N.drawRect(S,R,P,O,M,T,J,Q,K);N.setClip(L.attr("cl"))};var w=function(O,M,K,N){var Q=n(M.attr("sx"),K.wd);var P=n(M.attr("sy"),K.wd);var L=n(M.attr("ex"),K.wd);var J=n(M.attr("ey"),K.wd);O.drawEllipse(Q,P,L,J,K,N)};var G=function(O,M,K,N){var Q=n(M.attr("sx"),K.wd);var P=n(M.attr("sy"),K.wd);var L=n(M.attr("ex"),K.wd);var J=n(M.attr("ey"),K.wd);O.drawDiamond(Q,P,L,J,K,N)};var t=function(M,K,L,R){var Q=n(K.attr("sx"),L.wd);var P=n(K.attr("sy"),L.wd);var O=n(K.attr("ex"),L.wd);var N=n(K.attr("ey"),L.wd);var J=K.attr("cx")/10.3;M.drawParallelogram(Q,P,O,N,L,R,J)};var u=function(N,K,M,T){var J=K.attr("dt").split("|");var S=[];for(var L=0,P=J.length;L<P;L++){var R=J[L].split(",");var Q=n(R[0],M.wd);var O=n(R[1],M.wd);S.push([Q,O])}N.drawPolygon(M,T,S)};var c=function(N,L,M,S){var R=n(L.attr("sx"),M.wd);var Q=n(L.attr("sy"),M.wd);var P=n(L.attr("ex"),M.wd);var O=n(L.attr("ey"),M.wd);var K=L.attr("cx")/10.3;var J=L.attr("cy")/10.3;N.drawHexaheron(R,Q,P,O,K,J,M,S)};var H=function(M,J,L,R){var Q=n(J.attr("sx"),L.wd);var P=n(J.attr("sy"),L.wd);var O=n(J.attr("ex"),L.wd);var N=n(J.attr("ey"),L.wd);var K=J.attr("sh")/10.3;M.drawCylinder(Q,P,O,N,L,R,K)};var m=function(K,M){var O=n(M.attr("sx"));var N=n(M.attr("sy"));var L=n(M.attr("ex"));var J=n(M.attr("ey"));canvg(K,M.html(),{offsetX:O,offsetY:N,scaleWidth:L-O,scaleHeight:J-N,ignoreClear:true,ignoreMouse:true,})};var h=function(K,L,M){var J=L[K.attr("tid")];return{fontFamily:'"'+(K.attr("fn")?K.attr("fn"):M.get(J.fi)||"")+'", '+m2soft.crownix.Font.FONT_FAMILY_PREFIX+J.fi,fontSize:((K.attr("pt")?K.attr("pt")/10:J.pt/10)||10)+"pt",fillStyle:(K.attr("cl")?K.attr("cl"):J.cl)||"#000000",fontStyle:(K.attr("ci")?K.attr("ci")==="1":J.ci==="1")?"Italic":"",fontWeight:(K.attr("cb")?K.attr("cb")==="1":J.cb==="1")?"Bold":"",underLine:(K.attr("cu")?K.attr("cu")==="1":J.cu==="1")||!!K.attr("hl"),lineThrough:K.attr("cs")?K.attr("cs")==="1":J.cs==="1",shade:K.attr("cr")?K.attr("cr")==="1":J.cr==="1",}};var A=function(V,J,P,X,R){if(J.attr("vs")==="0"){return}R=R||{};var M=n(J.attr("le"))+(R.padding||0);var aa=n(J.attr("ri"))-(R.padding||0);var T=n(J.attr("to"))+(R.padding||0);var O=n(J.attr("bo"))-(R.padding||0);var U=parseInt(J.attr("ha"))||0;var N=parseFloat(J.attr("ls"))/1000||0;var L;var Q;var K;var S=I.inToPx(N);if(U===1){U="center"}else{if(U===2){U="right"}else{U="left"}}if(J.children("TX").length>0){var W=0;var Y=0;var Z;if(R.overflow!=="hidden"){while(true){Z=0;J.children().each(function(){var ab=$(this);Q=ab.text();L=h(ab,X,P);Z+=V.measureText(Q,L).width+(S*Q.length)});if(Z>(aa-M+2+S)){S--}else{break}}}if(U==="center"){W=(aa-M-Z+S)/2}else{if(U==="right"){W=aa-M-Z}}J.children().each(function(){var ab=$(this);Q=ab.text();L=h(ab,X,P);L.textAlign="left";L.textBaseline="bottom";L.letterSpacing=S;V.drawText(Q,M+W+Y,T,aa,O,L);Y+=V.measureText(Q,L).width+(S*Q.length)})}else{L=h(J,X,P);L.textAlign=U;if(J.attr("cbo")=="1"&&J.attr("cto")!=="1"){L.textBaseline="top"}else{if(J.attr("cto")=="1"&&J.attr("cbo")!=="1"){L.textBaseline="bottom"}else{L.textBaseline="middle"}}Q=J.text();if(R.overflow!=="hidden"){while(V.measureText(Q,L).width+(S*Q.length)>(aa-M+2+S)){S--}}L.letterSpacing=S;V.drawText(Q,M,T,aa,O,L)}};var D=function(P,O,M){var L=n(O.attr("sx"));var S=n(O.attr("ex"));var R=n(O.attr("sy"));var J=n(O.attr("ey"));var N=O.attr("dt");var Q=O.attr("ra");var K=S-L;var T=J-R;P.drawImage(M,L,R,K,T,Q)};var z=function(ad,J,M,W,ag,N,L,S,Q,ae){var O=J.attr("lb")||"";var ah=J.attr("la")||"0";var aa=parseInt(J.attr("ha"))||"0";var U=parseInt(J.attr("va"))||"0";var Y=ag-M;var R=(M+ag)/2;var P=(W+N)/2;var K=h(J,ae,Q);K.textAlign="left";var T=16;var Z=4;var af=ad.measureText(O,K).width;var X,V;if(aa=="0"){X=M+Z}else{if(aa=="1"){X=M+(Y-T-Z-af)/2}else{if(aa=="2"){X=ag-T-Z-af}}}if(ah=="1"){X+=af}if(U=="0"){K.textBaseline="top";V=W+Z}else{if(U=="1"){K.textBaseline="middle";V=P-T/2}else{if(U=="2"){K.textBaseline="bottom";V=N-T-Z}}}var ac=X+T;var ab=V+T;if(L==="radio"){ad.drawEllipse(X,V,ac,ab,{lc:"#5D5D5D",wd:2},{fc:"#FFFFFF",pt:0});if(S){ad.drawEllipse(X+4,V+4,ac-4,ab-4,{lc:"#000000",wd:1},{fc:"#000000",pt:0})}}else{if(L==="check"){ad.drawRect(X,V,ac,ab,{lc:"#5D5D5D",wd:2},{fc:"#FFFFFF",pt:0},1,1);if(S){ad.drawPolyLine({lc:"#000000",wd:3},[[X+4,V+9],[X+7,V+12],[X+13,V+4]])}}}if(ah=="1"){ad.drawText(O,M+2,W,ag,N,K)}else{ad.drawText(O,ac+2,W,ag,N,K)}};var g=function(K,J){$(J).find("element").each(function(){var L=$(this);var R=L.attr("type");if(R!="text"){var X=L.attr("path");var N=X.split(/M|m|L|l|,/);var V=[];for(var M=1,T=N.length;M<T;M+=2){V.push([N[M],N[M+1]])}K.drawPolyLine({lc:L.attr("stroke-color"),wd:parseInt(L.attr("stroke-width"))*96/72,al:L.attr("stroke-opacity"),},V)}else{var U=Number(L.attr("x"));var S=Number(L.attr("y"));var Q=U+Number(L.attr("width"));var P=S+Number(L.attr("height"));var W=L.text();var O;if(L.attr("text-anchor")=="middle"){O="center"}else{if(L.attr("text-anchor")=="end"){O="right"}else{O="left"}}K.drawRect(U,S,Q,P,{lc:L.attr("line")=="true"?"#000000":L.attr("fill"),wd:2},{fc:L.attr("fill"),pt:0});K.wrapText(W,U,S,Q,P,{fontFamily:"Times, Arial",textBaseline:"top",fillStyle:L.attr("font-color"),fontStyle:L.attr("font-style"),fontWeight:L.attr("font-weight"),fontSize:L.attr("font-size")+"pt",underLine:L.attr("text-decoration")=="underline"?true:false,lineThrough:L.attr("text-decoration")=="line-through"?true:false,textAlign:O})}})};var C=function(J,K){if(K==="rb"){return"crownix_form_field_"+J.attr("fi")+"_"+J.attr("gi")+"_"+J.attr("id")}else{return"crownix_form_field_"+J.attr("fi")+"_"+J.attr("id")}};var y=function(L){var O=L.attr("fi");var J=L.attr("id");var K=L.attr("gi");var M=L.attr("ty");if(s){var N;if(M==="rb"){N=s.getField(O,K)}else{N=s.getField(O,J)}if(M==="tf"||M==="ta"||M==="co"||M==="im"||M==="sg"){return N.value}else{if(M==="rb"){return N.isSelected(J)}else{if(M==="cb"){return N.value==="1"}}}}else{if(M==="tf"||M==="ta"){return L.text()}else{if(M==="rb"||M==="cb"){return L.attr("se")==="1"}else{if(M==="im"||M==="sg"){return L.attr("dt")}else{if(M==="co"){return L.attr("sv")}}}}}};var e=function(P,O,R,U){var M=n(O.attr("le"));var X=n(O.attr("ri"));var T=n(O.attr("to"));var J=n(O.attr("bo"));var S=O.attr("ty");var W=O.attr("fi");var Q=O.attr("id");var V=y(O);if(S==="tf"){if(O.attr("pw")==="1"){O.text(V.replace(/./g,"*"))}else{if(O.attr("it")==="date"){var L=O.attr("df")||"yyyy-MM-dd";var Z=O.attr("dfv")||"yyyy-MM-dd";var Y=b.convertDateFormat(y(O),L,Z);O.text(Y)}else{O.text(V)}}A(P,O,R,U,{overflow:"hidden",padding:3})}else{if(S==="ta"){var K=h(O,U,R);P.wrapText(V,M+2,T+2,X-2,J-2,K)}else{if(S==="rb"){z(P,O,M,T,X,J,"radio",V,R,U)}else{if(S==="cb"){z(P,O,M,T,X,J,"check",V,R,U)}else{if(S==="co"){O.text(V);A(P,O,R,U,{overflow:"hidden",padding:3})}else{if(S==="sg"||S==="im"){if(V){var N=new Image();r.push(N);N.src=V;N.onload=function(){P.drawImage(N,M+1,T+1,X-M-2,J-T-2,0)}}}}}}}}};this.convertPage=function(U,R,S,J,K){var W=Math.floor(R.attr("wd")/10.3);var M=Math.floor(R.attr("ht")/10.3);if(J===1){B.width=R.attr("wd")/1000;B.height=R.attr("ht")/1000;B.size=R.attr("si")||"A4"}var N=$("<canvas>").attr({width:W,height:M,});var P=new m2soft.crownix.Canvas(N[0]);P.clear();var V=U.lineAttrList;var L=U.faceAttrList;var T=U.textAttrList;var Q=U.fontList;var O=new m2soft.crownix.ImageLoader();O.loadImage(R,U.indexedImageList,function(){R.children().each(function(){var Y=this.tagName;var aa=$(this);var Z=V[aa.attr("lid")];var ab=L[aa.attr("fid")];if(Z){Z=d(aa,Z)}if(ab){ab=j(aa,ab)}if(aa.attr("ft")==="1"){aa.text(l.formatPageNumber(aa.text(),J,B.totalPage))}if(Y==="LN"){x(P,aa,Z)}else{if(Y==="RA"){f(P,aa,Z,ab)}else{if(Y==="TL"){A(P,aa,Q,T)}else{if(Y==="SC"){E(P,aa,Z)}else{if(Y==="LL"){q(P,aa,Z)}else{if(Y==="PO"){u(P,aa,Z,ab)}else{if(Y==="EP"){w(P,aa,Z,ab)}else{if(Y==="DM"){G(P,aa,Z,ab)}else{if(Y==="PL"){t(P,aa,Z,ab)}else{if(Y==="HH"){c(P,aa,Z,ab)}else{if(Y==="RR"){a(P,aa,Z,ab)}else{if(Y==="CY"){H(P,aa,Z,ab)}else{if(Y==="CV"){F(P,aa,Z)}else{if(Y==="IM"){D(P,aa,O.nextImage())}else{if(Y==="FF"){e(P,aa,Q,T,J)}else{if(Y==="CT"){m(N[0],aa)}}}}}}}}}}}}}}}}});var X=setInterval(function(){for(var Z=0,Y=r.length;Z<Y;Z++){if(!r[Z].complete){return}}if(o){g(P,o.getNoteXml(J))}if(S!=="canvas"){K(J,P.toDataURL("image/"+S))}else{K(J,N)}clearInterval(X)},50)})};this.convert=function(L,P,R){if(typeof R!=="function"){throw"Invalid Callback Function"}var K=[],N=B.totalPage=L.getTotalPage()-L.getRemovedPage().length,J=0;r=[];for(var M=1;M<=N;M++){var Q=L.getHeadForPage(M);var O=$(L.getPage(M));this.convertPage(Q,O,P,M,function(S,T){K[S-1]=T;J++;if(J==N){R(K,B)}})}};this.setFormManager=function(J){s=J};this.setNoteManager=function(J){o=J}};m2soft.ns("m2soft.crownix.PdfConverter");m2soft.crownix.PdfConverter=function(){var d=m2soft.crownix.Resource;var b=m2soft.crownix.ImageConverter;var c=null;var a=null;this.convert=function(e,g,j,f){f=$.extend({},f);var h=new b();h.setFormManager(c);h.setNoteManager(a);h.convert(e,"jpeg",function(o,k){var l=k.width<k.height?"portrait":"landscape";var n;if(k.size==="CUSTOM"){n=new jsPDF(l,"in",[k.width,k.height])}else{n=new jsPDF(l,"in",k.size)}for(var m=0;m<o.length;m++){if(m!=0){n.addPage()}n.addImage(o[m],"jpeg",0,0,k.width,k.height)}if(f.save){n.save()}if(typeof j==="function"){j(n.output("datauristring"))}})};this.setFormManager=function(e){c=e};this.setNoteManager=function(e){a=e}};m2soft.ns("m2soft.crownix.MMLTokenizer");m2soft.crownix.MMLTokenizer=(function(){var a=function(){this.reenterStep=0;this.findOffset=-1};a.prototype={openHandlerList:{},closeHandlerList:{},parse:function(C,G){var z="<MML";var t="</MML>";var l="<LICENSE";var g="</LICENSE>";var u="<DOCUMENT";var s="</DOCUMENT>";var e="<HEAD>";var I="</HEAD>";var n="<PG ";var f="</PG>";var m="<MMLFOOTER";var d="</MMLFOOTER>";var w=this.reenterStep;var b=C.indexOf(z,this.findOffset);if(w<1&&b>=0){this.findOffset=b+z.length;var A=C.indexOf(">",b);this.openHandlerList.mml&&this.openHandlerList.mml(C.slice(b,A+1));this.reenterStep=1;w=0}var h=C.indexOf(l,this.findOffset);if(w<2&&h>=0){this.findOffset=h+l.length;var H=C.indexOf(">",h);this.openHandlerList.license&&this.openHandlerList.license(C.slice(h,H+1));this.reenterStep=2;w=0}var q=C.indexOf(g,this.findOffset);if(w<3&&q>=0){h=this.findOffset-l.length;this.findOffset=q+g.length;this.closeHandlerList.license&&this.closeHandlerList.license(C.slice(h,this.findOffset));this.reenterStep=3;w=0}while(true){var D=C.indexOf(u,this.findOffset);var r=C.indexOf(e,this.findOffset);if(w<4&&D>=0&&(D<r||r<0)){this.findOffset=D+u.length;var F=C.indexOf(">",D);this.openHandlerList.document&&this.openHandlerList.document(C.slice(D,F+1));this.reenterStep=4;w=0}r=C.indexOf(e,this.findOffset);if(w<5&&r>=0){this.findOffset=r+e.length;this.openHandlerList.head&&this.openHandlerList.head();this.reenterStep=5;w=0}var B=C.indexOf(I,this.findOffset);if(w<6&&B>=0){r=this.findOffset-e.length;this.findOffset=B+I.length;this.closeHandlerList.head&&this.closeHandlerList.head(C.slice(r,this.findOffset));this.reenterStep=6;w=0}while(true){D=C.indexOf(u,this.findOffset);var E=C.indexOf(n,this.findOffset);if(w<7&&E>=0&&(E<D||D<0)){this.findOffset=E+n.length;this.openHandlerList.page&&this.openHandlerList.page();this.reenterStep=7;w=0}var o=C.indexOf(f,this.findOffset);if(w<8&&o>=0&&(o<D||D<0)){E=this.findOffset-n.length;this.findOffset=o+f.length;this.closeHandlerList.page&&this.closeHandlerList.page(G,E,this.findOffset,C.slice(E,this.findOffset));this.reenterStep=6;w=0}if((E<0&&o<0)||((E>D||o>D)&&D>0)){break}}var k=C.indexOf(s,this.findOffset);if(w<9&&k>=0){this.findOffset=k+s.length;this.closeHandlerList.document&&this.closeHandlerList.document();this.reenterStep=3;w=0}if(D<0&&r<0&&B<0&&k<0){break}}var y=C.indexOf(m,this.findOffset);if(w<10&&y>=0){this.findOffset=y+m.length;var j=C.indexOf(">",y);this.openHandlerList.mmlfooter&&this.openHandlerList.mmlfooter(C.slice(y,j+1));this.reenterStep=10;w=0}var x=C.indexOf(d,this.findOffset);if(w<11&&x>=0){y=this.findOffset-m.length;this.findOffset=x+d.length;this.closeHandlerList.mmlfooter&&this.closeHandlerList.mmlfooter(C.slice(y,this.findOffset));this.reenterStep=11;w=0}var c=C.indexOf(t,this.findOffset);if(c>=0){this.findOffset=c+t.length;this.closeHandlerList.mml&&this.closeHandlerList.mml()}},onOpen:function(c,b){this.openHandlerList[c.toLowerCase()]=b},onClose:function(c,b){this.closeHandlerList[c.toLowerCase()]=b}};return a}());m2soft.ns("m2soft.crownix.Painter");m2soft.crownix.Painter=function(globalObject,canvasDom,textDom,movePage,serverUrl){var SignWindow=m2soft.crownix.SignWindow;var MaskWindow=m2soft.crownix.MaskWindow;var FieldOrder=m2soft.crownix.FieldOrder;var R=m2soft.crownix.Resource;var Util=m2soft.crownix.Util;var Unit=m2soft.crownix.util.Unit;var DateUtil=m2soft.crownix.util.DateUtil;var Font=m2soft.crownix.Font;var ChartConverter=m2soft.crownix.ChartConverter;var Message=m2soft.crownix.Message;var go=globalObject;var self=this;var drawMedia="";var Icon=m2soft.crownix.resource.Icon;var cxCanvas=new m2soft.crownix.Canvas(canvasDom,go),viewerOpenFile=go.openFile,viewerMovePage=movePage,viewerServerUrl=serverUrl,viewerTextDom=textDom,formManager=go.formManager,options=go.options,dialog=go.dialog,useAdjustLetterSpace=true,useAdjustCharacterScale=false,updateCallback=[],viewerScroll=go.scroll,offset={x:0,y:0};var drilldownAPI={expand:go.drilldownManager.expand,next:go.drilldownManager.drilldownNext,prev:go.drilldownManager.drilldownPrev};var HLINK_TYPE={NONE:0,RD:1,WEB:2,OTHER:3,EMAIL:4,RD_CURRENT:5,DRILLDOWN:7,};var WARNNING_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFQUY0MjE0MkJCMzNFMzExQThCQ0ZENjNBMThBMjY0NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpENjk5RDlFNDM2NzExMUUzOERCN0EwNDc2RkI1OUZGNyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpENjk5RDlFMzM2NzExMUUzOERCN0EwNDc2RkI1OUZGNyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjc5MjQ4RDFBNzEzNkUzMTFCRkRFQ0ExN0Y0NTU3RTY3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVBRjQyMTQyQkIzM0UzMTFBOEJDRkQ2M0ExOEEyNjQ1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pFczmAAAAgRJREFUeNp0U01rFEEQ7e6ZTbIYZ/GLGLxvJBD3Eu+5iRC9iCcvkqMgkUAu/oUcouLV/IE1l0DIwaPgKV7EYFBRREFYJLJuZz56pqt9NbOT7OhOwaO6aqpe11RXSb25KerEOXcK2DRqA2z7w8g8YOi8CL0GLANtKvyHjmgH354Bv8pk1n6aZWLEcQd40RCiNSGl8AAmtkJ0YqLOcZquIm4FMdtEVFSQpGl+IE4m6gZCSE4uhU9c5jQAwuBHHHeRfJeGJH5kjMDhEhxbqF1OiHppApeVkp/CcAvxr5HX88MkYYKH54iCKecqCVMbG7mO19dPfGeBC84FX6PokXXusX8cx0xw+4q1eTPHShRVzPOIfRdFy8QEuiC4OolfqZUwrJhnAOTNWe6BBjs3Q/T79QRHRxUTtYqBMYZKAjAd9rXutPCklYuXlsby/cYraSG+5AQDrsC5nc9Z1rmmdSWwtb+f6/7iYsX/3vOEVmr3tALnnr/xvNXpLAtmR3oRzc//d/s3JL9qNP7g0idFBUUTezxhL5vN7o0kkbMYrnHyHcldpRwlyQrie0zgXZ+ZEQYJJss+QB8ceN7N2NpJyf3Ac4V42p/AW6XEnlIDY+09jP82r0CK7/LBwkIxymArlwlYg30L9hzOBviI8y70U/fPMsn77fbJMtHImjomrFnhcr158P4KMAC3UsepYGz8PwAAAABJRU5ErkJggg==";var adjustCoord=function(mi,width){if(width){return Math.floor(mi/10.3+24.3)+((width%2===0)?0:0.5)}else{return Math.floor(mi/10.3+24.3)}};var applyPriorityToFaceAttr=function(element,faceAttr){var fc=element.attr("fc");var pt=element.attr("pt");var al=element.attr("al");if(fc||pt||al){var faceAttr_=$.extend({},faceAttr);fc&&(faceAttr_.fc=fc);pt&&(faceAttr_.pt=pt);al&&(faceAttr_.al=al);return faceAttr_}else{return faceAttr}};var isDrawingTo={screen:function(){return drawMedia=="d"},printer:function(){return drawMedia=="p"},save:function(){return drawMedia=="s"},};var applyPriorityToLineAttr=function(element,lineAttr){var color=element.attr("lc");var width=element.attr("wd");var style=element.attr("st");var arrow=element.attr("ap");if(color||width||style||arrow){var lineAttr_=$.extend({},lineAttr);color&&(lineAttr_.lc=color);width&&(lineAttr_.wd=m2soft.crownix.Painter.adjustWidth(width));style&&(lineAttr_.st=style);arrow&&(lineAttr_.ap=arrow);return lineAttr_}else{return lineAttr}};var drawLine=function(element,lineAttr){var sx=adjustCoord(element.attr("sx"),lineAttr.wd);var sy=adjustCoord(element.attr("sy"),lineAttr.wd);var ex=adjustCoord(element.attr("ex"),lineAttr.wd);var ey=adjustCoord(element.attr("ey"),lineAttr.wd);cxCanvas.drawLine(sx,sy,ex,ey,lineAttr)};var drawCurve=function(element,lineAttr){var sx=adjustCoord(element.attr("sx"),lineAttr.wd);var sy=adjustCoord(element.attr("sy"),lineAttr.wd);var ex=adjustCoord(element.attr("ex"),lineAttr.wd);var ey=adjustCoord(element.attr("ey"),lineAttr.wd);var cx1=adjustCoord(element.attr("cx1"),lineAttr.wd);var cy1=adjustCoord(element.attr("cy1"),lineAttr.wd);var cx2=adjustCoord(element.attr("cx2"),lineAttr.wd);var cy2=adjustCoord(element.attr("cy2"),lineAttr.wd);cxCanvas.drawCurve(sx,sy,ex,ey,lineAttr,cx1,cy1,cx2,cy2)};var drawPolyLine=function(element,lineAttr){var data=element.attr("dt").split("|");var points=[];for(var i=0,max=data.length;i<max;i++){var point=data[i].split(",");var x=adjustCoord(point[0],lineAttr.wd);var y=adjustCoord(point[1],lineAttr.wd);points.push([x,y])}cxCanvas.drawPolyLine(lineAttr,points)};var drawScribble=function(element,lineAttr){var data=element.attr("dt").split("|");var points=[];for(var i=0,max=data.length;i<max;i++){var point=data[i].split(",");var x=adjustCoord(point[0]);var y=adjustCoord(point[1]);points.push([x,y])}cxCanvas.drawScribble(lineAttr,points)};var drawRect=function(element,lineAttr,faceAttr){var sx=adjustCoord(element.attr("sx"),lineAttr.wd);var sy=adjustCoord(element.attr("sy"),lineAttr.wd);var ex=adjustCoord(element.attr("ex"),lineAttr.wd);var ey=adjustCoord(element.attr("ey"),lineAttr.wd);cxCanvas.drawRect(sx,sy,ex,ey,lineAttr,faceAttr)};var drawRoundeRect=function(element,lineAttr,faceAttr){var sx=adjustCoord(element.attr("sx"),lineAttr.wd);var sy=adjustCoord(element.attr("sy"),lineAttr.wd);var ex=adjustCoord(element.attr("ex"),lineAttr.wd);var ey=adjustCoord(element.attr("ey"),lineAttr.wd);var aw=element.attr("aw")/10.3;var ah=element.attr("ah")/10.3;var ap=element.attr("ap");cxCanvas.drawRect(sx,sy,ex,ey,lineAttr,faceAttr,aw,ah,ap);cxCanvas.setClip(element.attr("cl"))};var drawEllipse=function(element,lineAttr,faceAttr){var sx=adjustCoord(element.attr("sx"),lineAttr.wd);var sy=adjustCoord(element.attr("sy"),lineAttr.wd);var ex=adjustCoord(element.attr("ex"),lineAttr.wd);var ey=adjustCoord(element.attr("ey"),lineAttr.wd);cxCanvas.drawEllipse(sx,sy,ex,ey,lineAttr,faceAttr)};var drawDiamond=function(element,lineAttr,faceAttr){var sx=adjustCoord(element.attr("sx"),lineAttr.wd);var sy=adjustCoord(element.attr("sy"),lineAttr.wd);var ex=adjustCoord(element.attr("ex"),lineAttr.wd);var ey=adjustCoord(element.attr("ey"),lineAttr.wd);cxCanvas.drawDiamond(sx,sy,ex,ey,lineAttr,faceAttr)};var drawParallelogram=function(element,lineAttr,faceAttr){var sx=adjustCoord(element.attr("sx"),lineAttr.wd);var sy=adjustCoord(element.attr("sy"),lineAttr.wd);var ex=adjustCoord(element.attr("ex"),lineAttr.wd);var ey=adjustCoord(element.attr("ey"),lineAttr.wd);var cx=element.attr("cx")/10.3;cxCanvas.drawParallelogram(sx,sy,ex,ey,lineAttr,faceAttr,cx)};var drawPolygon=function(element,lineAttr,faceAttr){var data=element.attr("dt").split("|");var points=[];for(var i=0,max=data.length;i<max;i++){var point=data[i].split(",");var x=adjustCoord(point[0],lineAttr.wd);var y=adjustCoord(point[1],lineAttr.wd);points.push([x,y])}cxCanvas.drawPolygon(lineAttr,faceAttr,points)};var drawHexaheron=function(element,lineAttr,faceAttr){var sx=adjustCoord(element.attr("sx"),lineAttr.wd);var sy=adjustCoord(element.attr("sy"),lineAttr.wd);var ex=adjustCoord(element.attr("ex"),lineAttr.wd);var ey=adjustCoord(element.attr("ey"),lineAttr.wd);var cx=element.attr("cx")/10.3;var cy=element.attr("cy")/10.3;cxCanvas.drawHexaheron(sx,sy,ex,ey,cx,cy,lineAttr,faceAttr)};var drawCylinder=function(element,lineAttr,faceAttr){var sx=adjustCoord(element.attr("sx"),lineAttr.wd);var sy=adjustCoord(element.attr("sy"),lineAttr.wd);var ex=adjustCoord(element.attr("ex"),lineAttr.wd);var ey=adjustCoord(element.attr("ey"),lineAttr.wd);var sh=element.attr("sh")/10.3;cxCanvas.drawCylinder(sx,sy,ex,ey,lineAttr,faceAttr,sh)};var drawSVG=function(element){var left=adjustCoord(element.attr("sx"));var right=adjustCoord(element.attr("ex"));var top=adjustCoord(element.attr("sy"));var bottom=adjustCoord(element.attr("ey"));element.find("svg").attr({width:(right-left)+"px",height:(bottom-top)+"px",}).css({position:"absolute",left:left+offset.x,top:top+offset.y,}).appendTo(viewerTextDom)};var drawCxChart=function(element){var left=adjustCoord(element.attr("sx"));var right=adjustCoord(element.attr("ex"));var top=adjustCoord(element.attr("sy"));var bottom=adjustCoord(element.attr("ey"));var div=$("<div>").css({position:"absolute",left:left,top:top,width:(right-left)+"px",height:(bottom-top)+"px",}).appendTo(viewerTextDom);try{var converter=new ChartConverter();var ret=converter.convertMml(element);var chart=new crownix.Chart(div[0]);chart.build(ret.series,ret.options)}catch(e){Message.log(e.stack)}};var drawChart=function(element){element.children().each(function(){var elementName=this.tagName;if(elementName=="svg"){drawSVG(element)}else{if(elementName=="CC"){drawCxChart(element)}}})};var applyHyperLink=function(target,targetTop,targetLeft,hyperlinkInfoElement,element){var text=target.text();var hlel=hyperlinkInfoElement;var type=hlel.attr("hl");var id=hlel.attr("hi");var url=hlel.attr("hr")||hlel.attr("ht");var balloon=hlel.attr("hb");var eventString=hlel.attr("he");var browser_close=hlel.attr("bc");target.addClass("crownix_hyperlink");var width=target.width();var height=target.height();var anchor=$("<a>").attr("href",url).attr("title",balloon).css({position:"absolute",top:targetTop,left:targetLeft,width:width,height:height});target.css("position","");target.css("left","");target.css("top","");if(type==HLINK_TYPE.RD){var isNewWindow=hlel.attr("hn")||0;var params=hlel.attr("hp")||"";var isFullScreen=hlel.attr("hf")||1;var width=isNewWindow&&hlel.attr("hw");var height=hlel.attr("hh");var x=hlel.attr("hx");var y=hlel.attr("hy");var showToolbar=hlel.attr("ht")||1;var showMenubar=hlel.attr("hm")||1;var showStatusbar=hlel.attr("hs")||1;var resizable=hlel.attr("ha")||1;var isPopup=(window.location.href.indexOf("popup/viewer.html")>0);var template=hlel.attr("hd")||isPopup?"viewer.html":"popup/viewer.html";var windowOpenOptionString=isFullScreen==1?"fullscreen="+isFullScreen:"left="+x+",top="+y+",width="+width+",height="+height;windowOpenOptionString=windowOpenOptionString+",toolbar="+showToolbar+",menubar="+showMenubar+",status="+showStatusbar+",resizable="+resizable;anchor.attr("href","#");target.bind(Util.browser.mobile?"tap":"click",function(ev){if(typeof eventString==="string"){if(typeof HLinkClicked==="function"){eval("HLinkClicked")(eventString,url,params)}}else{if(isNewWindow){window.open("./"+template+"?mrd_path="+url+"&mrd_param="+params+encodeURI("&server_url="+viewerServerUrl),"_blank",windowOpenOptionString)}else{if(go.shareManager&&go.shareManager.isConnected()){dialog.show(R.get("unsupported_feature_localStorage"));return}options.isHyperlink=true;if(formManager&&formManager.isModified()){dialog.show(R.get("confirm_page_out")+" "+R.get("confirm_hyperlink_move"),{confirm:true,input:false},function(isOpenFile){if(isOpenFile){formManager.saved();viewerOpenFile(url,params,options)}})}else{viewerOpenFile(url,params,options)}}}return false})}else{if(type==HLINK_TYPE.DRILLDOWN){anchor.attr("href","#");target.bind("click",function(){if(go.shareManager&&go.shareManager.isConnected()&&!go.shareManager.isHost()){dialog.show(R.get("unsupported_feature_localStorage"));return}var parentId="#"+go.containerDom.parent().attr("id");Message.progress.show(parentId,"",function(){try{go.drilldownManager.toggle(id).fail(function(e){Message.progress.hide(parentId);dialog.show(e)}).done(function(e){Message.progress.hide(parentId)})}catch(e){Message.progress.hide(parentId);dialog.show(e)}return false})})}else{if(type==HLINK_TYPE.WEB){}else{if(type==HLINK_TYPE.OTHER){}else{if(type==HLINK_TYPE.RD_CURRENT){anchor.attr("href","#");target.bind(Util.browser.mobile?"tap":"click",function(ev){viewerMovePage(parseInt(url));return false})}else{if(type==HLINK_TYPE.EMAIL){anchor.attr("href","mailto:"+url)}else{if(browser_close=="1"){anchor.attr("href","#");target.bind(Util.browser.mobile?"tap":"click",function(ev){window.close();return false})}}}}}}}target.wrap(anchor)};var makeTextCss=function(element,textAttr,fontList){var css={};css["font-family"]='"'+(element.attr("fn")?element.attr("fn"):fontList.get(textAttr.fi)||"")+'", '+Font.FONT_FAMILY_PREFIX+textAttr.fi;css["font-size"]=((element.attr("pt")?element.attr("pt")/10:textAttr.pt/10)||10)+"pt";css.color=(element.attr("cl")?element.attr("cl"):textAttr.cl)||"#000000";(element.attr("cb")?element.attr("cb")==="1":(element.attr("cb")==undefined&&textAttr.cb==="1"))&&(css["font-weight"]="bold");(element.attr("ci")?element.attr("ci")==="1":(element.attr("ci")==undefined&&textAttr.ci==="1"))&&(css["font-style"]="italic");(element.attr("cu")?element.attr("cu")==="1":(element.attr("cu")==undefined&&textAttr.cu==="1"))&&(css["text-decoration"]="underline");(element.attr("cs")?element.attr("cs")==="1":(element.attr("cs")==undefined&&textAttr.cs==="1"))&&(css["text-decoration"]?(css["text-decoration"]+=" line-through"):(css["text-decoration"]="line-through"));(element.attr("vs")==="0")&&(css.visibility="hidden");return css};var drawText=function(element,fontList,textAttrList){var left=adjustCoord(element.attr("le"));var right=adjustCoord(element.attr("ri"));var top=adjustCoord(element.attr("to"))-1;var bottom=adjustCoord(element.attr("bo"))+1;var hAlign=parseInt(element.attr("ha"))||0;var lSpace=parseFloat(element.attr("ls"))/1000||0;var background=element.attr("ba");if(hAlign===0){hAlign="left"}else{if(hAlign===1){hAlign="center"}else{if(hAlign===2){hAlign="right"}}}var div=$("<div>").css({position:"absolute","white-space":"pre",left:left+offset.x+"px",top:top+offset.y+"px","text-align":hAlign,"line-height":(bottom-top)+"px",});if(background==="1"){div.addClass("crownix-background-object")}var textAttr={};var textCss={};var text="";var textLength=0;var jpval=false;if(element.children().length>0){var maxFontSize=0;element.children().each(function(){var tx=$(this);textAttr=textAttrList[tx.attr("tid")]||{};textCss=makeTextCss(tx,textAttr,fontList);text=tx.text();textLength+=text.length;maxFontSize=Math.max(maxFontSize,textCss["font-size"].replace("pt",""));jpval=tx.attr("sc")||textAttr.sc||0;var span=$("<span>").css(textCss).text(text).appendTo(div);if(tx.attr("cr")==="1"||textAttr.cr==="1"){(textCss.color==="#000000")&&span.css("color","#ffffff");span.wrapInner('<span style="background-color:#000000"></span>')}if(tx.attr("ss")==="1"||textAttr.ss==="1"){span.wrapInner("<sup></sup>")}else{if(tx.attr("ss")==="2"||textAttr.ss==="2"){span.wrapInner("<sub></sub>")}}});div.css("font-size",maxFontSize+"pt")}else{textAttr=textAttrList[element.attr("tid")]||{};textCss=makeTextCss(element,textAttr,fontList);text=element.text();textLength=text.length;jpval=element.attr("sc")||textAttr.sc||0;div.css(textCss).text(text);if(element.attr("cr")==="1"||textAttr.cr==="1"){(textCss.color==="#000000")&&div.css("color","#ffffff");div.wrapInner('<span style="background-color:#000000"></span>')}if(element.attr("ss")==="1"||textAttr.ss==="1"){div.wrapInner("<sup></sup>")}else{if(element.attr("ss")==="2"||textAttr.ss==="2"){div.wrapInner("<sub></sub>")}}}if(bottom){div.css("height",(bottom-top)+"px")}div.css("letter-spacing",lSpace+"in");(element.attr("ft")==="1")&&div.attr("pagenum-format",div.text()).addClass("crownix-pagenum");div.appendTo(viewerTextDom);var width=right-left+2;var adjustCss,adjustScale;if(useAdjustCharacterScale&&jpval){adjustScale=(width-1)/div.width();if(adjustScale<1){adjustCss={"transform-origin":"0%",transform:"scale("+adjustScale+",1)"}}}else{if(useAdjustLetterSpace){if(textLength>1&&div.width()>width+Unit.inToPx(lSpace)){var adjustSpacing=lSpace-Unit.pxToIn((div.width()-width)/(textLength));adjustSpacing=adjustSpacing.toFixed(3);div.css("letter-spacing",adjustSpacing+"in")}}}if(element.attr("ve")){div.css({"writing-mode":(Util.browser.msie?"tb-lr":"vertical-lr"),"-webkit-writing-mode":"vertical-lr"})}var clip;if(element.attr("cbo")=="1"&&element.attr("cto")!=="1"){clip="top"}else{if(element.attr("cto")=="1"&&element.attr("cbo")!=="1"){clip="bottom"}}if(clip){var maxHeight=0;var innerSpan=div.wrapInner("<span>").find(":first");if(innerSpan.children().length>0){innerSpan.children().each(function(){maxHeight=Math.max(maxHeight,$(this).height())})}else{maxHeight=innerSpan.height()}div.css("overflow","hidden");innerSpan.css("position","relative").css(clip,Math.abs((maxHeight/2)-((bottom-top)/2)));if(adjustCss){width=width/adjustScale}}if(adjustCss){div.css(adjustCss)}div.css("width",width+"px");div.find("span").css("white-space","pre");if(Util.browser.webkit){div.css("min-height",(parseInt(div.css("height"))+1)+"px")}if(!!element.attr("hl")||!!element.attr("hi")){var hyperlinkInfoElement=element.parent().find('[hi="'+element.attr("hi")+'"][hl]');if(hyperlinkInfoElement.length==0){hyperlinkInfoElement=element}applyHyperLink(div,top+offset.y,left+offset.x,hyperlinkInfoElement,element)}};var makeFontStyle=function(element,textAttrList,fontList){var textAttr=textAttrList[element.attr("tid")];return{fontFamily:'"'+(element.attr("fn")?element.attr("fn"):fontList.get(textAttr.fi)||"")+'", '+m2soft.crownix.Font.FONT_FAMILY_PREFIX+textAttr.fi,fontSize:((element.attr("pt")?element.attr("pt")/10:textAttr.pt/10)||10)+"pt",fillStyle:(element.attr("cl")?element.attr("cl"):textAttr.cl)||"#000000",fontStyle:(element.attr("ci")?element.attr("ci")==="1":textAttr.ci==="1")?"Italic":"",fontWeight:(element.attr("cb")?element.attr("cb")==="1":textAttr.cb==="1")?"Bold":"",underLine:(element.attr("cu")?element.attr("cu")==="1":textAttr.cu==="1")||!!element.attr("hl"),lineThrough:element.attr("cs")?element.attr("cs")==="1":textAttr.cs==="1",shade:element.attr("cr")?element.attr("cr")==="1":textAttr.cr==="1",}};var drawTextToCanvas=function(element,fontList,textAttrList,option){if(element.attr("vs")==="0"){return}option=option||{};var left=adjustCoord(element.attr("le"))+(option.padding||0);var right=adjustCoord(element.attr("ri"))-(option.padding||0);var top=adjustCoord(element.attr("to"))+(option.padding||0);var bottom=adjustCoord(element.attr("bo"))-(option.padding||0);var hAlign=parseInt(element.attr("ha"))||0;var lSpace=parseFloat(element.attr("ls"))/1000||0;var fontStyle;var text;var totalWidth;var letterSpacing=Unit.inToPx(lSpace);if(hAlign===1){hAlign="center"}else{if(hAlign===2){hAlign="right"}else{hAlign="left"}}if(element.children("TX").length>0){var startX=0;var offsetX=0;var elementWidth;if(option.overflow!=="hidden"){while(true){elementWidth=0;element.children().each(function(){var tx=$(this);text=tx.text();fontStyle=makeFontStyle(tx,textAttrList,fontList);elementWidth+=cxCanvas.measureText(text,fontStyle).width+(letterSpacing*text.length)});if(elementWidth>(right-left+2+letterSpacing)){letterSpacing--}else{break}}}if(hAlign==="center"){startX=(right-left-elementWidth+letterSpacing)/2}else{if(hAlign==="right"){startX=right-left-elementWidth}}element.children().each(function(){var tx=$(this);text=tx.text();fontStyle=makeFontStyle(tx,textAttrList,fontList);fontStyle.textAlign="left";fontStyle.textBaseline="bottom";fontStyle.letterSpacing=letterSpacing;cxCanvas.drawText(text,left+startX+offsetX,top,right,bottom,fontStyle);offsetX+=cxCanvas.measureText(text,fontStyle).width+(letterSpacing*text.length)})}else{fontStyle=makeFontStyle(element,textAttrList,fontList);fontStyle.textAlign=hAlign;if(element.attr("cbo")=="1"&&element.attr("cto")!=="1"){fontStyle.textBaseline="top"}else{if(element.attr("cto")=="1"&&element.attr("cbo")!=="1"){fontStyle.textBaseline="bottom"}else{fontStyle.textBaseline="middle"}}text=element.text();if(option.overflow!=="hidden"){while(cxCanvas.measureText(text,fontStyle).width+(letterSpacing*text.length)>(right-left+2+letterSpacing)){letterSpacing--}}fontStyle.letterSpacing=letterSpacing;cxCanvas.drawText(text,left,top,right,bottom,fontStyle)}};var drawImage=function(element,image){var left=adjustCoord(element.attr("sx"));var right=adjustCoord(element.attr("ex"));var top=adjustCoord(element.attr("sy"));var bottom=adjustCoord(element.attr("ey"));var data=element.attr("dt");var ratio=element.attr("ra");var background=element.attr("ba");var width=right-left;var height=bottom-top;if(go.options.imageDrawOption.useCanvas||background){cxCanvas.drawImage(image,left,top,width,height,ratio);if(!!element.attr("hl")||!!element.attr("hi")){var imgElement=$("<div>").css({position:"absolute",left:left+"px",top:top+"px",width:width+"px",height:height+"px",}).appendTo(viewerTextDom);var hyperlinkInfoElement=element.parent().find('[hi="'+element.attr("hi")+'"][hl]');if(hyperlinkInfoElement.length==0){hyperlinkInfoElement=element}applyHyperLink(imgElement,top+offset.y,left+offset.x,hyperlinkInfoElement,element)}}else{var imgElement;if(ratio==="1"){imgElement=$("<img>").css("background",["url(",data,")"].join(""))}else{imgElement=$("<img>").attr("src",data)}imgElement.attr({width:width,height:height,}).css({position:"absolute",left:left+offset.x,top:top+offset.y,}).appendTo(viewerTextDom);if(!!element.attr("hl")||!!element.attr("hi")){var hyperlinkInfoElement=element.parent().find('[hi="'+element.attr("hi")+'"][hl]');if(hyperlinkInfoElement.length==0){hyperlinkInfoElement=element}applyHyperLink(imgElement,top+offset.y,left+offset.x,hyperlinkInfoElement,element)}}};var getElementId=function(element,type){if(type==="rb"){return"crownix_form_field_"+element.attr("fi")+"_"+element.attr("gi")+"_"+element.attr("id")}else{return"crownix_form_field_"+element.attr("fi")+"_"+element.attr("id")}};var drawFormField=function(element,fontList,textAttrList){var left=adjustCoord(element.attr("le"))+2+offset.x;var right=adjustCoord(element.attr("ri"))-1+offset.x;var top=adjustCoord(element.attr("to"))+2+offset.y;var bottom=adjustCoord(element.attr("bo"))-1+offset.y;var type=element.attr("ty");var value=element.attr("dt")||element.attr("vl")||element.text();var required=element.attr("rq")||"1";var editable=element.attr("ed")||"1";var hidden=element.attr("hd")||"0";var formId=element.attr("fi");var fieldId=element.attr("id");var field=formManager.getField(formId,fieldId)||{};var elementId=getElementId(element,type);var textAttr=textAttrList[element.attr("tid")]||{};var textCss=makeTextCss(element,textAttr,fontList);var inputAuthority=element.attr("sa")||"All";if(type==="tf"){var limitedLength=element.attr("tl");var placeholder=element.attr("ph")||"";var hAlign=parseInt(element.attr("ha"))||0;var password=element.attr("pw");var expression=element.attr("re");var inputInfo={type:element.attr("it")||"text",realDateFormat:element.attr("df")||"yyyy-MM-dd",displayDateFormat:element.attr("dfv")||"yyyy-MM-dd",attributes:Util.deserialize(element.attr("ia")),};var popupData={};var textAlign="";popupData.url=element.attr("pu");popupData.width=element.attr("puw");popupData.height=element.attr("puh");popupData.top=element.attr("put");popupData.left=element.attr("pul");if(!hAlign||hAlign=="0"){textAlign="left"}else{if(hAlign=="1"){textAlign="center"}else{if(hAlign=="2"){textAlign="right"}else{if(hAlign=="3"||hAlign=="4"){textAlign="justify"}}}}drawTextField(field,elementId,left,right,top,bottom,formId,fieldId,value,placeholder,textAlign,limitedLength,editable,hidden,required,textCss,expression,password,popupData,inputInfo,inputAuthority)}else{if(type==="ta"){var limitedLength=element.attr("tl");var limitedLineLength=element.attr("ll");var placeholder=element.attr("ph")||"";var hAlign=parseInt(element.attr("ha"))||0;var popupData={};var textAlign="";popupData.url=element.attr("pu");popupData.width=element.attr("puw");popupData.height=element.attr("puh");popupData.top=element.attr("put");popupData.left=element.attr("pul");if(!hAlign||hAlign=="0"){textAlign="left"}else{if(hAlign=="1"){textAlign="center"}else{if(hAlign=="2"){textAlign="right"}else{if(hAlign=="3"||hAlign=="4"){textAlign="justify"}}}}drawTextArea(field,elementId,left,right,top,bottom,formId,fieldId,value,placeholder,textAlign,limitedLength,limitedLineLength,editable,hidden,required,textCss,expression,popupData,inputAuthority)}else{if(type==="cb"){var label=element.attr("lb");var labelAlign=element.attr("la");var hAlign=parseInt(element.attr("ha"))||0;var vAlign=parseInt(element.attr("va"))||0;var selected=element.attr("se");var textAlign="left";var textVAlign="middle";if(!hAlign||hAlign=="0"){textAlign="left"}else{if(hAlign=="1"){textAlign="center"}else{if(hAlign=="2"){textAlign="right"}}}if(!vAlign||vAlign=="0"){textVAlign="top"}else{if(vAlign=="1"){textVAlign="middle"}else{if(vAlign=="2"){textVAlign="bottom"}}}drawCheckBox(field,elementId,left,right,top,bottom,formId,fieldId,value,selected,editable,hidden,required,label,labelAlign,textCss,textAlign,textVAlign,inputAuthority)}else{if(type==="co"){var displayValues=[];var actualValues=[];element.children("item").each(function(){var item=$(this);displayValues.push(item.attr("sd"));actualValues.push(item.attr("ad"))});var selectedValue=element.attr("sv");var comboType=element.attr("ct")||"0";if(comboType=="0"){drawComboBox(field,elementId,left,right,top,bottom,formId,fieldId,selectedValue,editable,hidden,required,textCss,displayValues,actualValues,inputAuthority)}else{drawNormalCombo(left,right,top,bottom,selectedValue,textCss,displayValues,actualValues,getEventHandlers(element))}}else{if(type==="rb"){var label=element.attr("lb");var labelAlign=element.attr("la");var hAlign=parseInt(element.attr("ha"))||0;var vAlign=parseInt(element.attr("va"))||0;var selected=element.attr("se");var groupId=element.attr("gi");var textAlign="left";var textVAlign="middle";if(!hAlign||hAlign=="0"){textAlign="left"}else{if(hAlign=="1"){textAlign="center"}else{if(hAlign=="2"){textAlign="right"}}}if(!vAlign||vAlign=="0"){textVAlign="top"}else{if(vAlign=="1"){textVAlign="middle"}else{if(vAlign=="2"){textVAlign="bottom"}}}drawRadioButton(field,elementId,left,right,top,bottom,formId,fieldId,groupId,value,selected,editable,hidden,required,label,labelAlign,textCss,textAlign,textVAlign,inputAuthority)}else{if(type==="sg"){var placeholder=element.attr("ph")||"";var hAlign=parseInt(element.attr("ha"))||0;if(!hAlign||hAlign=="0"){textCss["text-align"]="left"}else{if(hAlign=="1"){textCss["text-align"]="center"}else{if(hAlign=="2"){textCss["text-align"]="right"}else{if(hAlign=="3"||hAlign=="4"){textCss["text-align"]="justify"}}}}drawSignature(field,elementId,left,right,top,bottom,formId,fieldId,value,editable,hidden,required,placeholder,textCss,inputAuthority)}else{if(type==="im"){var ratio=element.attr("ra")||0;var placeholder=element.attr("ph")||"";var hAlign=parseInt(element.attr("ha"))||0;var useMasking=element.attr("mk");if(!hAlign||hAlign=="0"){textCss["text-align"]="left"}else{if(hAlign=="1"){textCss["text-align"]="center"}else{if(hAlign=="2"){textCss["text-align"]="right"}else{if(hAlign=="3"||hAlign=="4"){textCss["text-align"]="justify"}}}}drawPicture(field,elementId,left,right,top,bottom,formId,fieldId,value,editable,hidden,required,ratio,placeholder,textCss,inputAuthority,useMasking)}else{if(type==="sm"){var serverUrl=element.attr("su");var serviceCode=element.attr("sc");var datasource=element.attr("sn");var text=element.text()||"";var normalImage=element.attr("bi")||element.attr("rbi");var clickImage=element.attr("pi")||element.attr("rpi");var buttonImage={normalImage:normalImage,clickImage:clickImage};var buttonType=element.attr("bt")||"0";if(buttonType=="0"){drawSubmit(left,right,top,bottom,formId,fieldId,serverUrl,serviceCode,datasource,text,textCss,editable,buttonImage,inputAuthority)}else{drawNormalButton(left,right,top,bottom,text,textCss,buttonImage,getEventHandlers(element))}}else{if(type==="fl"){var hAlign=parseInt(element.attr("ha"))||0;var vAlign=parseInt(element.attr("va"))||0;var maxSize=element.attr("ms");var extensions=element.attr("ex")&&element.attr("ex").split(",").map(function(value){return value.toUpperCase()});var placeHolder=self.formFieldMode?element.attr("ph"):"";var regExp=element.attr("re");drawFile(field,left,right,top,bottom,hAlign,vAlign,formId,fieldId,value,textCss,required,editable,maxSize,extensions,placeHolder,regExp,inputAuthority)}}}}}}}}}if(self.formFieldMode&&type!=="sm"){field.setElementId(elementId)}};var getEventHandlers=function(element){return eventHandler={change:getEventHandler(element.attr("evc")),click:getEventHandler(element.attr("click"))}};var getEventHandler=function(encodedScript){if(encodedScript===undefined){return}var planeScript=Util.base64.utf8Decode(encodedScript);eval('var func = function(drilldown, value) { "use strict"; '+planeScript+"};");return func};var cxOpener=function(formId){return{validate:function(valueList){return formManager.validateForm(formId,valueList)},form:formManager.getFormWrapper(formId),set:function(valueList){for(var fieldId in valueList){var value=valueList[fieldId];var field=formManager.getField(formId,fieldId);var fieldSel=$("#m2soft-crownix-text").find("[name="+fieldId+"]");switch(field.type){case"ta":case"tf":fieldSel.val(value).trigger("input");break;case"cb":fieldSel.attr("checked",!!value).trigger("change");break;case"rb":fieldSel.filter("[fieldId="+value+"]").attr("checked","checked").trigger("change");break;case"co":fieldSel.find('option:contains("'+value+'")').each(function(){if($(this).text()!=value){return}fieldSel.val($(this).attr("value")).trigger("change")});break;case"sg":case"im":(function(field,fieldSel,value){var image=new Image();image.onload=function(){var canvas=fieldSel;var ctx=canvas.get(0).getContext("2d");ctx.clearRect(0,0,canvas.width(),canvas.height());var ratio=canvas.attr("ratio");if(ratio==1){var imageRatio=image.width/image.height;var canvasRatio=canvas.width()/canvas.height();if(imageRatio>canvasRatio){var adjustHeight=canvas.height()*(canvasRatio/imageRatio);var adjustY=(canvas.height()-adjustHeight)/2;ctx.drawImage(image,0,adjustY,canvas.width(),adjustHeight)}else{var adjustWidth=canvas.width()*(imageRatio/canvasRatio);var adjustX=(canvas.width()-adjustWidth)/2;ctx.drawImage(image,adjustX,0,adjustWidth,canvas.height())}}else{if(ratio==2){ctx.drawImage(image,0,0)}else{ctx.drawImage(image,0,0,canvas.width(),canvas.height())}}$("#m2soft-crownix-text div[for="+field.id+"] span").hide();field.value=canvas.get(0).toDataURL("image/png")};image.src=value})(field,fieldSel,value);break}}},}};var preventField=function(formId,element){if(!self.formFieldMode){return}if(formManager.checkFormLoadComplete(formId)){return}element.on("mousedown.prevent touchstart.prevent",function(ev){ev.preventDefault();ev.stopPropagation();dialog.show(R.get("formfield_event_disable_before_done"))})};var getWrapperDiv=function(left,right,top,bottom){return $(document.createElement("div")).attr("id","m2soft-crownix-field-wrapper").css({position:"absolute",left:left+"px",top:top+"px",width:right-left+"px",height:bottom-top+"px"}).appendTo(viewerTextDom)};var getCommonDiv=function(wrapper,color,space,width,height,field){var spaceAdjust=Util.browser.firefox?2:0,target;if(field){target=field.css({border:"1px dashed "+color})}else{target=$(document.createElement("div")).attr("id","crownix_form_field_hintingbox").css({"border-color":color}).appendTo(wrapper)}target.css({position:"absolute",left:space+"px",top:space+"px",width:width-(2*space)-spaceAdjust+"px",height:height-(2*space)-spaceAdjust+"px",}).addClass("commonFieldHinting");return target};var getWarningImg=function(wrapper,fieldId,field,tOffset){var warning=$("<img>").attr("id","crownix_form_field_"+fieldId+"_warnning").attr("src",WARNNING_IMAGE).css({position:"absolute",left:(field.width()-12)+"px",top:tOffset+"px"}).hide().appendTo(wrapper);return warning};var drawTextField=function(field,elementId,left,right,top,bottom,formId,fieldId,value,placeholder,textAlign,limitedLength,editable,hidden,required,textCss,expression,password,popupData,inputInfo,inputAuthority){var wrapper=getWrapperDiv(left,right,top,bottom),input=$(document.createElement("input"));preventField(formId,input);if(field.editable){editable=field.editable}if(self.formFieldMode&&editable==="0"&&field.disableColor){wrapper.addClass("crownix-formfield-disable")}var refField=formManager.getField(formId,field.referenceId);if(field.referenceId&&refField.type=="ta"){drawTextArea(field,elementId,left,right,top,bottom,formId,fieldId,value,placeholder,textAlign,limitedLength,refField.limitedLineLength,editable,hidden,required,textCss,expression,popupData,inputAuthority);return}var touchStartTime=0;input.attr({type:(password==="1")?"password":inputInfo.type,placeholder:self.formFieldMode?placeholder:"",id:elementId,name:field.referenceId?field.referenceId:fieldId,formId:formId,auth:inputAuthority}).attr(inputInfo.attributes).css(textCss).css({width:right-left+"px",height:bottom-top+"px",margin:"0px",padding:"0px",border:"0px","text-align":textAlign,"background-color":"rgba(0, 0, 0, 0)",cursor:isPopupDataEnabled(popupData)?"pointer":"default","-webkit-appearance":"none",}).bind("click tap",function(ev){if(!isPopupDataEnabled(popupData)||this.className.indexOf("crownix-auth-lock")>-1){return true}$(this).blur();var option=["scrollbars=no","resizeable=yes","menubar=no","toolbar=yes","width="+popupData.width,"height="+popupData.height,"top="+popupData.top,"left="+popupData.left].join(", ");window.open(popupData.url,"crownix_popup_"+fieldId,option);window.cxOpener=cxOpener(formId);return false}).appendTo(wrapper);if(inputInfo.type==="date"){input.val(field.value===undefined?DateUtil.convertDateFormat(value,inputInfo.realDateFormat,"yyyy-MM-dd"):field.value)}else{input.val(field.value===undefined?value:field.value)}if(self.formFieldMode){field.validateRegEx()}setTimeout(function(){input.bind(inputInfo.type==="date"&&Util.browser.mobile&&Util.browser.firefox?"change":"input",function(){field.value=$(this).val();formManager.modified();field.validateRegEx();field.spreadToShareField(field,formManager.getFields(formId),formId);if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFormField({formId:formId,fieldId:fieldId,value:field.value})}});if(Util.browser.msie&&Util.browser.version==9){input.on("keyup",function(){var key=event.keyCode||event.charCode;if(key==8||key==46){input.trigger(inputInfo.type==="date"&&Util.browser.mobile&&Util.browser.firefox?"change":"input")}})}});var reqColor=formManager.getRequiredHintingColor(formId,fieldId)||"";if(self.formFieldMode&&isDrawingTo.screen()){field.showRequiredMark(reqColor,wrapper)}var commonColor=formManager.getHintingColor(formId,fieldId)||"";if(self.formFieldMode&&commonColor!=""&&isDrawingTo.screen()){getCommonDiv(wrapper,commonColor,1,input.width(),input.height(),input)}var warning=getWarningImg(wrapper,fieldId,input,0);if(field.valid!=undefined&&!field.valid){warning.show()}if(field.referenceId){input.attr("rfi","crownix_form_field_"+formId+"_"+field.referenceId)}if(!self.formFieldMode||popupData.url||editable!=="1"){input.attr("readonly","readonly")}if(hidden==="1"){input.css("visibility","hidden")}if(limitedLength!==""){input.attr("maxlength",limitedLength)}};var drawTextArea=function(field,elementId,left,right,top,bottom,formId,fieldId,value,placeholder,textAlign,limitedTextLength,limitedLineLength,editable,hidden,required,textCss,expression,popupData,inputAuthority){var wrapper=getWrapperDiv(left,right,top,bottom),textarea=$(document.createElement("textarea"));preventField(formId,textarea);if(field.editable){editable=field.editable}if(self.formFieldMode&&editable==="0"&&field.disableColor){wrapper.addClass("crownix-formfield-disable")}var refField=formManager.getField(formId,field.referenceId);if(field.referenceId&&refField.type=="tf"){drawTextField(left,right,top,bottom,formId,fieldId,value,placeholder,textAlign,limitedTextLength,editable,hidden,required,textCss,expression,refField.password,undefined,undefined,inputAuthority);return}var touchStartTime=0;textarea.attr({id:elementId,placeholder:self.formFieldMode?placeholder:"",name:field.referenceId?field.referenceId:fieldId,formId:formId,auth:inputAuthority}).css(textCss).css({width:right-left+"px",height:bottom-top+"px",margin:"0px",padding:"0px",border:"0px","text-align":textAlign,background:"rgba(0, 0, 0, 0)",resize:"none",cursor:isPopupDataEnabled(popupData)?"pointer":"default","-webkit-appearance":"none",}).bind("click tap",function(ev){if(!isPopupDataEnabled(popupData)||this.className.indexOf("crownix-auth-lock")>-1){return true}$(this).blur();var option=["scrollbars=no","resizeable=yes","menubar=no","toolbar=yes","width="+popupData.width,"height="+popupData.height,"top="+popupData.top,"left="+popupData.left].join(", ");window.open(popupData.url,"crownix_popup_"+fieldId,option);window.cxOpener=cxOpener(formId);return false}).bind("keydown",function(e){if(e.keyCode==13&&limitedLineLength>0&&textarea.val().split("\n").length>=limitedLineLength){return false}}).text(field.value===undefined?value:field.value).appendTo(wrapper);if(self.formFieldMode){field.validateRegEx()}setTimeout(function(){textarea.bind("input",function(){field.value=$(this).val();formManager.modified();field.validateRegEx();field.spreadToShareField(field,formManager.getFields(formId),formId);if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFormField({formId:formId,fieldId:fieldId,value:field.value})}});if(Util.browser.msie&&Util.browser.version==9){textarea.on("keyup",function(){var key=event.keyCode||event.charCode;if(key==8||key==46){textarea.trigger("input")}})}});var reqColor=formManager.getRequiredHintingColor(formId,fieldId)||"";if(self.formFieldMode&&isDrawingTo.screen()){field.showRequiredMark(reqColor,wrapper)}var commonColor=formManager.getHintingColor(formId,fieldId)||"";if(self.formFieldMode&&commonColor!=""&&isDrawingTo.screen()){getCommonDiv(wrapper,commonColor,1,textarea.width(),textarea.height(),textarea)}var warning=getWarningImg(wrapper,fieldId,textarea,0);if(field.valid!=undefined&&!field.valid){warning.show()}if(field.referenceId){textarea.attr("rfi","crownix_form_field_"+formId+"_"+field.referenceId)}if(limitedTextLength!==""){textarea.attr("maxlength",limitedTextLength)}if(!self.formFieldMode||popupData.url||editable!=="1"){textarea.attr("readonly","readonly")}if(hidden==="1"){textarea.css("visibility","hidden")}};var isPopupDataEnabled=function(popupData){return popupData.url&&self.formFieldMode};var drawCheckBox=function(field,elementId,left,right,top,bottom,formId,fieldId,value,selected,editable,hidden,required,labelText,labelAlign,textCss,textAlign,textVAlign,inputAuthority){var wrapper=getWrapperDiv(left,right,top,bottom),input=$(document.createElement("input")),label=$(document.createElement("label")),selector=$(document.createElement("span"));preventField(formId,input);preventField(formId,label);if(self.formFieldMode){editable=field.editable;labelText=field.label;value=selected=field.value}var commonColor=formManager.getHintingColor(formId,fieldId)||"";if(self.formFieldMode&&commonColor!=""&&isDrawingTo.screen()){getCommonDiv(wrapper,commonColor,0,right-left,bottom-top)}var reqColor=formManager.getRequiredHintingColor(formId,fieldId)||"";if(self.formFieldMode&&isDrawingTo.screen()){field.showRequiredMark(reqColor,wrapper)}var wrapWidth=right-left;var wrapHeight=bottom-top;var inputWidth=selector.width();var inputHeight=selector.height();label.attr("for",elementId).css({"white-space":"nowrap",overflow:"hidden","word-break":"break-all","text-align":textAlign,position:"absolute",width:wrapWidth+"px",height:wrapHeight+"px",}).attr("class",fieldId).appendTo(wrapper);selector.addClass("crownix_formfield_selector").css({"background-position":((field.value=="1"||selected==="1")?"-19px":"0px")+" -2px"}).appendTo(label);input.attr({type:"checkbox",name:fieldId,value:value,id:elementId,formId:formId,auth:inputAuthority}).bind("change",function(){var isChecked=input.is(":checked");field.value=isChecked?"1":"0";formManager.modified();input.val(field.value);if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFormField({formId:formId,fieldId:fieldId,name:"selected",value:isChecked})}});if(!isDrawingTo.save()){input.appendTo(selector)}var fontSize=parseInt(textCss["font-size"]);var lineHeight=Math.max(fontSize,16/1.3);var labelTextDom=$(document.createElement("span")).attr("class","crownix_form_field_label").css({"vertical-align":"middle","line-height":lineHeight+"pt",display:"inline-block"}).css(textCss).text(labelText);if(labelAlign=="0"){labelTextDom.appendTo(label)}else{labelTextDom.prependTo(label)}var labelTextDomMaxWidth=(wrapWidth-inputWidth-2);if(labelTextDom.width()>labelTextDomMaxWidth){labelTextDom.css({width:labelTextDomMaxWidth+"px",});label.css({"white-space":"inherit"})}var labelTextDomTopMargin=0;var inputTopMargin=0;if(textVAlign=="middle"){inputTopMargin=(label.height()-labelTextDom.height())/2;labelTextDomTopMargin=-selector.height()/2;if(labelTextDom.height()==0){inputTopMargin=inputTopMargin-selector.height()/2}if(lineHeight<(labelTextDom.height()/1.3)){selector.css("vertical-align","middle");labelTextDomTopMargin=inputTopMargin}}else{if(textVAlign=="top"){labelTextDom.css("vertical-align","top")}else{if(textVAlign=="bottom"){labelTextDom.css("vertical-align","bottom");labelTextDomTopMargin=label.height()-labelTextDom.height()}}}labelTextDom.css({"margin-top":labelTextDomTopMargin+"px"});selector.css({"margin-top":inputTopMargin+"px"});if(field.value=="1"||selected==="1"){input.attr("checked","checked")}if(!self.formFieldMode||editable==="0"){input.attr("disabled","disabled")}if(hidden==="1"){input.css("visibility","hidden")}};var drawComboBox=function(field,elementId,left,right,top,bottom,formId,fieldId,selectedValue,editable,hidden,required,textCss,displayValues,actualValues,inputAuthority){var wrapper=getWrapperDiv(left,right,top,bottom),select=$(document.createElement("select"));preventField(formId,select);if(field.editable){editable=field.editable}if(self.formFieldMode&&editable==="0"){wrapper.addClass("crownix-formfield-disable")}if(field.selectedIndex!==undefined){selectedValue=field.selectedIndex==-1?"":displayValues[field.selectedIndex]}select.attr({name:fieldId,id:elementId,formId:formId,auth:inputAuthority}).css(textCss).css({width:right-left+"px",height:bottom-top+"px",margin:"0px",padding:"0px",}).bind("change",function(){field.value=select.val();formManager.modified();var selectedOption=select.find("option:selected");field.selectedIndex=select.find("option").index(selectedOption)-1;if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFormField({formId:formId,fieldId:fieldId,value:field.selectedIndex})}}).appendTo(wrapper);if(Util.browser.android){select.css("background-color","transparent")}var notSelected=$('<option value="">').text("").appendTo(select);for(var i=0;i<displayValues.length;i++){var option=$("<option>").attr("value",actualValues[i]).text(displayValues[i]).appendTo(select);if(selectedValue==displayValues[i]){option.attr("selected","selected")}}var commonColor=formManager.getHintingColor(formId,fieldId)||"";if(self.formFieldMode&&commonColor!=""&&isDrawingTo.screen()){getCommonDiv(wrapper,commonColor,0,right-left,bottom-top).css({overflow:"visible"}).append(select);select.css({top:"0px",left:"0px",width:right-left-2+"px",height:bottom-top-2+"px",})}var reqColor=formManager.getRequiredHintingColor(formId,fieldId)||"";if(self.formFieldMode&&isDrawingTo.screen()){field.showRequiredMark(reqColor,wrapper)}if(!self.formFieldMode||editable==="0"){select.attr("disabled","disabled")}if(hidden==="1"){select.css("visibility","hidden")}};var drawRadioButton=function(field,elementId,left,right,top,bottom,formId,fieldId,groupId,value,selected,editable,hidden,required,labelText,labelAlign,textCss,textAlign,textVAlign,inputAuthority){var wrapper=getWrapperDiv(left,right,top,bottom),input=$(document.createElement("input")),label=$(document.createElement("label")),selector=$(document.createElement("span"));preventField(formId,input);preventField(formId,label);var group={};if(self.formFieldMode){group=formManager.getField(formId,groupId)||{};editable=field.editable;labelText=field.label;value=field.value}var commonColor=formManager.getHintingColor(formId,fieldId)||"";if(self.formFieldMode&&commonColor!=""&&isDrawingTo.screen()){getCommonDiv(wrapper,commonColor,0,right-left,bottom-top)}var reqColor=formManager.getRequiredHintingColor(formId,fieldId)||"";if(self.formFieldMode&&isDrawingTo.screen()){field.showRequiredMark(reqColor,wrapper)}var wrapWidth=right-left;var wrapHeight=bottom-top;var inputWidth=selector.width();var inputHeight=selector.height();label.attr("for",elementId).attr("class",groupId).css({"white-space":"nowrap",overflow:"hidden","word-break":"break-all","text-align":textAlign,position:"absolute",width:wrapWidth+"px",height:wrapHeight+"px",}).appendTo(wrapper);selector.addClass("crownix_formfield_selector").css({"background-position":((group.isSelected&&group.isSelected(fieldId))||(!self.formFieldMode&&selected=="1")?"-58px":"-39px")+" -2px"}).appendTo(label);input.attr({type:"radio",name:formId+"_"+groupId,value:value,id:elementId,formId:formId,buttonId:fieldId,auth:inputAuthority}).bind("change",function(){if(self.formFieldMode){var isChecked=input.is(":checked");if(isChecked){group.select(fieldId)}else{group.unselect(fieldId)}formManager.modified();if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFormField({formId:formId,fieldId:groupId,value:fieldId})}}});if(!isDrawingTo.save()){input.appendTo(selector)}var fontSize=parseInt(textCss["font-size"]);var lineHeight=Math.max(fontSize,16/1.3);var labelTextDom=$("<span>").attr("class","crownix_form_field_label").css({"vertical-align":"middle","line-height":lineHeight+"pt",display:"inline-block"}).css(textCss).text(labelText);if(labelAlign=="0"){labelTextDom.appendTo(label)}else{labelTextDom.prependTo(label)}var labelTextDomMaxWidth=(wrapWidth-inputWidth-2);if(labelTextDom.width()>labelTextDomMaxWidth){labelTextDom.css({width:labelTextDomMaxWidth+"px"});label.css({"white-space":"inherit"})}var labelTextDomTopMargin=0;var inputTopMargin=0;if(textVAlign=="middle"){inputTopMargin=(label.height()-labelTextDom.height())/2;labelTextDomTopMargin=-selector.height()/2;if(labelTextDom.height()==0){inputTopMargin=inputTopMargin-selector.height()/2}if(lineHeight<(labelTextDom.height()/1.3)){selector.css("vertical-align","middle");labelTextDomTopMargin=inputTopMargin}}else{if(textVAlign=="top"){labelTextDom.css("vertical-align","top")}else{if(textVAlign=="bottom"){labelTextDom.css("vertical-align","bottom");labelTextDomTopMargin=label.height()-labelTextDom.height()}}}labelTextDom.css({"margin-top":labelTextDomTopMargin+"px"});selector.css({"margin-top":inputTopMargin+"px"});if((group.isSelected&&group.isSelected(fieldId))||(!self.formFieldMode&&selected=="1")){input.attr("checked","checked")}if(!self.formFieldMode||editable==="0"){input.attr("disabled","disabled")}if(hidden==="1"){input.css("visibility","hidden")}};var drawSignature=function(field,elementId,left,right,top,bottom,formId,fieldId,value,editable,hidden,required,placeHolder,textCss,inputAuthority){var wrapper=getWrapperDiv(left,right,top,bottom),canvas=$(document.createElement("canvas")).attr({id:elementId,width:right-left+"px",height:bottom-top+"px",formId:formId,auth:inputAuthority});preventField(formId,canvas);if(self.formFieldMode&&field.editable==="0"){wrapper.addClass("crownix-formfield-disable")}var ctx=canvas[0].getContext("2d");var image=new Image();var placeHolderSpan=null;image.src=(field.value||value);image.onload=function(){placeHolderSpan&&placeHolderSpan.html("");ctx.drawImage(image,0,0,right-left,bottom-top)};var self_=self;canvas.attr({name:fieldId,}).css({width:right-left+"px",height:bottom-top+"px",margin:"0px",padding:"0px",border:"0px",}).bind("click tap",function(ev){if(!self_.formFieldMode||field.editable==="0"||this.className.indexOf("crownix-field-lock")>-1||this.className.indexOf("crownix-auth-lock")>-1){return}if(Util.hasTouch()){formManager.trigger("click",formId,fieldId)}var signWindow=new SignWindow(R.get("sign_window_title"));signWindow.show(canvas,function(signImage){var data=signImage.data;var isDraw=false;for(var i=data.length-1;i>=0;i--){if(data[i]!=0){isDraw=true;break}}if(isDraw){placeHolderSpan&&placeHolderSpan.hide();field.value=canvas[0].toDataURL("image/png");formManager.trigger("change",formId,fieldId);formManager.modified()}else{placeHolderSpan&&placeHolderSpan.show();field.value=null}if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFormField({formId:formId,fieldId:fieldId,value:field.value})}},true,viewerScroll);if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFocusOnField(formId,fieldId)}FieldOrder.getInstance().focus(elementId)}).appendTo(wrapper);if(self.formFieldMode){var clickHandler=function(ev){ev.stopPropagation();ev.preventDefault();canvas.trigger(ev.type,ev)};var commonColor=formManager.getHintingColor(formId,fieldId)||"";if(commonColor!=""&&isDrawingTo.screen()){var hintingBox=getCommonDiv(wrapper,commonColor,1,right-left,bottom-top);if(hintingBox){hintingBox.attr("formId",formId);preventField(formId,hintingBox);hintingBox.bind("click tap",clickHandler)}}var reqColor=formManager.getRequiredHintingColor(formId,fieldId)||"";if(isDrawingTo.screen()){var hintingBox=field.showRequiredMark(reqColor,wrapper);if(hintingBox){hintingBox.attr("formId",formId);preventField(formId,hintingBox);hintingBox.bind("click tap",clickHandler)}}if(placeHolder){placeHolderSpan=getPlaceholderBox(left,top,right,bottom);placeHolderSpan.attr("formId",formId);preventField(formId,placeHolderSpan);placeHolderSpan.attr("for",elementId).css(textCss).css("overflow","hidden").bind("click tap",clickHandler).appendTo(viewerTextDom).find("span").html(placeHolder);field.placeHolder=placeHolderSpan}}if(hidden==="1"){canvas.css("visibility","hidden")}};var drawPicture=function(field,elementId,left,right,top,bottom,formId,fieldId,value,editable,hidden,required,ratio,placeHolder,textCss,inputAuthority,useMasking){var wrapper=getWrapperDiv(left,right,top,bottom),input=$(document.createElement("input")).css({opacity:0,width:0,height:0,}).attr({id:elementId,type:"file",accept:"image/*",}).addClass("crownix_form_field_file").appendTo(wrapper);var canvas=$(document.createElement("canvas")).attr({id:elementId+"-canvas",width:(right-left)+"px",height:(bottom-top)+"px",formId:formId,auth:inputAuthority});preventField(formId,canvas);if(self.formFieldMode&&field.editable==="0"){wrapper.addClass("crownix-formfield-disable")}var ctx=canvas[0].getContext("2d");var image=new Image();var placeHolderSpan=null;image.src=(field.value||value);image.onload=function(){placeHolderSpan&&placeHolderSpan.html("");ctx.drawImage(image,0,0,right-left,bottom-top)};input.bind("change",function(e){e.stopPropagation();e.preventDefault();var files=e.target.files;var file=files[0];if(file&&!(typeof file.type==="undefined")&&!file.type.match("image.*")){dialog.show(R.get("image_file_format_error"));if(Util.browser.msie&&Util.browser.version>9){input.replaceWith(input=input.clone(true))}else{input.val("")}return false}var loader=m2soft.crownix.ImageLoader;loader.loadImage.parseMetaData(file,function(data){var options={canvas:true,};if(data.exif){if(typeof data.exif.get("Orientation")=="number"){options.orientation=data.exif.get("Orientation")}}loader.loadImage(file,function(image){var setImageByRatio=function(context,image,canvas){context.clearRect(0,0,canvas.width(),canvas.height());if(ratio==1){var imageRatio=image.width/image.height;var canvasRatio=canvas.width()/canvas.height();if(imageRatio>canvasRatio){var adjustHeight=canvas.height()*(canvasRatio/imageRatio);var adjustY=(canvas.height()-adjustHeight)/2;context.drawImage(image,0,adjustY,canvas.width(),adjustHeight)}else{var adjustWidth=canvas.width()*(imageRatio/canvasRatio);var adjustX=(canvas.width()-adjustWidth)/2;context.drawImage(image,adjustX,0,adjustWidth,canvas.height())}}else{if(ratio==2){context.drawImage(image,0,0)}else{context.drawImage(image,0,0,canvas.width(),canvas.height())}}};var onAttach=function(){placeHolderSpan&&placeHolderSpan.hide();field.value=canvas[0].toDataURL("image/png");formManager.trigger("change",formId,fieldId);formManager.modified();if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFormField({formId:formId,fieldId:fieldId,value:field.value})}};if(useMasking){var maskWindow=new MaskWindow(image,ratio,canvas,true,viewerScroll,onAttach,setImageByRatio);maskWindow.show()}else{setImageByRatio(ctx,image,canvas);onAttach()}},options);if(Util.browser.msie&&Util.browser.version>9){input.replaceWith(input=input.clone(true))}else{input.val("")}})}).bind("keydown keyup",function(){var key=event.keyCode||event.charCode;if((key==32||key==13)&&(canvas.hasClass("crownix-field-lock")||canvas.hasClass("crownix-auth-lock"))){return false}});var self_=self;canvas.attr({name:fieldId,ratio:ratio,}).css({width:right-left+"px",height:bottom-top+"px",margin:"0px",padding:"0px",border:"0px",}).bind("click tap",function(ev){if(!self_.formFieldMode||field.editable==="0"||this.className.indexOf("crownix-field-lock")>-1||this.className.indexOf("crownix-auth-lock")>-1){return}if(Util.hasTouch()){formManager.trigger("click tap",formId,fieldId)}input.trigger("click",ev);if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFocusOnField(formId,fieldId)}setTimeout(function(){FieldOrder.getInstance().focus(elementId);input.focus()},500)}).appendTo(wrapper);if(self.formFieldMode){var clickHandler=function(ev){ev.stopPropagation();ev.preventDefault();canvas.trigger(ev.type,ev)};var commonColor=formManager.getHintingColor(formId,fieldId)||"";if(commonColor!=""&&isDrawingTo.screen()){var hintingBox=getCommonDiv(wrapper,commonColor,1,right-left,bottom-top);if(hintingBox){hintingBox.attr("formId",formId);preventField(formId,hintingBox);hintingBox.bind("click tap",clickHandler)}}var reqColor=formManager.getRequiredHintingColor(formId,fieldId)||"";if(isDrawingTo.screen()){var hintingBox=field.showRequiredMark(reqColor,wrapper);if(hintingBox){hintingBox.attr("formId",formId);preventField(formId,hintingBox);hintingBox.bind("click tap",clickHandler)}}if(placeHolder){placeHolderSpan=getPlaceholderBox(left,top,right,bottom);placeHolderSpan.attr("formId",formId);preventField(formId,placeHolderSpan);placeHolderSpan.attr("for",elementId).css(textCss).css("overflow","hidden").bind("click tap",clickHandler).appendTo(viewerTextDom).find("span").html(placeHolder);field.placeHolder=placeHolderSpan}}if(hidden==="1"){canvas.css("visibility","hidden")}};var drawFile=function(field,left,right,top,bottom,hAlign,vAlign,formId,fieldId,value,textCss,required,editable,maxSize,extensions,placeHolder,regExp,inputAuthority){var wrapper=getWrapperDiv(left,right,top,bottom),fileInput=$('<input type="file">'),fileNameArea=$("<div>"),fileNameText=$("<div>"),button=$("<label>"),buttonText=$("<div>").text(R.get("attach_file_button")),focusDiv=$("<div>");var getMiddleAlign=function(parent,target){return(parent.height()/2)-(target.height()/2)+"px"};var getVerticalMargin=function(parent,target){if(vAlign===0){return 0}else{if(vAlign===1){return(parent.height()/2)-(target.height()/2)+"px"}else{if(vAlign===2){return parent.height()-target.height()+"px"}}}};var setFileName=function(name,mode){if(!name){return}if(mode&&mode==="inquiry"){var fileName=name.substring(name.lastIndexOf("/")+1);if(go.downloadUrl){var hyperlink=go.downloadUrl+"/download?filename="+value+"&attachment=true";var anchor=$("<a>").text(fileName).appendTo(fileNameText);$(anchor).on("click touchstart",function(e){e.preventDefault();location.replace(hyperlink)})}else{$("<span>").text(fileName).appendTo(fileNameText)}focusDiv.remove()}else{if(value){name=name.substring(name.lastIndexOf("/")+1)}fileNameText.text(name)}fileNameText.css({"margin-top":getVerticalMargin(fileNameArea,fileNameText)}).css(value||field.value||field.file||(mode&&mode==="sharing")?textCss:(placeHolder?{color:"#BDBDBD"}:textCss));if(mode&&mode!=="placeHolder"){field.value=name}};var availRetry=function(){if(Util.browser.msie&&Util.browser.version>9){fileInput.replaceWith(fileInput=fileInput.clone(true))}else{fileInput.val("")}fileInput.focus()};var showMessage=function(e){dialog.show(R.get("not_support_file_append"),"",function(){if(field.required&&field.required==="1"){field.required="0";if(requiredBox){requiredBox.remove()}}})};var onAttach=function(e){formManager.modified();var WEIGHT=1048576;var file=e.target.files[0];if(!file){return}var fullName=file.name,lastPoint=fullName.lastIndexOf("."),fileName=fullName.substring(0,lastPoint),fileExtension=fullName.substring(lastPoint+1).toUpperCase(),regExpression=regExp&&new RegExp(regExp);if(maxSize&&maxSize<(file.size/WEIGHT)){dialog.show((R.get("file_size_over")).replace("%d",maxSize),"",availRetry);return}if(extensions&&extensions.indexOf(fileExtension)<0){dialog.show((R.get("wrong_file_extension")).replace("%s",extensions),"",availRetry);return}if(regExpression&&!regExpression.test(fileName)){dialog.show((R.get("invalid_file_name")),"",availRetry);return}field.file=file;field.value=fullName;setFileName(fullName);formManager.trigger("change",formId,fieldId);if(go.shareManager&&go.shareManager.isConnected()){go.shareManager.sendFormField({formId:formId,fieldId:fieldId,value:fullName})}};wrapper.addClass("crownix_form_field_file_wrapper");fileInput.attr({id:"crownix_form_field_input_file_"+formId+"_"+fieldId,name:fieldId,auth:inputAuthority,formname:formId,fieldtype:"file",}).appendTo(wrapper);button.css(textCss).css("height",wrapper.height()-2).attr({id:"crownix_form_field_file_label_"+formId+"_"+fieldId,formid:formId,name:fieldId}).appendTo(wrapper);buttonText.appendTo(button).css({"margin-top":(button.height()/2)-(buttonText.height()/2)+"px",cursor:"default"});fileNameArea.css(textCss).css({height:button.height(),width:(wrapper.width()-button.innerWidth()-6)+"px","text-align":hAlign?(hAlign-1?"right":"center"):"left"}).attr({id:"crownix_form_field_file_name_"+fieldId,tabindex:"-1",}).addClass("crownix_form_field_file_name").appendTo(wrapper);fileNameText.attr("id","crownix_form_field_file_name_text_"+fieldId).addClass("crownix_form_field_file_name_text").appendTo(fileNameArea);focusDiv.css({position:"absolute",width:wrapper.width(),height:wrapper.height(),border:"0",top:"0",outline:"none"}).attr({tabindex:"-1",id:"crownix_form_field_"+formId+"_"+fieldId,name:fieldId,formname:formId,auth:inputAuthority,}).addClass("crownix_form_field_file").focus(function(){fileInput.focus()}).appendTo(wrapper);if(self.formFieldMode){var commonColor=formManager.getHintingColor(formId,fieldId)||"";var hintingBox;if(commonColor!==""&&isDrawingTo.screen()){hintingBox=getCommonDiv(wrapper,commonColor,1,wrapper.width(),wrapper.height());if(hintingBox){hintingBox.attr({name:fieldId,auth:inputAuthority,formname:formId}).css("background-color","rgba(255, 255, 255, 0)")}}var reqColor=formManager.getRequiredHintingColor(formId,fieldId)||"";var requiredBox;if(self.formFieldMode&&reqColor!==""&&isDrawingTo.screen()){requiredBox=field.showRequiredMark(reqColor,wrapper);if(requiredBox){requiredBox.css("z-index","1")}}fileInput.on("change",onAttach);setFileName(field.value?field.value:(field.file?field.file.name:placeHolder),(!field.value&&!field.file)?"placeHolder":"normal");var editableMode=function(){if(fileNameArea.hasClass("crownix-formfield-disable")){fileNameArea.removeClass("crownix-formfield-disable").css("background-color","rgba(255, 255, 255, 0)")}if(button.hasClass("crownix-formfield-disable")){button.removeClass("crownix-formfield-disable")}if(window.FormData){button.on("click touchstart",function(){focusDiv.focus()});button.attr("for","crownix_form_field_input_file_"+formId+"_"+fieldId);var bindEvent=function(target){target.on("click touchend touchcancel",function(e){e.preventDefault();e.stopPropagation();button.click()})};if(hintingBox){preventField(formId,hintingBox);bindEvent(hintingBox)}else{bindEvent(focusDiv)}}else{if(hintingBox){preventField(formId,hintingBox);hintingBox.bind("click touchstart",showMessage)}else{focusDiv.on("click touchstart",showMessage)}FieldOrder.getInstance().removeField([{formId:formId,fieldId:fieldId}])}};var readonlyMode=function(){if(!fileNameArea.hasClass("crownix-formfield-disable")){fileNameArea.addClass("crownix-formfield-disable").css("background-color","#CCCCCC")}if(!button.hasClass("crownix-formfield-disable")){button.addClass("crownix-formfield-disable")}if(hintingBox){hintingBox.off("click touchstart")}else{focusDiv.off("click touchstart")}FieldOrder.getInstance().removeField([{formId:this.formId,fieldId:this.id}])};field.setFileName=setFileName;field.editableMode=editableMode;field.readonlyMode=readonlyMode;field.editable&&field.editable==="0"?readonlyMode():editableMode()}else{button.remove();fileNameArea.css({width:wrapper.width()-2,"border-style":"none"});if(value){setFileName(value,"inquiry");var clip=$(Icon.FILE_CLIP),CLIP_SIZE=fileNameText.height();fileNameText.css({display:"inline-block","max-width":(fileNameArea.width()-CLIP_SIZE-5)+"px","vertical-align":"top"});clip.css({width:CLIP_SIZE,height:CLIP_SIZE,}).css("margin-top",getVerticalMargin(fileNameArea,clip)).prependTo(fileNameArea)}else{setFileName(R.get("no_attach_file"))}}};var drawSubmit=function(left,right,top,bottom,formId,fieldId,serverUrl,serviceCode,datasource,text,textCss,editable,buttonImage,inputAuthority){var submitButton=$('<button type="image"></button>');var textWrapper=$("<span>").text(text).css({cursor:"pointer","word-break":"break-all",}).on("click tap",function(ev){submitButton.focus()}).attr("id",fieldId+"_label");var btnInfo={button:submitButton,textWrapper:textWrapper,size:{width:right-left,height:bottom-top},position:{left:left,top:top}};var submit=self.formFieldMode?formManager.getSubmit(formId+"."+fieldId)||{}:{};if(submit.editable){editable=submit.editable}if(buttonImage.normalImage){submitButton.css({background:"none",filter:"none",border:"0px"});var normalImage=new Image();normalImage.onload=function(){submitButton.prepend(normalImage);applyImageSubmitButton(normalImage,btnInfo)};normalImage.src=buttonImage.normalImage;if(buttonImage.clickImage){var clickImage=new Image();clickImage.onload=function(){var fitSize=getFitSize(btnInfo.size,clickImage);$(clickImage).css({width:fitSize.width,height:fitSize.height,position:"absolute",top:"0px",left:"0px",});submitButton.bind("mousedown touchstart",function(){$(normalImage).hide();$(clickImage).show();applyImageSubmitButton(clickImage,btnInfo)}).bind("mouseup touchend",function(){$(clickImage).hide();$(normalImage).show();applyImageSubmitButton(normalImage,btnInfo)}).bind("mouseout",function(ev){if($(ev.toElement).parent("#"+fieldId).attr("id")!=fieldId){submitButton.trigger("mouseup")}}).prepend(clickImage);$(clickImage).hide()};clickImage.src=buttonImage.clickImage}}submitButton.append(textWrapper).addClass("crownix-dialog-button").addClass("crownix-dialog-button-action").attr({id:"crownix_form_field_"+formId+"_"+fieldId,formId:formId,fieldId:fieldId,auth:inputAuthority}).css(textCss).css({overflow:"hidden",padding:"0px",position:"absolute",left:left+"px",top:top+"px",width:right-left+"px",height:bottom-top+"px",cursor:"pointer",}).bind(Util.browser.mobile?"tap":"click",function(ev){if(!self.formFieldMode||editable!="1"){return}submitButton.trigger("mouseout",ev);formManager.submit(ev)}).appendTo(viewerTextDom);btnInfo.textWrapperOriginalSize=textWrapper.width();if(!self.formFieldMode||editable!="1"){submitButton.removeClass("crownix-dialog-button-action").attr("disabled",true)}};var applyImageSubmitButton=function(image,btnInfo){var imageObj=$(image);var fitSize=getFitSize(btnInfo.size,{width:imageObj.width(),height:imageObj.height()});imageObj.css({width:fitSize.width,height:fitSize.height,position:"absolute",top:"0px",left:"0px",});var newButtonPosition={};newButtonPosition.left=btnInfo.position.left+(btnInfo.size.width-fitSize.width)/2;newButtonPosition.top=btnInfo.position.top+(btnInfo.size.height-fitSize.height)/2;btnInfo.button.css(fitSize);btnInfo.button.css(newButtonPosition);btnInfo.textWrapper.width("");var textPositionLeft=(fitSize.width-btnInfo.textWrapperOriginalSize)/2;if(btnInfo.textWrapperOriginalSize>fitSize.width){textPositionLeft=0;btnInfo.textWrapper.css({width:fitSize.width})}btnInfo.textWrapper.css({"margin-left":textPositionLeft,position:"absolute",top:"0px",left:"0px",});setTimeout(function(){var textPositionTop=(fitSize.height-btnInfo.textWrapper.height())/2;btnInfo.textWrapper.css({"margin-top":textPositionTop,})},0)};var drawNormalButton=function(left,right,top,bottom,text,textCss,buttonImage,eventHandlers){var button=$('<button type="image"></button>');var textWrapper=$("<span>").text(text).css({cursor:"pointer","word-break":"break-all",}).on("click tap",function(ev){button.focus()});var btnInfo={button:button,textWrapper:textWrapper,size:{width:right-left,height:bottom-top},position:{left:left,top:top}};if(buttonImage.normalImage){button.css({background:"none",filter:"none",border:"0px"});var normalImage=new Image();normalImage.onload=function(){button.prepend(normalImage);applyImageSubmitButton(normalImage,btnInfo)};normalImage.src=buttonImage.normalImage;if(buttonImage.clickImage){var clickImage=new Image();clickImage.onload=function(){var fitSize=getFitSize(btnInfo.size,clickImage);$(clickImage).css({width:fitSize.width,height:fitSize.height,position:"absolute",top:"0px",left:"0px",});button.bind("mousedown touchstart",function(){$(normalImage).hide();$(clickImage).show();applyImageSubmitButton(clickImage,btnInfo)}).bind("mouseup touchend",function(){$(clickImage).hide();$(normalImage).show();applyImageSubmitButton(normalImage,btnInfo)}).bind("mouseout",function(ev){button.trigger("mouseup")}).prepend(clickImage);$(clickImage).hide()};clickImage.src=buttonImage.clickImage}}button.attr("id","m2soft-crownix-normal-button").append(textWrapper).addClass("crownix-dialog-button").addClass("crownix-dialog-button-action").css(textCss).css({overflow:"hidden",padding:"0px",position:"absolute",left:left+"px",top:top+"px",width:right-left+"px",height:bottom-top+"px",cursor:"pointer",}).bind(Util.browser.mobile?"tap":"click",function(ev){button.trigger("mouseout",ev);if(eventHandlers&&eventHandlers.click){eventHandlers.click(drilldownAPI)}}).appendTo(viewerTextDom);textWrapperOriginalSize=textWrapper.width()};var drawNormalCombo=function(left,right,top,bottom,selectedValue,textCss,displayValues,actualValues,eventHandlers){var wrapper=getWrapperDiv(left,right,top,bottom),select=$(document.createElement("select"));select.attr("id","m2soft-crownix-normal-combo").css(textCss).css({width:right-left+"px",height:bottom-top+"px",margin:"0px",padding:"0px",}).bind("change",function(){if(eventHandlers&&eventHandlers.change){eventHandlers.change(drilldownAPI,select.val())}}).appendTo(wrapper);if(Util.browser.android){select.css("background-color","transparent")}var notSelected=$('<option value="">').text("").appendTo(select);for(var i=0;i<displayValues.length;i++){var option=$("<option>").attr("value",actualValues[i]).text(displayValues[i]).appendTo(select);if(selectedValue==displayValues[i]){option.attr("selected","selected")}}};var getFitSize=function(containerSize,contentSize){var targetRatioWidth=containerSize.width/contentSize.width;var targetRatioHeight=containerSize.height/contentSize.height;var effectiveRatio=Math.min(targetRatioWidth,targetRatioHeight);return{width:contentSize.width*effectiveRatio,height:contentSize.height*effectiveRatio}};var getPlaceholderBox=function(left,top,right,bottom){var placeHolderContainer=$("<div>").css({position:"absolute",left:left+"px",top:top+"px",width:right-left+"px",height:bottom-top+"px",margin:"0px",padding:"0px",border:"0px","text-align":"center","line-height":(bottom-top)+"px"});var placeHolderSpan=$("<span>").attr("id","crownix_form_field_placeholder").addClass("placeholder").appendTo(placeHolderContainer);return placeHolderContainer};var loadFont=function(fontList){if(!go.useWebFont){return}var keys=fontList.keys();for(var i=0;i<keys.length;i++){var key=keys[i];var value=fontList.get(key);var fontId=key;var fontName=value;var font=new Font(fontId,fontName);font.setFontURL(viewerServerUrl.replace("service","font/"));font.load()}};m2soft.crownix.Painter.updatePageNum=function(){viewerTextDom.find(".crownix-pagenum").each(function(){var format=$(this).attr("pagenum-format");$(this).text(Util.formatPageNumber(format,go.currentPage-go.report.getCoverPage()+(go.startPageNo-1),go.totalPage-go.report.getCoverPage()+(go.startPageNo-1)))})};this.drawNoteToCanvas=function(svg,canvas){var paths=$(svg).find("path");var ctx=canvas.getContext("2d");paths.each(function(){var el=$(this),path=el.attr("d"),color=el.attr("stroke"),opacity=el.attr("stroke-opacity"),width=el.attr("stroke-width"),linecap=el.attr("stroke-linecap"),linejoin=el.attr("stroke-linejoin"),seperator=path.indexOf("L")>-1?"L":"l",pointSeperator=path.indexOf(",")>-1?",":" ";var line=path.split(seperator);ctx.save();ctx.beginPath();ctx.strokeStyle=color;ctx.lineWidth=parseInt(width)*1.3;ctx.globalAlpha=opacity;ctx.lineCap=linecap;ctx.lineJoin=linejoin;if(line[0][0]=="M"||line[0][0]=="M"){var movePoint=$.trim(line[0].substring(1)).split(pointSeperator);ctx.moveTo(parseInt(movePoint[0]),parseInt(movePoint[1]))}for(var i=1;i<line.length;i++){var p=$.trim(line[i]).split(pointSeperator);ctx.lineTo(parseInt(p[0]),parseInt(p[1]))}ctx.stroke();ctx.restore()})};this.drawPage=function(page,head,callback,drawMedia_,offset_,margin_,withoutClear_){if(!withoutClear_){cxCanvas.clear()}var fontList=head.fontList,textAttrList=head.textAttrList,lineAttrList=head.lineAttrList,faceAttrList=head.faceAttrList,indexedImageList=head.indexedImageList;drawMedia=drawMedia_||"d";if(offset_){offset=offset_}cxCanvas.setOffset(offset);var imageLoader=new m2soft.crownix.ImageLoader();imageLoader.loadImage(page,indexedImageList,function(){page.children().each(function(){var elementName=this.tagName;var element=$(this);var exceptList=element.attr("ect");if(exceptList&&exceptList.indexOf(drawMedia)>-1){return}drawMedia=drawMedia_||"d";var lineAttr=lineAttrList[element.attr("lid")];var faceAttr=faceAttrList[element.attr("fid")];if(lineAttr){lineAttr=applyPriorityToLineAttr(element,lineAttr)}if(faceAttr){faceAttr=applyPriorityToFaceAttr(element,faceAttr)}if(elementName==="LN"){drawLine(element,lineAttr)}else{if(elementName==="RA"){drawRect(element,lineAttr,faceAttr)}else{if(elementName==="TL"){if(go.options.textOnCanvas&&!element.attr("hl")&&!element.attr("hi")){drawTextToCanvas(element,fontList,textAttrList)}else{drawText(element,fontList,textAttrList)}}else{if(elementName==="SC"){drawScribble(element,lineAttr)}else{if(elementName==="LL"){drawPolyLine(element,lineAttr)}else{if(elementName==="PO"){drawPolygon(element,lineAttr,faceAttr)}else{if(elementName==="EP"){drawEllipse(element,lineAttr,faceAttr)}else{if(elementName==="DM"){drawDiamond(element,lineAttr,faceAttr)}else{if(elementName==="PL"){drawParallelogram(element,lineAttr,faceAttr)}else{if(elementName==="HH"){drawHexaheron(element,lineAttr,faceAttr)}else{if(elementName==="RR"){drawRoundeRect(element,lineAttr,faceAttr)}else{if(elementName==="CY"){drawCylinder(element,lineAttr,faceAttr)}else{if(elementName==="CV"){drawCurve(element,lineAttr)}else{if(elementName==="IM"){drawImage(element,imageLoader.nextImage())}else{if(elementName==="FF"){drawFormField(element,fontList,textAttrList)}else{if(elementName==="CT"){drawChart(element)}}}}}}}}}}}}}}}}});loadFont(head.fontList);m2soft.crownix.Painter.updatePageNum();if(callback!==null){callback()}})};this.useAdjustLetterSpace=function(use){useAdjustLetterSpace=use};this.useAdjustCharacterScale=function(use){useAdjustCharacterScale=use};this.updatePage=function(){for(var i=0;i<updateCallback.length;i++){if(typeof updateCallback[i]==="function"){updateCallback[i]()}}};this.setUpdatePageCallback=function(func){updateCallback.push(func)};this.setFormFieldMode=function(formFieldMode){this.formFieldMode=formFieldMode};this.clearPage=function(){cxCanvas.clear()}};m2soft.crownix.Painter.adjustWidth=function(a){if(typeof a==="undefined"||a==0.5||a==1){return 1}else{if(a==0){return 0}else{if(a>0){return a*2-1}else{return 1}}}};m2soft.ns("m2soft.crownix.Inquery");m2soft.crownix.Inquery=(function(){var g=m2soft.crownix.Resource;var b=m2soft.crownix.Util;var w=m2soft.crownix.Dialog;var h=m2soft.crownix.Message;var ac=m2soft.crownix.DateParser;var aj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAIAAABvFaqvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REQ2QTZFQjI2NUNDMTFFNEE3MTM4OTE2QTA5QUUwODciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REQ2QTZFQjM2NUNDMTFFNEE3MTM4OTE2QTA5QUUwODciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpERDZBNkVCMDY1Q0MxMUU0QTcxMzg5MTZBMDlBRTA4NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpERDZBNkVCMTY1Q0MxMUU0QTcxMzg5MTZBMDlBRTA4NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoPHgkcAAADwSURBVHjaYviPAb5u3fomOxtI/scBsCpgBGIGVPAqPBzCEFu5kgEbwKqABYj/vX//fc+enydO/HnyBE0zXA8coCl4V1zMbmHB6eICMghoytc1axjIAkC7/4D1ggyCmCJQW8umo4PffkwA1PWhuRloAhNcCG4KT3w8s6gokMSlGVkBXBcosCEBgdVygmEEV8PEQCXAgl+aYBjBAQ1c9Hn2bOoYxJuaSp4RwGRIy8BGzkfEsKkf2FQziEDKJgZAtI+GEeEwQrjo15UrZJgC1wVy0ZfFi79t2UKJv7h8fFggFCMHB6TwJzlnyMhACn+AAAMATZTDsO74jnoAAAAASUVORK5CYII=";var X;var ae;var U;var P;var x;var o;var z;var t;var W;var E;var I;var K;var H="yyyy/MM/dd HH:mm:ss";var u=0;var ab;var af=function(){X.parent().append('<div class="crownix-inquery-overlay" id="iOverlay">&nbsp;</div>');$(".crownix-inquery-overlay").css("height","100%").css("width","100%").fadeIn(100);X.parent().append('<div class="crownix-inquery-outer"></div>');$(".crownix-inquery-outer").append('<div class="crownix-inquery-inner" id="inquery-inner"></div>');$(".crownix-inquery-inner").append('<div class="title"></div>');$(".crownix-inquery-outer").fadeIn(200)};var ai=function(){$(".crownix-inquery-inner").append('<div class="crownix-inquery-scroll" id="inquery-scroll"></div>');$(".crownix-inquery-scroll").append('<hr class="scroll-area" />');for(var ao in x){var an="iq"+ao;var am=x[ao];$("<div>").attr("id",an).addClass("iqitem").appendTo(".crownix-inquery-scroll");$("<div>").attr("class","iqCaption").appendTo(A(an)).text(am.ca);if(am.ty=="co"){var ak="";if(am.il=="1"){ak="  readonly"}$(A(an)).append('<input id="tb'+ao+'" type="text" class="iqCombo iqInput"'+ak+"/>");$(A(an)).append('<label class="selectArrow"><select id="'+ao+'" class="iqSelect"></select></label>');$(A(an)).append('<input id="save'+ao+'" type="hidden" />');ag(am);M(am);m(am);y(am)}else{if(am.ty=="tf"){$(A(an)).append('<input id="tb'+ao+'" type="text" class="iqCombo" />');M(am)}else{if(am.ty=="ca"){$(A(an)).append('<input id="tb'+ao+'" type="text" class="iqCombo iqInput" />');$(A(an)).append('<input id="date'+ao+'" type="text" style="font-size: 1px; border: 0px; height: 0px"/>');$(A(an)).append('<input id="ca'+ao+'" type="hidden" />');f(am);F(am);Z(am)}}}var R=A("tb"+ao);if(am.ty=="co"){$(R).val(ah(ao,P[ao]));$(A("save"+ao)).val(P[ao])}else{if(am.ty=="ca"){var al=j(am.ac,P[ao],V(am.cl),am.sc,H);$(A("date"+ao)).val(al).change()}else{$(R).val(P[ao])}}u++}$(".crownix-inquery-scroll").append('<hr class="scroll-area" style="margin-top: 10px"/>');$(".crownix-inquery-inner .title").append(g.get("insert_inquery_condition").replace("%d",u));n();N()};var N=function(){if(m2soft.crownix.Resource.language=="en"){$(".crownix-inquery-inner .title").css({"font-size":"9pt","padding-left":"15px"})}if(b.os.windows&&b.browser.safari){$(".iqSelect").css({"margin-top":"0px",height:"27px"})}else{if(b.browser.android){$(".iqSelect").css({height:"27px"})}}if(!b.browser.firefox){if(!b.browser.msie){$(".iqSelect").css("padding-right","18px");$(".selectArrow").css("position","relative");$(".selectArrow").append('<style>.crownix-inquery-inner label:after{content:"▼"; font:14px; color:#000; right:8px; top:0px; padding:0 0 2px; border-bottom:0px solid #ddd; position:absolute; pointer-events:none;}</style>');$(".selectArrow").append('<style>.crownix-inquery-inner label:before{content:""; right:6px; top:0px; width:20px; height:20px; background:#fff; position:absolute; pointer-events:none; display:block;}</style>')}else{$(".iqSelect").css("width","250px")}}if(b.browser.mobile){$(".iqSelect").css("width","255px")}};var n=function(){var ak=55*u+16;var R=ak+100;$(".crownix-inquery-outer").css("height",R+"px");$(".crownix-inquery-outer").css("max-height","50%");R=$(".crownix-inquery-outer").height();if(R>226){$(".crownix-inquery-outer").css("min-height","226px")}else{$(".crownix-inquery-outer").css("min-height","171px")}$(".crownix-inquery-outer").css("max-height",$(".crownix-inquery-outer").height()+"px");$(".crownix-inquery-scroll").css("height",$(".crownix-inquery-outer").height()-100+"px");$(".crownix-inquery-outer").css({"margin-top":$(".crownix-inquery-outer").height()/-1.8+"px"})};var M=function(R){$(A("tb"+R.id)).on("change input keyup",function(ak){ak.preventDefault();ak.stopPropagation();if(ak.type=="input"||ak.type=="keyup"){var an=$(A("tb"+R.id)).val();var am=$(A("save"+R.id)).val();$(A(R.id)).val(an).attr("selected","selected");if(typeof am!="undefined"&&an!=""&&an!=am){var al=e(R.id,an);if(typeof al!="undefined"){P[R.id]=al;$(A("save"+R.id)).val(an);Q(R.id)}}}if(R.rq=="1"){if($(A("tb"+R.id)).val()==""){$(A("tb"+R.id)).css({color:"#4D3838",background:"#D37979"})}else{$(A("tb"+R.id)).css({color:"initial",background:"#fff"})}}})};var m=function(R){$(A(R.id)).change(function(al){al.preventDefault();al.stopPropagation();var ak=$(this).find("option:selected").text();var am=$(this).find("option:selected").val();P[$(this).attr("id")]=am;$(A("tb"+$(this).attr("id"))).val(ak).change();Q(R.id)})};var y=function(R){$(A("tb"+R.id)).on("focusout",function(ak){ak.preventDefault();ak.stopPropagation();var an=$(A("tb"+R.id)).val();var am=$(A("save"+R.id)).val();if(an!=""&&an!=am){var al=e(R.id,an);if(typeof al=="undefined"){P[R.id]=al;$(A("save"+R.id)).val(an);S(R.id)}}})};var S=function(am){for(var al in x){var ak=x[al];var R=ak.pv;if(al!=am&&ak.ty=="co"&&(typeof R!="undefined")&&R.indexOf(am)>-1){$(A(al)).empty();$(A(al)).append('<option value=""></option>')}}};var F=function(R){$(A("date"+R.id)).on("change",function(ao){var ap=R.sc;var al=R.ac;var an=$(A("date"+R.id)).val();var ak=V(R.cl);if(an.length>0){var am=new Date(ac.getDateFromFormat(H,an,ak));$(A("tb"+R.id)).val(ac.formatDate(ap,am,ak));$(A("tb"+R.id)).css({color:"initial",background:"#fff"});$(A("ca"+R.id)).val(ac.formatDate(al,am,ak))}})};var Z=function(R){$(A("tb"+R.id)).on("change input keyup",function(am){var an=R.sc;var ak=$(A("date"+R.id)).val();var al=$(A("tb"+R.id)).val();var ao=R.cl;if((R.rq=="1"&&al==0)||!G(ak,an,al,ao)){$(A("tb"+R.id)).css({color:"#4D3838",background:"#D37979"})}else{$(A("tb"+R.id)).css({color:"initial",background:"#fff"})}})};var G=function(R,am,al,an){if(al.length==0){return true}var ak=q(R,am,al,V(an),H);return ac.isDate(H,ak,V(an))};var V=function(ak){var R=ak;if(ak.indexOf("english")>-1){R="en"}else{if(ak.indexOf("korean")>-1){R="ko"}else{if(ak.indexOf("japanese")>-1){R="ja"}else{if(ak.indexOf("chinese")>-1){R="zh-CN"}}}}return R};var f=function(ak){var R=V(ak.cl);$.crownixdatepicker.setDefaults($.crownixdatepicker.regional[R]);$.crownixdatepicker.locale=R;$(A("date"+ak.id)).crownixdatepicker({dateFormat:H,showOn:"button",buttonImage:aj,buttonImageOnly:true,onClose:function(am,al){$(this).attr("disabled",false)},beforeShow:function(al,am){$(this).attr("disabled",true)}})};var T=function(){$(".crownix-inquery-inner").append('<div class="iButtons"></div>');$(".iButtons").append('<button value="ok">'+g.get("ok_button_text")+"</button>");$(".iButtons").append('<button value="cancel">'+g.get("cancel_button_text")+"</button>");$(".crownix-inquery-outer").keydown(function(R){if($(".crownix-inquery-overlay").is(":visible")){if(R.keyCode==13){$('.iButtons > button[value="ok"]').click()}if(R.keyCode==27){$('.iButtons > button[value="cancel"]').click()}}});$('.iButtons > button[value="ok"]').click(function(){var ap=false;var au="";for(var ak in x){var aw=x[ak];var am=A("tb"+ak);if(aw.rq=="1"){if($(am).val()==""){$(am).change();au+="["+(aw.ca!=""?aw.ca:aw.id)+"]";ap=true}}if(aw.ty=="ca"){var al=aw.sc;var av=$(A("date"+aw.id)).val();var ar=$(A("tb"+aw.id)).val();var an=aw.cl;if(!G(av,al,ar,an)){$(this).blur();ae.show(g.get("inquery_calendar_format_error"));ap=true}else{if(ar.length>0){var al=aw.sc;var ao=aw.ac;var aq=V(aw.cl);var at=$(A("tb"+aw.id)).val();var av=$(A("date"+aw.id)).val();var R=q(av,al,at,aq,ao);$(A("ca"+aw.id)).val(R)}}}}aa(function(ax){if(ax){r(ap,au)}})});$('.iButtons > button[value="cancel"]').click(function(){$(".crownix-inquery-overlay").hide();$(".crownix-inquery-outer").hide()})};var aa=function(R){if(K.isAllowedFeature("FormField")&&E){$(this).blur();ae.show(g.get("inquery_formfield_reset"),{confirm:true,input:false},function(ak){if(ak){if((K.isAllowedFeature("Note")&&I.enableNote)&&b.isSupportSVG()){ae.show(g.get("inquery_note_reset"),{confirm:true,input:false},function(al){R(al)})}else{R(true)}}})}else{if(((K.isAllowedFeature("Note")&&I.enableNote)&&b.isSupportSVG())){$(this).blur();ae.show(g.get("inquery_note_reset"),{confirm:true,input:false},function(ak){if(ak){if(K.isAllowedFeature("FormField")&&E){ae.show(g.get("inquery_formfield_reset"),{confirm:true,input:false},function(al){R(al)})}else{R(true)}}})}else{return R(true)}}};var r=function(al,ak){if(al){if(ak.length>0){$(this).blur();ae.show(g.get("submit_fail_not_filled_required_form")+"<br />"+ak)}}else{for(var an in x){var R=$(A("tb"+an)).val();var am=e(an,R);if(R.length>0&&typeof am!="undefined"){R=am}if(typeof $(A("ca"+an)).val()!="undefined"){R=$(A("ca"+an)).val()}P[an]=R}$(".crownix-inquery-overlay").hide();$(".crownix-inquery-outer").hide();if(ab>3){W=D()}else{B();l()}o(z,t,I)}};var q=function(al,ap,ao,R,ak){var am=new Date(ac.getDateFromFormat(H,al,R));var an=new Date(ac.getDateFromFormat(ap,ao,R,am));return ac.formatDate(ak,an,R)};var e=function(al,ak){var R=$(A(al)).find("option").filter(function(am){return ak===$(this).text()}).val();return R};var ah=function(al,ak){var R=$(A(al)).find("option").filter(function(am){return ak===$(this).val()}).text();if(!R){R=ak}return R};var D=function(){var am=["/rp "];var ak=["/rv"];var R;var an=0;for(var ao in P){if(ao.indexOf("$")==0){an=Math.max(an,Number(ao.replace("$","")))}else{ak.push(" "+ao+"["+P[ao]+"]")}}for(var al=1;al<=an;al++){if(typeof P["$"+al]!="undefined"){am.push("["+P["$"+al]+"]")}else{am.push("[]")}}R=am.join("")+" "+ak.join("");return R};var B=function(){var al=["/rp "];var R=["/rv"];var am=0;for(var an in P){if(an.indexOf("$")==0){am=Math.max(am,Number(an.replace("$","")))}else{R.push(" "+an+"["+P[an]+"]")}}for(var ak=1;ak<=am;ak++){if(typeof P["$"+ak]!="undefined"){al.push("["+P["$"+ak]+"]")}else{al.push("[]")}}if(t.match(/\/rp\s+.*?\](?=\s*\/r[a-zA-Z]+|\s*$)/g)!==null){t=t.replace(/\/rp\s+.*?\](?=\s*\/r[a-zA-Z]+|\s*$)/g,al.join(""))}else{t=t.concat(" ",al.join(""))}if(t.match(/\/rv\s+.*?\](?=\s*\/r[a-zA-Z]+|\s*$)/g)!==null){t=t.replace(/\/rv\s+.*?\](?=\s*\/r[a-zA-Z]+|\s*$)/g,R.join(""))}else{t=t.concat(" ",R.join(""))}};var l=function(){var R=t.match(/\B\/rdonotreport(ex|)\s*(\[[^\]]*\])/g);if(R!==null){R=R.toString();z=R.substring(R.indexOf("[")+1,R.indexOf("]"));t=t.replace(/\B\/rdonotreport(ex|)\s*(\[[^\]]*\])/g,"")}else{t=t.replace(/\B\/rdonotreport(ex|)\b/g,"")}};var Q=function(am){for(var al in x){var ak=x[al];var R=ak.pv;if(al!=am&&ak.ty=="co"&&(typeof R!="undefined")&&R.indexOf(am)>-1){ag(ak)}}};var ag=function(am){if(am.db==0){if(typeof am.sp==="undefined"){C(am)}else{c(am)}}else{if(am.db==1){var ao=am.ad.split(am.se);var R=am.sd.split(am.se);var an=['<option value=""></option>'];for(var ak=0;ak<ao.length;ak++){var al="";if(P[am.id]!=""&&P[am.id]==R[ak]){al=" selected"}an.push('<option value="'+ao[ak]+'"'+al+">"+R[ak]+"</option>")}$(A(am.id)).append(an.join(""))}}};var C=function(ak){var R={opcode:106,"User-Agent":"ReportDesigner",pwkey:"M2-S20040515-RDVIEWER",RDFile:"viewer.rdf",RDClient:"RD.Viewer",ComName:"HTML5Viewer",RDParam:"viewer.rdf",charset:"UTF-8",checkcache:0,checkcachedate:0,cachedate:0,service:ak.ds,encsql:1,charset:"UTF-8",queryinfo:1,selectquery:ak.qr,inquery:JSON.stringify(P),};$.ajax({type:"POST",url:U,data:Y(R),async:false,success:function(al,an,am){ad(am,ak)},error:function(am,an,al){O(am,an,al)},complete:function(al){a(al)}})};var c=function(al){var ak={opcode:112,"User-Agent":"ReportDesigner",pwkey:"M2-S20040515-RDVIEWER",RDFile:"viewer.rdf",RDClient:"RD.Viewer",ComName:"HTML5Viewer",RDParam:"viewer.rdf",charset:"UTF-8",service:al.ds,encsql:1,charset:"UTF-8",queryinfo:1,spname:al.sp,vcount:al.pa.length,inquery:JSON.stringify(P),};var R=$.ajax({type:"POST",url:U,data:Y(ak)+k(al),async:false,success:function(am,ao,an){ad(an,al)},error:function(an,ao,am){O(an,ao,am)},complete:function(am){a(am)}})};var ad=function(al,R){if(L(al)){return}var ak=s(al);$(A(R.id)).empty();$(A(R.id)).append(J(ak,R))};var L=function(R){if(R.responseText.indexOf("0")===0){$(this).blur();ae.show(R.responseText.replace("0|",""));h.progress.hide(X);return true}return false};var s=function(ap){var am=ap.responseText.split("\n");if(am[0]!="1|1008|0"){$(this).blur();ae.show(g.get("request_server_error"));h.progress.hide(X);return}var aq=am[1];var ao={};for(var al=0;al<aq;al++){var ak=am[2+al].split("|");ao[al]={name:ak[0],type:ak[1],size:ak[2],data:[],}}if(am[2+Number(aq)]!="1|1008|0"){$(this).blur();ae.show(g.get("request_server_error"));h.progress.hide(X);return}var an=am[Number(aq)+3].split("|");for(var al=0;al<an.length-1;al=al+Number(aq)){for(var R=0;R<aq;R++){ao[R].data.push(an[al+R])}}return ao};var J=function(al,au){var at=Object.keys(al).length;var R=[];var ao=[];var ar=['<option value=""></option>'];var aq=au.ad.toUpperCase();var ak=au.sd.toUpperCase();var ap;for(var an=0;an<at;an++){ap=al[an].name.toUpperCase();if(aq==ap||aq.replace(/.*\./,"")==ap){ao=al[an].data}if(ak==ap||ak.replace(/.*\./,"")==ap){R=al[an].data}}for(var an=0;an<ao.length;an++){var am="";if(P[au.id]!=""&&P[au.id]==R[an]){am=" selected"}ar.push('<option value="'+ao[an].replace(/\s+$/,"")+'"'+am+">"+R[an].replace(/\s+$/,"")+"</option>")}return ar.join("")};var O=function(ak,al,R){$(this).blur();if(al=="error"){ae.show(g.get("server_connect_error"))}else{if(al=="timeout"){ae.show(g.get("request_timeout_error"))}else{if(al=="abort"){ae.show(g.get("request_abort_error"))}else{if(R!=null){ae.show(R)}}}}h.progress.hide(X)};var a=function(al){var R=al.getResponseHeader("RDID");var ak={opcode:99,"User-Agent":"ReportDesigner",pwkey:"M2-S20040515-RDVIEWER",rdid:"-"+R,};$.ajax({type:"POST",url:U,data:Y(ak),async:false,})};var Y=function(R){var ak=[];for(var al in R){ak.push(encodeURIComponent(al)+"="+encodeURIComponent(R[al]))}return ak.join("&")};var k=function(R){var ak=["&"];for(var al in R.pa){ak.push("colval="+encodeURIComponent(R.pa[al]))}return ak.join("&")};var A=function(R){R=R.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&");return"#"+R};var j=function(aq,ap,ak,an,R){var am=new Date();if(ap!==undefined&&ac.isDate(aq,ap,ak)){var al=ac.formatDate(an,am,ak);var ao=q(al,aq,ap,ak,an);unixtime=ac.getDateFromFormat(an,ao,ak);am=new Date(unixtime)}return ac.formatDate(R,am,"en")};var d;d=function(R){X=$("#"+R);ae=new w(R)};d.prototype={constructor:m2soft.crownix.InqueryDialog,setData:function(at,ap,aq,ak,ao,an,al,ar,am,R){U=at;P=ap;x=aq;o=ak;z=ao;t=an;E=al;I=ar;K=am;ab=R;if(u!==0){u=0;$(".crownix-inquery-overlay").remove();$(".crownix-inquery-outer").remove()}},show:function(){if($(".crownix-inquery-outer").length>0){n();$(".crownix-inquery-overlay").fadeIn(100);$(".crownix-inquery-outer").fadeIn(200)}else{h.progress.show(X,"",function(){af();ai();T();h.progress.hide(X)})}},getMrdPlainParam:function(){return W}};return d}());m2soft.ns("m2soft.crownix.ShapeEditor");m2soft.crownix.ShapeEditor=function(c,l){var d=m2soft.crownix.Util;var B=m2soft.crownix.util.Unit;var j=m2soft.crownix.Resource;var w=m2soft.crownix.TextDialog;var m=3;var A={},b={},r={},h={},M={},e={},I={},q={},f=[],y={stroke:"#000000","stroke-width":"2pt","stroke-opacity":1,"stroke-linecap":"round","stroke-linejoin":"round",},D=1,N=null,C={},z={},F=96;l=l,isFocus=focusing=moving=false;var t=function(U){if(U.length==0){return""}var S=$("<note>"),T;for(var R=0,Q=U.length;R<Q;R++){var V=U[R];if(V.type!="text"){T=$("<element>").attr({type:V.tool,svgType:V.type,path:V.getPath?V.getPath().toString():V.path,"stroke-color":V.attrs?V.attrs.stroke:V.stroke,"stroke-opacity":V.attrs?V.attrs["stroke-opacity"]:V["stroke-opacity"],"stroke-width":V.attrs?V.attrs["stroke-width"]:V["stroke-width"],"stroke-linecap":V.attrs?V.attrs["stroke-linecap"]:V["stroke-linecap"],"stroke-linejoin":V.attrs?V.attrs["stroke-linejoin"]:V["stroke-linejoin"],}).appendTo(S)}else{T=$("<element>").attr({type:V.tool,svgType:V.type,x:V.x,y:V.y,width:V.width,height:V.height,"font-color":Raphael.color(V["font-color"]).hex,"font-size":Math.round(B.pxToPt(parseInt(V["font-size"]))),"text-anchor":V["text-anchor"],"font-weight":V["font-weight"],"font-style":V["font-style"],"text-decoration":V["text-decoration"],line:V["stroke-width"]==0?false:true,fill:V.fill}).text(V.text).appendTo(S)}}return S[0].outerHTML};var o=function(Q){var S=$(Q),T=[];var R=function(V){var U=Raphael.getRGB(V);return"rgb("+U.r+", "+U.g+", "+U.b+")"};S.children().each(function(){var U=$(this);if(U.attr("type")!="text"){T.push({type:U.attr("svgType"),tool:U.attr("type"),path:U.attr("path"),stroke:U.attr("stroke-color"),"stroke-opacity":U.attr("stroke-opacity"),"stroke-width":U.attr("stroke-width"),"stroke-linecap":U.attr("stroke-linecap"),"stroke-linejoin":U.attr("stroke-linejoin"),})}else{T.push({type:U.attr("svgType"),tool:U.attr("type"),x:parseInt(U.attr("x")),y:parseInt(U.attr("y")),width:parseInt(U.attr("width")),height:parseInt(U.attr("height")),text:U.text(),"font-color":R(U.attr("font-color")),"font-size":Math.round(B.ptToPx(parseInt(U.attr("font-size"))))+"px","text-anchor":U.attr("text-anchor"),"font-weight":U.attr("font-weight")=="bold"?U.attr("font-weight"):parseInt(U.attr("font-weight")),"font-style":U.attr("font-style"),"text-decoration":U.attr("text-decoration"),"stroke-width":U.attr("line")=="true"?2:0,fill:U.attr("fill"),})}});return T};var G=function(){var U=false,S={},Q=[],T=null,R="scribble";this.start=function(V,W){U=true;Q.push(["M",V,W]);z.beginPath();z.moveTo(V,W)};this.move=function(V,W){Q.push(["L",V,W]);z.clearRect(0,0,C.width(),C.height());z.lineTo(V,W);z.stroke()};this.end=function(V){if(Q.length>2){S=b.path(Q).attr(y);S.type="path";S.realId=S.id;S.tool="scribble";f.push(S);if(!V){I.add({action:"scribble",element:S,});if(l.shareManager&&l.shareManager.isConnected()){l.shareManager.sendNote({type:"scribble",xml:t([S]),id:S.id})}}z.closePath();z.clearRect(0,0,C.width(),C.height())}U=false;Q=[]};this.getName=function(){return R}};var L=function(){var V,U,S,R,T=false,Q="eraser";this.start=function(W,X){V=S=W;U=R=X};this.move=function(W,X){S=W;R=X};this.end=function(X){if(Math.abs(S-V)<5&&Math.abs(R-U)<5){for(var ab=f.length-1;ab>=0;ab--){var aa=f[ab];if(aa&&aa.type!="text"){if(aa.isInsidePath(S,R,F)){f.splice(ab,1);if(!X){I.add({action:"erase",element:aa,});if(l.shareManager&&l.shareManager.isConnected()){l.shareManager.sendNote({type:"erase",xml:t([aa]),id:aa.id})}}b.clear();for(var Z=0,W=f.length;Z<W;Z++){var Y=f[Z];var ac;if(Y.type!="text"){ac=b[Y.type]().attr(Y.attrs);ac.realId=Y.id;ac.tool=ac.tool}else{J(Y)}}break}}else{aa=g(V,U);if(aa){if(f[ab]==aa.element){f.splice(ab,1);if(!X){I.add({action:"erase",element:aa,});if(l.shareManager&&l.shareManager.isConnected()){l.shareManager.sendNote({type:"erase",xml:t([aa.element]),elementType:"text"})}}x();break}}}}}};this.getName=function(){return Q}};var P=function(){var Q="text",aa,Z,ad,ab,T=newObj=rectEl=textEl=null,U=isHResize=tapped=isDoubleClicked=false;var R=function(af,ah,ag){af=Math.max(af,0);ah=Math.max(ah,0);af=Math.min(af,A.width()-ag.width());ah=Math.min(ah,A.height()-ag.height());return{x:af,y:ah}};var ae=function(){return{left:(newObj.offset().left-A.offset().left)/D,top:(newObj.offset().top-A.offset().top)/D}};var S=function(ah,aj){var ai=aj.css("text-align");if(ai=="right"){ai="end"}else{if(ai=="center"){ai="middle"}else{if(ai=="left"){ai="start"}}}var ag={x:ah.parentNode?ah.parentNode.offsetLeft:ah.x,y:ah.parentNode?ah.parentNode.offsetTop:ah.y,width:ah.parentNode?$(ah.parentNode).width():ah.width,height:ah.parentNode?$(ah.parentNode).height():ah.height,"font-size":ah.parentNode?aj.css("font-size"):Math.round(parseFloat(aj.css("font-size"))),text:aj.val(),"font-weight":aj.css("font-weight"),"font-style":aj.css("font-style"),"text-decoration":aj.css("text-decoration"),"font-color":aj.css("color"),"stroke-width":aj.attr("border")=="solid #000000"?2:0,fill:aj.attr("background-color")?aj.attr("background-color"):"#FAF4C0","text-anchor":ai};var af=J(ag);var ak=K(af.textEl,af.rectEl);if($(ah.parentNode).hasClass("crownix-note-textnote")){$(ah.parentNode).remove()}return ak};var W=function(af){for(var ah=f.length-1;ah>=0;ah--){if(f[ah]==T.element){x(ah)}}var ag=T.element["text-anchor"];if(ag=="end"){ag="right"}else{if(ag=="middle"){ag="center"}else{ag="left"}}af.css({color:T.element["font-color"],"font-size":T.element["font-size"],"font-weight":T.element["font-weight"],"font-style":T.element["font-style"],"text-align":ag,"text-decoration":T.element["text-decoration"],border:T.element["stroke-width"]==0?"none":"solid #000000",});af.attr({border:T.element["stroke-width"]==0?"none":"solid #000000","background-color":T.element.fill,});af.val(T.element.text)};var Y=function(ah){if(l.shareManager&&l.shareManager.isConnected()){if(!d.browser.mobile||d.browser.mobile&&T){var af;if(T){af=t([T.element])}l.shareManager.sendNote({type:"text",xml:t([ah]),oldXml:af,})}}if(T){for(var ag=f.length-1;ag>=0;ag--){if(f[ag].type=="text"){if(T&&JSON.stringify(f[ag])==JSON.stringify(T.element)){f[ag]=ah}}}x();I.getHistory().forEach(function(ai){if(ai.element&&ai.element.type=="text"){if(JSON.stringify(ai.element)==JSON.stringify(T.element)){ai.element=ah}}})}else{f.push(ah);I.add({action:"text",element:ah})}};var ac=function(af,aj){var ai=false;if(l.shareManager&&l.shareManager.isConnected()){var ag;if(T){ag=t([aj])}l.shareManager.sendNote({type:"text",xml:t([af]),oldXml:ag,})}I.getHistory().forEach(function(ak){if(ak.element.type=="text"){if(JSON.stringify(ak.element)==JSON.stringify(aj)){ak.element=af;ai=true}}});if(!ai&&!T){f.push(af)}for(var ah=f.length-1;ah>=0;ah--){if(f[ah].type=="text"){if(JSON.stringify(f[ah])==JSON.stringify(aj)){f[ah]=af;ai=true}}}x()};var X=function(af){af.preventDefault();af.stopPropagation();l.scroll.enabled=false;if(d.browser.mobile){$(af.currentTarget).blur()}else{if(!isFocus){textDialog.showToolbar(af.currentTarget,A);isFocus=true}}};var V=function(af){if(focusing){if(d.browser.msie){$(af.currentTarget).focus()}focusing=false;return}af.preventDefault();af.stopPropagation();isFocus=false;l.scroll.enabled=true;var ag=S(af.currentTarget,$(af.currentTarget));Y(ag);if(d.browser.mobile){textDialog.showDialog(af.currentTarget,ag)}};this.init=function(){if(newObj){newObj.css("border","none")}isHResize=U=isDoubleClicked=moving=false;newObj=null};this.start=function(af,ag){aa=af;Z=ag;T=g(aa,Z);if(!T){newObj=$("<div>").addClass("crownix-note-textnote").appendTo(A);newObj.css({left:R(aa-newObj.width()/2,Z-newObj.width()/2,newObj).x,top:R(aa-newObj.width()/2,Z-newObj.width()/2,newObj).y})}else{U=T.isWResize;isHResize=T.isHResize;newObj=$("<div>").addClass("crownix-note-textnote").appendTo(A);newObj.css({left:T.element.x,top:T.element.y,width:T.element.width,height:T.element.height});if(!tapped){tapped=setTimeout(function(){tapped=null},300)}else{clearTimeout(tapped);tapped=null;isDoubleClicked=true}}};this.move=function(af,ai){var ah,ag;ad=af;ab=ai;moving=true;newObj.css("border","dotted #FFC19E");if(U||isHResize){ah=U?newObj.width()+ad-aa:newObj.width();ag=isHResize?newObj.height()+ab-Z:newObj.height();$(newObj).css({width:Math.min(ah,A.width()-ae().left),height:Math.min(ag,A.height()-ae().top)})}else{ah=ae().left+ad-aa;ag=ae().top+ab-Z;$(newObj).css({left:R(ah,ag,newObj).x,top:R(ah,ag,newObj).y});if(newObj.offset().left<=0&&A.offset().left<=0){l.scroll.scrollTo(l.scroll.x+5*D,l.scroll.y,1000)}if(newObj.offset().top<=l.toolbar.getHeight()&&A.offset().top<=l.toolbar.getHeight()){l.scroll.scrollTo(l.scroll.x,l.scroll.y+5*D,1000)}if(l.scroll.wrapperWidth-5<=newObj.offset().left+newObj.width()*D){l.scroll.scrollTo(l.scroll.x-5*D,l.scroll.y,1000)}if(l.scroll.wrapperHeight-5<=newObj.offset().top+newObj.height()*D){l.scroll.scrollTo(l.scroll.x,l.scroll.y-5*D,1000)}}aa=ad;Z=ab};this.end=function(){var af=$("<textarea>").attr("placeholder",j.get("text_placeholder")).bind("focus",X).bind("blur",V).appendTo(newObj);if(T){W(af);if(isDoubleClicked){af.focus()}else{if(d.browser.mobile){var ag=S(af[0],$(af[0]));Y(ag)}else{af.blur()}}}else{af.focus()}this.init()};this.getName=function(){return Q};this.textareaToSvg=function(ah,af){var ag=S(ah,af);ac(ag,ah)};this.redrawElement=function(){x()}};var E=function(V,Q){var Y=V.data("text").split("\n"),R=[],U="";for(var T=0,S=Y.length;T<S;T++){if(!Y[T]){R.push(Y[T]);continue}while(Y[T]){V.attr("text",Y[T]);var X=V.getBBox().width/V.attr("text").length;var W=Math.floor(Q/Math.ceil(X));R.push(Y[T].substring(0,W));Y[T]=Y[T].substring(0+W,Y[T].length)}}for(var T=0,S=R.length;T<S;T++){U+=R[T];if(!R[T]){U+="\200"}if(T<S-1){U+="\n"}}return U};var J=function(Z,Y){var R=Y?Y:b;var V=R.rect(Z.x,Z.y,Z.width,Z.height).attr({fill:Z.fill,"stroke-width":Z["stroke-width"]});var Q=R.text(0,0,Z.text).attr({"text-anchor":Z["text-anchor"],"font-size":Math.round(parseFloat(Z["font-size"]))+"px","font-weight":Z["font-weight"],"font-style":Z["font-style"],fill:Z["font-color"],"clip-rect":[Z.x,Z.y,Z.width,Z.height].join(" ")}).data("text",Z.text);Q.attr("text",E(Q,Z.width-m*2));$(Q.node).css({"text-decoration":Z["text-decoration"],}).append(" ");var T=Q.getBBox(),W=Z.x+m,U=Z.y+T.height/2+m,X=Z.width-m*2,S=Z.height-m*2;if(Q.attr("text-anchor")=="middle"){W+=X/2}else{if(Q.attr("text-anchor")=="end"){W+=X}}Q.attr({x:W,y:U});R.path(["M",Z.x+Z.width-0.5,Z.y+Z.height-9.5,"l",-9.5,9.5,"M",Z.x+Z.width-0.5,Z.y+Z.height-4.5,"l",-4.5,4.5].join(",")).attr({stroke:"#8C8C8C"});return{textEl:Q,rectEl:V}};var K=function(R,Q){var S={type:"text",tool:"text",x:Q.attrs.x,y:Q.attrs.y,width:Q.attrs.width,height:Q.attrs.height,text:R.data("text"),"font-color":R.attrs.fill,"font-size":R.attrs["font-size"],"text-anchor":R.attrs["text-anchor"],"font-weight":R.attrs["font-weight"],"font-style":R.attrs["font-style"],"text-decoration":$(R.node).css("text-decoration"),"stroke-width":Q.attrs["stroke-width"],fill:Q.attrs.fill,};return S};var x=function(R){b.clear();for(var S=0,Q=f.length;S<Q;S++){if(f[S].type=="text"&&R!=S){J(f[S])}else{if(f[S].type!="text"){b[f[S].type]().attr(f[S].attrs)}}}};var g=function(Q,U){var T=d.browser.mobile?20:8;if(moving){return}for(var S=f.length-1;S>=0;S--){if(f[S].type!="text"){continue}if(f[S].x<Q&&(f[S].x+f[S].width+T)>Q&&f[S].y<U&&(f[S].y+f[S].height+T)>U){var R=isHResize=false;if(f[S].x+f[S].width-T<Q&&f[S].x+f[S].width+T>Q){R=true}if(f[S].y+f[S].height-T<U&&f[S].y+f[S].height+T>U){isHResize=true}return{element:f[S],isWResize:R,isHResize:isHResize}}}return null};var H=function(){var V=false;var Y=function(ac,ab){return{x:Math.round((ac-A.offset().left)/D),y:Math.round((ab-A.offset().top)/D)}};var Q=function(ab){if(isFocus){$(ab.target).parents().each(function(ad,ae){if($(ae).hasClass("crownix-note-textnote")){focusing=true;return false}else{focusing=false}});return}ab.preventDefault();ab.stopPropagation();$(document).on("mousemove",W);$(document).on("mouseup",S);var ac=Y(ab.pageX,ab.pageY);r.start(ac.x,ac.y);if(l.shareManager&&l.shareManager.isConnected()){l.shareManager.sendNote({type:"start",x:ac.x,y:ac.y,tool:r.getName(),attribute:y})}};var W=function(ab){ab.preventDefault();ab.stopPropagation();var ac=Y(ab.pageX,ab.pageY);r.move(ac.x,ac.y);if(l.shareManager&&l.shareManager.isConnected()&&r.getName()!="text"){l.shareManager.sendNote({x:ac.x,y:ac.y})}};var S=function(ab){if(l.shareManager&&l.shareManager.isConnected()&&r.getName()!="text"){l.shareManager.sendNote({type:"end"})}ab.preventDefault();ab.stopPropagation();$(document).off("mousemove",W);$(document).off("mouseup",S);r.end()};var aa=function(ab){ab.preventDefault();ab.stopPropagation();if(r.getName()=="text"){A.on("mousemove",X)}else{ab.target.style.cursor="";A.off("mousemove",X)}A.on("mouseout",U)};var X=function(ae){if(isFocus){ae.target.style.cursor="";return}var af=Y(ae.pageX,ae.pageY);var ad=g(af.x,af.y);if(ad){var ac=ad.isWResize;var ab=ad.isHResize;if(ac&&!ab){ae.target.style.cursor="e-resize"}else{if(!ac&&ab){ae.target.style.cursor="n-resize"}else{if(ac&&ab){ae.target.style.cursor="nw-resize"}else{ae.target.style.cursor="move"}}}}else{ae.target.style.cursor=""}};var U=function(ab){ab.preventDefault();ab.stopPropagation();A.off("mousemove",X);A.off("mouseout",U)};var T=function(ab){if(ab.originalEvent.touches.length>=2){V=true;return}else{V=false}ab.preventDefault();ab.stopPropagation();A.on("touchmove",R);A.on("touchend",Z);var ac=Y(ab.originalEvent.touches[0].pageX,ab.originalEvent.touches[0].pageY);r.start(ac.x,ac.y);if(l.shareManager&&l.shareManager.isConnected()){l.shareManager.sendNote({type:"start",x:ac.x,y:ac.y,tool:r.getName(),attribute:y})}};var R=function(ab){if(V){r.init();return}ab.preventDefault();ab.stopPropagation();var ac=Y(ab.originalEvent.touches[0].pageX,ab.originalEvent.touches[0].pageY);r.move(ac.x,ac.y);if(l.shareManager&&l.shareManager.isConnected()&&r.getName()!="text"){l.shareManager.sendNote({x:ac.x,y:ac.y})}};var Z=function(ab){if(V){return}if(l.shareManager&&l.shareManager.isConnected()&&r.getName()!="text"){l.shareManager.sendNote({type:"end"})}ab.preventDefault();ab.stopPropagation();A.off("touchmove",R);A.off("touchend",Z);r.end()};this.on=function(){A.on("mousedown",Q);A.on("mouseover",aa);if(d.hasTouch()){A.on("touchstart",T)}};this.off=function(){A.off("mousedown",Q);A.off("mousemove",W);A.off("mouseup",S);A.off("mouseover",aa);A.off("mousemove",X);if(d.hasTouch()){A.off("touchstart",T);A.off("touchmove",R);A.off("touchend",Z)}}};var s=function(){var R=this,T=[],S=-1,Q=-1;var U=function(){if(typeof N==="function"){N({undoable:R.undoable(),redoable:R.redoable(),clearable:(f.length>0),})}};R.undoable=function(){return(S>-1&&S>Q)};R.redoable=function(){return S<T.length-1};R.add=function(W,V){if(S+1<T.length){T.splice(S+1,T.length-(S+1))}T.push(W);S=T.length-1;if(V!==true){U()}};R.undo=function(){if(R.undoable()){S--;R.rebuildElements();U()}};R.redo=function(){if(R.redoable()){S++;R.rebuildElements();U()}};R.freeze=function(V){if(V===undefined){Q=S}else{Q=V}U()};R.clear=function(){T=[];S=-1;Q=-1;U()};R.rebuildElements=function(){var V=[];if(l.shareManager&&l.shareManager.isConnected()){l.shareManager.sendNote({type:"clearElement",rebuild:true})}for(var Z=0;Z<=S;Z++){var X=T[Z];switch(X.action){case"scribble":V.push(X.element);break;case"erase":for(var Y=0,ac=V.length;Y<ac;Y++){var ad=V[Y];if(ad.realId!=undefined&&ad.realId==X.element.realId){V.splice(Y,1);break}if(ad.realId==undefined&&X.element.element&&JSON.stringify(X.element.element)==JSON.stringify(ad)){V.splice(Y,1);break}}break;case"text":V.push(X.element);break;case"clear":V=[];break}}b.clear();if(l.shareManager&&l.shareManager.isConnected()){for(var Z=f.length-1;Z>=0;Z--){for(var Y=0;Y<T.length;Y++){if((f[Z].tool==T[Y].element.tool)&&(f[Z].tool=="scribble"&&f[Z].getPath().toString()==T[Y].element.getPath().toString())||(f[Z].tool=="text"&&JSON.stringify(f[Z])==JSON.stringify(T[Y].element))){f.splice(Z,1);break}}}for(var Z=0;Z<f.length;Z++){V.push(f[Z])}}f=[];for(var Z=0,ac=V.length;Z<ac;Z++){var aa=V[Z];var ab;if(aa.type!="text"){ab=b[aa.type]().attr(aa.attrs);ab.realId=aa.id;ab.tool=aa.tool;f.push(ab)}else{var W=J(aa);f.push(K(W.textEl,W.rectEl))}if(l.shareManager&&l.shareManager.isConnected()){l.shareManager.sendNote({type:"scribble",xml:t([aa]),rebuild:true})}}};R.getHistory=function(){return T};U()};var k=function(){var T=y.stroke,S=y["stroke-opacity"],V=y["stroke-width"],Q=Raphael.getRGB(T);z.strokeStyle="rgba("+Q.r+","+Q.g+","+Q.b+","+S+")";if(typeof V==="string"&&V.indexOf("pt",V.length-2)!==-1){var R=V.substring(0,V.length-2);var U=parseInt(R,10);z.lineWidth=U*F/72}else{z.lineWidth=V}z.lineCap=y["stroke-linecap"];z.lineJoin=y["stroke-linejoin"]};var u=function(S){var Q=d.browser.firefox?122:26,R=d.browser.firefox?121:25;if(S.ctrlKey&&S.which===Q){I.undo()}else{if(S.ctrlKey&&S.which===R){I.redo()}}};Raphael.el.isInsidePath=function(W,U,T){var V=this.realPath=Raphael._getPath[this.type](this);if(this.attr("transform")&&this.attr("transform").length){V=Raphael.transformPath(V,this.attr("transform"))}var Y=this.attr("stroke-width")||1;if(typeof Y==="string"&&Y.indexOf("pt",Y.length-2)!==-1&&typeof T==="number"){var ak=Y.substring(0,Y.length-2);var aa=parseInt(ak,10);Y=aa*T/72}var X=Y/2+3;var Q=Raphael.pathBBox(V);if(W<Q.x-X&&W>Q.x2+X&&U<Q.y-X&&U>Q.y2+X){return false}var ae,S,ad,R,ai,ah,ag,af,aj,Z;for(var ac=0,ab=V.length-1;ac<ab;ac++){ae=V[ac][1];S=V[ac][2];ad=V[ac+1][1];R=V[ac+1][2];ai=Math.min(ae,ad),ah=Math.max(ae,ad),ag=Math.min(S,R),af=Math.max(S,R);if(W<ai-X||W>ah+X||U<ag-X||U>af+X){continue}if(ai==ah||ag==af){return true}aj=(R-S)/(ad-ae);Z=Math.abs(aj*(W-ae)-U+S)/Math.sqrt(aj*aj+1);if(Z<X){return true}}return false};var O=$("<div>").css({width:"1in",height:"1in",display:"none"}).appendTo("body");F=O.width();O.remove();var a=function(){if(l.shareManager&&l.shareManager.isConnected()){l.shareManager.sendNote({type:"start"})}};var n=function(){if(l.shareManager&&l.shareManager.isConnected()){l.shareManager.sendNote({type:"end"})}};this.newPage=function(R,Q){A=R;C=$("<canvas>").attr({width:A.width(),height:A.height(),}).css({position:"absolute",left:0,top:0}).appendTo(A);z=C[0].getContext("2d");if(Q){C.addClass("crownix-auth-lock")}k();b=Raphael(A[0],A.width(),A.height());A.find("svg").css("left",0);q=new H();h=new G();M=new L();e=new P();textDialog=new w(c,this,a,n);r=h;I=new s()};this.disposePage=function(){$(document).off("keypress",u);q.off();textDialog.destroyDialog();if(b.remove){b.remove()}if(A.remove){A.remove()}f=[]};this.setMode=function(Q){if(Q==="editable"){q.off();A.css({cursor:"crosshair",display:"none"});A.fadeIn(500);if(!this.isLock()){q.on();$(document).on("keypress",u)}}else{if(Q==="disable"){q.off();A.css({cursor:"auto",display:"none"});A.fadeIn(500);$(document).off("keypress",u)}else{if(Q==="hide"){q.off();A.css("cursor","auto");A.fadeOut(500);$(document).off("keypress",u)}}}};this.getToolName=function(){return r.getName()};this.setTool=function(Q){if(Q==="scribble"){r=h}else{if(Q==="eraser"){r=M}else{if(Q==="text"){r=e}}}};this.setRatio=function(Q){D=Q};this.getShapeAttribute=function(){return y};this.setShapeAttribute=function(Q){if(typeof Q==="object"){for(var R in Q){if(R in y){y[R]=Q[R]}}}k()};this.undo=function(){I.undo()};this.redo=function(){I.redo()};this.clear=function(Q){f=[];b.clear();if(Q){I.clear()}else{I.add({action:"clear"})}};this.setHistoryChageHandler=function(Q){N=Q};this.getElements=function(){return f};this.addElements=function(R){for(var U=0,Q=R.length;U<Q;U++){var V=R[U];var T;if(V.type!="text"){T=b[V.type]().attr(V);T.tool=V.tool;T.type=V.type;T.realId=T.id;f.push(T)}else{var S=J(V);T=K(S.textEl,S.rectEl);f.push(T)}I.add({action:V.tool,element:T,},true)}I.freeze()};this.setZIndex=function(Q){if(Q==1){if(d.browser.msie&&d.browser.version<=10){C.hide()}A.css("pointer-events","none")}else{if(Q==3){if(d.browser.msie&&d.browser.version<=10){C.show()}A.css("pointer-events","auto")}}};this.disableNote=function(){q.off();$(document).off("keypress",u)};this.enableNote=function(){q.off();q.on();$(document).on("keypress",u)};this.draw=function(Q){if(Q.type=="start"){r.start(Q.x,Q.y);this.disableNote()}else{if(Q.type=="end"){r.end(true);if(!this.isLock()){this.enableNote()}}else{if(Q.type=="clear"){this.clear()}else{r.move(Q.x,Q.y)}}}};this.lock=function(){if(C){C.addClass("crownix-auth-lock");this.disableNote()}};this.unlock=function(Q){C.removeClass("crownix-auth-lock");if(Q=="editable"){this.enableNote()}};this.isLock=function(){return C.hasClass("crownix-auth-lock")?true:false};this.convertToXML=function(Q){return t(Q)};this.convertToElements=function(Q){return o(Q)};this.convertToRaphaelElement=function(Q){Q.forEach(function(V){var T;if(V.type!="text"){T=b[V.type]().attr(V);T.tool=V.tool;T.type=V.type;T.realId=T.id;f.push(T)}else{var R=J(V);T=K(R.textEl,R.rectEl);if(V.oldElement){var U=false;for(var S=f.length-1;S>=0;S--){if(f[S].type=="text"){if(T&&JSON.stringify(f[S])==JSON.stringify(V.oldElement)){f[S]=T;U=true;I.clear();break}}}if(!U){f.push(T)}}else{f.push(T)}}});return f};this.hasElement=function(R){for(var Q=0;Q<f.length;Q++){if(R.tool==f[Q].tool&&((R.tool!="text"&&R.path==f[Q].getPath())||(R.tool=="text"&&JSON.stringify(R)==JSON.stringify(f[Q])))){return true}}return false};this.textareaToSvg=function(R,Q){r.textareaToSvg(R,Q)};this.redrawTextBox=function(){if(r.getName()=="text"){r.redrawElement()}};this.drawTextnote=function(Q,R){J(Q,R)}};m2soft.ns("m2soft.crownix.NoteManager");m2soft.crownix.NoteManager=function(h,e){var f=m2soft.crownix.Util;var c=-1,a=new m2soft.crownix.Map(),g=new m2soft.crownix.ShapeEditor(h,e);notetoolbar=new m2soft.crownix.NoteToolbar(h,this),currentMode="disable",currentTool="scribble",currentAttr=null,isFormFieldMode=false,removedPage=[],options=e.options,e=e;g.setHistoryChageHandler(function(j){if(j.undoable){notetoolbar.enableToolbarItem(["undo"])}else{notetoolbar.disableToolbarItem(["undo"])}if(j.redoable){notetoolbar.enableToolbarItem(["redo"])}else{notetoolbar.disableToolbarItem(["redo"])}if(j.clearable){notetoolbar.enableToolbarItem(["eraseAll"])}else{notetoolbar.disableToolbarItem(["eraseAll"])}});var b=function(n,j,k){if(n=="editable"){var l=parseInt(j.width);var m=l+10;f.changeScrollbar(l,l,j.color,Math.ceil(l/2),m)}else{var l=parseInt(k.width);var m=l+10;f.changeScrollbar(l,l,k.color,"",m)}};var d=function(j){removedPage.forEach(function(k){if(k<=j){j++}});return j};this.setMode=function(j){g.setMode(j);if(j==="disable"){g.setZIndex(1)}else{g.setZIndex(3)}if(isFormFieldMode){fieldOrder=m2soft.crownix.FieldOrder.getInstance();fieldOrder.blur();if(j=="editable"){fieldOrder.disable()}else{fieldOrder.enable()}}currentMode=j;b(j,options.scrollbarOnNote,options.scrollbarOnViewer);if(e.shareManager&&e.shareManager.isConnected()&&e.shareManager.isHost()){e.shareManager.relocateLockControl()}};this.getMode=function(){return currentMode};this.getToolName=function(){return g.getToolName()};this.setTool=function(j){g.setTool(j);currentTool=j};this.setShapeAttribute=function(j){g.setShapeAttribute(j);currentAttr=j};this.drawPage=function(j,k){k=d(k);var m=false;if(c>0){if(g.isLock()){m=true}var n=g.getElements();var l=g.convertToXML(n);a.put(c,l);g.disposePage()}g.newPage(j,m);var l=a.get(k);if(l){var n=g.convertToElements(l);g.addElements(n)}g.setTool(currentTool);this.setMode(currentMode);currentAttr&&g.setShapeAttribute(currentAttr);c=k};this.drawNote=function(k,l){l=d(l);if(c>0){var m=g.convertToXML(g.getElements());a.put(c,m)}var m=a.get(l);if(m){var o=g.convertToElements(m);if(o.length>0){var q=Raphael(k[0],k.width(),k.height());for(var n=0,j=o.length;n<j;n++){if(o[n].type!="text"){q[o[n].type]().attr(o[n])}else{g.drawTextnote(o[n],q)}}}}};this.setRatio=function(j){g.setRatio(j)};this.undo=function(){g.undo()};this.redo=function(){g.redo()};this.clear=function(j){g.clear(j);if(!j&&e.shareManager&&e.shareManager.isConnected()){e.shareManager.sendNote({type:"clear"})}};this.destroyNoteToolbar=function(){notetoolbar.destroy()};this.toNoteParameter=function(n,j){if(c>0){var l=g.convertToXML(g.getElements());a.put(c,l)}var k=[" /rnotedata "];for(var m=n;m<=j;m++){k.push("[");var o=a.get(m);if(o){k.push(o)}k.push("] ")}return k.join("")};this.getNoteXml=function(j){if(j===c){return g.convertToXML(g.getElements())}else{return a.get(j)}};this.getShapeAttribute=function(){return g.getShapeAttribute()};this.setFormFieldMode=function(j){isFormFieldMode=j};this["export"]=function(k){var j=k;var m={};for(var l=1;l<=j;l++){m[l]=this.getNoteXml(l)}return m};this["import"]=function(k){for(var j in k){if(j==c){var l=g.convertToElements(k[j]);g.addElements(l)}else{a.put(j,k[j])}}};this.removeNote=function(j){removedPage.push(j);removedPage.sort(f.ASCENDING_COMPARATOR)};this.restoreNote=function(k){var j=removedPage.indexOf(k);if(j!=-1){removedPage.splice(j,1)}};this.draw=function(j){g.draw(j)};this.lock=function(){g.lock()};this.unlock=function(){g.unlock(currentMode)};this.addElement=function(m,k,s,l){var o=g.convertToElements(m)[0],j=[];if(s){if(g.hasElement(o)){return}if(l){o.oldElement=g.convertToElements(l)[0]}j=g.convertToRaphaelElement([o]);if(e.shareManager&&e.shareManager.isConnected()&&o&&o.type=="text"){e.shareManager.scrollToPos(o.x,o.y)}}else{k=d(k);var q=a.get(k);var r;if(q){j=g.convertToElements(q)}if(l){r=g.convertToElements(l)[0]}if(r){for(var n=j.length-1;n>=0;n--){if(j[n].type=="text"){if(o&&JSON.stringify(j[n])==JSON.stringify(r)){j[n]=o}}}}else{j.push(o)}}a.put(k,g.convertToXML(j))};this.removeElement=function(j,l,k){var o=g.convertToElements(j)[0],q=[];if(!k){l=d(l);var m=a.get(l);if(m){q=g.convertToElements(m)}for(var n=q.length-1;n>=0;n--){if((o.type=="text"&&JSON.stringify(q[n])==JSON.stringify(o))||(o.type!="text"&&q[n].path==o.path)){q.splice(n,1)}}}a.put(l,g.convertToXML(q))};this.removeAllElement=function(j){j=d(j);a.remove(j)};this.isLock=function(){return g.isLock()};this.redrawTextBox=function(){g.redrawTextBox()};this.disableNote=function(){g.disableNote()};this.enableNote=function(){if(!g.isLock()){g.enableNote()}}};m2soft.ns("m2soft.crownix.LinkManager");m2soft.crownix.LinkManager=function(e){var d=e,c=[],b=[],a={};MAX_DATA_SIZE=104857600;this.getStateDataSize=function(){var f=0;for(var l in a){var j=a[l].mmlData.mml;for(var h in a[l].mmlData.drilldownInfo){j+=a[l].mmlData.drilldownInfo[h]}if(a[l].formData){j+=a[l].formData}for(var g in a[l].noteData){j+=a[l].noteData[g]}var k=(function(o,m,n,q){for(m=n=0;q=o.charCodeAt(n++);m+=q>>11?3:q>>7?2:1){}return m})(j);f+=k}return f};this.isFullStack=function(){if(this.getStateDataSize()<MAX_DATA_SIZE){return false}return true};this.pushPrevDocStack=function(f){c.push(f)};this.popPrevDocStack=function(){return c.pop()};this.pushNextDocStack=function(f){b.push(f)};this.popNextDocStack=function(){return b.pop()};this.deleteNextDocStack=function(){b=[]};this.setStateData=function(g,f){a[g]=f};this.getStateData=function(f){if(!this.isExistData(f)){return null}return a[f]};this.isExistData=function(f){if(!a[f]){return false}return true};this.isEmptyPrevDocStack=function(){if(c.length>0){return false}return true};this.isEmptyNextDocStack=function(){if(b.length>0){return false}return true};this.makeStateData=function(){var f={mrdPath:d.viewer.getMrdPath(),mrdParam:d.viewer.getMrdParam(),curPageNum:d.currentPage,noteData:d.noteManager?d.noteManager["export"](d.totalPage):null,formData:d.isFormEditMode?d.exportFormData():null,mmlData:d.exportMML(),};return f};this.saveState=function(f){if(this.isFullStack()&&f=="new"){return false}var g=d.viewer.getMrdPath()+"_"+d.viewer.getMrdParam();var h=this.makeStateData();if(f=="prev"){this.pushNextDocStack(g)}else{this.pushPrevDocStack(g)}this.setStateData(g,h);return true};this.restoreState=function(g){var f=this.getStateData(g);d.viewer.setMrdPath(f.mrdPath);d.viewer.setMrdParam(f.mrdParam);d.importMML(f.mmlData);d.viewer.movePage(f.curPageNum);if(f.noteData!=null){d.noteManager["import"](f.noteData)}if(f.formData!=null){d.importFormData(f.formData)}};this.prevDoc=function(){var f=this.popPrevDocStack();this.saveState("prev");this.restoreState(f)};this.nextDoc=function(){var f=this.popNextDocStack();this.saveState("next");this.restoreState(f)}};m2soft.ns("m2soft.crownix.ShareDialog");m2soft.crownix.ShareDialog=(function(){var e=m2soft.crownix.Window;var c=m2soft.crownix.Resource;var o,h,l,t,a;l=function(y){t=y;if($(window).width()>$(window).height()){h=$(window).height()>520}else{h=true}o=$("<div>").attr("id","crownix-sharedialog-container");m();$(window).on("orientationchange",function(){var z=window.orientation;if((z===90||z===-90)){h=$(window).height()>520}else{h=true}if(h){a.setOrientation(h,x)}else{a.setOrientation(h,j)}})};l.prototype={show:function(y){var z=h?{css:{"max-width":"450px","max-height":"520px"}}:{css:{"max-width":"700px","max-height":"380px"}};z.setVerticalAlign=b;a=new e(c.get("share_dialog_title"),o,true);a.show(z);h?x():j();$(".crownix-window-close").bind("click",function(){y.close()});if(!t.report){$("input[name=reportTitle]").attr({disabled:"disabled"});$(".crownix-create-content-isPublic-input > input[type=checkbox]").attr({disabled:"disabled"});$("#registerBtn").attr({disabled:"disabled"})}},close:function(){a.close()},addReportList:function(y){u(y)},addReport:function(A,y,z){f(A,y,z)},removeReport:function(y){s(y)},renewUserCount:function(z,y){q(z,y)}};var b=function(){$(".crownix-span-input").each(function(){$(this).css("margin-top",($(this).parent().height()/2-$(this).height()/2)+"px")})};var j=function(){$("#crownix-sharedialog-container").css("min-height","220px");$(".crownix-sharedialog-listfield").css({height:"95%",width:"46%","float":"left",});$(".crownix-sharedialog-createfield").css({height:"95%",width:"46%","float":"left"});$(".crownix-create-content").css("height","60%")};var x=function(){$("#crownix-sharedialog-container").css("min-height","400px");$(".crownix-sharedialog-listfield").css({height:"54%",width:"95%"});$(".crownix-sharedialog-createfield").css({height:"42%",width:"95%"});$(".crownix-create-content").css("height","74%")};var m=function(){g();w()};var g=function(){var H=$("<div>").addClass("crownix-sharedialog-listfield").appendTo(o);$("<h4>").text(c.get("share_list_title")).addClass("crownix-sharedialog-h4").appendTo(H);var G=$("<div>").addClass("crownix-sharedialog-listfield-inner").appendTo(H);var F=$("<div>").addClass("crownix-report-list").appendTo(G);var I=$("<div>").addClass("crownix-report-list-header").appendTo(F);var C=$("<div>").addClass("crownix-report-title ").appendTo(I);$("<span>").text(c.get("share_report_title")).appendTo(C);var z=$("<div>").addClass("crownix-report-isPublic").appendTo(I);$("<span>").text(c.get("share_is_public")).appendTo(z);var D=$("<div>").addClass("crownix-report-userCount").appendTo(I);$("<span>").text(c.get("share_user_count")).appendTo(D);var J=$("<div>").addClass("crownix-report-list-body").appendTo(F);var E=$("<div>").addClass("crownix-report-list-footer").appendTo(G);var A=$("<div>").addClass("crownix-report-list-footer-span crownix-span-input").appendTo(E);$("<span>").text(c.get("share_password")).appendTo(A);var B=$("<div>").addClass("crownix-report-list-footer-input crownix-span-input").appendTo(E);var y=$("<input>").attr({type:"password",name:"joinPassword",disabled:"disabled"}).addClass("crownix-sharedialog-input").appendTo(B);var K=$("<div>").addClass("crownix-report-list-footer-button crownix-span-input").appendTo(E);$("<button>").attr({type:"button",id:"joinBtn"}).text(c.get("share_join")).addClass("crownix-sharedialog-button").appendTo(K).on("click",function(){if($(".crownix-report-title-checkbox > input:checked").length===0){t.dialog.show(c.get("share_no_select_report"))}else{if($('input[name="joinPassword"]').attr("disabled")){d()}else{if($('input[name="joinPassword"]').val().length===0){t.dialog.show(c.get("share_need_password"))}else{d()}}}})};var w=function(){var B=$("<div>").addClass("crownix-sharedialog-createfield").appendTo(o);$("<h4>").text(c.get("share_create_title")).addClass("crownix-sharedialog-h4").appendTo(B);var F=$("<div>").addClass("crownix-create-content").appendTo(B);var D=$("<div>").addClass("crownix-create-content-title").appendTo(F);var z=$("<div>").addClass("crownix-create-content-title-span crownix-span-input").appendTo(D);$("<span>").text(c.get("share_report_title")).appendTo(z);var I=$("<div>").addClass("crownix-create-content-title-input crownix-span-input").appendTo(D);$("<input>").attr({type:"text",name:"reportTitle"}).addClass("crownix-sharedialog-input").appendTo(I);var H=$("<div>").addClass("crownix-create-content-isPublic").appendTo(F);var J=$("<div>").addClass("crownix-create-content-isPublic-span crownix-span-input").appendTo(H);$("<span>").text(c.get("share_private")).appendTo(J);var A=$("<div>").addClass("crownix-create-content-isPublic-input crownix-span-input").appendTo(H);$("<input>").attr("type","checkbox").on("change",function(){if(this.checked){$('input[name="createPassword"]').removeAttr("disabled").focus()}else{$('input[name="createPassword"]').attr({disabled:"disabled"}).val("")}}).addClass("crownix-sharedialog-checkbox").appendTo(A);var C=$("<div>").addClass("crownix-create-content-password").appendTo(F);var G=$("<div>").addClass("crownix-create-content-password-span crownix-span-input").appendTo(C);$("<span>").text(c.get("share_password")).appendTo(G);var E=$("<div>").addClass("crownix-create-content-password-input crownix-span-input").appendTo(C);$("<input>").attr({type:"password",name:"createPassword",disabled:"disabled"}).addClass("crownix-sharedialog-input").appendTo(E);var y=$("<div>").addClass("crownix-create-content-password-button crownix-span-input").appendTo(C);$("<button>").attr({type:"button",id:"registerBtn"}).text(c.get("share_create")).addClass("crownix-sharedialog-button").appendTo(y).on("click",function(){if($("input[name=reportTitle]").val().trim()===""){t.dialog.show(c.get("share_need_report_title"));$("input[name=reportTitle]").val("").focus()}else{if($('input[name="createPassword"]').attr("disabled")){k()}else{if($('input[name="createPassword"]').val().length===0){t.dialog.show(c.get("share_need_password"))}else{k()}}}})};var n=function(D,E,y){if(!y){y=1}this.report=$("<div>").attr("id","report-"+D).addClass("crownix-sharedialog-report");var A=$("<div>").addClass("crownix-report-title").appendTo(this.report);var B=$("<div>").addClass("crownix-report-title-checkbox").appendTo(A);$("<input>").attr("type","checkbox").addClass("crownix-sharedialog-checkbox").appendTo(B).on("change",function(){if(this.checked){$(".crownix-report-title-checkbox > input:checked").attr("checked",false);this.checked=true;if(G.text()===c.get("share_private")){$('input[name="joinPassword"]').removeAttr("disabled").focus()}else{$('input[name="joinPassword"]').attr("disabled","disabled").val("")}}else{$('input[name="joinPassword"]').attr("disabled","disabled").val("")}});var F=$("<div>").addClass("crownix-report-title-span").appendTo(A);$("<span>").text(D).appendTo(F);var C=$("<div>").addClass("crownix-report-isPublic").appendTo(this.report);var G=$("<span>").text(E?c.get("share_public"):c.get("share_private")).addClass("isPublic").appendTo(C);var z=$("<div>").addClass("crownix-report-userCount").appendTo(this.report);$("<span>").text(y).addClass("crownix-userCount").appendTo(z);return this.report};var u=function(z){$(".crownix-report-list-body").children().each(function(){$(this).remove()});for(var A=0;A<z.length;A++){var y=new n(z[A].name,z[A].isPublic,z[A].userCount);$(".crownix-report-list-body").append(y);r(y)}};var f=function(B,A){var z=new n(B,A);var y=$(".crownix-report-list-body");y.children().each(function(){if($(this).attr("id").substring(7)>B){$(z).insertBefore(this);return false}});if($(z).parent().length===0){y.append(z)}r(z)};var r=function(y){$(y).children().each(function(){if($(this).is(".crownix-report-title")){$(this).children().each(function(){$(this).css("margin-top",(y.height()/2-$(this).height()/2)+"px")})}else{$(this).css("margin-top",(y.height()/2-$(this).height()/2)+"px")}})};var s=function(y){$('div[id="report-'+y+'"]').remove()};var q=function(A,z){var y=$('div[id="report-'+A+'"] > .crownix-report-userCount > .crownix-userCount').text();$('div[id="report-'+A+'"] > .crownix-report-userCount > .crownix-userCount').text(z?++y:--y)};var d=function(){var z=$(".crownix-report-title-checkbox > input:checked").parent().next().children().text();var y=$("input[name=joinPassword]").val();t.shareManager.joinReport(z,y)};var k=function(){var z=$("input[name=reportTitle]").val();var y=$("input[name=createPassword]").val();t.shareManager.createReport(z,y)};return l})();m2soft.ns("m2soft.crownix.LockControl");m2soft.crownix.LockControl=(function(){var e=m2soft.crownix.Resource;var b=m2soft.crownix.resource.Icon;var j,f,g,h;j=function(l,m){g="#"+l;h=m};j.prototype={createBtnDom:function(){a()},removeBtnDom:function(){k()},relocate:function(){d()},};var a=function(){f=true;var l=$("<div>").attr("id","crownix-share-lock-control").addClass("crownix-share-lock-control").appendTo(g).bind("click tab",c).css("right",($(".iScrollVerticalScrollbar").width()+58)+"px");var m=$("<button>").attr({type:"button",id:"crownix-share-lock-control-button",title:e.get("share_do_unlock")}).addClass("crownix-share-lock-control-button").appendTo(l);$(b.SHARE_LOCK).css("display","none").appendTo(m).fadeIn(500)};var k=function(){$("#crownix-share-lock-control").remove()};var c=function(){var l=$("#crownix-share-lock-control-button");var n;var m;f=!f;if(f){n=e.get("share_do_unlock");m=b.SHARE_LOCK;h.sendLockFields()}else{n=e.get("share_do_lock");m=b.SHARE_UNLOCK;h.sendUnlockFields()}l.attr("title",n).children().remove();$(m).css("display","none").appendTo(l).fadeIn(500)};var d=function(){$(".crownix-share-lock-control").css("right",($(".iScrollVerticalScrollbar").width()+58)+"px")};return j})();m2soft.ns("m2soft.crownix.ShareManager");m2soft.crownix.ShareManager=function(E,n,e){var j=m2soft.crownix.Resource;var L=m2soft.crownix.ShareDialog;var k=m2soft.crownix.LockControl;var C=m2soft.crownix.FieldOrder;var f=m2soft.crownix.Util;var E=E,e=e,m=this,n=n,c,F,z,J,l,I,O={},y,B,h,D=false,t=false,G,q;var H=function(){setTimeout(function(){var Q=I?"Client":"Host";$('[id^="crownix_form_field_"][auth='+Q+"]").filter("input[type=checkbox], input[type=radio], input[type=file], :not(input):not(textarea)").addClass("crownix-auth-lock").attr("disabled",true);$('[id^="crownix_form_field_"][auth='+Q+"]").filter("input[type!=checkbox][type!=radio][type!=file], textarea").addClass("crownix-auth-lock").attr("readonly",true)},0)};var r=function(){setTimeout(function(){if(!I){$('[id^="crownix_form_field_"][auth]').filter("input[type=checkbox], input[type=radio], input[type=file], :not(input):not(textarea)").addClass("crownix-auth-lock").attr("disabled",true);$('[id^="crownix_form_field_"][auth]').filter("input[type!=checkbox][type!=radio][type!=file], textarea").addClass("crownix-auth-lock").attr("readonly",true);if(n.noteManager){n.noteManager.lock()}}},0)};var s=function(){setTimeout(function(){if(!I){var S=$(".crownix-auth-lock[auth=Client], .crownix-auth-lock[auth=All]").removeClass("crownix-auth-lock");for(var R=0;R<S.length;R++){if($(S[R]).hasClass("crownix-formfield-blink-lock")&&$(S[R]).hasClass("crownix-field-lock")){continue}if(S[R].type==="submit"){S[R].disabled=false;continue}var U=S[R].getAttribute("formid")||S[R].getAttribute("formname"),Q=S[R].getAttribute("name");if(S[R].type==="radio"){Q=S[R].getAttribute("buttonid")}var T=n.formManager.getField(U,Q);if(T.getEditable()){if(T.type=="tf"){S[R].readOnly=false}else{$(S[R]).attr("disabled",false)}}}if(n.noteManager){n.noteManager.unlock()}}},0)};var A=function(S,Q){if(S=="cb"||S=="rb"){return}var R;if(S=="im"){R=$("#"+Q+"-canvas")}else{R=$("#"+Q)}if(S=="fl"){R.siblings("input").addClass("crownix-formfield-blink-lock")}R.addClass("crownix-formfield-blink-lock")};var M=function(S,Q){if(S=="cb"||S=="rb"){return}var R;if(S=="im"){R=$("#"+Q+"-canvas")}else{R=$("#"+Q)}if(S=="fl"){R.siblings("input").removeClass("crownix-formfield-blink-lock")}R.removeClass("crownix-formfield-blink-lock")};var d=function(S,Q){if(S=="cb"||S=="rb"){return}var R;if(S=="im"){R=$("#"+Q+"-canvas")}else{R=$("#"+Q)}if(S!=="im"&&S!=="sg"){if(S=="tf"){R.attr("readonly",true)}else{if(S=="fl"){R.siblings("input").attr("disabled",true).addClass("crownix-field-lock");R.attr("disabled",true)}else{R.attr("disabled",true)}}}R.addClass("crownix-field-lock")};var u=function(T,Q,S){if(T=="cb"||T=="rb"){return}var R;if(T=="im"){R=$("#"+Q+"-canvas")}else{R=$("#"+Q)}if(!R.hasClass("crownix-auth-lock")&&S===true){if(T!=="im"&&T!=="sg"){if(T=="tf"){R.attr("readonly",false)}else{if(T=="fl"){R.siblings("input").attr("disabled",false).removeClass("crownix-field-lock");R.attr("disabled",false)}else{R.attr("disabled",false)}}}}R.removeClass("crownix-field-lock")};var N=function(Q){if(Q.type=="scribble"){n.noteManager.addElement(Q.xml,Q.pageNo,Q.pageNo==n.currentPage)}else{if(Q.type=="erase"){n.noteManager.removeElement(Q.xml,Q.pageNo,Q.pageNo==n.currentPage)}else{if(Q.type=="clearElement"){if(Q.pageNo==n.currentPage){n.noteManager.clear(Q.rebuild)}n.noteManager.removeAllElement(Q.pageNo)}else{if(Q.type=="text"){n.noteManager.addElement(Q.xml,Q.pageNo,Q.pageNo==n.currentPage,Q.oldXml);if(Q.pageNo==n.currentPage){n.noteManager.redrawTextBox()}if(h){n.noteManager.setShapeAttribute(h.attr);n.noteManager.setTool(h.tool);n.noteManager.setMode(h.mode);h=undefined}D=false;n.noteManager.enableNote()}else{if(Q.type=="start"){if(Q.pageNo==n.currentPage){D=true}else{return}if(!h){h={attr:$.extend(true,{},n.noteManager.getShapeAttribute()),tool:n.noteManager.getToolName(),mode:n.noteManager.getMode()}}n.noteManager.setTool(Q.tool);n.noteManager.setShapeAttribute(Q.attribute);if(Q.tool=="text"){n.noteManager.disableNote()}else{n.noteManager.draw(Q);P(Q.x,Q.y)}}else{if(Q.type=="clear"){if(Q.pageNo==n.currentPage){n.noteManager.draw(Q)}else{n.noteManager.removeAllElement(Q.pageNo)}}else{if(D){n.noteManager.draw(Q);if(Q.type=="end"){if(h){n.noteManager.setShapeAttribute(h.attr);n.noteManager.setTool(h.tool);n.noteManager.setMode(h.mode);h=undefined}D=false}}}}}}}}};var P=function(V,U){var S=n.containerDom,R=n.scroll,Q=S.scrollLeft(),W=S.scrollTop(),T=S.offset();if(f.browser.mobile||T.left>0||T.top>0){setTimeout(function(){var X=-V,Y=-U+45+$(document).scrollTop();if(X>0){X=0}else{if(X<R.maxScrollX){X=R.maxScrollX}}if(Y>0){Y=0}else{if(Y<R.maxScrollY){Y=R.maxScrollY}}R.scrollToKeepCenter(X,Y,0)},f.browser.mobile?500:0)}};var b=function(R){for(var Q in R){R[Q].forEach(function(S){N(S)})}};var K=function(U){for(var S=0;S<U.formData.formdata.form.length;S++){var T=U.formData.formdata.form[S];for(var Q=0;Q<T.fields.field.length;Q++){var R=T.fields.field[Q];if(R.owner){var V=n.formManager.getField(T.id,R.id);A(V.type,V.elementId);d(V.type,V.elementId)}}}};var a=function(R){if(R.name=="expandDrilldown"||R.name=="collapseDrilldown"){if(R.name=="expandDrilldown"){n.drilldownManager.open(R.id,R.option,true)}else{n.drilldownManager.close(R.id,true)}}else{var S=n.formManager.getField(R.formId,R.fieldId),Q=n.formManager.getFieldWrapper(R.formId,R.fieldId);if(R.name==="label"){Q.setLabel(R.value,true)}else{if(R.name==="editable"){Q.setEditable(R.value,true)}else{if(R.name==="required"){Q.setRequired(R.value,true)}else{if(S.type=="cb"||(S.type=="rb"&&R.name==="selected")){Q.setSelected(R.value,true)}else{if(S.type=="rg"){n.formManager.getFieldWrapper(R.formId,R.value).setSelected(true,true)}else{if(S.type=="co"){S.setValueByIndex(R.value)}else{Q.setValue(R.value,true)}}}}}}}};var o=function(){if(J){c.on("reportList",function(Q){J.addReportList(Q)});c.on("newReport",function(Q){J.addReport(Q.name,Q.isPublic,1)});c.on("renewUserCount",function(Q){J.renewUserCount(Q.name,Q.incCount)});c.on("removeReport",function(Q){J.removeReport(Q)})}c.on("shareError",function(Q){n.dialog.show(j.get(Q.message))});c.on("openFile",function(S){G=function(){if(n.isFormEditMode){n.viewer.importFormData(S.formData)}else{n.drilldownManager["import"](S.formData.drilldownInfo)}if(S.pageNo!=1){n.viewer.movePage(S.pageNo)}else{if(S.isLock){r()}else{s()}}setTimeout(function(){if(n.isFormEditMode){K(S.formData)}b(S.noteData)},0)};if(S.mrd.openMml){if(S.mrd.mml.drilldownInfo){S.mrd.mml.drilldownInfo=undefined}n.viewer.importMML(S.mrd.mml)}else{if(f.isArray(S.mrd.path)){var Q=[];for(var R=0;R<S.mrd.path.length;R++){Q.push({mrdPath:S.mrd.path[R],mrdParam:S.mrd.param[R]})}n.viewer.openFile(Q,S.mrd.options)}else{n.viewer.openFile(S.mrd.path,S.mrd.param,S.mrd.options)}}});c.on("startSharing",function(Q){if(J){J.close()}n.toolbar.toggleShareButton(true);n.viewer.hideToolbarItem(["storage"]);if(Q==="host"){if(!l){l=new k(e,m);l.createBtnDom()}I=true;H()}else{I=false}});c.on("formField",function(R){var S=n.formManager.getField(R.formId,R.fieldId),Q=n.formManager.getFieldWrapper(R.formId,R.fieldId);if(S.type=="cb"){Q.setSelected(R.value,true)}else{if(S.type=="rg"){n.formManager.getFieldWrapper(R.formId,R.value).setSelected(true,true)}else{if(S.type=="co"){S.setValueByIndex(R.value)}else{if(S.type=="fl"){S.setFileName(R.value,"sharing")}else{Q.setValue((R.value===null)?"":R.value,true)}}}}});c.on("focusOn",function(R){var S=n.formManager.getField(R.formId,R.fieldId);A(S.type,S.elementId);d(S.type,S.elementId);if(!I&&R.isLock){var Q=S.elementId;if(S.type=="rg"){Q=S.buttonList[S.selectedId].elementId}C.getInstance().scrollToField($("#"+Q))}});c.on("focusOut",function(Q){var R=n.formManager.getField(Q.formId,Q.fieldId);M(R.type,R.elementId);u(R.type,R.elementId,R.getEditable())});c.on("lockFields",function(){r();c.emit("focusOut");C.getInstance().blur()});c.on("unlockFields",function(){s()});c.on("note",function(Q){N(Q)});c.on("script",function(Q){a(Q)});c.on("movePage",function(Q){if(Q!=n.currentPage){n.viewer.movePage(Q)}});c.on("syncFormData",function(Q){n.viewer.importFormData(Q);c.emit("syncDone");q=n.dialog.message(j.get("submit_formfield"),null,true,n.options.submitMsgPosition)});c.on("submitFinished",function(T){var Q=T.submitFormIds;var U=n.formManager.getFormList();var V=[];for(var S=0;S<Q.length;S++){U[Q[S]].unbindEvent();U[Q[S]].disableEdit();U[Q[S]].isSubmitted=true;var R=U[Q[S]].getFields();for(var W in R){V.push({formId:Q[S],fieldId:W})}}q.fadeOut(500,function(){q.remove()});if(n.formManager.isAllFormSubmitted()){n.toolbar.enableToolbarItem(["save","print","print_pdf"]);n.viewer.setPreventPrintExport(false)}n.emit("submit-finished",T.result);n.formManager.saved();n.dialog.show(j.get("submit_formfield_insert_ok"),null,function(){C.getInstance().removeField(V);C.getInstance().blur();$("[formid="+T.submitFormId+"][fieldid="+T.submitFieldId+"]").removeClass("crownix-dialog-button-action").attr("disabled",true).off()})});c.on("submitFailed",function(){q.fadeOut(500,function(){q.remove()});n.dialog.show(j.get("submit_formfield_insert_fail"))});c.on("hostDoesNotExist",function(Q){c.close();n.dialog.show(j.get(Q))});c.on("connect_timeout",function(){n.dialog.show(j.get("request_timeout_error"))});c.on("reconnect",function(Q){if(O){c.emit("joinReport",{name:O.name,password:O.password,reconnect:true,isHost:I},function(R){O.name=R.name;O.password=R.password})}});c.on("disconnect",function(Q){z.unbindEvent();if(F){clearTimeout(F)}$(window).off("blur focus");if(Q==="transport close"){c.io.reconnect()}else{if(Q==="io client disconnect"&&O.name){n.viewer.initViewer()}else{if(Q==="ping timeout"){if(O.name){n.viewer.initViewer();n.dialog.show(j.get("share_stop_sharing"))}else{J.close()}}else{if(Q==="transport error"){n.dialog.show(j.get("request_server_error"))}}}}});$(window).on("blur",z.setBlurTimeout).on("focus",z.setFocusTimeout);z.setFocusTimeout()};var g=function(){var Q=1000*600*3;var T=function(){if(F){clearTimeout(F)}F=setTimeout(function(){c.close();n.dialog.show(j.get("share_stop_sharing"))},Q)};var S=function(){if(F){clearTimeout(F)}if(!O.name){F=setTimeout(function(){c.close();n.dialog.show(j.get("share_stop_sharing"))},Q)}else{F=setTimeout(function(){var V=setTimeout(function(){$("#aOverlay").remove();$(".crownix-dialog-outer").remove();c.close();n.dialog.show(j.get("share_stop_sharing"))},1000*20);R();n.dialog.show(j.get("share_session_timeout").replace("%s",Q/60000),null,function(){U();clearTimeout(V);S()})},Q)}};var U=function(){$(document).on("mousemove touchend",S)};var R=function(){$(document).off("mousemove touchend",S)};this.setIdleTime=function(V){Q=V};this.getIdleTime=function(){return Q};this.setBlurTimeout=function(){T()};this.setFocusTimeout=function(){S()};this.bindEvent=function(){U()};this.unbindEvent=function(){R()}};var x=function(){if(E&&!E.url){n.dialog.show("no_share_server_url");return false}c=io.connect(E.url,{reconnection:E.reconnection||false,"reconectionDelay ":20000,reconnectionAttempts:3,timeout:E.timeout?E.timeout*1000:20000});if(!z){z=new g()}o();return true};this.disconnect=function(){if(confirm(j.get("share_disconnect_confirm"))){n.toolbar.toggleShareButton(false);if(l){l.removeBtnDom()}c.close()}};this.createReport=function(R,Q){if(!t&&!c&&!x()){return}var S=R.replace(/(^\s*)|(\s*$)/gi,"");var T=/\s/g;if(S.length===0){n.dialog.show(j.get("share_need_report_title"));return}else{if(T.test(Q)){n.dialog.show(j.get("share_not_allowed_space"));return}}if(E.mmlFromServer==undefined){E.mmlFromServer=true}w("createReport",R,Q)};var w=function(T,R,Q){var S={name:R,password:Q,curPage:n.currentPage,mrd:{openMml:E.mmlFromServer},};if(n.isFormEditMode){S.formData=n.viewer.exportFormData({includeExtra:true})}if(E.mmlFromServer){S.mrd.mml=n.viewer.exportMML({includeImage:true})}else{S.mrd.path=n.mrdPath;S.mrd.param=n.mrdParam;S.mrd.options=n.options}if(n.noteManager){S.noteData=JSON.stringify(n.noteManager["export"](n.totalPage))}if(T==="createReport"){c.emit("createReport",S,function(U){O.name=U.name;O.password=U.password;z.bindEvent();z.setFocusTimeout()})}else{c.emit("reopenReport",S);z.bindEvent();z.setFocusTimeout()}};this.joinReport=function(R,Q){if(!t&&!c&&!x()){return}c.emit("joinReport",{name:R,password:Q},function(S){O.name=S.name;O.password=S.password;z.bindEvent();z.setFocusTimeout()})};this.sendFormField=function(Q){if(c){c.emit("formField",Q)}};this.sendFocusOnField=function(R,Q){if(c){c.emit("focusOn",{formId:R,fieldId:Q})}};this.sendFocusOutField=function(){if(c){c.emit("focusOut")}};this.sendLockFields=function(){if(c){c.emit("lockFields")}};this.sendUnlockFields=function(){if(c){c.emit("unlockFields")}};this.sendScript=function(Q){if(c){c.emit("script",Q)}};this.submitRequest=function(S,T,R,Q){y=S;B=T;c.emit("submitRequest",R,function(U){if(U==="done"){Q()}else{n.dialog.show(j.get(U))}})};this.submitFinished=function(R,S){var Q=[];for(var T in S){Q.push(T)}c.emit("submitFinished",{submitFormIds:Q,submitFormId:T,submitFieldId:B,result:R})};this.submitFailed=function(){c.emit("submitFailed");n.dialog.show(j.get("submit_formfield_insert_fail"))};this.showDialog=function(){J=new L(n);if(x()){J.show(c)}};this.isHost=function(){return I};this.isConnected=function(){return c?c.connected:false};this.sendNote=function(Q){if(c){Q.pageNo=n.currentPage;c.emit("note",Q)}};this.movePage=function(Q){if(c){c.emit("movePage",{isHost:I,page:Q})}};this.initFields=function(){if(c){H();if(!I){r();c.emit("isLock",function(){s()})}}};this.unableLicense=function(){t=true};this.relocateLockControl=function(){if(l){l.relocate()}};this.reportFinished=function(){if(I){w("reopenReport")}else{if(G){G()}}};this.sendDrilldownInfo=function(){if(c){var Q;if(n.isFormEditMode){Q=n.viewer.exportFormData({includeExtra:true})}else{Q={drilldownInfo:n.drilldownManager["export"]()}}c.emit("drilldownInfo",Q)}};this.scrollToPos=function(Q,R){P(Q,R)}};m2soft.ns("m2soft.crownix.TextDialog");m2soft.crownix.TextDialog=(function(){var h=m2soft.crownix.Resource;var b=m2soft.crownix.Util;var J=m2soft.crownix.util.Unit;var f=m2soft.crownix.resource.Icon;var X,a,g,O,Z,C,k=[8,10,12,14,16,18,20,22,24,26,28,30],u=["#000000","#808080","#C0C0C0","#FFFFFF","#FFFF00","#00FF00","#00FFFF","#FF00FF","#FF0000","#008000","#0000FF","#000080","#800000","#808000","#008080","#800080"],c,D,K,N,x,F,aa,L,T,I,S,o,W,z;var G=function(){var ai=$("<div>").addClass("crownix-textnote-toolbar").appendTo(X.parentNode);var R=function(al){if(a.width()<$(al).offset().left-a.offset().left+$(al).width()){if(al.offset().top-a.offset().top+al.height()+96>a.height()){al.remove();al=$("<div>").addClass("crownix-textnote-toolbar").prependTo(X.parentNode)}else{if(al.offset().top-a.offset().top+al.height()+96<=a.height()){al.remove();al=$("<div>").addClass("crownix-textnote-toolbar").appendTo(X.parentNode)}}$(al).css({"float":"right"})}else{if(a.width()>=$(al).offset().left-a.offset().left+$(al).width()){if(al.offset().top-a.offset().top+al.height()+96>a.height()){al.remove();al=$("<div>").addClass("crownix-textnote-toolbar").prependTo(X.parentNode)}else{if(al.offset().top-a.offset().top+al.height()+96<=a.height()){al.remove();al=$("<div>").addClass("crownix-textnote-toolbar").appendTo(X.parentNode)}}$(al).css({"float":"left"})}}return al.bind("click",E)};ai=R(ai);var ak=$("<li>").appendTo(ai);c=$("<div>",{text:"B",title:h.get("mask_dialog_bold")}).css("font-weight","bold").bind("click",n).appendTo(ak);var af=$("<li>").appendTo(ai);D=$("<div>",{text:"I",title:h.get("text_italic")}).css("font-style","italic").bind("click",V).appendTo(af);var ab=$("<li>").appendTo(ai);K=$("<div>",{text:"U",title:h.get("text_underline")}).css("text-decoration","underline").bind("click",j).appendTo(ab);var ag=$("<li>").appendTo(ai);N=$("<div>",{text:"S",title:h.get("text_strike")}).css("text-decoration","line-through").bind("click",B).appendTo(ag);$("<div>").addClass("crownix-textnote-separator").appendTo(ai);x=$("<li>").attr("title",h.get("text_fontsize")).appendTo(ai);var aj=$("<select>").data("isClick",false).bind("click",y).bind("change",P).appendTo(x);for(var ae=0,ad=k.length;ae<ad;ae++){$("<option>",{text:k[ae]}).appendTo(aj)}F=$("<li>").attr("title",h.get("text_fontcolor")).prepend(f.FONT_COLOR).bind("click",A).appendTo(ai);$("<div>").addClass("crownix-textnote-separator").appendTo(ai);T=$("<li>").attr("title",h.get("text_align")).prepend(f.LEFT_ALIGN).bind("click",s).appendTo(ai);$("<div>").addClass("crownix-textnote-separator").appendTo(ai);aa=$("<li>").attr("title",h.get("text_outline")).prepend(f.OUTLINE).bind("click",M).appendTo(ai);L=$("<li>").attr("title",h.get("text_background")).prepend(f.BACKGROUND).bind("click",H).appendTo(ai);var ac=$("<div>").addClass("crownix-textnote-colorselector").appendTo(ai);for(var ae=0,ad=u.length;ae<ad;ae++){$("<div>").data("fontColor",u[ae]).css("background-color",u[ae]).bind("click",l).appendTo(ac)}var ah=$("<div>").addClass("crownix-textnote-alignselector").appendTo(ai);o=$("<div>").attr("title",h.get("text_rightalign")).prepend(f.RIGHT_ALIGN).data("align","end").bind("click",t).appendTo(ah);S=$("<div>").attr("title",h.get("text_centeralign")).prepend(f.CENTER_ALIGN).data("align","middle").bind("click",t).appendTo(ah);I=$("<div>").attr("title",h.get("text_leftalign")).prepend(f.LEFT_ALIGN).data("align","start").bind("click",t).appendTo(ah)};var e=function(){var av=$("<div>").addClass("crownix-textnote-dialog-modal").appendTo(g);var ag=$("<div>").addClass("crownix-textnote-dialog").appendTo(av);$("<textarea>").attr("placeholder",h.get("text_placeholder")).appendTo(ag);var R=$("<div>").addClass("crownix-textnote-btnGroup").appendTo(ag);$("<button>",{text:h.get("cancel_button_text")}).addClass("crownix-textnote-dialog-left").bind("click",r).appendTo(R);$("<button>",{text:h.get("text_attr")}).addClass("crownix-textnote-dialog-center").bind("click",w).appendTo(R);$("<button>",{text:h.get("ok_button_text")}).addClass("crownix-textnote-dialog-right").bind("click",q).appendTo(R);var az=$("<div>").addClass("crownix-textEdit-dialog").appendTo(av);$("<div>",{text:h.get("text_attr")}).addClass("crownix-textEdit-title").appendTo(az);var ay=$("<div>").addClass("crownix-textEdit-layout").appendTo(az);var aw=$("<p>",{text:h.get("text_style")}).addClass("crownix-textEdit-subtitle").appendTo(ay);var aA=$("<div>").addClass("crownix-textEdit-contents").appendTo(ay);var ac=$("<li>").appendTo(aA);c=$("<div>",{text:"B"}).css("font-weight","bold").bind("click",n).appendTo(ac);var ae=$("<li>").appendTo(aA);D=$("<div>",{text:"I"}).css("font-style","italic").bind("click",V).appendTo(ae);var ad=$("<li>").appendTo(aA);K=$("<div>",{text:"U"}).css("text-decoration","underline").bind("click",j).appendTo(ad);var ao=$("<li>").appendTo(aA);N=$("<div>",{text:"S"}).css("text-decoration","line-through").bind("click",B).appendTo(ao);var ax=$("<div>").addClass("crownix-textEdit-layout").appendTo(az);var ai=$("<p>",{text:h.get("text_font")}).addClass("crownix-textEdit-subtitle").appendTo(ax);var aj=$("<div>").addClass("crownix-textEdit-font").appendTo(ax);var ab=$("<div>").addClass("crownix-textEdit-fontSize").appendTo(aj);for(var at=0,aq=k.length;at<aq;at++){$("<div>",{text:"Aa"}).data("fontSize",k[at]).css("font-size",k[at]+"pt").bind("click",y).appendTo(ab)}var au=$("<div>").addClass("crownix-textEdit-font").appendTo(ax);var ah=$("<div>").addClass("crownix-textEdit-colorselector-mobile").appendTo(au);for(var at=0,aq=u.length;at<aq;at++){$("<div>").data("fontColor",u[at]).css("background-color",u[at]).bind("click",l).appendTo(ah)}var an=$("<div>").addClass("crownix-textEdit-layout").appendTo(az);var ap=$("<p>",{text:h.get("text_align")}).addClass("crownix-textEdit-subtitle").appendTo(an);var ar=$("<div>").addClass("crownix-textEdit-contents").appendTo(an);I=$("<li>").prepend(f.LEFT_ALIGN).data("align","start").bind("click",t).appendTo(ar);S=$("<li>").prepend(f.CENTER_ALIGN).data("align","middle").bind("click",t).appendTo(ar);o=$("<li>").prepend(f.RIGHT_ALIGN).data("align","end").bind("click",t).appendTo(ar);var af=$("<div>").addClass("crownix-textEdit-layout").appendTo(az);var al=$("<p>",{text:h.get("textnote_format")}).addClass("crownix-textEdit-subtitle").appendTo(af);var ak=$("<div>").addClass("crownix-textEdit-contents").appendTo(af);aa=$("<li>").prepend(f.OUTLINE).bind("click",M).appendTo(ak);L=$("<li>").prepend(f.BACKGROUND).data("isTransparent",false).bind("click",H).appendTo(ak);var am=$("<div>").addClass("crownix-textnote-btnGroup").appendTo(az);$("<button>",{text:h.get("cancel_button_text")}).addClass("crownix-textnote-dialog-left").bind("click",Y).appendTo(am);$("<button>",{text:h.get("ok_button_text")}).addClass("crownix-textnote-dialog-right").bind("click",m).appendTo(am)};var d=function(ad,ac,ab,R){g=ad;O=ac;Z=ab;C=R};d.prototype={showDialog:function(R,ab){Z();e();W=$(".crownix-textnote-dialog-modal textarea");X=R;z=ab;$(".crownix-textnote-dialog-modal").fadeIn();$(".crownix-textnote-dialog").fadeIn();W.focus();if(z.text!="\200"){W.val(z.text)}else{W.val("")}Q(X)},showToolbar:function(ab,R){X=ab;a=R;G();Q(X)},destroyDialog:function(){$(".crownix-textnote-dialog-modal").remove()}};var E=function(R){if(R.target.nodeName=="SELECT"){return}$(X).focus()};var n=function(R){if(!b.browser.mobile){$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut()}if(c.hasClass("button-selected")){$(X).css("font-weight","");c.removeClass("button-selected")}else{$(X).css("font-weight","bold");c.addClass("button-selected")}};var V=function(R){if(!b.browser.mobile){$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut()}if(D.hasClass("button-selected")){$(X).css("font-style","");D.removeClass("button-selected")}else{$(X).css("font-style","italic");D.addClass("button-selected")}};var j=function(R){if(!b.browser.mobile){$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut()}if(K.hasClass("button-selected")){$(X).attr("text-decoration","");$(X).css("text-decoration","");K.removeClass("button-selected")}else{$(X).attr("text-decoration","underline");$(X).css("text-decoration","underline");K.addClass("button-selected");N.removeClass("button-selected")}};var B=function(R){if(!b.browser.mobile){$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut()}if(N.hasClass("button-selected")){$(X).attr("text-decoration","");$(X).css("text-decoration","");N.removeClass("button-selected")}else{$(X).attr("text-decoration","line-through");$(X).css("text-decoration","line-through");N.addClass("button-selected");K.removeClass("button-selected")}};var A=function(R){$(".crownix-textnote-alignselector").fadeOut(function(){if($(".crownix-textnote-colorselector").css("display")=="none"){$(".crownix-textnote-colorselector").fadeIn();$(".crownix-textnote-colorselector").css("zIndex",1)}else{$(".crownix-textnote-colorselector").fadeOut();$(".crownix-textnote-colorselector").css("zIndex","")}})};var l=function(ab){if(!b.browser.mobile){$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut()}var R=ab?$(ab.target).data("fontColor"):$(X).css("color");$(X).css("color",R);if(!b.browser.mobile){$(".crownix-textnote-fontcolor").css({stroke:R})}else{$(".crownix-textEdit-colorselector-mobile div").removeClass("fontColor-selected");$(ab.target).addClass("fontColor-selected");F=$(ab.target)}};var M=function(R){if(!b.browser.mobile){$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut()}if(aa.hasClass("button-selected")){$(X).css("border","");$(X).attr("border","");aa.removeClass("button-selected")}else{$(X).css("border","solid #000000");$(X).attr("border","solid #000000");aa.addClass("button-selected")}};var H=function(R){if(!b.browser.mobile){$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut()}if(L.hasClass("button-selected")){$(X).css("background-color","");$(X).attr("background-color","");L.removeClass("button-selected")}else{$(X).css("background-color","transparent");$(X).attr("background-color","transparent");L.addClass("button-selected")}};var s=function(R){if(!b.browser.mobile){$(".crownix-textnote-colorselector").fadeOut(function(){if($(".crownix-textnote-alignselector").css("display")=="none"){$(".crownix-textnote-alignselector").fadeIn();$(".crownix-textnote-alignselector").css("zIndex",1)}else{$(".crownix-textnote-alignselector").fadeOut();$(".crownix-textnote-alignselector").css("zIndex","")}})}};var t=function(R){if(!b.browser.mobile){$(".crownix-textnote-alignselector").fadeOut()}I.removeClass("button-selected");S.removeClass("button-selected");o.removeClass("button-selected");$(R.currentTarget).addClass("button-selected");if($(R.currentTarget).data("align")=="start"){$(X).css("text-align","left");if(T){T.children("svg").remove();T.prepend(f.LEFT_ALIGN)}}else{if($(R.currentTarget).data("align")=="middle"){$(X).css("text-align","center");if(T){T.children("svg").remove();T.prepend(f.CENTER_ALIGN)}}else{if($(R.currentTarget).data("align")=="end"){$(X).css("text-align","right");if(T){T.children("svg").remove();T.prepend(f.RIGHT_ALIGN)}}}}$(X).val($(X).val())};var y=function(R){if(!b.browser.mobile){$(".crownix-textnote-colorselector, .crownix-textnote-alignselector").fadeOut();if($(R.currentTarget).data("isClick")){$(R.currentTarget).data("isClick",false);$(X).focus()}else{$(R.currentTarget).data("isClick",true)}}else{$(X).css("font-size",$(R.currentTarget).data("fontSize")+"pt");x=$(R.currentTarget);$(".crownix-textEdit-fontSize div").removeClass("fontSize-selected");$(R.currentTarget).addClass("fontSize-selected")}};var P=function(R){$(X).css("font-size",R.target.value+"pt");$(X).focus()};var U=function(){if(!b.browser.mobile){return}if(c.hasClass("button-selected")){W.css("font-weight","bold")}else{W.css("font-weight","")}if(D.hasClass("button-selected")){W.css("font-style","italic")}else{W.css("font-style","")}if(K.hasClass("button-selected")){W.css("text-decoration","underline")}else{if(N.hasClass("button-selected")){W.css("text-decoration","line-through")}else{W.css("text-decoration","none")}}if(aa.hasClass("button-selected")){W.css("border","solid #000000");W.attr("border","solid #000000")}else{W.css("border","none");W.attr("border","none")}if(L.hasClass("button-selected")){W.css("background-color","transparent");W.attr("background-color","transparent")}else{W.css("background-color","");W.attr("background-color","")}if(S.hasClass("button-selected")){W.css("text-align","center")}else{if(o.hasClass("button-selected")){W.css("text-align","right")}else{W.css("text-align","left")}}W.css("font-size",x.data("fontSize")+"pt");W.css("color",F.data("fontColor"))};var Q=function(ag){if($(ag).css("font-weight")=="bold"){c.addClass("button-selected")}else{c.removeClass("button-selected")}if($(ag).css("font-style")=="italic"){D.addClass("button-selected")}else{D.removeClass("button-selected")}if($(ag).css("text-decoration")=="underline"){K.addClass("button-selected")}else{K.removeClass("button-selected")}if($(ag).css("text-decoration")=="line-through"){N.addClass("button-selected")}else{N.removeClass("button-selected")}if($(ag).css("border").indexOf("solid")!=-1){aa.addClass("button-selected")}else{aa.removeClass("button-selected")}if($(ag).attr("background-color")=="transparent"){L.addClass("button-selected")}else{L.removeClass("button-selected")}o.removeClass("button-selected");I.removeClass("button-selected");S.removeClass("button-selected");if(T){T.children("svg").remove()}if($(ag).css("text-align")=="center"){S.addClass("button-selected");if(T){T.prepend(f.CENTER_ALIGN)}}else{if($(ag).css("text-align")=="right"){o.addClass("button-selected");if(T){T.prepend(f.RIGHT_ALIGN)}}else{I.addClass("button-selected");if(T){T.prepend(f.LEFT_ALIGN)}}}var ab=parseInt($(ag).css("font-size")?Math.round(J.pxToPt(parseInt($(ag).css("font-size")))):"12");if(!b.browser.mobile){x.children("select").val(ab)}else{x=null;for(var ad=0,ac=$(".crownix-textEdit-fontSize div").length;ad<ac;ad++){var af=$(".crownix-textEdit-fontSize div")[ad];$(af).removeClass("fontSize-selected");if($(af).data("fontSize")==ab){$(af).addClass("fontSize-selected");x=$(af)}}if(!x){x=$(".crownix-textEdit-fontSize");x.data("fontSize",ab)}}if(!b.browser.mobile){l()}else{var R=$(ag).css("color")?Raphael.color($(ag).css("color")).hex:"#000000";for(var ad=0,ac=$(".crownix-textEdit-colorselector-mobile div").length;ad<ac;ad++){var ae=$(".crownix-textEdit-colorselector-mobile div")[ad];$(ae).removeClass("fontColor-selected");if($(ae).data("fontColor").toLowerCase()==R.toLowerCase()){$(ae).addClass("fontColor-selected");F=$(ae)}}}U()};var r=function(){$(".crownix-textnote-dialog-modal").fadeOut();$(".crownix-textEdit-dialog").fadeOut();$(".crownix-textnote-dialog-modal").remove();C()};var w=function(){$(".crownix-textnote-dialog").fadeOut(function(){$(".crownix-textEdit-dialog").fadeIn();Q(W)})};var m=function(){$(".crownix-textEdit-dialog").fadeOut(function(){$(".crownix-textnote-dialog").fadeIn();W.focus();U()})};var q=function(){$(".crownix-textnote-dialog-modal").fadeOut();$(".crownix-textEdit-dialog").fadeOut();O.textareaToSvg(z,W);$(".crownix-textnote-dialog-modal").remove()};var Y=function(){$(".crownix-textEdit-dialog").fadeOut(function(){$(".crownix-textnote-dialog").fadeIn();W.focus()})};return d})();m2soft.ns("m2soft.crownix.Runtime");m2soft.crownix.Runtime=function(){var a=[];this.addColumn=function(b,d,c){a.push({objectName:b,width:d,option:c,cellInfos:[]});return this};this.addCell=function(d,j,c,g,h,f,e,b){a[a.length-1].cellInfos.push({index:d,title:j,variable:c,summarize:g,command:h,attribute:f,option:e,refField:b});return this};this.toJson=function(){if(a.length>0){return JSON.stringify({columnInfos:a})}else{return""}}};m2soft.ns("m2soft.crownix.Forgery");(function(){var a=m2soft.crownix.Forgery;var d=function(f,e){var g=$(f);if(g.hasClass("crownix-pagenum")){return true}if(f.tagName=="svg"||g.parents("svg").length>0){return true}if(f.tagName=="A"||f.tagName=="a"){return true}if((f.id&&f.id==="m2soft-crownix-normal-button")||((f.tagName.toLowerCase()==="img"||f.tagName.toLowerCase()==="span")&&f.parentElement&&f.parentElement.id==="m2soft-crownix-normal-button")||(f.id&&f.id==="m2soft-crownix-normal-combo")){return true}if(e){return(f.id&&f.id.indexOf("crownix_form_field_")==0)||g.parents('[id^="crownix_form_field_"]').length>0||(g.attr("for")&&g.attr("for").indexOf("crownix_form_field_")==0)||g.parents('[for^="crownix_form_field_"]').length>0||f.id&&f.id==="m2soft-crownix-field-wrapper"}else{return false}};var b=function(k){if(d(k.target,k.data.isFormEdit)){return}var o="\u004e\u006f\u0074 \u0041\u0070\u0070\u0072\u006f\u0076\u0065\u0064",q=k.data.text,g=q.width(),m=q.height(),n=Math.min(g,m)/8,l="#CB1111",h=k.data.canvas,f=h.getContext("2d");var j=$("<div>").attr({id:"crownix-forgery-mark",}).css({position:"absolute",color:l,"font-family":"Arial","font-size":n+"px",transform:"rotate(330deg)",}).text(o);q.off("DOMSubtreeModified");j.appendTo(q);j.css({left:g/2-j.width()/2+"px",top:m/2-j.height()/2+"px",});f.save();f.translate(g/2,m/2);f.rotate(11/6*Math.PI);f.font=n+"px Arial";f.textAlign="center";f.textBaseline="middle";f.fillStyle=l;f.fillText(o,0,0);f.restore();a.detect(q,h,k.data.isFormEdit)};var c;m2soft.crownix.Forgery.detect=function(g,f,e){clearTimeout(c);c=setTimeout(function(){var h=$._data(g[0],"events");if(!h||!h.DOMSubtreeModified){g.on("DOMSubtreeModified",{text:g,canvas:f,isFormEdit:e},b)}},1000);return c}})();!function(x){var w,u,t="0.4.2",s="hasOwnProperty",r=/[\.\/]/,q="*",o=function(){},n=function(d,c){return d-c},m={n:{}},l=function(H,G){H=String(H);var F,E=u,D=Array.prototype.slice.call(arguments,2),C=l.listeners(H),B=0,A=[],z={},y=[],k=w;w=H,u=0;for(var c=0,b=C.length;b>c;c++){"zIndex" in C[c]&&(A.push(C[c].zIndex),C[c].zIndex<0&&(z[C[c].zIndex]=C[c]))}for(A.sort(n);A[B]<0;){if(F=z[A[B++]],y.push(F.apply(G,D)),u){return u=E,y}}for(c=0;b>c;c++){if(F=C[c],"zIndex" in F){if(F.zIndex==A[B]){if(y.push(F.apply(G,D)),u){break}do{if(B++,F=z[A[B]],F&&y.push(F.apply(G,D)),u){break}}while(F)}else{z[F.zIndex]=F}}else{if(y.push(F.apply(G,D)),u){break}}}return u=E,w=k,y.length?y:null};l._events=m,l.listeners=function(H){var G,F,E,D,C,B,A,z,y=H.split(r),j=m,g=[j],f=[];for(D=0,C=y.length;C>D;D++){for(z=[],B=0,A=g.length;A>B;B++){for(j=g[B].n,F=[j[y[D]],j[q]],E=2;E--;){G=F[E],G&&(z.push(G),f=f.concat(G.f||[]))}}g=z}return f},l.on=function(h,f){if(h=String(h),"function"!=typeof f){return function(){}}for(var z=h.split(r),y=m,k=0,j=z.length;j>k;k++){y=y.n,y=y.hasOwnProperty(z[k])&&y[z[k]]||(y[z[k]]={n:{}})}for(y.f=y.f||[],k=0,j=y.f.length;j>k;k++){if(y.f[k]==f){return o}}return y.f.push(f),function(b){+b==+b&&(f.zIndex=+b)}},l.f=function(d){var c=[].slice.call(arguments,1);return function(){l.apply(null,[d,null].concat(c).concat([].slice.call(arguments,0)))}},l.stop=function(){u=1},l.nt=function(b){return b?new RegExp("(?:\\.|\\/|^)"+b+"(?:\\.|\\/|$)").test(w):w},l.nts=function(){return w.split(r)},l.off=l.unbind=function(E,D){if(!E){return l._events=m={n:{}},void 0}var C,B,A,z,y,k,j,g=E.split(r),f=[m];for(z=0,y=g.length;y>z;z++){for(k=0;k<f.length;k+=A.length-2){if(A=[k,1],C=f[k].n,g[z]!=q){C[g[z]]&&A.push(C[g[z]])}else{for(B in C){C[s](B)&&A.push(C[B])}}f.splice.apply(f,A)}}for(z=0,y=f.length;y>z;z++){for(C=f[z];C.n;){if(D){if(C.f){for(k=0,j=C.f.length;j>k;k++){if(C.f[k]==D){C.f.splice(k,1);break}}!C.f.length&&delete C.f}for(B in C.n){if(C.n[s](B)&&C.n[B].f){var e=C.n[B].f;for(k=0,j=e.length;j>k;k++){if(e[k]==D){e.splice(k,1);break}}!e.length&&delete C.n[B].f}}}else{delete C.f;for(B in C.n){C.n[s](B)&&C.n[B].f&&delete C.n[B].f}}C=C.n}}},l.once=function(e,d){var f=function(){return l.unbind(e,f),d.apply(this,arguments)};return l.on(e,f)},l.version=t,l.toString=function(){return"You are running Eve "+t},"undefined"!=typeof module&&module.exports?module.exports=l:"undefined"!=typeof define?define("eve",[],function(){return l}):x.eve=l}(this),function(d,c){"function"==typeof define&&define.amd?define(["eve"],function(a){return c(d,a)}):c(d,d.eve)}(this,function(a8,a7){function a6(b){if(a6.is(b,"function")){return aG?b():a7.on("raphael.DOMload",b)}if(a6.is(b,bj)){return a6._engine.create[bK](a6,b.splice(0,3+a6.is(b[0],bl))).add(b)}var f=Array.prototype.slice.call(arguments,0);if(a6.is(f[f.length-1],"function")){var c=f.pop();return aG?c.call(a6._engine.create[bK](a6,f)):a7.on("raphael.DOMload",function(){c.call(a6._engine.create[bK](a6,f))})}return a6._engine.create[bK](a6,arguments)}function a5(e){if("function"==typeof e||Object(e)!==e){return e}var d=new e.constructor;for(var f in e){e[aA](f)&&(d[f]=a5(e[f]))}return d}function a2(f,e){for(var h=0,g=f.length;g>h;h++){if(f[h]===e){return f.push(f.splice(h,1)[0])}}}function a1(f,e,h){function g(){var d=Array.prototype.slice.call(arguments,0),c=d.join("␀"),b=g.cache=g.cache||{},a=g.count=g.count||[];return b[aA](c)?(a2(a,c),h?h(b[c]):b[c]):(a.length>=1000&&delete b[a.shift()],a.push(c),b[c]=f[bK](e,d),h?h(b[c]):b[c])}return g}function aZ(){return this.hex}function aY(h,g){for(var m=[],l=0,k=h.length;k-2*!g>l;l+=2){var j=[{x:+h[l-2],y:+h[l-1]},{x:+h[l],y:+h[l+1]},{x:+h[l+2],y:+h[l+3]},{x:+h[l+4],y:+h[l+5]}];g?l?k-4==l?j[3]={x:+h[0],y:+h[1]}:k-2==l&&(j[2]={x:+h[0],y:+h[1]},j[3]={x:+h[2],y:+h[3]}):j[0]={x:+h[k-2],y:+h[k-1]}:k-4==l?j[3]=j[2]:l||(j[0]={x:+h[l],y:+h[l+1]}),m.push(["C",(-j[0].x+6*j[1].x+j[2].x)/6,(-j[0].y+6*j[1].y+j[2].y)/6,(j[1].x+6*j[2].x-j[3].x)/6,(j[1].y+6*j[2].y-j[3].y)/6,j[2].x,j[2].y])}return m}function aX(j,h,o,n,m){var l=-3*h+9*o-9*n+3*m,k=j*l+6*h-12*o+6*n;return j*k-3*h+3*o}function aU(N,M,L,K,J,I,H,G,F){null==F&&(F=1),F=F>1?1:0>F?0:F;for(var E=F/2,D=12,C=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],B=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],A=0,z=0;D>z;z++){var y=E*C[z]+E,x=aX(y,N,L,J,H),w=aX(y,M,K,I,G),u=x*x+w*w;A+=B[z]*bt.sqrt(u)}return E*A}function aT(D,C,B,A,z,y,x,w,u){if(!(0>u||aU(D,C,B,A,z,y,x,w)<u)){var t,s=1,r=s/2,q=s-r,j=0.01;for(t=aU(D,C,B,A,z,y,x,w,q);bp(t-u)>j;){r/=2,q+=(u>t?1:-1)*r,t=aU(D,C,B,A,z,y,x,w,q)}return q}}function aR(F,E,D,C,B,A,z,y){if(!(bs(F,D)<br(B,z)||br(F,D)>bs(B,z)||bs(E,C)<br(A,y)||br(E,C)>bs(A,y))){var x=(F*C-E*D)*(B-z)-(F-D)*(B*y-A*z),w=(F*C-E*D)*(A-y)-(E-C)*(B*y-A*z),u=(F-D)*(A-y)-(E-C)*(B-z);if(u){var t=x/u,s=w/u,r=+t.toFixed(2),q=+s.toFixed(2);if(!(r<+br(F,D).toFixed(2)||r>+bs(F,D).toFixed(2)||r<+br(B,z).toFixed(2)||r>+bs(B,z).toFixed(2)||q<+br(E,C).toFixed(2)||q>+bs(E,C).toFixed(2)||q<+br(A,y).toFixed(2)||q>+bs(A,y).toFixed(2))){return{x:t,y:s}}}}}function aQ(X,W,V){var U=a6.bezierBBox(X),T=a6.bezierBBox(W);if(!a6.isBBoxIntersect(U,T)){return V?0:[]}for(var S=aU.apply(0,X),R=aU.apply(0,W),Q=bs(~~(S/5),1),P=bs(~~(R/5),1),O=[],N=[],M={},L=V?0:[],J=0;Q+1>J;J++){var H=a6.findDotsAtSegment.apply(a6,X.concat(J/Q));O.push({x:H.x,y:H.y,t:J/Q})}for(J=0;P+1>J;J++){H=a6.findDotsAtSegment.apply(a6,W.concat(J/P)),N.push({x:H.x,y:H.y,t:J/P})}for(J=0;Q>J;J++){for(var G=0;P>G;G++){var F=O[J],E=O[J+1],D=N[G],C=N[G+1],l=bp(E.x-F.x)<0.001?"y":"x",j=bp(C.x-D.x)<0.001?"y":"x",c=aR(F.x,F.y,E.x,E.y,D.x,D.y,C.x,C.y);if(c){if(M[c.x.toFixed(4)]==c.y.toFixed(4)){continue}M[c.x.toFixed(4)]=c.y.toFixed(4);var K=F.t+bp((c[l]-F[l])/(E[l]-F[l]))*(E.t-F.t),I=D.t+bp((c[j]-D[j])/(C[j]-D[j]))*(C.t-D.t);K>=0&&1.001>=K&&I>=0&&1.001>=I&&(V?L++:L.push({x:c.x,y:c.y,t1:br(K,1),t2:br(I,1)}))}}}return L}function aP(T,S,R){T=a6._path2curve(T),S=a6._path2curve(S);for(var Q,P,O,N,M,L,K,J,I,H,G=R?0:[],F=0,E=T.length;E>F;F++){var D=T[F];if("M"==D[0]){Q=M=D[1],P=L=D[2]}else{"C"==D[0]?(I=[Q,P].concat(D.slice(1)),Q=I[6],P=I[7]):(I=[Q,P,Q,P,M,L,M,L],Q=M,P=L);for(var C=0,B=S.length;B>C;C++){var A=S[C];if("M"==A[0]){O=K=A[1],N=J=A[2]}else{"C"==A[0]?(H=[O,N].concat(A.slice(1)),O=H[6],N=H[7]):(H=[O,N,O,N,K,J,K,J],O=K,N=J);var z=aQ(I,H,R);if(R){G+=z}else{for(var m=0,c=z.length;c>m;m++){z[m].segment1=F,z[m].segment2=C,z[m].bez1=I,z[m].bez2=H}G=G.concat(z)}}}}}return G}function aN(h,g,m,l,k,j){null!=h?(this.a=+h,this.b=+g,this.c=+m,this.d=+l,this.e=+k,this.f=+j):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function aM(){return this.x+bC+this.y+bC+this.width+" × "+this.height}function aK(F,E,D,C,B,A){function z(b){return((t*b+u)*b+w)*b}function y(e,d){var f=x(e,d);return((q*f+r)*f+s)*f}function x(j,g){var G,o,n,m,l,k;for(n=j,k=0;8>k;k++){if(m=z(n)-j,bp(m)<g){return n}if(l=(3*t*n+2*u)*n+w,bp(l)<0.000001){break}n-=m/l}if(G=0,o=1,n=j,G>n){return G}if(n>o){return o}for(;o>G;){if(m=z(n),bp(m-j)<g){return n}j>m?G=n:o=n,n=(o-G)/2+G}return n}var w=3*E,u=3*(C-E)-w,t=1-w-u,s=3*D,r=3*(B-D)-s,q=1-s-r;return y(F,1/(200*A))}function aJ(g,f){var k=[],j={};if(this.ms=f,this.times=1,g){for(var h in g){g[aA](h)&&(j[bd(h)]=g[h],k.push(bd(h)))}k.sort(ca)}this.anim=j,this.top=k[k.length-1],this.percents=k}function aI(cp,co,cn,cm,cl,ck){cn=bd(cn);var cj,ci,ch,cg,cc,cb,bc=cp.ms,ab={},Y={},W={};if(cm){for(T=0,J=aS.length;J>T;T++){var V=aS[T];if(V.el.id==co.id&&V.anim==cp){V.percent!=cn?(aS.splice(T,1),ch=1):ci=V,co.attr(V.totalOrigin);break}}}else{cm=+Y}for(var T=0,J=cp.percents.length;J>T;T++){if(cp.percents[T]==cn||cp.percents[T]>cm*cp.top){cn=cp.percents[T],cc=cp.percents[T-1]||0,bc=bc/cp.top*(cn-cc),cg=cp.percents[T+1],cj=cp.anim[cn];break}cm&&co.attr(cp.anim[cp.percents[T]])}if(cj){if(ci){ci.initstatus=cm,ci.start=new Date-ci.ms*cm}else{for(var I in cj){if(cj[aA](I)&&(ar[aA](I)||co.paper.customAttributes[aA](I))){switch(ab[I]=co.attr(I),null==ab[I]&&(ab[I]=aO[I]),Y[I]=cj[I],ar[I]){case bl:W[I]=(Y[I]-ab[I])/bc;break;case"colour":ab[I]=a6.getRGB(ab[I]);var bb=a6.getRGB(Y[I]);W[I]={r:(bb.r-ab[I].r)/bc,g:(bb.g-ab[I].g)/bc,b:(bb.b-ab[I].b)/bc};break;case"path":var ac=ax(ab[I],Y[I]),Z=ac[1];for(ab[I]=ac[0],W[I]=[],T=0,J=ab[I].length;J>T;T++){W[I][T]=[0];for(var X=1,U=ab[I][T].length;U>X;X++){W[I][T][X]=(Z[T][X]-ab[I][T][X])/bc}}break;case"transform":var S=co._,R=ba(S[I],Y[I]);if(R){for(ab[I]=R.from,Y[I]=R.to,W[I]=[],W[I].real=!0,T=0,J=ab[I].length;J>T;T++){for(W[I][T]=[ab[I][T][0]],X=1,U=ab[I][T].length;U>X;X++){W[I][T][X]=(Y[I][T][X]-ab[I][T][X])/bc}}}else{var E=co.matrix||new aN,z={_:{transform:S.transform},getBBox:function(){return co.getBBox(1)}};ab[I]=[E.a,E.b,E.c,E.d,E.e,E.f],b2(z,Y[I]),Y[I]=z._.transform,W[I]=[(z.matrix.a-E.a)/bc,(z.matrix.b-E.b)/bc,(z.matrix.c-E.c)/bc,(z.matrix.d-E.d)/bc,(z.matrix.e-E.e)/bc,(z.matrix.f-E.f)/bc]}break;case"csv":var w=bB(cj[I])[bA](aE),q=bB(ab[I])[bA](aE);if("clip-rect"==I){for(ab[I]=q,W[I]=[],T=q.length;T--;){W[I][T]=(w[T]-ab[I][T])/bc}}Y[I]=w;break;default:for(w=[][bI](cj[I]),q=[][bI](ab[I]),W[I]=[],T=co.paper.customAttributes[I].length;T--;){W[I][T]=((w[T]||0)-(q[T]||0))/bc}}}}var o=cj.easing,c=a6.easing_formulas[o];if(!c){if(c=bB(o).match(bf),c&&5==c.length){var b=c;c=function(d){return aK(d,+b[1],+b[2],+b[3],+b[4],bc)}}else{c=bG}}if(cb=cj.start||cp.start||+new Date,V={anim:cp,percent:cn,timestamp:cb,start:cb+(cp.del||0),status:0,initstatus:cm||0,stop:!1,ms:bc,easing:c,from:ab,diff:W,to:Y,el:co,callback:cj.callback,prev:cc,next:cg,repeat:ck||cp.times,origin:co.attr(),totalOrigin:cl},aS.push(V),cm&&!ci&&!ch&&(V.stop=!0,V.start=new Date-bc*cm,1==aS.length)){return ai()}ch&&(V.start=new Date-V.ms*cm),1==aS.length&&at(ai)}a7("raphael.anim.start."+co.id,co,cp)}}function aH(d){for(var c=0;c<aS.length;c++){aS[c].el.paper==d&&aS.splice(c--,1)}}a6.version="2.1.2",a6.eve=a7;var aG,aF,aE=/[, ]+/,aD={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},aC=/\{(\d+)\}/g,aA="hasOwnProperty",bO={doc:document,win:a8},bM={was:Object.prototype[aA].call(bO.win,"Raphael"),is:bO.win.Raphael},bL=function(){this.ca=this.customAttributes={}},bK="apply",bI="concat",bF="ontouchstart" in bO.win||bO.win.DocumentTouch&&bO.doc instanceof DocumentTouch,bE="",bC=" ",bB=String,bA="split",bx="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[bA](bC),bw={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},bu=bB.prototype.toLowerCase,bt=Math,bs=bt.max,br=bt.min,bp=bt.abs,bn=bt.pow,bm=bt.PI,bl="number",bk="string",bj="array",bi=Object.prototype.toString,bh=(a6._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),bg={NaN:1,Infinity:1,"-Infinity":1},bf=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,b0=bt.round,bd=parseFloat,bT=parseInt,bq=bB.prototype.toUpperCase,aO=a6._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ar=a6._availableAnimAttrs={blur:bl,"clip-rect":"csv",cx:bl,cy:bl,fill:"colour","fill-opacity":bl,"font-size":bl,height:bl,opacity:bl,path:"path",r:bl,rx:bl,ry:bl,stroke:"colour","stroke-opacity":bl,"stroke-width":bl,transform:"transform",width:bl,x:bl,y:bl},ah=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,b7={hs:1,rg:1},bV=/,?([achlmqrstvxz]),?/gi,by=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,aV=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,au=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,aj=(a6._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ca=function(d,c){return bd(d)-bd(c)},bY=function(){},bG=function(b){return b},a3=a6._rectPath=function(g,f,k,j,h){return h?[["M",g+h,f],["l",k-2*h,0],["a",h,h,0,0,1,h,h],["l",0,j-2*h],["a",h,h,0,0,1,-h,h],["l",2*h-k,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-j],["a",h,h,0,0,1,h,-h],["z"]]:[["M",g,f],["l",k,0],["l",0,j],["l",-k,0],["z"]]},aw=function(f,e,h,g){return null==g&&(g=h),[["M",f,e],["m",0,-g],["a",h,g,0,1,1,0,2*g],["a",h,g,0,1,1,0,-2*g],["z"]]},al=a6._getPath={path:function(b){return b.attr("path")},circle:function(d){var c=d.attrs;return aw(c.cx,c.cy,c.r)},ellipse:function(d){var c=d.attrs;return aw(c.cx,c.cy,c.rx,c.ry)},rect:function(d){var c=d.attrs;return a3(c.x,c.y,c.width,c.height,c.r)},image:function(d){var c=d.attrs;return a3(c.x,c.y,c.width,c.height)},text:function(d){var c=d._getBBox();return a3(c.x,c.y,c.width,c.height)},set:function(d){var c=d._getBBox();return a3(c.x,c.y,c.width,c.height)}},ce=a6.mapPath=function(s,r){if(!r){return s}var q,o,n,m,l,k,j;for(s=ax(s),n=0,l=s.length;l>n;n++){for(j=s[n],m=1,k=j.length;k>m;m+=2){q=r.x(j[m],j[m+1]),o=r.y(j[m],j[m+1]),j[m]=q,j[m+1]=o}}return s};if(a6._g=bO,a6.type=bO.win.SVGAngle||bO.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==a6.type){var b1,bN=bO.doc.createElement("div");if(bN.innerHTML='<v:shape adj="1"/>',b1=bN.firstChild,b1.style.behavior="url(#default#VML)",!b1||"object"!=typeof b1.adj){return a6.type=bE}bN=null}a6.svg=!(a6.vml="VML"==a6.type),a6._Paper=bL,a6.fn=aF=bL.prototype=a6.prototype,a6._id=0,a6._oid=0,a6.is=function(d,c){return c=bu.call(c),"finite"==c?!bg[aA](+d):"array"==c?d instanceof Array:"null"==c&&null===d||c==typeof d&&null!==d||"object"==c&&d===Object(d)||"array"==c&&Array.isArray&&Array.isArray(d)||bi.call(d).slice(8,-1).toLowerCase()==c},a6.angle=function(j,c,q,o,n,m){if(null==n){var l=j-q,k=c-o;return l||k?(180+180*bt.atan2(-k,-l)/bm+360)%360:0}return a6.angle(j,c,n,m)-a6.angle(q,o,n,m)},a6.rad=function(b){return b%360*bm/180},a6.deg=function(b){return 180*b/bm%360},a6.snapTo=function(g,c,k){if(k=a6.is(k,"finite")?k:10,a6.is(g,bj)){for(var j=g.length;j--;){if(bp(g[j]-c)<=k){return g[j]}}}else{g=+g;var h=c%g;if(k>h){return c-h}if(h>g-k){return c-h+g}}return c},a6.createUUID=function(d,c){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(d,c).toUpperCase()}}(/[xy]/g,function(e){var d=0|16*bt.random(),f="x"==e?d:8|3&d;return f.toString(16)}),a6.setWindow=function(b){a7("raphael.setWindow",a6,bO.win,b),bO.win=b,bO.doc=bO.win.document,a6._engine.initWin&&a6._engine.initWin(bO.win)};var a9=function(f){if(a6.vml){var c,n=/^\s+|\s+$/g;try{var m=new ActiveXObject("htmlfile");m.write("<body>"),m.close(),c=m.body}catch(l){c=createPopup().document.body}var k=c.createTextRange();a9=a1(function(b){try{c.style.color=bB(b).replace(n,bE);var g=k.queryCommandValue("ForeColor");return g=(255&g)<<16|65280&g|(16711680&g)>>>16,"#"+("000000"+g.toString(16)).slice(-6)}catch(d){return"none"}})}else{var j=bO.doc.createElement("i");j.title="Raphaël Colour Picker",j.style.display="none",bO.doc.body.appendChild(j),a9=a1(function(b){return j.style.color=b,bO.doc.defaultView.getComputedStyle(j,bE).getPropertyValue("color")})}return a9(f)},ay=function(){return"hsb("+[this.h,this.s,this.b]+")"},an=function(){return"hsl("+[this.h,this.s,this.l]+")"},aa=function(){return this.hex},b3=function(f,c,h){if(null==c&&a6.is(f,"object")&&"r" in f&&"g" in f&&"b" in f&&(h=f.b,c=f.g,f=f.r),null==c&&a6.is(f,bk)){var g=a6.getRGB(f);f=g.r,c=g.g,h=g.b}return(f>1||c>1||h>1)&&(f/=255,c/=255,h/=255),[f,c,h]},bQ=function(g,c,k,j){g*=255,c*=255,k*=255;var h={r:g,g:c,b:k,hex:a6.rgb(g,c,k),toString:aa};return a6.is(j,"finite")&&(h.opacity=j),h};a6.color=function(d){var c;return a6.is(d,"object")&&"h" in d&&"s" in d&&"b" in d?(c=a6.hsb2rgb(d),d.r=c.r,d.g=c.g,d.b=c.b,d.hex=c.hex):a6.is(d,"object")&&"h" in d&&"s" in d&&"l" in d?(c=a6.hsl2rgb(d),d.r=c.r,d.g=c.g,d.b=c.b,d.hex=c.hex):(a6.is(d,"string")&&(d=a6.getRGB(d)),a6.is(d,"object")&&"r" in d&&"g" in d&&"b" in d?(c=a6.rgb2hsl(d),d.h=c.h,d.s=c.s,d.l=c.l,c=a6.rgb2hsb(d),d.v=c.b):(d={hex:"none"},d.r=d.g=d.b=d.h=d.s=d.v=d.l=-1)),d.toString=aa,d},a6.hsb2rgb=function(s,r,q,o){this.is(s,"object")&&"h" in s&&"s" in s&&"b" in s&&(q=s.b,r=s.s,s=s.h,o=s.o),s*=360;var n,m,l,k,j;return s=s%360/60,j=q*r,k=j*(1-bp(s%2-1)),n=m=l=q-j,s=~~s,n+=[j,k,0,0,k,j][s],m+=[k,j,j,k,0,0][s],l+=[0,0,k,j,j,k][s],bQ(n,m,l,o)},a6.hsl2rgb=function(s,r,q,o){this.is(s,"object")&&"h" in s&&"s" in s&&"l" in s&&(q=s.l,r=s.s,s=s.h),(s>1||r>1||q>1)&&(s/=360,r/=100,q/=100),s*=360;var n,m,l,k,j;return s=s%360/60,j=2*r*(0.5>q?q:1-q),k=j*(1-bp(s%2-1)),n=m=l=q-j/2,s=~~s,n+=[j,k,0,0,k,j][s],m+=[k,j,j,k,0,0][s],l+=[0,0,k,j,j,k][s],bQ(n,m,l,o)},a6.rgb2hsb=function(j,h,o){o=b3(j,h,o),j=o[0],h=o[1],o=o[2];var n,m,l,k;return l=bs(j,h,o),k=l-br(j,h,o),n=0==k?null:l==j?(h-o)/k:l==h?(o-j)/k+2:(j-h)/k+4,n=60*((n+360)%6)/360,m=0==k?0:k/l,{h:n,s:m,b:l,toString:ay}},a6.rgb2hsl=function(s,r,q){q=b3(s,r,q),s=q[0],r=q[1],q=q[2];var o,n,m,l,k,j;return l=bs(s,r,q),k=br(s,r,q),j=l-k,o=0==j?null:l==s?(r-q)/j:l==r?(q-s)/j+2:(s-r)/j+4,o=60*((o+360)%6)/360,m=(l+k)/2,n=0==j?0:0.5>m?j/(2*m):j/(2-2*m),{h:o,s:n,l:m,toString:an}},a6._path2string=function(){return this.join(",").replace(bV,"$1")},a6._preload=function(e,d){var f=bO.doc.createElement("img");f.style.cssText="position:absolute;left:-9999em;top:-9999em",f.onload=function(){d.call(this),this.onload=null,bO.doc.body.removeChild(this)},f.onerror=function(){bO.doc.body.removeChild(this)},bO.doc.body.appendChild(f),f.src=e},a6.getRGB=a1(function(g){if(!g||(g=bB(g)).indexOf("-")+1){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:aZ}}if("none"==g){return{r:-1,g:-1,b:-1,hex:"none",toString:aZ}}!(b7[aA](g.toLowerCase().substring(0,2))||"#"==g.charAt())&&(g=a9(g));var c,q,o,n,m,l,k=g.match(bh);return k?(k[2]&&(o=bT(k[2].substring(5),16),q=bT(k[2].substring(3,5),16),c=bT(k[2].substring(1,3),16)),k[3]&&(o=bT((m=k[3].charAt(3))+m,16),q=bT((m=k[3].charAt(2))+m,16),c=bT((m=k[3].charAt(1))+m,16)),k[4]&&(l=k[4][bA](ah),c=bd(l[0]),"%"==l[0].slice(-1)&&(c*=2.55),q=bd(l[1]),"%"==l[1].slice(-1)&&(q*=2.55),o=bd(l[2]),"%"==l[2].slice(-1)&&(o*=2.55),"rgba"==k[1].toLowerCase().slice(0,4)&&(n=bd(l[3])),l[3]&&"%"==l[3].slice(-1)&&(n/=100)),k[5]?(l=k[5][bA](ah),c=bd(l[0]),"%"==l[0].slice(-1)&&(c*=2.55),q=bd(l[1]),"%"==l[1].slice(-1)&&(q*=2.55),o=bd(l[2]),"%"==l[2].slice(-1)&&(o*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(c/=360),"hsba"==k[1].toLowerCase().slice(0,4)&&(n=bd(l[3])),l[3]&&"%"==l[3].slice(-1)&&(n/=100),a6.hsb2rgb(c,q,o,n)):k[6]?(l=k[6][bA](ah),c=bd(l[0]),"%"==l[0].slice(-1)&&(c*=2.55),q=bd(l[1]),"%"==l[1].slice(-1)&&(q*=2.55),o=bd(l[2]),"%"==l[2].slice(-1)&&(o*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(c/=360),"hsla"==k[1].toLowerCase().slice(0,4)&&(n=bd(l[3])),l[3]&&"%"==l[3].slice(-1)&&(n/=100),a6.hsl2rgb(c,q,o,n)):(k={r:c,g:q,b:o,toString:aZ},k.hex="#"+(16777216|o|q<<8|c<<16).toString(16).slice(1),a6.is(n,"finite")&&(k.opacity=n),k)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:aZ}},a6),a6.hsb=a1(function(e,c,f){return a6.hsb2rgb(e,c,f).hex}),a6.hsl=a1(function(e,c,f){return a6.hsl2rgb(e,c,f).hex}),a6.rgb=a1(function(e,d,f){return"#"+(16777216|f|d<<8|e<<16).toString(16).slice(1)}),a6.getColor=function(e){var d=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||0.75},f=this.hsb2rgb(d.h,d.s,d.b);return d.h+=0.075,d.h>1&&(d.h=0,d.s-=0.2,d.s<=0&&(this.getColor.start={h:0,s:1,b:d.b})),f.hex},a6.getColor.reset=function(){delete this.start},a6.parsePathString=function(f){if(!f){return null}var c=b8(f);if(c.arr){return bz(c.arr)}var h={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},g=[];return a6.is(f,bj)&&a6.is(f[0],bj)&&(g=bz(f)),g.length||bB(f).replace(by,function(e,d,l){var k=[],j=d.toLowerCase();if(l.replace(au,function(n,m){m&&k.push(+m)}),"m"==j&&k.length>2&&(g.push([d][bI](k.splice(0,2))),j="l",d="m"==d?"l":"L"),"r"==j){g.push([d][bI](k))}else{for(;k.length>=h[j]&&(g.push([d][bI](k.splice(0,h[j]))),h[j]);){}}}),g.toString=a6._path2string,c.arr=bz(g),g},a6.parseTransformString=a1(function(d){if(!d){return null}var c=[];return a6.is(d,bj)&&a6.is(d[0],bj)&&(c=bz(d)),c.length||bB(d).replace(aV,function(b,h,g){var f=[];bu.call(h),g.replace(au,function(j,e){e&&f.push(+e)}),c.push([h][bI](f))}),c.toString=a6._path2string,c});var b8=function(d){var c=b8.ps=b8.ps||{};return c[d]?c[d].sleep=100:c[d]={sleep:100},setTimeout(function(){for(var a in c){c[aA](a)&&a!=d&&(c[a].sleep--,!c[a].sleep&&delete c[a])}}),c[d]};a6.findDotsAtSegment=function(X,W,V,U,T,S,R,Q,P){var O=1-P,N=bn(O,3),M=bn(O,2),L=P*P,K=L*P,J=N*X+3*M*P*V+3*O*P*P*T+K*R,I=N*W+3*M*P*U+3*O*P*P*S+K*Q,H=X+2*P*(V-X)+L*(T-2*V+X),G=W+2*P*(U-W)+L*(S-2*U+W),F=V+2*P*(T-V)+L*(R-2*T+V),E=U+2*P*(S-U)+L*(Q-2*S+U),D=O*X+P*V,C=O*W+P*U,B=O*T+P*R,A=O*S+P*Q,z=90-180*bt.atan2(H-F,G-E)/bm;return(H>F||E>G)&&(z+=180),{x:J,y:I,m:{x:H,y:G},n:{x:F,y:E},start:{x:D,y:C},end:{x:B,y:A},alpha:z}},a6.bezierBBox=function(s,r,q,o,n,m,l,k){a6.is(s,"array")||(s=[s,r,q,o,n,m,l,k]);var c=a4.apply(null,s);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},a6.isPointInsideBBox=function(e,d,f){return d>=e.x&&d<=e.x2&&f>=e.y&&f<=e.y2},a6.isBBoxIntersect=function(e,c){var f=a6.isPointInsideBBox;return f(c,e.x,e.y)||f(c,e.x2,e.y)||f(c,e.x,e.y2)||f(c,e.x2,e.y2)||f(e,c.x,c.y)||f(e,c.x2,c.y)||f(e,c.x,c.y2)||f(e,c.x2,c.y2)||(e.x<c.x2&&e.x>c.x||c.x<e.x2&&c.x>e.x)&&(e.y<c.y2&&e.y>c.y||c.y<e.y2&&c.y>e.y)},a6.pathIntersection=function(d,c){return aP(d,c)},a6.pathIntersectionNumber=function(d,c){return aP(d,c,1)},a6.isPointInsidePath=function(f,c,h){var g=a6.pathBBox(f);return a6.isPointInsideBBox(g,c,h)&&1==aP(f,[["M",c,h],["H",g.x2+10]],1)%2},a6._removedFactory=function(b){return function(){a7("raphael.log",null,"Raphaël: you are calling to method “"+b+"” of removed object",b)}};var bW=a6.pathBBox=function(I){var H=b8(I);if(H.bbox){return a5(H.bbox)}if(!I){return{x:0,y:0,width:0,height:0,x2:0,y2:0}}I=ax(I);for(var G,F=0,E=0,D=[],C=[],B=0,A=I.length;A>B;B++){if(G=I[B],"M"==G[0]){F=G[1],E=G[2],D.push(F),C.push(E)}else{var z=a4(F,E,G[1],G[2],G[3],G[4],G[5],G[6]);D=D[bI](z.min.x,z.max.x),C=C[bI](z.min.y,z.max.y),F=G[5],E=G[6]}}var y=br[bK](0,D),x=br[bK](0,C),w=bs[bK](0,D),u=bs[bK](0,C),t=w-y,s=u-x,d={x:y,y:x,x2:w,y2:u,width:t,height:s,cx:y+t/2,cy:x+s/2};return H.bbox=a5(d),d},bz=function(d){var c=a5(d);return c.toString=a6._path2string,c},aW=a6._pathToRelative=function(I){var H=b8(I);if(H.rel){return bz(H.rel)}a6.is(I,bj)&&a6.is(I&&I[0],bj)||(I=a6.parsePathString(I));var G=[],F=0,E=0,D=0,C=0,B=0;"M"==I[0][0]&&(F=I[0][1],E=I[0][2],D=F,C=E,B++,G.push(["M",F,E]));for(var A=B,z=I.length;z>A;A++){var y=G[A]=[],x=I[A];if(x[0]!=bu.call(x[0])){switch(y[0]=bu.call(x[0]),y[0]){case"a":y[1]=x[1],y[2]=x[2],y[3]=x[3],y[4]=x[4],y[5]=x[5],y[6]=+(x[6]-F).toFixed(3),y[7]=+(x[7]-E).toFixed(3);break;case"v":y[1]=+(x[1]-E).toFixed(3);break;case"m":D=x[1],C=x[2];default:for(var w=1,u=x.length;u>w;w++){y[w]=+(x[w]-(w%2?F:E)).toFixed(3)}}}else{y=G[A]=[],"m"==x[0]&&(D=x[1]+F,C=x[2]+E);for(var t=0,s=x.length;s>t;t++){G[A][t]=x[t]}}var c=G[A].length;switch(G[A][0]){case"z":F=D,E=C;break;case"h":F+=+G[A][c-1];break;case"v":E+=+G[A][c-1];break;default:F+=+G[A][c-2],E+=+G[A][c-1]}}return G.toString=a6._path2string,H.rel=bz(G),G},av=a6._pathToAbsolute=function(K){var J=b8(K);if(J.abs){return bz(J.abs)}if(a6.is(K,bj)&&a6.is(K&&K[0],bj)||(K=a6.parsePathString(K)),!K||!K.length){return[["M",0,0]]}var I=[],H=0,G=0,F=0,E=0,D=0;"M"==K[0][0]&&(H=+K[0][1],G=+K[0][2],F=H,E=G,D++,I[0]=["M",H,G]);for(var C,B,A=3==K.length&&"M"==K[0][0]&&"R"==K[1][0].toUpperCase()&&"Z"==K[2][0].toUpperCase(),z=D,y=K.length;y>z;z++){if(I.push(C=[]),B=K[z],B[0]!=bq.call(B[0])){switch(C[0]=bq.call(B[0]),C[0]){case"A":C[1]=B[1],C[2]=B[2],C[3]=B[3],C[4]=B[4],C[5]=B[5],C[6]=+(B[6]+H),C[7]=+(B[7]+G);break;case"V":C[1]=+B[1]+G;break;case"H":C[1]=+B[1]+H;break;case"R":for(var x=[H,G][bI](B.slice(1)),w=2,u=x.length;u>w;w++){x[w]=+x[w]+H,x[++w]=+x[w]+G}I.pop(),I=I[bI](aY(x,A));break;case"M":F=+B[1]+H,E=+B[2]+G;default:for(w=1,u=B.length;u>w;w++){C[w]=+B[w]+(w%2?H:G)}}}else{if("R"==B[0]){x=[H,G][bI](B.slice(1)),I.pop(),I=I[bI](aY(x,A)),C=["R"][bI](B.slice(-2))}else{for(var h=0,c=B.length;c>h;h++){C[h]=B[h]}}}switch(C[0]){case"Z":H=F,G=E;break;case"H":H=C[1];break;case"V":G=C[1];break;case"M":F=C[C.length-2],E=C[C.length-1];default:H=C[C.length-2],G=C[C.length-1]}}return I.toString=a6._path2string,J.abs=bz(I),I},ak=function(f,e,h,g){return[f,e,h,g,h,g]},cd=function(k,j,r,q,o,n){var m=1/3,l=2/3;return[m*k+l*r,m*j+l*q,m*o+l*r,m*n+l*q,o,n]},bZ=function(cH,cG,cF,cE,cD,cC,cB,cA,cz,cy){var cx,cw=120*bm/180,cv=bm/180*(+cD||0),cu=[],ct=a1(function(h,g,l){var k=h*bt.cos(l)-g*bt.sin(l),j=h*bt.sin(l)+g*bt.cos(l);return{x:k,y:j}});if(cy){ck=cy[0],cj=cy[1],cm=cy[2],cl=cy[3]}else{cx=ct(cH,cG,-cv),cH=cx.x,cG=cx.y,cx=ct(cA,cz,-cv),cA=cx.x,cz=cx.y;var cs=(bt.cos(bm/180*cD),bt.sin(bm/180*cD),(cH-cA)/2),cr=(cG-cz)/2,cq=cs*cs/(cF*cF)+cr*cr/(cE*cE);cq>1&&(cq=bt.sqrt(cq),cF=cq*cF,cE=cq*cE);var cp=cF*cF,co=cE*cE,cn=(cC==cB?-1:1)*bt.sqrt(bp((cp*co-cp*cr*cr-co*cs*cs)/(cp*cr*cr+co*cs*cs))),cm=cn*cF*cr/cE+(cH+cA)/2,cl=cn*-cE*cs/cF+(cG+cz)/2,ck=bt.asin(((cG-cl)/cE).toFixed(9)),cj=bt.asin(((cz-cl)/cE).toFixed(9));ck=cm>cH?bm-ck:ck,cj=cm>cA?bm-cj:cj,0>ck&&(ck=2*bm+ck),0>cj&&(cj=2*bm+cj),cB&&ck>cj&&(ck-=2*bm),!cB&&cj>ck&&(cj-=2*bm)}var ci=cj-ck;if(bp(ci)>cw){var ch=cj,cg=cA,cc=cz;cj=ck+cw*(cB&&cj>ck?1:-1),cA=cm+cF*bt.cos(cj),cz=cl+cE*bt.sin(cj),cu=bZ(cA,cz,cF,cE,cD,0,cB,cg,cc,[cj,ch,cm,cl])}ci=cj-ck;var cb=bt.cos(ck),bc=bt.sin(ck),bb=bt.cos(cj),ac=bt.sin(cj),ab=bt.tan(ci/4),Z=4/3*cF*ab,Y=4/3*cE*ab,X=[cH,cG],S=[cH+Z*bc,cG-Y*cb],Q=[cA+Z*ac,cz-Y*bb],N=[cA,cz];if(S[0]=2*X[0]-S[0],S[1]=2*X[1]-S[1],cy){return[S,Q,N][bI](cu)}cu=[S,Q,N][bI](cu).join()[bA](",");for(var J=[],E=0,f=cu.length;f>E;E++){J[E]=E%2?ct(cu[E-1],cu[E],cv).y:ct(cu[E],cu[E+1],cv).x}return J},bH=function(u,t,s,r,q,o,n,m,l){var k=1-l;return{x:bn(k,3)*u+3*bn(k,2)*l*s+3*k*l*l*q+bn(l,3)*n,y:bn(k,3)*t+3*bn(k,2)*l*r+3*k*l*l*o+bn(l,3)*m}},a4=a1(function(G,F,E,D,C,B,A,z){var y,x=C-2*E+G-(A-2*C+E),w=2*(E-G)-2*(C-E),u=G-E,t=(-w+bt.sqrt(w*w-4*x*u))/2/x,s=(-w-bt.sqrt(w*w-4*x*u))/2/x,r=[F,z],q=[G,A];return bp(t)>"1e12"&&(t=0.5),bp(s)>"1e12"&&(s=0.5),t>0&&1>t&&(y=bH(G,F,E,D,C,B,A,z,t),q.push(y.x),r.push(y.y)),s>0&&1>s&&(y=bH(G,F,E,D,C,B,A,z,s),q.push(y.x),r.push(y.y)),x=B-2*D+F-(z-2*B+D),w=2*(D-F)-2*(B-D),u=F-D,t=(-w+bt.sqrt(w*w-4*x*u))/2/x,s=(-w-bt.sqrt(w*w-4*x*u))/2/x,bp(t)>"1e12"&&(t=0.5),bp(s)>"1e12"&&(s=0.5),t>0&&1>t&&(y=bH(G,F,E,D,C,B,A,z,t),q.push(y.x),r.push(y.y)),s>0&&1>s&&(y=bH(G,F,E,D,C,B,A,z,s),q.push(y.x),r.push(y.y)),{min:{x:br[bK](0,q),y:br[bK](0,r)},max:{x:bs[bK](0,q),y:bs[bK](0,r)}}}),ax=a6._path2curve=a1(function(G,F){var E=!F&&b8(G);if(!F&&E.curve){return bz(E.curve)}for(var D=av(G),C=F&&av(F),B={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},z=(function(g,f,k){var j,h;if(!g){return["C",f.x,f.y,f.x,f.y,f.x,f.y]}switch(!(g[0] in {T:1,Q:1})&&(f.qx=f.qy=null),g[0]){case"M":f.X=g[1],f.Y=g[2];break;case"A":g=["C"][bI](bZ[bK](0,[f.x,f.y][bI](g.slice(1))));break;case"S":"C"==k||"S"==k?(j=2*f.x-f.bx,h=2*f.y-f.by):(j=f.x,h=f.y),g=["C",j,h][bI](g.slice(1));break;case"T":"Q"==k||"T"==k?(f.qx=2*f.x-f.qx,f.qy=2*f.y-f.qy):(f.qx=f.x,f.qy=f.y),g=["C"][bI](cd(f.x,f.y,f.qx,f.qy,g[1],g[2]));break;case"Q":f.qx=g[1],f.qy=g[2],g=["C"][bI](cd(f.x,f.y,g[1],g[2],g[3],g[4]));break;case"L":g=["C"][bI](ak(f.x,f.y,g[1],g[2]));break;case"H":g=["C"][bI](ak(f.x,f.y,g[1],f.y));break;case"V":g=["C"][bI](ak(f.x,f.y,f.x,g[1]));break;case"Z":g=["C"][bI](ak(f.x,f.y,f.X,f.Y))}return g}),y=function(e,d){if(e[d].length>7){e[d].shift();for(var f=e[d];f.length;){e.splice(d++,0,["C"][bI](f.splice(0,6)))}e.splice(d,1),u=bs(D.length,C&&C.length||0)}},x=function(e,d,k,j,h){e&&d&&"M"==e[h][0]&&"M"!=d[h][0]&&(d.splice(h,0,["M",j.x,j.y]),k.bx=0,k.by=0,k.x=e[h][1],k.y=e[h][2],u=bs(D.length,C&&C.length||0))},w=0,u=bs(D.length,C&&C.length||0);u>w;w++){D[w]=z(D[w],B),y(D,w),C&&(C[w]=z(C[w],A)),C&&y(C,w),x(D,C,B,A,w),x(C,D,A,B,w);var t=D[w],s=C&&C[w],r=t.length,q=C&&s.length;B.x=t[r-2],B.y=t[r-1],B.bx=bd(t[r-4])||B.x,B.by=bd(t[r-3])||B.y,A.bx=C&&(bd(s[q-4])||A.x),A.by=C&&(bd(s[q-3])||A.y),A.x=C&&s[q-2],A.y=C&&s[q-1]}return C||(E.curve=bz(D)),C?[D,C]:D},null,bz),am=(a6._parseDots=a1(function(u){for(var t=[],s=0,r=u.length;r>s;s++){var q={},o=u[s].match(/^([^:]*):?([\d\.]*)/);if(q.color=a6.getRGB(o[1]),q.color.error){return null}q.color=q.color.hex,o[2]&&(q.offset=o[2]+"%"),t.push(q)}for(s=1,r=t.length-1;r>s;s++){if(!t[s].offset){for(var n=bd(t[s-1].offset||0),m=0,l=s+1;r>l;l++){if(t[l].offset){m=t[l].offset;break}}m||(m=100,l=r),m=bd(m);for(var c=(m-n)/(l-s+1);l>s;s++){n+=c,t[s].offset=n+"%"}}}return t}),a6._tear=function(d,c){d==c.top&&(c.top=d.prev),d==c.bottom&&(c.bottom=d.next),d.next&&(d.next.prev=d.prev),d.prev&&(d.prev.next=d.next)}),cf=(a6._tofront=function(d,c){c.top!==d&&(am(d,c),d.next=null,d.prev=c.top,c.top.next=d,c.top=d)},a6._toback=function(d,c){c.bottom!==d&&(am(d,c),d.next=c.bottom,d.prev=null,c.bottom.prev=d,c.bottom=d)},a6._insertafter=function(e,d,f){am(e,f),d==f.top&&(f.top=e),d.next&&(d.next.prev=e),e.next=d.next,e.prev=d,d.next=e},a6._insertbefore=function(e,d,f){am(e,f),d==f.bottom&&(f.bottom=e),d.prev&&(d.prev.next=e),e.prev=d.prev,d.prev=e,e.next=d},a6.toMatrix=function(f,e){var h=bW(f),g={_:{transform:bE},getBBox:function(){return h}};return b2(g,e),g.matrix}),b2=(a6.transformPath=function(d,c){return ce(d,cf(d,c))},a6._extractTransform=function(R,Q){if(null==Q){return R._.transform}Q=bB(Q).replace(/\.{3}|\u2026/g,R._.transform||bE);var P=a6.parseTransformString(Q),O=0,N=0,M=0,L=1,K=1,J=R._,I=new aN;if(J.transform=P||[],P){for(var H=0,G=P.length;G>H;H++){var F,E,D,C,B,A=P[H],z=A.length,y=bB(A[0]).toLowerCase(),o=A[0]!=y,c=o?I.invert():0;"t"==y&&3==z?o?(F=c.x(0,0),E=c.y(0,0),D=c.x(A[1],A[2]),C=c.y(A[1],A[2]),I.translate(D-F,C-E)):I.translate(A[1],A[2]):"r"==y?2==z?(B=B||R.getBBox(1),I.rotate(A[1],B.x+B.width/2,B.y+B.height/2),O+=A[1]):4==z&&(o?(D=c.x(A[2],A[3]),C=c.y(A[2],A[3]),I.rotate(A[1],D,C)):I.rotate(A[1],A[2],A[3]),O+=A[1]):"s"==y?2==z||3==z?(B=B||R.getBBox(1),I.scale(A[1],A[z-1],B.x+B.width/2,B.y+B.height/2),L*=A[1],K*=A[z-1]):5==z&&(o?(D=c.x(A[3],A[4]),C=c.y(A[3],A[4]),I.scale(A[1],A[2],D,C)):I.scale(A[1],A[2],A[3],A[4]),L*=A[1],K*=A[2]):"m"==y&&7==z&&I.add(A[1],A[2],A[3],A[4],A[5],A[6]),J.dirtyT=1,R.matrix=I}}R.matrix=I,J.sx=L,J.sy=K,J.deg=O,J.dx=N=I.e,J.dy=M=I.f,1==L&&1==K&&!O&&J.bbox?(J.bbox.x+=+N,J.bbox.y+=+M):J.dirtyT=1}),bP=function(d){var c=d[0];switch(c.toLowerCase()){case"t":return[c,0,0];case"m":return[c,1,0,0,1,0,0];case"r":return 4==d.length?[c,0,d[2],d[3]]:[c,0];case"s":return 5==d.length?[c,1,1,d[3],d[4]]:3==d.length?[c,1,1]:[c,1]}},ba=a6._equaliseTransform=function(u,t){t=bB(t).replace(/\.{3}|\u2026/g,u),u=a6.parseTransformString(u)||[],t=a6.parseTransformString(t)||[];for(var s,r,q,o,n=bs(u.length,t.length),m=[],l=[],c=0;n>c;c++){if(q=u[c]||bP(t[c]),o=t[c]||bP(q),q[0]!=o[0]||"r"==q[0].toLowerCase()&&(q[2]!=o[2]||q[3]!=o[3])||"s"==q[0].toLowerCase()&&(q[3]!=o[3]||q[4]!=o[4])){return}for(m[c]=[],l[c]=[],s=0,r=bs(q.length,o.length);r>s;s++){s in q&&(m[c][s]=q[s]),s in o&&(l[c][s]=o[s])}}return{from:m,to:l}};a6._getContainer=function(g,c,k,j){var h;return h=null!=j||a6.is(g,"object")?g:bO.doc.getElementById(g),null!=h?h.tagName?null==c?{container:h,width:h.style.pixelWidth||h.offsetWidth,height:h.style.pixelHeight||h.offsetHeight}:{container:h,width:c,height:k}:{container:1,x:g,y:c,width:k,height:j}:void 0},a6.pathToRelative=aW,a6._engine={},a6.path2curve=ax,a6.matrix=function(h,g,m,l,k,j){return new aN(h,g,m,l,k,j)},function(e){function c(b){return b[0]*b[0]+b[1]*b[1]}function f(b){var d=bt.sqrt(c(b));b[0]&&(b[0]/=d),b[1]&&(b[1]/=d)}e.add=function(B,A,z,y,x,w){var u,t,s,r,q=[[],[],[]],o=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],n=[[B,z,x],[A,y,w],[0,0,1]];for(B&&B instanceof aN&&(n=[[B.a,B.c,B.e],[B.b,B.d,B.f],[0,0,1]]),u=0;3>u;u++){for(t=0;3>t;t++){for(r=0,s=0;3>s;s++){r+=o[u][s]*n[s][t]}q[u][t]=r}}this.a=q[0][0],this.b=q[1][0],this.c=q[0][1],this.d=q[1][1],this.e=q[0][2],this.f=q[1][2]},e.invert=function(){var g=this,d=g.a*g.d-g.b*g.c;return new aN(g.d/d,-g.b/d,-g.c/d,g.a/d,(g.c*g.f-g.d*g.e)/d,(g.b*g.e-g.a*g.f)/d)},e.clone=function(){return new aN(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(g,d){this.add(1,0,0,1,g,d)},e.scale=function(h,g,k,j){null==g&&(g=h),(k||j)&&this.add(1,0,0,1,k,j),this.add(h,0,0,g,0,0),(k||j)&&this.add(1,0,0,1,-k,-j)},e.rotate=function(h,g,l){h=a6.rad(h),g=g||0,l=l||0;var k=+bt.cos(h).toFixed(9),j=+bt.sin(h).toFixed(9);this.add(k,j,-j,k,g,l),this.add(1,0,0,1,-g,-l)},e.x=function(g,d){return g*this.a+d*this.c+this.e},e.y=function(g,d){return g*this.b+d*this.d+this.f},e.get=function(b){return +this[bB.fromCharCode(97+b)].toFixed(4)},e.toString=function(){return a6.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var b={};b.dx=this.e,b.dy=this.f;var j=[[this.a,this.c],[this.b,this.d]];b.scalex=bt.sqrt(c(j[0])),f(j[0]),b.shear=j[0][0]*j[1][0]+j[0][1]*j[1][1],j[1]=[j[1][0]-j[0][0]*b.shear,j[1][1]-j[0][1]*b.shear],b.scaley=bt.sqrt(c(j[1])),f(j[1]),b.shear/=b.scaley;var h=-j[0][1],d=j[1][1];return 0>d?(b.rotate=a6.deg(bt.acos(d)),0>h&&(b.rotate=360-b.rotate)):b.rotate=a6.deg(bt.asin(h)),b.isSimple=!(+b.shear.toFixed(9)||b.scalex.toFixed(9)!=b.scaley.toFixed(9)&&b.rotate),b.isSuperSimple=!+b.shear.toFixed(9)&&b.scalex.toFixed(9)==b.scaley.toFixed(9)&&!b.rotate,b.noRotation=!+b.shear.toFixed(9)&&!b.rotate,b},e.toTransformString=function(g){var d=g||this[bA]();return d.isSimple?(d.scalex=+d.scalex.toFixed(4),d.scaley=+d.scaley.toFixed(4),d.rotate=+d.rotate.toFixed(4),(d.dx||d.dy?"t"+[d.dx,d.dy]:bE)+(1!=d.scalex||1!=d.scaley?"s"+[d.scalex,d.scaley,0,0]:bE)+(d.rotate?"r"+[d.rotate,0,0]:bE)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(aN.prototype);var az=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);aF.safari="Apple Computer, Inc."==navigator.vendor&&(az&&az[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&az&&az[1]<8?function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){b.remove()})}:bY;for(var ao=function(){this.returnValue=!1},ad=function(){return this.originalEvent.preventDefault()},b4=function(){this.cancelBubble=!0},bR=function(){return this.originalEvent.stopPropagation()},be=function(e){var d=bO.doc.documentElement.scrollTop||bO.doc.body.scrollTop,f=bO.doc.documentElement.scrollLeft||bO.doc.body.scrollLeft;return{x:e.clientX+f,y:e.clientY+d}},aB=function(){return bO.doc.addEventListener?function(h,g,m,l){var k=function(d){var c=be(d);return m.call(l,d,c.x,c.y)};if(h.addEventListener(g,k,!1),bF&&bw[g]){var j=function(a){for(var o=be(a),n=a,d=0,c=a.targetTouches&&a.targetTouches.length;c>d;d++){if(a.targetTouches[d].target==h){a=a.targetTouches[d],a.originalEvent=n,a.preventDefault=ad,a.stopPropagation=bR;break}}return m.call(l,a,o.x,o.y)};h.addEventListener(bw[g],j,!1)}return function(){return h.removeEventListener(g,k,!1),bF&&bw[g]&&h.removeEventListener(bw[g],k,!1),!0}}:bO.doc.attachEvent?function(h,g,m,l){var k=function(d){d=d||bO.win.event;var c=bO.doc.documentElement.scrollTop||bO.doc.body.scrollTop,q=bO.doc.documentElement.scrollLeft||bO.doc.body.scrollLeft,o=d.clientX+q,n=d.clientY+c;return d.preventDefault=d.preventDefault||ao,d.stopPropagation=d.stopPropagation||b4,m.call(l,d,o,n)};h.attachEvent("on"+g,k);var j=function(){return h.detachEvent("on"+g,k),!0};return j}:void 0}(),ap=[],ae=function(D){for(var C,B=D.clientX,A=D.clientY,z=bO.doc.documentElement.scrollTop||bO.doc.body.scrollTop,y=bO.doc.documentElement.scrollLeft||bO.doc.body.scrollLeft,x=ap.length;x--;){if(C=ap[x],bF&&D.touches){for(var w,u=D.touches.length;u--;){if(w=D.touches[u],w.identifier==C.el._drag.id){B=w.clientX,A=w.clientY,(D.originalEvent?D.originalEvent:D).preventDefault();break}}}else{D.preventDefault()}var t,s=C.el.node,r=s.nextSibling,q=s.parentNode,b=s.style.display;bO.win.opera&&q.removeChild(s),s.style.display="none",t=C.el.paper.getElementByPoint(B,A),s.style.display=b,bO.win.opera&&(r?q.insertBefore(s,r):q.appendChild(s)),t&&a7("raphael.drag.over."+C.el.id,C.el,t),B+=y,A+=z,a7("raphael.drag.move."+C.el.id,C.move_scope||C.el,B-C.el._drag.x,A-C.el._drag.y,B,A,D)}},b5=function(b){a6.unmousemove(ae).unmouseup(b5);for(var f,c=ap.length;c--;){f=ap[c],f.el._drag={},a7("raphael.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b)}ap=[]},bJ=a6.el={},af=bx.length;af--;){!function(b){a6[b]=bJ[b]=function(a,c){return a6.is(a,"function")&&(this.events=this.events||[],this.events.push({name:b,f:a,unbind:aB(this.shape||this.node||bO.doc,b,a,c||this)})),this},a6["un"+b]=bJ["un"+b]=function(a){for(var f=this.events||[],c=f.length;c--;){f[c].name!=b||!a6.is(a,"undefined")&&f[c].f!=a||(f[c].unbind(),f.splice(c,1),!f.length&&delete this.events)}return this}}(bx[af])}bJ.data=function(b,h){var g=aj[this.id]=aj[this.id]||{};if(0==arguments.length){return g}if(1==arguments.length){if(a6.is(b,"object")){for(var c in b){b[aA](c)&&this.data(c,b[c])}return this}return a7("raphael.data.get."+this.id,this,g[b],b),g[b]}return g[b]=h,a7("raphael.data.set."+this.id,this,h,b),this},bJ.removeData=function(b){return null==b?aj[this.id]={}:aj[this.id]&&delete aj[this.id][b],this},bJ.getData=function(){return a5(aj[this.id]||{})},bJ.hover=function(f,e,h,g){return this.mouseover(f,h).mouseout(e,g||h)},bJ.unhover=function(d,c){return this.unmouseover(d).unmouseout(c)};var bS=[];bJ.drag=function(b,n,m,l,k,j){function c(g){(g.originalEvent||g).preventDefault();var f=g.clientX,e=g.clientY,d=bO.doc.documentElement.scrollTop||bO.doc.body.scrollTop,a=bO.doc.documentElement.scrollLeft||bO.doc.body.scrollLeft;if(this._drag.id=g.identifier,bF&&g.touches){for(var q,h=g.touches.length;h--;){if(q=g.touches[h],this._drag.id=q.identifier,q.identifier==this._drag.id){f=q.clientX,e=q.clientY;break}}}this._drag.x=f+a,this._drag.y=e+d,!ap.length&&a6.mousemove(ae).mouseup(b5),ap.push({el:this,move_scope:l,start_scope:k,end_scope:j}),n&&a7.on("raphael.drag.start."+this.id,n),b&&a7.on("raphael.drag.move."+this.id,b),m&&a7.on("raphael.drag.end."+this.id,m),a7("raphael.drag.start."+this.id,k||l||this,g.clientX+a,g.clientY+d,g)}return this._drag={},bS.push({el:this,start:c}),this.mousedown(c),this},bJ.onDragOver=function(b){b?a7.on("raphael.drag.over."+this.id,b):a7.unbind("raphael.drag.over."+this.id)},bJ.undrag=function(){for(var b=bS.length;b--;){bS[b].el==this&&(this.unmousedown(bS[b].start),bS.splice(b,1),a7.unbind("raphael.drag.*."+this.id))}!bS.length&&a6.unmousemove(ae).unmouseup(b5),ap=[]},aF.circle=function(f,c,h){var g=a6._engine.circle(this,f||0,c||0,h||0);return this.__set__&&this.__set__.push(g),g},aF.rect=function(h,c,m,l,k){var j=a6._engine.rect(this,h||0,c||0,m||0,l||0,k||0);return this.__set__&&this.__set__.push(j),j},aF.ellipse=function(g,c,k,j){var h=a6._engine.ellipse(this,g||0,c||0,k||0,j||0);return this.__set__&&this.__set__.push(h),h},aF.path=function(d){d&&!a6.is(d,bk)&&!a6.is(d[0],bj)&&(d+=bE);var c=a6._engine.path(a6.format[bK](a6,arguments),this);return this.__set__&&this.__set__.push(c),c},aF.image=function(h,c,m,l,k){var j=a6._engine.image(this,h||"about:blank",c||0,m||0,l||0,k||0);return this.__set__&&this.__set__.push(j),j},aF.text=function(f,c,h){var g=a6._engine.text(this,f||0,c||0,bB(h));return this.__set__&&this.__set__.push(g),g},aF.set=function(d){!a6.is(d,"array")&&(d=Array.prototype.splice.call(arguments,0,arguments.length));var c=new bX(d);return this.__set__&&this.__set__.push(c),c.paper=this,c.type="set",c},aF.setStart=function(b){this.__set__=b||this.set()},aF.setFinish=function(){var b=this.__set__;return delete this.__set__,b},aF.setSize=function(d,c){return a6._engine.setSize.call(this,d,c)},aF.setViewBox=function(g,c,k,j,h){return a6._engine.setViewBox.call(this,g,c,k,j,h)},aF.top=aF.bottom=null,aF.raphael=a6;var bo=function(s){var r=s.getBoundingClientRect(),q=s.ownerDocument,o=q.body,n=q.documentElement,m=n.clientTop||o.clientTop||0,l=n.clientLeft||o.clientLeft||0,k=r.top+(bO.win.pageYOffset||n.scrollTop||o.scrollTop)-m,j=r.left+(bO.win.pageXOffset||n.scrollLeft||o.scrollLeft)-l;return{y:k,x:j}};aF.getElementByPoint=function(k,j){var r=this,q=r.canvas,o=bO.doc.elementFromPoint(k,j);if(bO.win.opera&&"svg"==o.tagName){var n=bo(q),m=q.createSVGRect();m.x=k-n.x,m.y=j-n.y,m.width=m.height=1;var l=q.getIntersectionList(m,null);l.length&&(o=l[l.length-1])}if(!o){return null}for(;o.parentNode&&o!=q.parentNode&&!o.raphael;){o=o.parentNode}return o==r.canvas.parentNode&&(o=q),o=o&&o.raphael?r.getById(o.raphaelid):null},aF.getElementsByBBox=function(d){var c=this.set();return this.forEach(function(a){a6.isBBoxIntersect(a.getBBox(),d)&&c.push(a)}),c},aF.getById=function(d){for(var c=this.bottom;c;){if(c.id==d){return c}c=c.next}return null},aF.forEach=function(e,d){for(var f=this.bottom;f;){if(e.call(d,f)===!1){return this}f=f.next}return this},aF.getElementsByPoint=function(e,d){var f=this.set();return this.forEach(function(a){a.isPointInside(e,d)&&f.push(a)}),f},bJ.isPointInside=function(e,c){var f=this.realPath=al[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(f=a6.transformPath(f,this.attr("transform"))),a6.isPointInsidePath(f,e,c)},bJ.getBBox=function(d){if(this.removed){return{}}var c=this._;return d?((c.dirty||!c.bboxwt)&&(this.realPath=al[this.type](this),c.bboxwt=bW(this.realPath),c.bboxwt.toString=aM,c.dirty=0),c.bboxwt):((c.dirty||c.dirtyT||!c.bbox)&&((c.dirty||!this.realPath)&&(c.bboxwt=0,this.realPath=al[this.type](this)),c.bbox=bW(ce(this.realPath,this.matrix)),c.bbox.toString=aM,c.dirty=c.dirtyT=0),c.bbox)},bJ.clone=function(){if(this.removed){return null}var b=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(b),b},bJ.glow=function(j){if("text"==this.type){return null}j=j||{};var h={width:(j.width||10)+(+this.attr("stroke-width")||1),fill:j.fill||!1,opacity:j.opacity||0.5,offsetx:j.offsetx||0,offsety:j.offsety||0,color:j.color||"#000"},o=h.width/2,n=this.paper,m=n.set(),l=this.realPath||al[this.type](this);l=this.matrix?ce(l,this.matrix):l;for(var k=1;o+1>k;k++){m.push(n.path(l).attr({stroke:h.color,fill:h.fill?h.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(h.width/o*k).toFixed(3),opacity:+(h.opacity/o).toFixed(3)}))}return m.insertBefore(this).translate(h.offsetx,h.offsety)};var aL=function(s,r,q,o,n,m,k,j,c){return null==c?aU(s,r,q,o,n,m,k,j):a6.findDotsAtSegment(s,r,q,o,n,m,k,j,aT(s,r,q,o,n,m,k,j,c))},aq=function(d,c){return function(B,A,z){B=ax(B);for(var y,x,w,u,t,s="",r={},q=0,b=0,a=B.length;a>b;b++){if(w=B[b],"M"==w[0]){y=+w[1],x=+w[2]}else{if(u=aL(y,x,w[1],w[2],w[3],w[4],w[5],w[6]),q+u>A){if(c&&!r.start){if(t=aL(y,x,w[1],w[2],w[3],w[4],w[5],w[6],A-q),s+=["C"+t.start.x,t.start.y,t.m.x,t.m.y,t.x,t.y],z){return s}r.start=s,s=["M"+t.x,t.y+"C"+t.n.x,t.n.y,t.end.x,t.end.y,w[5],w[6]].join(),q+=u,y=+w[5],x=+w[6];continue}if(!d&&!c){return t=aL(y,x,w[1],w[2],w[3],w[4],w[5],w[6],A-q),{x:t.x,y:t.y,alpha:t.alpha}}}q+=u,y=+w[5],x=+w[6]}s+=w.shift()+w}return r.end=s,t=d?q:c?r:a6.findDotsAtSegment(y,x,w[0],w[1],w[2],w[3],w[4],w[5],1),t.alpha&&(t={x:t.x,y:t.y,alpha:t.alpha}),t}},ag=aq(1),b6=aq(),bU=aq(0,1);a6.getTotalLength=ag,a6.getPointAtLength=b6,a6.getSubpath=function(f,e,h){if(this.getTotalLength(f)-h<0.000001){return bU(f,e).end}var g=bU(f,h,1);return e?bU(g,e).end:g},bJ.getTotalLength=function(){var b=this.getPath();if(b){return this.node.getTotalLength?this.node.getTotalLength():ag(b)}},bJ.getPointAtLength=function(d){var c=this.getPath();if(c){return b6(c,d)}},bJ.getPath=function(){var d,c=a6._getPath[this.type];if("text"!=this.type&&"set"!=this.type){return c&&(d=c(this)),d}},bJ.getSubpath=function(e,c){var f=this.getPath();if(f){return a6.getSubpath(f,e,c)}};var bv=a6.easing_formulas={linear:function(b){return b},"<":function(b){return bn(b,1.7)},">":function(b){return bn(b,0.48)},"<>":function(k){var j=0.48-k/1.04,r=bt.sqrt(0.1734+j*j),q=r-j,o=bn(bp(q),1/3)*(0>q?-1:1),n=-r-j,m=bn(bp(n),1/3)*(0>n?-1:1),l=o+m+0.5;return 3*(1-l)*l*l+l*l*l},backIn:function(d){var c=1.70158;return d*d*((c+1)*d-c)},backOut:function(d){d-=1;var c=1.70158;return d*d*((c+1)*d+c)+1},elastic:function(b){return b==!!b?b:bn(2,-10*b)*bt.sin((b-0.075)*2*bm/0.3)+1},bounce:function(f){var e,h=7.5625,g=2.75;return 1/g>f?e=h*f*f:2/g>f?(f-=1.5/g,e=h*f*f+0.75):2.5/g>f?(f-=2.25/g,e=h*f*f+0.9375):(f-=2.625/g,e=h*f*f+0.984375),e}};bv.easeIn=bv["ease-in"]=bv["<"],bv.easeOut=bv["ease-out"]=bv[">"],bv.easeInOut=bv["ease-in-out"]=bv["<>"],bv["back-in"]=bv.backIn,bv["back-out"]=bv.backOut;var aS=[],at=a8.requestAnimationFrame||a8.webkitRequestAnimationFrame||a8.mozRequestAnimationFrame||a8.oRequestAnimationFrame||a8.msRequestAnimationFrame||function(b){setTimeout(b,16)},ai=function(){for(var R=+new Date,Q=0;Q<aS.length;Q++){var P=aS[Q];if(!P.el.removed&&!P.paused){var O,N,M=R-P.start,L=P.ms,K=P.easing,J=P.from,I=P.diff,H=P.to,G=(P.t,P.el),F={},E={};if(P.initstatus?(M=(P.initstatus*P.anim.top-P.prev)/(P.percent-P.prev)*L,P.status=P.initstatus,delete P.initstatus,P.stop&&aS.splice(Q--,1)):P.status=(P.prev+(P.percent-P.prev)*(M/L))/P.anim.top,!(0>M)){if(L>M){var D=K(M/L);for(var C in J){if(J[aA](C)){switch(ar[C]){case bl:O=+J[C]+D*L*I[C];break;case"colour":O="rgb("+[b9(b0(J[C].r+D*L*I[C].r)),b9(b0(J[C].g+D*L*I[C].g)),b9(b0(J[C].b+D*L*I[C].b))].join(",")+")";break;case"path":O=[];for(var B=0,A=J[C].length;A>B;B++){O[B]=[J[C][B][0]];for(var z=1,s=J[C][B].length;s>z;z++){O[B][z]=+J[C][B][z]+D*L*I[C][B][z]}O[B]=O[B].join(bC)}O=O.join(bC);break;case"transform":if(I[C].real){for(O=[],B=0,A=J[C].length;A>B;B++){for(O[B]=[J[C][B][0]],z=1,s=J[C][B].length;s>z;z++){O[B][z]=J[C][B][z]+D*L*I[C][B][z]}}}else{var c=function(d){return +J[C][d]+D*L*I[C][d]};O=[["m",c(0),c(1),c(2),c(3),c(4),c(5)]]}break;case"csv":if("clip-rect"==C){for(O=[],B=4;B--;){O[B]=+J[C][B]+D*L*I[C][B]}}break;default:var b=[][bI](J[C]);for(O=[],B=G.paper.customAttributes[C].length;B--;){O[B]=+b[B]+D*L*I[C][B]}}F[C]=O}}G.attr(F),function(e,g,f){setTimeout(function(){a7("raphael.anim.frame."+e,g,f)})}(G.id,G,P.anim)}else{if(function(f,h,g){setTimeout(function(){a7("raphael.anim.frame."+h.id,h,g),a7("raphael.anim.finish."+h.id,h,g),a6.is(f,"function")&&f.call(h)})}(P.callback,G,P.anim),G.attr(H),aS.splice(Q--,1),P.repeat>1&&!P.next){for(N in H){H[aA](N)&&(E[N]=P.totalOrigin[N])}P.el.attr(E),aI(P.anim,P.el,P.anim.percents[0],null,P.totalOrigin,P.repeat-1)}P.next&&!P.stop&&aI(P.anim,P.el,P.next,null,P.totalOrigin,P.repeat)}}}}a6.svg&&G&&G.paper&&G.paper.safari(),aS.length&&at(ai)},b9=function(b){return b>255?255:0>b?0:b};bJ.animateWith=function(u,t,s,r,q,o){var n=this;if(n.removed){return o&&o.call(n),n}var m=s instanceof aJ?s:a6.animation(s,r,q,o);aI(m,n,m.percents[0],null,n.attr());for(var l=0,c=aS.length;c>l;l++){if(aS[l].anim==t&&aS[l].el==u){aS[c-1].start=aS[l].start;break}}return n},bJ.onAnimation=function(b){return b?a7.on("raphael.anim.frame."+this.id,b):a7.unbind("raphael.anim.frame."+this.id),this},aJ.prototype.delay=function(d){var c=new aJ(this.anim,this.ms);return c.times=this.times,c.del=+d||0,c},aJ.prototype.repeat=function(d){var c=new aJ(this.anim,this.ms);return c.del=this.del,c.times=bt.floor(bs(d,0))||1,c},a6.animation=function(j,c,o,n){if(j instanceof aJ){return j}(a6.is(o,"function")||!o)&&(n=n||o||null,o=null),j=Object(j),c=+c||0;var m,l,k={};for(l in j){j[aA](l)&&bd(l)!=l&&bd(l)+"%"!=l&&(m=!0,k[l]=j[l])}return m?(o&&(k.easing=o),n&&(k.callback=n),new aJ({100:k},c)):new aJ(j,c)},bJ.animate=function(h,c,m,l){var k=this;if(k.removed){return l&&l.call(k),k}var j=h instanceof aJ?h:a6.animation(h,c,m,l);return aI(j,k,j.percents[0],null,k.attr()),k},bJ.setTime=function(d,c){return d&&null!=c&&this.status(d,br(c,d.ms)/d.ms),this},bJ.status=function(h,g){var m,l,k=[],j=0;if(null!=g){return aI(h,this,-1,br(g,1)),this}for(m=aS.length;m>j;j++){if(l=aS[j],l.el.id==this.id&&(!h||l.anim==h)){if(h){return l.status}k.push({anim:l.anim,status:l.status})}}return h?0:k},bJ.pause=function(b){for(var d=0;d<aS.length;d++){aS[d].el.id!=this.id||b&&aS[d].anim!=b||a7("raphael.anim.pause."+this.id,this,aS[d].anim)!==!1&&(aS[d].paused=!0)}return this},bJ.resume=function(b){for(var f=0;f<aS.length;f++){if(aS[f].el.id==this.id&&(!b||aS[f].anim==b)){var e=aS[f];a7("raphael.anim.resume."+this.id,this,e.anim)!==!1&&(delete e.paused,this.status(e.anim,e.status))}}return this},bJ.stop=function(b){for(var d=0;d<aS.length;d++){aS[d].el.id!=this.id||b&&aS[d].anim!=b||a7("raphael.anim.stop."+this.id,this,aS[d].anim)!==!1&&aS.splice(d--,1)}return this},a7.on("raphael.remove",aH),a7.on("raphael.clear",aH),bJ.toString=function(){return"Raphaël’s object"};var bX=function(e){if(this.items=[],this.length=0,this.type="set",e){for(var d=0,f=e.length;f>d;d++){!e[d]||e[d].constructor!=bJ.constructor&&e[d].constructor!=bX||(this[this.items.length]=this.items[this.items.length]=e[d],this.length++)}}},bD=bX.prototype;bD.push=function(){for(var f,e,h=0,g=arguments.length;g>h;h++){f=arguments[h],!f||f.constructor!=bJ.constructor&&f.constructor!=bX||(e=this.items.length,this[e]=this.items[e]=f,this.length++)}return this},bD.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},bD.forEach=function(f,e){for(var h=0,g=this.items.length;g>h;h++){if(f.call(e,this.items[h],h)===!1){return this}}return this};for(var a0 in bJ){bJ[aA](a0)&&(bD[a0]=function(b){return function(){var a=arguments;return this.forEach(function(d){d[b][bK](d,a)})}}(a0))}return bD.attr=function(h,c){if(h&&a6.is(h,bj)&&a6.is(h[0],"object")){for(var m=0,l=h.length;l>m;m++){this.items[m].attr(h[m])}}else{for(var k=0,j=this.items.length;j>k;k++){this.items[k].attr(h,c)}}return this},bD.clear=function(){for(;this.length;){this.pop()}},bD.splice=function(j,h){j=0>j?bs(this.length+j,0):j,h=bs(0,br(this.length-j,h));var o,n=[],m=[],l=[];for(o=2;o<arguments.length;o++){l.push(arguments[o])}for(o=0;h>o;o++){m.push(this[j+o])}for(;o<this.length-j;o++){n.push(this[j+o])}var k=l.length;for(o=0;o<k+n.length;o++){this.items[j+o]=this[j+o]=k>o?l[o]:n[o-k]}for(o=this.items.length=this.length-=h-k;this[o];){delete this[o++]}return new bX(m)},bD.exclude=function(e){for(var d=0,f=this.length;f>d;d++){if(this[d]==e){return this.splice(d,1),!0}}},bD.animate=function(u,t,s,r){(a6.is(s,"function")||!s)&&(r=s||null);var q,o,n=this.items.length,m=n,l=this;if(!n){return this}r&&(o=function(){!--n&&r.call(l)}),s=a6.is(s,bk)?s:o;var c=a6.animation(u,t,s,o);for(q=this.items[--m].animate(c);m--;){this.items[m]&&!this.items[m].removed&&this.items[m].animateWith(q,c,c),this.items[m]&&!this.items[m].removed||n--}return this},bD.insertAfter=function(d){for(var c=this.items.length;c--;){this.items[c].insertAfter(d)}return this},bD.getBBox=function(){for(var h=[],g=[],m=[],l=[],k=this.items.length;k--;){if(!this.items[k].removed){var j=this.items[k].getBBox();h.push(j.x),g.push(j.y),m.push(j.x+j.width),l.push(j.y+j.height)}}return h=br[bK](0,h),g=br[bK](0,g),m=bs[bK](0,m),l=bs[bK](0,l),{x:h,y:g,x2:m,y2:l,width:m-h,height:l-g}},bD.clone=function(e){e=this.paper.set();for(var d=0,f=this.items.length;f>d;d++){e.push(this.items[d].clone())}return e},bD.toString=function(){return"Raphaël‘s set"},bD.glow=function(d){var c=this.paper.set();return this.forEach(function(b){var a=b.glow(d);null!=a&&a.forEach(function(e){c.push(e)})}),c},bD.isPointInside=function(e,d){var f=!1;return this.forEach(function(a){return a.isPointInside(e,d)?(console.log("runned"),f=!0,!1):void 0}),f},a6.registerFont=function(j){if(!j.face){return j}this.fonts=this.fonts||{};var h={w:j.w,face:{},glyphs:{}},o=j.face["font-family"];for(var n in j.face){j.face[aA](n)&&(h.face[n]=j.face[n])}if(this.fonts[o]?this.fonts[o].push(h):this.fonts[o]=[h],!j.svg){h.face["units-per-em"]=bT(j.face["units-per-em"],10);for(var m in j.glyphs){if(j.glyphs[aA](m)){var l=j.glyphs[m];if(h.glyphs[m]={w:l.w,k:{},d:l.d&&"M"+l.d.replace(/[mlcxtrv]/g,function(b){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[b]||"M"})+"z"},l.k){for(var k in l.k){l[aA](k)&&(h.glyphs[m].k[k]=l.k[k])}}}}}return j},aF.getFont=function(u,t,s,r){if(r=r||"normal",s=s||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400,a6.fonts){var q=a6.fonts[u];if(!q){var o=new RegExp("(^|\\s)"+u.replace(/[^\w\d\s+!~.:_-]/g,bE)+"(\\s|$)","i");for(var n in a6.fonts){if(a6.fonts[aA](n)&&o.test(n)){q=a6.fonts[n];break}}}var m;if(q){for(var l=0,c=q.length;c>l&&(m=q[l],m.face["font-weight"]!=t||m.face["font-style"]!=s&&m.face["font-style"]||m.face["font-stretch"]!=r);l++){}}return m}},aF.print=function(R,Q,P,O,N,M,L,K){M=M||"middle",L=bs(br(L||0,1),-1),K=bs(br(K||1,3),1);var J,I=bB(P)[bA](bE),H=0,G=0,F=bE;if(a6.is(O,"string")&&(O=this.getFont(O)),O){J=(N||16)/O.face["units-per-em"];for(var E=O.face.bbox[bA](aE),D=+E[0],C=E[3]-E[1],B=0,A=+E[1]+("baseline"==M?C+ +O.face.descent:C/2),z=0,y=I.length;y>z;z++){if("\n"==I[z]){H=0,c=0,G=0,B+=C*K}else{var w=G&&O.glyphs[I[z-1]]||{},c=O.glyphs[I[z]];H+=G?(w.w||O.w)+(w.k&&w.k[I[z]]||0)+O.w*L:0,G=1}c&&c.d&&(F+=a6.transformPath(c.d,["t",H*J,B*J,"s",J,J,D,A,"t",(R-D)/J,(Q-A)/J]))}}return this.path(F).attr({fill:"#000",stroke:"none"})},aF.add=function(g){if(a6.is(g,"array")){for(var c,k=this.set(),j=0,h=g.length;h>j;j++){c=g[j]||{},aD[aA](c.type)&&k.push(this[c.type]().attr(c))}}return k},a6.format=function(e,c){var f=a6.is(c,bj)?[0][bI](c):arguments;return e&&a6.is(e,bk)&&f.length-1&&(e=e.replace(aC,function(g,d){return null==f[++d]?bE:f[d]})),e||bE},a6.fullfill=function(){var e=/\{([^\}]+)\}/g,d=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,f=function(b,j,h){var g=h;return j.replace(d,function(l,k,o,n,m){k=k||n,g&&(k in g&&(g=g[k]),"function"==typeof g&&m&&(g=g()))}),g=(null==g||g==h?b:g)+""};return function(a,c){return String(a).replace(e,function(h,g){return f(h,g,c)})}}(),a6.ninja=function(){return bM.was?bO.win.Raphael=bM.is:delete Raphael,a6},a6.st=bD,function(f,c,h){function g(){/in/.test(f.readyState)?setTimeout(g,9):a6.eve("raphael.DOMload")}null==f.readyState&&f.addEventListener&&(f.addEventListener(c,h=function(){f.removeEventListener(c,h,!1),f.readyState="complete"},!1),f.readyState="loading"),g()}(document,"DOMContentLoaded"),a7.on("raphael.DOMload",function(){aG=!0}),function(){if(a6.svg){var bc="hasOwnProperty",bb=String,ac=parseFloat,ab=parseInt,Z=Math,Y=Z.max,X=Z.abs,W=Z.pow,V=/[, ]+/,U=a6.eve,T="",S=" ",R="http://www.w3.org/1999/xlink",Q={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},P={};a6.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var N=function(g,b){if(b){"string"==typeof g&&(g=N(g));for(var a in b){b[bc](a)&&("xlink:"==a.substring(0,6)?g.setAttributeNS(R,a.substring(6),bb(b[a])):g.setAttribute(a,bb(b[a])))}}else{g=a6._g.doc.createElementNS("http://www.w3.org/2000/svg",g),g.style&&(g.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return g},L=function(C,z){var q="linear",l=C.id+z,h=0.5,g=0.5,f=C.node,d=C.paper,b=f.style,ci=a6._g.doc.getElementById(l);if(!ci){if(z=bb(z).replace(a6._radial_gradient,function(k,j,n){if(q="radial",j&&n){h=ac(j),g=ac(n);var m=2*(g>0.5)-1;W(h-0.5,2)+W(g-0.5,2)>0.25&&(g=Z.sqrt(0.25-W(h-0.5,2))*m+0.5)&&0.5!=g&&(g=g.toFixed(5)-0.00001*m)}return T}),z=z.split(/\s*\-\s*/),"linear"==q){var ch=z.shift();if(ch=-ac(ch),isNaN(ch)){return null}var cg=[0,0,Z.cos(a6.rad(ch)),Z.sin(a6.rad(ch))],cc=1/(Y(X(cg[2]),X(cg[3]))||1);cg[2]*=cc,cg[3]*=cc,cg[2]<0&&(cg[0]=-cg[2],cg[2]=0),cg[3]<0&&(cg[1]=-cg[3],cg[3]=0)}var cb=a6._parseDots(z);if(!cb){return null}if(l=l.replace(/[\(\)\s,\xb0#]/g,"_"),C.gradient&&l!=C.gradient.id&&(d.defs.removeChild(C.gradient),delete C.gradient),!C.gradient){ci=N(q+"Gradient",{id:l}),C.gradient=ci,N(ci,"radial"==q?{fx:h,fy:g}:{x1:cg[0],y1:cg[1],x2:cg[2],y2:cg[3],gradientTransform:C.matrix.invert()}),d.defs.appendChild(ci);for(var B=0,A=cb.length;A>B;B++){ci.appendChild(N("stop",{offset:cb[B].offset?cb[B].offset:B?"100%":"0%","stop-color":cb[B].color||"#fff"}))}}}return N(f,{fill:"url(#"+l+")",opacity:1,"fill-opacity":1}),b.fill=T,b.opacity=1,b.fillOpacity=1,1},J=function(e){var d=e.getBBox(1);N(e.pattern,{patternTransform:e.matrix.invert()+" translate("+d.x+","+d.y+")"})},I=function(cx,cw,cv){if("path"==cx.type){for(var cu,ct,cs,cr,cq,cp=bb(cw).toLowerCase().split("-"),co=cx.paper,cl=cv?"end":"start",cj=cx.node,ch=cx.attrs,cc=ch["stroke-width"],q=cp.length,o="classic",l=3,b=3,a=5;q--;){switch(cp[q]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=cp[q];break;case"wide":b=5;break;case"narrow":b=2;break;case"long":l=5;break;case"short":l=2}}if("open"==o?(l+=2,b+=2,a+=2,cs=1,cr=cv?4:1,cq={fill:"none",stroke:ch.stroke}):(cr=cs=l/2,cq={fill:ch.stroke,stroke:"none"}),cx._.arrows?cv?(cx._.arrows.endPath&&P[cx._.arrows.endPath]--,cx._.arrows.endMarker&&P[cx._.arrows.endMarker]--):(cx._.arrows.startPath&&P[cx._.arrows.startPath]--,cx._.arrows.startMarker&&P[cx._.arrows.startMarker]--):cx._.arrows={},"none"!=o){var cn="raphael-marker-"+o,cm="raphael-marker-"+cl+o+l+b;a6._g.doc.getElementById(cn)?P[cn]++:(co.defs.appendChild(N(N("path"),{"stroke-linecap":"round",d:Q[o],id:cn})),P[cn]=1);var ck,ci=a6._g.doc.getElementById(cm);ci?(P[cm]++,ck=ci.getElementsByTagName("use")[0]):(ci=N(N("marker"),{id:cm,markerHeight:b,markerWidth:l,orient:"auto",refX:cr,refY:b/2}),ck=N(N("use"),{"xlink:href":"#"+cn,transform:(cv?"rotate(180 "+l/2+" "+b/2+") ":T)+"scale("+l/a+","+b/a+")","stroke-width":(1/((l/a+b/a)/2)).toFixed(4)}),ci.appendChild(ck),co.defs.appendChild(ci),P[cm]=1),N(ck,cq);var cg=cs*("diamond"!=o&&"oval"!=o);cv?(cu=cx._.arrows.startdx*cc||0,ct=a6.getTotalLength(ch.path)-cg*cc):(cu=cg*cc,ct=a6.getTotalLength(ch.path)-(cx._.arrows.enddx*cc||0)),cq={},cq["marker-"+cl]="url(#"+cm+")",(ct||cu)&&(cq.d=a6.getSubpath(ch.path,cu,ct)),N(cj,cq),cx._.arrows[cl+"Path"]=cn,cx._.arrows[cl+"Marker"]=cm,cx._.arrows[cl+"dx"]=cg,cx._.arrows[cl+"Type"]=o,cx._.arrows[cl+"String"]=cw}else{cv?(cu=cx._.arrows.startdx*cc||0,ct=a6.getTotalLength(ch.path)-cu):(cu=0,ct=a6.getTotalLength(ch.path)-(cx._.arrows.enddx*cc||0)),cx._.arrows[cl+"Path"]&&N(cj,{d:a6.getSubpath(ch.path,cu,ct)}),delete cx._.arrows[cl+"Path"],delete cx._.arrows[cl+"Marker"],delete cx._.arrows[cl+"dx"],delete cx._.arrows[cl+"Type"],delete cx._.arrows[cl+"String"]}for(cq in P){if(P[bc](cq)&&!P[cq]){var cb=a6._g.doc.getElementById(cq);cb&&cb.parentNode.removeChild(cb)}}}},H={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},G=function(b,o,n){if(o=H[bb(o).toLowerCase()]){for(var m=b.attrs["stroke-width"]||"1",l={round:m,square:m,butt:0}[b.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,k=[],j=o.length;j--;){k[j]=o[j]*m+(j%2?1:-1)*l}N(b.node,{"stroke-dasharray":k.join(",")})}},F=function(cl,ck){var cj=cl.node,ci=cl.attrs,ch=cj.style.visibility;cj.style.visibility="hidden";for(var cg in ck){if(ck[bc](cg)){if(!a6._availableAttrs[bc](cg)){continue}var cc=ck[cg];switch(ci[cg]=cc,cg){case"blur":cl.blur(cc);break;case"href":case"title":var q=N("title"),j=a6._g.doc.createTextNode(cc);q.appendChild(j),cj.appendChild(q);break;case"target":var g=cj.parentNode;if("a"!=g.tagName.toLowerCase()){var q=N("a");g.insertBefore(q,cj),q.appendChild(cj),g=q}"target"==cg?g.setAttributeNS(R,"show","blank"==cc?"new":cc):g.setAttributeNS(R,cg,cc);break;case"cursor":cj.style.cursor=cc;break;case"transform":cl.transform(cc);break;case"arrow-start":I(cl,cc);break;case"arrow-end":I(cl,cc,1);break;case"clip-rect":var a=bb(cc).split(V);if(4==a.length){cl.clip&&cl.clip.parentNode.parentNode.removeChild(cl.clip.parentNode);var cb=N("clipPath"),y=N("rect");cb.id=a6.createUUID(),N(y,{x:a[0],y:a[1],width:a[2],height:a[3]}),cb.appendChild(y),cl.paper.defs.appendChild(cb),N(cj,{"clip-path":"url(#"+cb.id+")"}),cl.clip=y}if(!cc){var t=cj.getAttribute("clip-path");if(t){var s=a6._g.doc.getElementById(t.replace(/(^url\(#|\)$)/g,T));s&&s.parentNode.removeChild(s),N(cj,{"clip-path":T}),delete cl.clip}}break;case"path":"path"==cl.type&&(N(cj,{d:cc?ci.path=a6._pathToAbsolute(cc):"M0,0"}),cl._.dirty=1,cl._.arrows&&("startString" in cl._.arrows&&I(cl,cl._.arrows.startString),"endString" in cl._.arrows&&I(cl,cl._.arrows.endString,1)));break;case"width":if(cj.setAttribute(cg,cc),cl._.dirty=1,!ci.fx){break}cg="x",cc=ci.x;case"x":ci.fx&&(cc=-ci.x-(ci.width||0));case"rx":if("rx"==cg&&"rect"==cl.type){break}case"cx":cj.setAttribute(cg,cc),cl.pattern&&J(cl),cl._.dirty=1;break;case"height":if(cj.setAttribute(cg,cc),cl._.dirty=1,!ci.fy){break}cg="y",cc=ci.y;case"y":ci.fy&&(cc=-ci.y-(ci.height||0));case"ry":if("ry"==cg&&"rect"==cl.type){break}case"cy":cj.setAttribute(cg,cc),cl.pattern&&J(cl),cl._.dirty=1;break;case"r":"rect"==cl.type?N(cj,{rx:cc,ry:cc}):cj.setAttribute(cg,cc),cl._.dirty=1;break;case"src":"image"==cl.type&&cj.setAttributeNS(R,"href",cc);break;case"stroke-width":(1!=cl._.sx||1!=cl._.sy)&&(cc/=Y(X(cl._.sx),X(cl._.sy))||1),cl.paper._vbSize&&(cc*=cl.paper._vbSize),cj.setAttribute(cg,cc),ci["stroke-dasharray"]&&G(cl,ci["stroke-dasharray"],ck),cl._.arrows&&("startString" in cl._.arrows&&I(cl,cl._.arrows.startString),"endString" in cl._.arrows&&I(cl,cl._.arrows.endString,1));break;case"stroke-dasharray":G(cl,cc,ck);break;case"fill":var r=bb(cc).match(a6._ISURL);if(r){cb=N("pattern");var n=N("image");cb.id=a6.createUUID(),N(cb,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),N(n,{x:0,y:0,"xlink:href":r[1]}),cb.appendChild(n),function(d){a6._preload(r[1],function(){var f=this.offsetWidth,k=this.offsetHeight;N(d,{width:f,height:k}),N(n,{width:f,height:k}),cl.paper.safari()})}(cb),cl.paper.defs.appendChild(cb),N(cj,{fill:"url(#"+cb.id+")"}),cl.pattern=cb,cl.pattern&&J(cl);break}var l=a6.getRGB(cc);if(l.error){if(("circle"==cl.type||"ellipse"==cl.type||"r"!=bb(cc).charAt())&&L(cl,cc)){if("opacity" in ci||"fill-opacity" in ci){var h=a6._g.doc.getElementById(cj.getAttribute("fill").replace(/^url\(#|\)$/g,T));if(h){var e=h.getElementsByTagName("stop");N(e[e.length-1],{"stop-opacity":("opacity" in ci?ci.opacity:1)*("fill-opacity" in ci?ci["fill-opacity"]:1)})}}ci.gradient=cc,ci.fill="none";break}}else{delete ck.gradient,delete ci.gradient,!a6.is(ci.opacity,"undefined")&&a6.is(ck.opacity,"undefined")&&N(cj,{opacity:ci.opacity}),!a6.is(ci["fill-opacity"],"undefined")&&a6.is(ck["fill-opacity"],"undefined")&&N(cj,{"fill-opacity":ci["fill-opacity"]})}l[bc]("opacity")&&N(cj,{"fill-opacity":l.opacity>1?l.opacity/100:l.opacity});case"stroke":l=a6.getRGB(cc),cj.setAttribute(cg,l.hex),"stroke"==cg&&l[bc]("opacity")&&N(cj,{"stroke-opacity":l.opacity>1?l.opacity/100:l.opacity}),"stroke"==cg&&cl._.arrows&&("startString" in cl._.arrows&&I(cl,cl._.arrows.startString),"endString" in cl._.arrows&&I(cl,cl._.arrows.endString,1));break;case"gradient":("circle"==cl.type||"ellipse"==cl.type||"r"!=bb(cc).charAt())&&L(cl,cc);break;case"opacity":ci.gradient&&!ci[bc]("stroke-opacity")&&N(cj,{"stroke-opacity":cc>1?cc/100:cc});case"fill-opacity":if(ci.gradient){h=a6._g.doc.getElementById(cj.getAttribute("fill").replace(/^url\(#|\)$/g,T)),h&&(e=h.getElementsByTagName("stop"),N(e[e.length-1],{"stop-opacity":cc}));break}default:"font-size"==cg&&(cc=ab(cc,10)+"px");var b=cg.replace(/(\-.)/g,function(d){return d.substring(1).toUpperCase()});cj.style[b]=cc,cl._.dirty=1,cj.setAttribute(cg,cc)}}}D(cl,ck),cj.style.visibility=ch},E=1.2,D=function(z,y){if("text"==z.type&&(y[bc]("text")||y[bc]("font")||y[bc]("font-size")||y[bc]("x")||y[bc]("y"))){var x=z.attrs,w=z.node,u=w.firstChild?ab(a6._g.doc.defaultView.getComputedStyle(w.firstChild,T).getPropertyValue("font-size"),10):10;if(y[bc]("text")){for(x.text=y.text;w.firstChild;){w.removeChild(w.firstChild)}for(var t,s=bb(y.text).split("\n"),q=[],l=0,e=s.length;e>l;l++){t=N("tspan"),l&&N(t,{dy:u*E,x:x.x}),t.appendChild(a6._g.doc.createTextNode(s[l])),w.appendChild(t),q[l]=t}}else{for(q=w.getElementsByTagName("tspan"),l=0,e=q.length;e>l;l++){l?N(q[l],{dy:u*E,x:x.x}):N(q[0],{dy:0})}}N(w,{x:x.x,y:x.y}),z._.dirty=1;var b=z._getBBox(),a=x.y-(b.y+b.height/2);a&&a6.is(a,"finite")&&N(q[0],{dy:a})}},c=function(e,d){this[0]=this.node=e,e.raphael=!0,this.id=a6._oid++,e.raphaelid=this.id,this.matrix=a6.matrix(),this.realPath=null,this.paper=d,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!d.bottom&&(d.bottom=this),this.prev=d.top,d.top&&(d.top.next=this),d.top=this,this.next=null},O=a6.el;c.prototype=O,O.constructor=c,a6._engine.path=function(f,e){var h=N("path");e.canvas&&e.canvas.appendChild(h);var g=new c(h,e);return g.type="path",F(g,{fill:"none",stroke:"#000",path:f}),g},O.rotate=function(b,h,g){if(this.removed){return this}if(b=bb(b).split(V),b.length-1&&(h=ac(b[1]),g=ac(b[2])),b=ac(b[0]),null==g&&(h=g),null==h||null==g){var d=this.getBBox(1);h=d.x+d.width/2,g=d.y+d.height/2}return this.transform(this._.transform.concat([["r",b,h,g]])),this},O.scale=function(b,k,j,h){if(this.removed){return this}if(b=bb(b).split(V),b.length-1&&(k=ac(b[1]),j=ac(b[2]),h=ac(b[3])),b=ac(b[0]),null==k&&(k=b),null==h&&(j=h),null==j||null==h){var d=this.getBBox(1)}return j=null==j?d.x+d.width/2:j,h=null==h?d.y+d.height/2:h,this.transform(this._.transform.concat([["s",b,k,j,h]])),this},O.translate=function(b,d){return this.removed?this:(b=bb(b).split(V),b.length-1&&(d=ac(b[1])),b=ac(b[0])||0,d=+d||0,this.transform(this._.transform.concat([["t",b,d]])),this)},O.transform=function(a){var g=this._;if(null==a){return g.transform}if(a6._extractTransform(this,a),this.clip&&N(this.clip,{transform:this.matrix.invert()}),this.pattern&&J(this),this.node&&N(this.node,{transform:this.matrix}),1!=g.sx||1!=g.sy){var f=this.attrs[bc]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":f})}return this},O.hide=function(){return !this.removed&&this.paper.safari(this.node.style.display="none"),this},O.show=function(){return !this.removed&&this.paper.safari(this.node.style.display=""),this},O.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),U.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),a6._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var d in this){this[d]="function"==typeof this[d]?a6._removedFactory(d):null}this.removed=!0}},O._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var d={};try{d=this.node.getBBox()}catch(f){}finally{d=d||{}}return e&&this.hide(),d},O.attr=function(z,y){if(this.removed){return this}if(null==z){var x={};for(var w in this.attrs){this.attrs[bc](w)&&(x[w]=this.attrs[w])}return x.gradient&&"none"==x.fill&&(x.fill=x.gradient)&&delete x.gradient,x.transform=this._.transform,x}if(null==y&&a6.is(z,"string")){if("fill"==z&&"none"==this.attrs.fill&&this.attrs.gradient){return this.attrs.gradient}if("transform"==z){return this._.transform}for(var u=z.split(V),t={},s=0,r=u.length;r>s;s++){z=u[s],t[z]=z in this.attrs?this.attrs[z]:a6.is(this.paper.customAttributes[z],"function")?this.paper.customAttributes[z].def:a6._availableAttrs[z]}return r-1?t:t[u[0]]}if(null==y&&a6.is(z,"array")){for(t={},s=0,r=z.length;r>s;s++){t[z[s]]=this.attr(z[s])}return t}if(null!=y){var q={};q[z]=y}else{null!=z&&a6.is(z,"object")&&(q=z)}for(var k in q){U("raphael.attr."+k+"."+this.id,this,q[k])}for(k in this.paper.customAttributes){if(this.paper.customAttributes[bc](k)&&q[bc](k)&&a6.is(this.paper.customAttributes[k],"function")){var j=this.paper.customAttributes[k].apply(this,[].concat(q[k]));this.attrs[k]=q[k];for(var a in j){j[bc](a)&&(q[a]=j[a])}}}return F(this,q),this},O.toFront=function(){if(this.removed){return this}"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var b=this.paper;return b.top!=this&&a6._tofront(this,b),this},O.toBack=function(){if(this.removed){return this}var b=this.node.parentNode;return"a"==b.tagName.toLowerCase()?b.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):b.firstChild!=this.node&&b.insertBefore(this.node,this.node.parentNode.firstChild),a6._toback(this,this.paper),this.paper,this},O.insertAfter=function(e){if(this.removed){return this}var d=e.node||e[e.length-1].node;return d.nextSibling?d.parentNode.insertBefore(this.node,d.nextSibling):d.parentNode.appendChild(this.node),a6._insertafter(this,e,this.paper),this},O.insertBefore=function(e){if(this.removed){return this}var d=e.node||e[0].node;return d.parentNode.insertBefore(this.node,d),a6._insertbefore(this,e,this.paper),this},O.blur=function(g){var f=this;if(0!==+g){var j=N("filter"),h=N("feGaussianBlur");f.attrs.blur=g,j.id=a6.createUUID(),N(h,{stdDeviation:+g||1.5}),j.appendChild(h),f.paper.defs.appendChild(j),f._blur=j,N(f.node,{filter:"url(#"+j.id+")"})}else{f._blur&&(f._blur.parentNode.removeChild(f._blur),delete f._blur,delete f.attrs.blur),f.node.removeAttribute("filter")}return f},a6._engine.circle=function(h,g,m,l){var k=N("circle");h.canvas&&h.canvas.appendChild(k);var j=new c(k,h);return j.attrs={cx:g,cy:m,r:l,fill:"none",stroke:"#000"},j.type="circle",N(k,j.attrs),j},a6._engine.rect=function(k,j,r,q,o,n){var m=N("rect");k.canvas&&k.canvas.appendChild(m);var l=new c(m,k);return l.attrs={x:j,y:r,width:q,height:o,r:n||0,rx:n||0,ry:n||0,fill:"none",stroke:"#000"},l.type="rect",N(m,l.attrs),l},a6._engine.ellipse=function(j,h,o,n,m){var l=N("ellipse");j.canvas&&j.canvas.appendChild(l);var k=new c(l,j);return k.attrs={cx:h,cy:o,rx:n,ry:m,fill:"none",stroke:"#000"},k.type="ellipse",N(l,k.attrs),k},a6._engine.image=function(k,j,r,q,o,n){var m=N("image");N(m,{x:r,y:q,width:o,height:n,preserveAspectRatio:"none"}),m.setAttributeNS(R,"href",j),k.canvas&&k.canvas.appendChild(m);var l=new c(m,k);return l.attrs={x:r,y:q,width:o,height:n,src:j},l.type="image",l},a6._engine.text=function(j,h,n,m){var l=N("text");j.canvas&&j.canvas.appendChild(l);var k=new c(l,j);return k.attrs={x:h,y:n,"text-anchor":"middle",text:m,font:a6._availableAttrs.font,stroke:"none",fill:"#000"},k.type="text",F(k,k.attrs),k},a6._engine.setSize=function(e,d){return this.width=e||this.width,this.height=d||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},a6._engine.create=function(){var t=a6._getContainer.apply(0,arguments),s=t&&t.container,r=t.x,q=t.y,o=t.width,n=t.height;if(!s){throw new Error("SVG container not found.")}var m,l=N("svg"),k="overflow:hidden;";return r=r||0,q=q||0,o=o||512,n=n||342,N(l,{height:n,version:1.1,width:o,xmlns:"http://www.w3.org/2000/svg"}),1==s?(l.style.cssText=k+"position:absolute;left:"+r+"px;top:"+q+"px",a6._g.doc.body.appendChild(l),m=1):(l.style.cssText=k+"position:relative",s.firstChild?s.insertBefore(l,s.firstChild):s.appendChild(l)),s=new a6._Paper,s.width=o,s.height=n,s.canvas=l,s.clear(),s._left=s._top=0,m&&(s.renderfix=function(){}),s.renderfix(),s},a6._engine.setViewBox=function(u,t,s,r,q){U("raphael.setViewBox",this,this._viewBox,[u,t,s,r,q]);var o,n,m=Y(s/this.width,r/this.height),k=this.top,g=q?"meet":"xMinYMin";for(null==u?(this._vbSize&&(m=1),delete this._vbSize,o="0 0 "+this.width+S+this.height):(this._vbSize=m,o=u+S+t+S+s+S+r),N(this.canvas,{viewBox:o,preserveAspectRatio:g});m&&k;){n="stroke-width" in k.attrs?k.attrs["stroke-width"]:1,k.attr({"stroke-width":n}),k._.dirty=1,k._.dirtyT=1,k=k.prev}return this._viewBox=[u,t,s,r,!!q],this},a6.prototype.renderfix=function(){var h,g=this.canvas,m=g.style;try{h=g.getScreenCTM()||g.createSVGMatrix()}catch(l){h=g.createSVGMatrix()}var k=-h.e%1,j=-h.f%1;(k||j)&&(k&&(this._left=(this._left+k)%1,m.left=this._left+"px"),j&&(this._top=(this._top+j)%1,m.top=this._top+"px"))},a6.prototype.clear=function(){a6.eve("raphael.clear",this);for(var b=this.canvas;b.firstChild;){b.removeChild(b.firstChild)}this.bottom=this.top=null,(this.desc=N("desc")).appendChild(a6._g.doc.createTextNode("Created with Raphaël "+a6.version)),b.appendChild(this.desc),b.appendChild(this.defs=N("defs"))},a6.prototype.remove=function(){U("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]="function"==typeof this[b]?a6._removedFactory(b):null}};var M=a6.st;for(var K in O){O[bc](K)&&!M[bc](K)&&(M[K]=function(b){return function(){var a=arguments;return this.forEach(function(d){d[b].apply(d,a)})}}(K))}}}(),function(){if(a6.vml){var cn="hasOwnProperty",cm=String,cl=parseFloat,ck=Math,cj=ck.round,ci=ck.max,ch=ck.min,cg=ck.abs,cc="fill",cb=/[, ]+/,bc=a6.eve,bb=" progid:DXImageTransform.Microsoft",ac=" ",ab="",Z={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},X=/([clmz]),?([^clmz]*)/gi,V=/ progid:\S+Blur\([^\)]+\)/g,T=/-?[^,\s-]+/g,R="position:absolute;left:0;top:0;width:1px;height:1px",P=21600,N={path:1,rect:1,image:1},L={circle:1,ellipse:1},J=function(y){var x=/[ahqstv]/gi,w=a6._pathToAbsolute;if(cm(y).match(x)&&(w=a6._path2curve),x=/[clmz]/g,w==a6._pathToAbsolute&&!cm(y).match(x)){var u=cm(y).replace(X,function(j,h,r){var m=[],l="m"==h.toLowerCase(),k=Z[h];return r.replace(T,function(d){l&&2==m.length&&(k+=m+Z["m"==h?"l":"L"],m=[]),m.push(cj(d*P))}),k+m});return u}var t,s,q=w(y);u=[];for(var o=0,n=q.length;n>o;o++){t=q[o],s=q[o][0].toLowerCase(),"z"==s&&(s="x");for(var f=1,b=t.length;b>f;f++){s+=cj(t[f]*P)+(f!=b-1?",":ab)}u.push(s)}return u.join(ac)},I=function(g,f,j){var h=a6.matrix();return h.rotate(-g,0.5,0.5),{dx:h.x(f,j),dy:h.y(f,j)}},c=function(H,G,F,E,D,C){var B=H._,A=H.matrix,z=B.fillpos,y=H.node,x=y.style,w=1,u="",n=P/G,j=P/F;if(x.visibility="hidden",G&&F){if(y.coordsize=cg(n)+ac+cg(j),x.rotation=C*(0>G*F?-1:1),C){var cp=I(C,E,D);E=cp.dx,D=cp.dy}if(0>G&&(u+="x"),0>F&&(u+=" y")&&(w=-1),x.flip=u,y.coordorigin=E*-n+ac+D*-j,z||B.fillsize){var co=y.getElementsByTagName(cc);co=co&&co[0],y.removeChild(co),z&&(cp=I(C,A.x(z[0],z[1]),A.y(z[0],z[1])),co.position=cp.dx*w+ac+cp.dy*w),B.fillsize&&(co.size=B.fillsize[0]*cg(G)+ac+B.fillsize[1]*cg(F)),y.appendChild(co)}x.visibility="visible"}};a6.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var Y=function(u,t,s){for(var r=cm(t).toLowerCase().split("-"),q=s?"end":"start",o=r.length,n="classic",m="medium",l="medium";o--;){switch(r[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":n=r[o];break;case"wide":case"narrow":l=r[o];break;case"long":case"short":m=r[o]}}var b=u.node.getElementsByTagName("stroke")[0];b[q+"arrow"]=n,b[q+"arrowlength"]=m,b[q+"arrowwidth"]=l},W=function(cE,cD){cE.attrs=cE.attrs||{};var cC=cE.node,cB=cE.attrs,cA=cC.style,cz=N[cE.type]&&(cD.x!=cB.x||cD.y!=cB.y||cD.width!=cB.width||cD.height!=cB.height||cD.cx!=cB.cx||cD.cy!=cB.cy||cD.rx!=cB.rx||cD.ry!=cB.ry||cD.r!=cB.r),cx=L[cE.type]&&(cB.cx!=cD.cx||cB.cy!=cD.cy||cB.r!=cD.r||cB.rx!=cD.rx||cB.ry!=cD.ry),cv=cE;for(var cu in cD){cD[cn](cu)&&(cB[cu]=cD[cu])}if(cz&&(cB.path=a6._getPath[cE.type](cE),cE._.dirty=1),cD.href&&(cC.href=cD.href),cD.title&&(cC.title=cD.title),cD.target&&(cC.target=cD.target),cD.cursor&&(cA.cursor=cD.cursor),"blur" in cD&&cE.blur(cD.blur),(cD.path&&"path"==cE.type||cz)&&(cC.path=J(~cm(cB.path).toLowerCase().indexOf("r")?a6._pathToAbsolute(cB.path):cB.path),"image"==cE.type&&(cE._.fillpos=[cB.x,cB.y],cE._.fillsize=[cB.width,cB.height],c(cE,1,1,0,0,0))),"transform" in cD&&cE.transform(cD.transform),cx){var cp=+cB.cx,cy=+cB.cy,cw=+cB.rx||+cB.r||0,ct=+cB.ry||+cB.r||0;cC.path=a6.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",cj((cp-cw)*P),cj((cy-ct)*P),cj((cp+cw)*P),cj((cy+ct)*P),cj(cp*P)),cE._.dirty=1}if("clip-rect" in cD){var cs=cm(cD["clip-rect"]).split(cb);if(4==cs.length){cs[2]=+cs[2]+ +cs[0],cs[3]=+cs[3]+ +cs[1];var cr=cC.clipRect||a6._g.doc.createElement("div"),cq=cr.style;cq.clip=a6.format("rect({1}px {2}px {3}px {0}px)",cs),cC.clipRect||(cq.position="absolute",cq.top=0,cq.left=0,cq.width=cE.paper.width+"px",cq.height=cE.paper.height+"px",cC.parentNode.insertBefore(cr,cC),cr.appendChild(cC),cC.clipRect=cr)}cD["clip-rect"]||cC.clipRect&&(cC.clipRect.style.clip="auto")}if(cE.textpath){var co=cE.textpath.style;cD.font&&(co.font=cD.font),cD["font-family"]&&(co.fontFamily='"'+cD["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,ab)+'"'),cD["font-size"]&&(co.fontSize=cD["font-size"]),cD["font-weight"]&&(co.fontWeight=cD["font-weight"]),cD["font-style"]&&(co.fontStyle=cD["font-style"])}if("arrow-start" in cD&&Y(cv,cD["arrow-start"]),"arrow-end" in cD&&Y(cv,cD["arrow-end"],1),null!=cD.opacity||null!=cD["stroke-width"]||null!=cD.fill||null!=cD.src||null!=cD.stroke||null!=cD["stroke-width"]||null!=cD["stroke-opacity"]||null!=cD["fill-opacity"]||null!=cD["stroke-dasharray"]||null!=cD["stroke-miterlimit"]||null!=cD["stroke-linejoin"]||null!=cD["stroke-linecap"]){var F=cC.getElementsByTagName(cc),C=!1;if(F=F&&F[0],!F&&(C=F=O(cc)),"image"==cE.type&&cD.src&&(F.src=cD.src),cD.fill&&(F.on=!0),(null==F.on||"none"==cD.fill||null===cD.fill)&&(F.on=!1),F.on&&cD.fill){var A=cm(cD.fill).match(a6._ISURL);if(A){F.parentNode==cC&&cC.removeChild(F),F.rotate=!0,F.src=A[1],F.type="tile";var z=cE.getBBox(1);F.position=z.x+ac+z.y,cE._.fillpos=[z.x,z.y],a6._preload(A[1],function(){cE._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{F.color=a6.getRGB(cD.fill).hex,F.src=ab,F.type="solid",a6.getRGB(cD.fill).error&&(cv.type in {circle:1,ellipse:1}||"r"!=cm(cD.fill).charAt())&&U(cv,cD.fill,F)&&(cB.fill="none",cB.gradient=cD.fill,F.rotate=!1)}}if("fill-opacity" in cD||"opacity" in cD){var x=((+cB["fill-opacity"]+1||2)-1)*((+cB.opacity+1||2)-1)*((+a6.getRGB(cD.fill).o+1||2)-1);x=ch(ci(x,0),1),F.opacity=x,F.src&&(F.color="none")}cC.appendChild(F);var w=cC.getElementsByTagName("stroke")&&cC.getElementsByTagName("stroke")[0],u=!1;!w&&(u=w=O("stroke")),(cD.stroke&&"none"!=cD.stroke||cD["stroke-width"]||null!=cD["stroke-opacity"]||cD["stroke-dasharray"]||cD["stroke-miterlimit"]||cD["stroke-linejoin"]||cD["stroke-linecap"])&&(w.on=!0),("none"==cD.stroke||null===cD.stroke||null==w.on||0==cD.stroke||0==cD["stroke-width"])&&(w.on=!1);var o=a6.getRGB(cD.stroke);w.on&&cD.stroke&&(w.color=o.hex),x=((+cB["stroke-opacity"]+1||2)-1)*((+cB.opacity+1||2)-1)*((+o.o+1||2)-1);var n=0.75*(cl(cD["stroke-width"])||1);if(x=ch(ci(x,0),1),null==cD["stroke-width"]&&(n=cB["stroke-width"]),cD["stroke-width"]&&(w.weight=n),n&&1>n&&(x*=n)&&(w.weight=1),w.opacity=x,cD["stroke-linejoin"]&&(w.joinstyle=cD["stroke-linejoin"]||"miter"),w.miterlimit=cD["stroke-miterlimit"]||8,cD["stroke-linecap"]&&(w.endcap="butt"==cD["stroke-linecap"]?"flat":"square"==cD["stroke-linecap"]?"square":"round"),cD["stroke-dasharray"]){var j={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};w.dashstyle=j[cn](cD["stroke-dasharray"])?j[cD["stroke-dasharray"]]:ab}u&&cC.appendChild(w)}if("text"==cv.type){cv.paper.canvas.style.display=ab;var h=cv.paper.span,g=100,f=cB.font&&cB.font.match(/\d+(?:\.\d*)?(?=px)/);cA=h.style,cB.font&&(cA.font=cB.font),cB["font-family"]&&(cA.fontFamily=cB["font-family"]),cB["font-weight"]&&(cA.fontWeight=cB["font-weight"]),cB["font-style"]&&(cA.fontStyle=cB["font-style"]),f=cl(cB["font-size"]||f&&f[0])||10,cA.fontSize=f*g+"px",cv.textpath.string&&(h.innerHTML=cm(cv.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var d=h.getBoundingClientRect();cv.W=cB.w=(d.right-d.left)/g,cv.H=cB.h=(d.bottom-d.top)/g,cv.X=cB.x,cv.Y=cB.y+cv.H/2,("x" in cD||"y" in cD)&&(cv.path.v=a6.format("m{0},{1}l{2},{1}",cj(cB.x*P),cj(cB.y*P),cj(cB.x*P)+1));for(var b=["x","y","text","font","font-family","font-weight","font-style","font-size"],a=0,k=b.length;k>a;a++){if(b[a] in cD){cv._.dirty=1;break}}switch(cB["text-anchor"]){case"start":cv.textpath.style["v-text-align"]="left",cv.bbx=cv.W/2;break;case"end":cv.textpath.style["v-text-align"]="right",cv.bbx=-cv.W/2;break;default:cv.textpath.style["v-text-align"]="center",cv.bbx=0}cv.textpath.style["v-text-kern"]=!0}},U=function(x,w,u){x.attrs=x.attrs||{};var t=(x.attrs,Math.pow),s="linear",r=".5 .5";if(x.attrs.gradient=w,w=cm(w).replace(a6._radial_gradient,function(g,f,h){return s="radial",f&&h&&(f=cl(f),h=cl(h),t(f-0.5,2)+t(h-0.5,2)>0.25&&(h=ck.sqrt(0.25-t(f-0.5,2))*(2*(h>0.5)-1)+0.5),r=f+ac+h),ab}),w=w.split(/\s*\-\s*/),"linear"==s){var o=w.shift();if(o=-cl(o),isNaN(o)){return null}}var n=a6._parseDots(w);if(!n){return null}if(x=x.shape||x.node,n.length){x.removeChild(u),u.on=!0,u.method="none",u.color=n[0].color,u.color2=n[n.length-1].color;for(var e=[],d=0,b=n.length;b>d;d++){n[d].offset&&e.push(n[d].offset+ac+n[d].color)}u.colors=e.length?e.join():"0% "+u.color,"radial"==s?(u.type="gradientTitle",u.focus="100%",u.focussize="0 0",u.focusposition=r,u.angle=0):(u.type="gradient",u.angle=(270-o)%360),x.appendChild(u)}return 1},S=function(e,d){this[0]=this.node=e,e.raphael=!0,this.id=a6._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=d,this.matrix=a6.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!d.bottom&&(d.bottom=this),this.prev=d.top,d.top&&(d.top.next=this),d.top=this,this.next=null},Q=a6.el;S.prototype=Q,Q.constructor=S,Q.transform=function(D){if(null==D){return this._.transform}var C,B=this.paper._viewBoxShift,A=B?"s"+[B.scale,B.scale]+"-1-1t"+[B.dx,B.dy]:ab;B&&(C=D=cm(D).replace(/\.{3}|\u2026/g,this._.transform||ab)),a6._extractTransform(this,A+D);var z,y=this.matrix.clone(),x=this.skew,w=this.node,u=~cm(this.attrs.fill).indexOf("-"),t=!cm(this.attrs.fill).indexOf("url(");if(y.translate(1,1),t||u||"image"==this.type){if(x.matrix="1 0 0 1",x.offset="0 0",z=y.split(),u&&z.noRotation||!z.isSimple){w.style.filter=y.toFilter();var s=this.getBBox(),o=this.getBBox(1),n=s.x-o.x,b=s.y-o.y;w.coordorigin=n*-P+ac+b*-P,c(this,1,1,n,b,0)}else{w.style.filter=ab,c(this,z.scalex,z.scaley,z.dx,z.dy,z.rotate)}}else{w.style.filter=ab,x.matrix=cm(y),x.offset=y.offset()}return C&&(this._.transform=C),this},Q.rotate=function(b,h,g){if(this.removed){return this}if(null!=b){if(b=cm(b).split(cb),b.length-1&&(h=cl(b[1]),g=cl(b[2])),b=cl(b[0]),null==g&&(h=g),null==h||null==g){var d=this.getBBox(1);h=d.x+d.width/2,g=d.y+d.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",b,h,g]])),this}},Q.translate=function(b,d){return this.removed?this:(b=cm(b).split(cb),b.length-1&&(d=cl(b[1])),b=cl(b[0])||0,d=+d||0,this._.bbox&&(this._.bbox.x+=b,this._.bbox.y+=d),this.transform(this._.transform.concat([["t",b,d]])),this)},Q.scale=function(b,k,j,h){if(this.removed){return this}if(b=cm(b).split(cb),b.length-1&&(k=cl(b[1]),j=cl(b[2]),h=cl(b[3]),isNaN(j)&&(j=null),isNaN(h)&&(h=null)),b=cl(b[0]),null==k&&(k=b),null==h&&(j=h),null==j||null==h){var d=this.getBBox(1)}return j=null==j?d.x+d.width/2:j,h=null==h?d.y+d.height/2:h,this.transform(this._.transform.concat([["s",b,k,j,h]])),this._.dirtyT=1,this},Q.hide=function(){return !this.removed&&(this.node.style.display="none"),this},Q.show=function(){return !this.removed&&(this.node.style.display=ab),this},Q._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},Q.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),a6.eve.unbind("raphael.*.*."+this.id),a6._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this){this[b]="function"==typeof this[b]?a6._removedFactory(b):null}this.removed=!0}},Q.attr=function(z,y){if(this.removed){return this}if(null==z){var x={};for(var w in this.attrs){this.attrs[cn](w)&&(x[w]=this.attrs[w])}return x.gradient&&"none"==x.fill&&(x.fill=x.gradient)&&delete x.gradient,x.transform=this._.transform,x}if(null==y&&a6.is(z,"string")){if(z==cc&&"none"==this.attrs.fill&&this.attrs.gradient){return this.attrs.gradient}for(var u=z.split(cb),t={},s=0,r=u.length;r>s;s++){z=u[s],t[z]=z in this.attrs?this.attrs[z]:a6.is(this.paper.customAttributes[z],"function")?this.paper.customAttributes[z].def:a6._availableAttrs[z]}return r-1?t:t[u[0]]}if(this.attrs&&null==y&&a6.is(z,"array")){for(t={},s=0,r=z.length;r>s;s++){t[z[s]]=this.attr(z[s])}return t}var l;null!=y&&(l={},l[z]=y),null==y&&a6.is(z,"object")&&(l=z);for(var k in l){bc("raphael.attr."+k+"."+this.id,this,l[k])}if(l){for(k in this.paper.customAttributes){if(this.paper.customAttributes[cn](k)&&l[cn](k)&&a6.is(this.paper.customAttributes[k],"function")){var j=this.paper.customAttributes[k].apply(this,[].concat(l[k]));this.attrs[k]=l[k];for(var a in j){j[cn](a)&&(l[a]=j[a])}}}l.text&&"text"==this.type&&(this.textpath.string=l.text),W(this,l)}return this},Q.toFront=function(){return !this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&a6._tofront(this,this.paper),this},Q.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a6._toback(this,this.paper)),this)},Q.insertAfter=function(b){return this.removed?this:(b.constructor==a6.st.constructor&&(b=b[b.length-1]),b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):b.node.parentNode.appendChild(this.node),a6._insertafter(this,b,this.paper),this)},Q.insertBefore=function(b){return this.removed?this:(b.constructor==a6.st.constructor&&(b=b[0]),b.node.parentNode.insertBefore(this.node,b.node),a6._insertbefore(this,b,this.paper),this)},Q.blur=function(f){var e=this.node.runtimeStyle,g=e.filter;return g=g.replace(V,ab),0!==+f?(this.attrs.blur=f,e.filter=g+ac+bb+".Blur(pixelradius="+(+f||1.5)+")",e.margin=a6.format("-{0}px 0 0 -{0}px",cj(+f||1.5))):(e.filter=g,e.margin=0,delete this.attrs.blur),this},a6._engine.path=function(h,g){var m=O("shape");m.style.cssText=R,m.coordsize=P+ac+P,m.coordorigin=g.coordorigin;var l=new S(m,g),k={fill:"none",stroke:"#000"};h&&(k.path=h),l.type="path",l.path=[],l.Path=ab,W(l,k),g.canvas.appendChild(m);var j=O("skew");return j.on=!0,m.appendChild(j),l.skew=j,l.transform(ab),l},a6._engine.rect=function(t,s,r,q,o,n){var m=a6._rectPath(s,r,q,o,n),l=t.path(m),k=l.attrs;return l.X=k.x=s,l.Y=k.y=r,l.W=k.width=q,l.H=k.height=o,k.r=n,k.path=m,l.type="rect",l},a6._engine.ellipse=function(h,g,m,l,k){var j=h.path();return j.attrs,j.X=g-l,j.Y=m-k,j.W=2*l,j.H=2*k,j.type="ellipse",W(j,{cx:g,cy:m,rx:l,ry:k}),j},a6._engine.circle=function(g,f,k,j){var h=g.path();return h.attrs,h.X=f-j,h.Y=k-j,h.W=h.H=2*j,h.type="circle",W(h,{cx:f,cy:k,r:j}),h},a6._engine.image=function(y,x,w,u,t,s){var r=a6._rectPath(w,u,t,s),q=y.path(r).attr({stroke:"none"}),o=q.attrs,n=q.node,j=n.getElementsByTagName(cc)[0];return o.src=x,q.X=o.x=w,q.Y=o.y=u,q.W=o.width=t,q.H=o.height=s,o.path=r,q.type="image",j.parentNode==n&&n.removeChild(j),j.rotate=!0,j.src=x,j.type="tile",q._.fillpos=[w,u],q._.fillsize=[t,s],n.appendChild(j),c(q,1,1,0,0,0),q},a6._engine.text=function(w,u,t,s){var r=O("shape"),q=O("path"),o=O("textpath");u=u||0,t=t||0,s=s||"",q.v=a6.format("m{0},{1}l{2},{1}",cj(u*P),cj(t*P),cj(u*P)+1),q.textpathok=!0,o.string=cm(s),o.on=!0,r.style.cssText=R,r.coordsize=P+ac+P,r.coordorigin="0 0";var n=new S(r,w),f={fill:"#000",stroke:"none",font:a6._availableAttrs.font,text:s};n.shape=r,n.path=q,n.textpath=o,n.type="text",n.attrs.text=cm(s),n.attrs.x=u,n.attrs.y=t,n.attrs.w=1,n.attrs.h=1,W(n,f),r.appendChild(o),r.appendChild(q),w.canvas.appendChild(r);var b=O("skew");return b.on=!0,r.appendChild(b),n.skew=b,n.transform(ab),n},a6._engine.setSize=function(f,e){var g=this.canvas.style;return this.width=f,this.height=e,f==+f&&(f+="px"),e==+e&&(e+="px"),g.width=f,g.height=e,g.clip="rect(0 "+f+" "+e+" 0)",this._viewBox&&a6._engine.setViewBox.apply(this,this._viewBox),this},a6._engine.setViewBox=function(w,u,t,s,r){a6.eve("raphael.setViewBox",this,this._viewBox,[w,u,t,s,r]);var q,o,n=this.width,m=this.height,g=1/ci(t/n,s/m);return r&&(q=m/s,o=n/t,n>t*q&&(w-=(n-t*q)/2/q),m>s*o&&(u-=(m-s*o)/2/o)),this._viewBox=[w,u,t,s,!!r],this._viewBoxShift={dx:-w,dy:-u,scale:g},this.forEach(function(b){b.transform("...")}),this};var O;a6._engine.initWin=function(e){var d=e.document;d.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!d.namespaces.rvml&&d.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),O=function(b){return d.createElement("<rvml:"+b+' class="rvml">')}}catch(f){O=function(b){return d.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},a6._engine.initWin(a6._g.win),a6._engine.create=function(){var t=a6._getContainer.apply(0,arguments),s=t.container,r=t.height,q=t.width,o=t.x,n=t.y;if(!s){throw new Error("VML container not found.")}var m=new a6._Paper,l=m.canvas=a6._g.doc.createElement("div"),k=l.style;return o=o||0,n=n||0,q=q||512,r=r||342,m.width=q,m.height=r,q==+q&&(q+="px"),r==+r&&(r+="px"),m.coordsize=1000*P+ac+1000*P,m.coordorigin="0 0",m.span=a6._g.doc.createElement("span"),m.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(m.span),k.cssText=a6.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",q,r),1==s?(a6._g.doc.body.appendChild(l),k.left=o+"px",k.top=n+"px",k.position="absolute"):s.firstChild?s.insertBefore(l,s.firstChild):s.appendChild(l),m.renderfix=function(){},m},a6.prototype.clear=function(){a6.eve("raphael.clear",this),this.canvas.innerHTML=ab,this.span=a6._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},a6.prototype.remove=function(){a6.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]="function"==typeof this[b]?a6._removedFactory(b):null}return !0};var M=a6.st;for(var K in Q){Q[cn](K)&&!M[cn](K)&&(M[K]=function(b){return function(){var a=arguments;return this.forEach(function(d){d[b].apply(d,a)})}}(K))}}}(),bM.was?bO.win.Raphael=a6:Raphael=a6,a6});
/*! iScroll v5.1.2 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
(function(e,f,b){var a=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(k){e.setTimeout(k,1000/60)};var g=(function(){var o={};var q=f.createElement("div").style;var m=(function(){var u=["t","webkitT","MozT","msT","OT"],s,t=0,r=u.length;for(;t<r;t++){s=u[t]+"ransform";if(s in q){return u[t].substr(0,u[t].length-1)}}return false})();function n(r){if(m===false){return false}if(m===""){return r}return m+r.charAt(0).toUpperCase()+r.substr(1)}o.getTime=Date.now||function k(){return new Date().getTime()};o.extend=function(t,s){for(var r in s){t[r]=s[r]}};o.addEvent=function(u,t,s,r){u.addEventListener(t,s,!!r)};o.removeEvent=function(u,t,s,r){u.removeEventListener(t,s,!!r)};o.prefixPointerEvent=function(r){return e.MSPointerEvent?"MSPointer"+r.charAt(9).toUpperCase()+r.substr(10):r};o.momentum=function(y,t,u,r,z,A){var s=y-t,w=b.abs(s)/u,B,x;A=A===undefined?0.0006:A;B=y+(w*w)/(2*A)*(s<0?-1:1);x=w/A;if(B<r){B=z?r-(z/2.5*(w/8)):r;s=b.abs(B-y);x=s/w}else{if(B>0){B=z?z/2.5*(w/8):0;s=b.abs(y)+B;x=s/w}}return{destination:b.round(B),duration:x}};var l=n("transform");o.extend(o,{hasTransform:l!==false,hasPerspective:n("perspective") in q,hasTouch:"ontouchstart" in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:n("transition") in q});o.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!(/Chrome\/\d/.test(e.navigator.appVersion));o.extend(o.style={},{transform:l,transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin")});o.hasClass=function(s,t){var r=new RegExp("(^|\\s)"+t+"(\\s|$)");return r.test(s.className)};o.addClass=function(s,t){if(o.hasClass(s,t)){return}var r=s.className.split(" ");r.push(t);s.className=r.join(" ")};o.removeClass=function(s,t){if(!o.hasClass(s,t)){return}var r=new RegExp("(^|\\s)"+t+"(\\s|$)","g");s.className=s.className.replace(r," ")};o.offset=function(r){var t=-r.offsetLeft,s=-r.offsetTop;while(r=r.offsetParent){t-=r.offsetLeft;s-=r.offsetTop}return{left:t,top:s}};o.preventDefaultException=function(t,s){for(var r in s){if(s[r].test(t[r])){return true}}return false};o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(r){return r*(2-r)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(r){return b.sqrt(1-(--r*r))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(s){var r=4;return(s=s-1)*s*((r+1)*s+r)+1}},bounce:{style:"",fn:function(r){if((r/=1)<(1/2.75)){return 7.5625*r*r}else{if(r<(2/2.75)){return 7.5625*(r-=(1.5/2.75))*r+0.75}else{if(r<(2.5/2.75)){return 7.5625*(r-=(2.25/2.75))*r+0.9375}else{return 7.5625*(r-=(2.625/2.75))*r+0.984375}}}}},elastic:{style:"",fn:function(r){var s=0.22,t=0.4;if(r===0){return 0}if(r==1){return 1}return(t*b.pow(2,-10*r)*b.sin((r-s/4)*(2*b.PI)/s)+1)}}});o.tap=function(t,r){var s=f.createEvent("Event");s.initEvent(r,true,true);s.pageX=t.pageX;s.pageY=t.pageY;t.target.dispatchEvent(s)};o.click=function(t){var s=t.target,r;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(s.tagName)){r=f.createEvent("MouseEvents");r.initMouseEvent("click",true,true,t.view,1,s.screenX,s.screenY,s.clientX,s.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null);r._constructed=true;s.dispatchEvent(r)}};return o})();var h;function d(m,k){this.wrapper=typeof m=="string"?f.querySelector(m):m;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={zoomMin:1,zoomMax:4,startZoom:1,resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|LABEL)$/,className:/crownix_form_field_label|crownix_hyperlink/},HWCompositing:true,useTransition:true,useTransform:true};for(var l in k){this.options[l]=k[l]}this.translateZ=this.options.HWCompositing&&g.hasPerspective?" translateZ(0)":"";this.options.useTransition=g.hasTransition&&this.options.useTransition;this.options.useTransform=g.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?g.ease[this.options.bounceEasing]||g.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(this.options.doubleTap===true){this.options.doubleTap="doubleTap"}if(this.options.shrinkScrollbars=="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this.doubleTapFlag=false;this.lastTap=0;this.saveScrollX;this.saveScrollY;this.saveScale;this.scale=b.min(b.max(this.options.startZoom,this.options.zoomMin),this.options.zoomMax);this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable();this.resetPosition()}d.prototype={version:"5.1.2",_init:function(){this._initEvents();if(this.options.zoom){this._initZoom()}if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(k){if(k.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(l){if(g.eventType[l.type]!=1){if(l.button!==0){return}}if(!this.enabled||(this.initiated&&g.eventType[l.type]!==this.initiated)){return}if(this.options.preventDefault&&!g.isBadAndroid&&!g.preventDefaultException(l.target,this.options.preventDefaultException)){l.preventDefault()}var k=l.touches?l.touches[0]:l,m;this.initiated=g.eventType[l.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=g.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;m=this.getComputedPosition();this._translate(b.round(m.x),b.round(m.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=k.pageX;this.pointY=k.pageY;this._execEvent("beforeScrollStart")},_move:function(q){if(!this.enabled||g.eventType[q.type]!==this.initiated){return}if(this.options.preventDefault){q.preventDefault()}var s=q.touches?q.touches[0]:q,m=s.pageX-this.pointX,l=s.pageY-this.pointY,r=g.getTime(),k,t,o,n;this.pointX=s.pageX;this.pointY=s.pageY;this.distX+=m;this.distY+=l;o=b.abs(this.distX);n=b.abs(this.distY);if(r-this.endTime>300&&(o<10&&n<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(o>n+this.options.directionLockThreshold){this.directionLocked="h"}else{if(n>=o+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){q.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}l=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){q.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}m=0}}m=this.hasHorizontalScroll?m:0;l=this.hasVerticalScroll?l:0;k=this.x+m;t=this.y+l;if(k>0||k<this.maxScrollX){k=this.options.bounce?this.x+m/3:k>0?0:this.maxScrollX;if(this._events.pullOut){this._execEvent("pullOut",{newX:k,deltaX:m})}}if(t>0||t<this.maxScrollY){t=this.options.bounce?this.y+l/3:t>0?0:this.maxScrollY}this.directionX=m>0?-1:m<0?1:0;this.directionY=l>0?-1:l<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(k,t);if(r-this.startTime>300){this.startTime=r;this.startX=this.x;this.startY=this.y}},_end:function(s){if(!this.enabled||g.eventType[s.type]!==this.initiated){return}if(this._events.pullEnd){this._execEvent("pullEnd")}if(this.options.preventDefault&&!g.preventDefaultException(s.target,this.options.preventDefaultException)){s.preventDefault()}var u=s.changedTouches?s.changedTouches[0]:s,m,l,q=g.getTime()-this.startTime,k=b.round(this.x),y=b.round(this.y),x=b.abs(k-this.startX),w=b.abs(y-this.startY),n=0,t="";this.isInTransition=0;this.initiated=0;this.endTime=g.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(k,y);if(!this.moved){if(this.options.tap&&this.options.doubleTap){if(s.type.indexOf("mouse")>=0){return}if(this.doubleTapFlag){clearTimeout(this.doubleTapFlag);this.doubleTapFlag=null;g.tap(s,this.options.doubleTap)}else{var r=this;this.doubleTapFlag=setTimeout(function(){r.doubleTapFlag=null;g.tap(s,r.options.tap)},250)}}else{if(this.options.tap){if(s.type.indexOf("mouse")>=0){return}g.tap(s,this.options.tap)}}if(this.options.click){g.click(s)}this._execEvent("scrollCancel");return}if(this._events.flick&&q<200&&x<100&&w<100){this._execEvent("flick");return}if(this.options.momentum&&q<300){m=this.hasHorizontalScroll?g.momentum(this.x,this.startX,q,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:k,duration:0};l=this.hasVerticalScroll?g.momentum(this.y,this.startY,q,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:y,duration:0};k=m.destination;y=l.destination;n=b.max(m.duration,l.duration);this.isInTransition=1}if(this.options.snap){var o=this._nearestSnap(k,y);this.currentPage=o;n=this.options.snapSpeed||b.max(b.max(b.min(b.abs(k-o.x),1000),b.min(b.abs(y-o.y),1000)),300);k=o.x;y=o.y;this.directionX=0;this.directionY=0;t=this.options.bounceEasing}if(k!=this.x||y!=this.y){if(k>0||k<this.maxScrollX||y>0||y<this.maxScrollY){t=g.ease.quadratic}this.scrollTo(k,y,n,t);return}this._execEvent("scrollEnd")},_resize:function(){var k=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){k.refresh();k._execEvent("resize")},this.options.resizePolling)},resetPosition:function(m){var k=this.x,n=this.y;m=m||0;if(!this.hasHorizontalScroll||this.x>0){k=0}else{if(this.x<this.maxScrollX){k=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){n=0}else{if(this.y<this.maxScrollY){n=this.maxScrollY}}if(this.options.keepCenter){var l=this._getMarginToCenter(this.scale);k=l.left>0?l.left:k;n=l.top>0?l.top:n}if(b.floor(k)==b.floor(this.x)&&b.floor(n)==b.floor(this.y)){return false}if(h==false&&this.hasVerticalScroll){this.scrollTo(k,this.maxScrollY,m,this.options.bounceEasing)}else{this.scrollTo(k,n,m,this.options.bounceEasing)}return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var k=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=b.round(this.scroller.offsetWidth*this.scale);this.scrollerHeight=b.round(this.scroller.offsetHeight*this.scale);this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=g.offset(this.wrapper);this.resetPosition();this._execEvent("refresh")},on:function(l,k){if(!this._events[l]){this._events[l]=[]}this._events[l].push(k)},off:function(m,l){if(!this._events[m]){return}var k=this._events[m].indexOf(l);if(k>-1){this._events[m].splice(k,1)}},_execEvent:function(n){if(!this._events[n]){return}var m=0,k=this._events[n].length;if(!k){return}for(;m<k;m++){this._events[n][m].apply(this,[].slice.call(arguments,1))}},scrollBy:function(k,n,l,m){k=this.x+k;n=this.y+n;l=l||0;this.scrollTo(k,n,l,m)},scrollTo:function(k,n,l,m){m=m||g.ease.circular;this.isInTransition=this.options.useTransition&&l>0;if(!l||(this.options.useTransition&&m.style)){this._transitionTimingFunction(m.style);this._transitionTime(l);this._translate(b.floor(k),b.floor(n))}else{this._animate(b.floor(k),b.floor(n),l,m.fn)}},scrollToKeepCenter:function(k,o,m,n){if(this.options.keepCenter){var l=this._getMarginToCenter(this.scale);k+=l.left>0?l.left:0;o+=l.top>0?l.top:0}this.scrollTo(k,o,m,n)},scrollToElement:function(l,n,k,r,q){l=l.nodeType?l:this.scroller.querySelector(l);if(!l){return}var o=g.offset(l);o.left-=this.wrapperOffset.left;o.top-=this.wrapperOffset.top;if(k===true){k=b.round(l.offsetWidth/2-this.wrapper.offsetWidth/2)}if(r===true){r=b.round(l.offsetHeight/2-this.wrapper.offsetHeight/2)}o.left-=k||0;o.top-=r||0;o.left=o.left*this.scale;o.top=o.top*this.scale;o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left;o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top;n=n===undefined||n===null||n==="auto"?b.max(b.abs(this.x-o.left),b.abs(this.y-o.top)):n;if(this.options.keepCenter){var m=this._getMarginToCenter(this.scale);o.left=m.left>0?m.left:o.left;o.top=m.top>0?m.top:o.top}this.scrollTo(o.left,o.top,n,q)},scrollToElementWithFrame:function(m,o,l,s){m=m.nodeType?m:this.scroller.querySelector(m);if(!m){return}var r=g.offset(m);r.left-=this.wrapperOffset.left;r.top-=this.wrapperOffset.top;var k=b.round(m.offsetWidth/2-this.wrapper.offsetWidth/2);var q=b.round(m.offsetHeight/2-this.wrapper.offsetHeight/2+l/2);r.left-=k||0;r.top-=q||0;r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left;r.top=r.top>0?0:r.top<this.maxScrollY-l?this.maxScrollY-l:r.top;var n=this._getMarginToCenter(1);n.left>0&&(r.left=n.left);o=o===undefined||o===null||o==="auto"?b.max(b.abs(this.x-r.left),b.abs(this.y-r.top)):o;s=s||g.ease.circular;this.isInTransition=false;if(!o||(this.options.useTransition&&s.style)){this._transitionTimingFunction(s.style);this._transitionTime(o);this._translate(r.left,r.top)}else{this._animate(r.left,r.top,o,s.fn)}},save:function(){this.saveScrollX=this.x;this.saveScrollY=this.y;this.saveScale=this.scale},restore:function(){if(this.scale!==this.saveScale){this.zoom(this.saveScale)}this.scrollTo(this.saveScrollX,this.saveScrollY,0);this.refresh()},_transitionTime:function(l){l=l||0;this.scrollerStyle[g.style.transitionDuration]=l+"ms";if(!l&&g.isBadAndroid){}if(this.indicators){for(var k=this.indicators.length;k--;){this.indicators[k].transitionTime(l)}}},_transitionTimingFunction:function(l){this.scrollerStyle[g.style.transitionTimingFunction]=l;if(this.indicators){for(var k=this.indicators.length;k--;){this.indicators[k].transitionTimingFunction(l)}}},_translate:function(k,m){if(this.options.useTransform){this.scrollerStyle[g.style.transform]="translate("+k+"px,"+m+"px) scale("+this.scale+") "+this.translateZ}else{k=b.round(k);m=b.round(m);this.scrollerStyle.left=k+"px";this.scrollerStyle.top=m+"px"}this.x=k;this.y=m;if(this.indicators){for(var l=this.indicators.length;l--;){this.indicators[l].updatePosition()}}},_initEvents:function(k){var l=k?g.removeEvent:g.addEvent,m=this.options.bindToWrapper?this.wrapper:e;l(e,"orientationchange",this);l(e,"resize",this);if(this.options.click){l(this.wrapper,"click",this,true)}if(!this.options.disableMouse){l(this.wrapper,"mousedown",this);l(m,"mousemove",this);l(m,"mousecancel",this);l(m,"mouseup",this)}if(g.hasPointer&&!this.options.disablePointer){l(this.wrapper,g.prefixPointerEvent("pointerdown"),this);l(m,g.prefixPointerEvent("pointermove"),this);l(m,g.prefixPointerEvent("pointercancel"),this);l(m,g.prefixPointerEvent("pointerup"),this)}if(g.hasTouch&&!this.options.disableTouch){l(this.wrapper,"touchstart",this);l(m,"touchmove",this);l(m,"touchcancel",this);l(m,"touchend",this)}l(this.scroller,"transitionend",this);l(this.scroller,"webkitTransitionEnd",this);l(this.scroller,"oTransitionEnd",this);l(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var l=e.getComputedStyle(this.scroller,null),k,m;if(this.options.useTransform){l=l[g.style.transform].split(")")[0].split(", ");k=+(l[12]||l[4]);m=+(l[13]||l[5])}else{k=+l.left.replace(/[^-\d.]/g,"");m=+l.top.replace(/[^-\d.]/g,"")}return{x:k,y:m}},_initIndicators:function(){var m=this.options.interactiveScrollbars,o=typeof this.options.scrollbars!="string",r=[],l;var q=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){l={el:c("v",m,this.options.scrollbars),interactive:m,defaultScrollbars:true,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(l.el);r.push(l)}if(this.options.scrollX){l={el:c("h",m,this.options.scrollbars),interactive:m,defaultScrollbars:true,customStyle:o,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(l.el);r.push(l)}}if(this.options.indicators){r=r.concat(this.options.indicators)}for(var n=r.length;n--;){this.indicators.push(new j(this,r[n]))}function k(t){for(var s=q.indicators.length;s--;){t.call(q.indicators[s])}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){k(function(){this.fade()})});this.on("scrollCancel",function(){k(function(){this.fade()})});this.on("scrollStart",function(){k(function(){this.fade(1)})});this.on("beforeScrollStart",function(){k(function(){this.fade(1,true)})})}this.on("refresh",function(){k(function(){this.refresh()})});this.on("destroy",function(){k(function(){this.destroy()});delete this.indicators})},_initZoom:function(){this.scrollerStyle[g.style.transformOrigin]="0 0"},_zoomStart:function(n){var l=b.abs(n.touches[0].pageX-n.touches[1].pageX),k=b.abs(n.touches[0].pageY-n.touches[1].pageY);this.touchesDistanceStart=b.sqrt(l*l+k*k);this.startScale=this.scale;var m={top:0,left:0};if(this.options.keepCenter){m=this._getMarginToCenter(1)}this.originX=b.abs(n.touches[0].pageX+n.touches[1].pageX)/2+this.wrapperOffset.left-this.x-m.left;this.originY=b.abs(n.touches[0].pageY+n.touches[1].pageY)/2+this.wrapperOffset.top-this.y-m.top;this._execEvent("zoomStart")},_zoom:function(o){if(!this.enabled||g.eventType[o.type]!==this.initiated){return}if(this.options.preventDefault){o.preventDefault()}var n=b.abs(o.touches[0].pageX-o.touches[1].pageX),l=b.abs(o.touches[0].pageY-o.touches[1].pageY),s=b.sqrt(n*n+l*l),q=1/this.touchesDistanceStart*s*this.startScale,m,k,r;this.scaled=true;if(q<this.options.zoomMin){q=0.5*this.options.zoomMin*b.pow(2,q/this.options.zoomMin)}else{if(q>this.options.zoomMax){q=2*this.options.zoomMax*b.pow(0.5,this.options.zoomMax/q)}}m=q/this.startScale;k=this.originX-this.originX*m+this.startX;r=this.originY-this.originY*m+this.startY;this.scale=q;this.scrollTo(k,r,0)},_zoomEnd:function(n){if(!this.enabled||g.eventType[n.type]!==this.initiated){return}if(this.options.preventDefault){n.preventDefault()}var o,m,k;this.isInTransition=0;this.initiated=0;if(this.scale>this.options.zoomMax){this.scale=this.options.zoomMax}else{if(this.scale<this.options.zoomMin){this.scale=this.options.zoomMin}}this.refresh();k=this.scale/this.startScale;o=this.originX-this.originX*k+this.startX;m=this.originY-this.originY*k+this.startY;if(o>0){o=0}else{if(o<this.maxScrollX){o=this.maxScrollX}}if(m>0){m=0}else{if(m<this.maxScrollY){m=this.maxScrollY}}if(this.options.keepCenter){var l=this._getMarginToCenter(this.scale);o+=l.left>0?l.left:0;m+=l.top>0?l.top:0}if(this.x!=o||this.y!=m){this.scrollTo(o,m,this.options.bounceTime)}this.scaled=false;this._execEvent("zoomEnd")},zoom:function(o,k,q,n){this._execEvent("zoomStart");if(o<this.options.zoomMin){o=this.options.zoomMin}else{if(o>this.options.zoomMax){o=this.options.zoomMax}}if(o==this.scale){return}var m=o/this.scale;k=k===undefined?this.wrapperWidth/2:k;q=q===undefined?this.wrapperHeight/2:q;n=n===undefined?300:n;k=k+this.wrapperOffset.left-this.x;q=q+this.wrapperOffset.top-this.y;k=k-k*m+this.x;q=q-q*m+this.y;this.scale=o;this.refresh();if(k>0){k=0}else{if(k<this.maxScrollX){k=this.maxScrollX}}if(q>0){q=0}else{if(q<this.maxScrollY){q=this.maxScrollY}}if(this.options.keepCenter){var l=this._getMarginToCenter(o);k=l.left>0?l.left:k;q=l.top>0?l.top:q}this.scrollTo(k,q,n);this._execEvent("zoomEnd")},_getMarginToCenter:function(l){var m=(this.wrapperWidth-(parseInt(this.scrollerStyle.width)+parseInt(this.scrollerStyle.paddingLeft)*2)*l)/2;var k=(this.wrapperHeight-(parseInt(this.scrollerStyle.height)+parseInt(this.scrollerStyle.paddingTop)*2)*l)/2;m=m<0?0:m;k=k<0?0:k;return{left:m,top:k}},_wheelZoom:function(m){var l,n,k=this;clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){k._execEvent("zoomEnd")},400);if("deltaX" in m){l=-m.deltaY/b.abs(m.deltaY)}else{if("wheelDeltaX" in m){l=m.wheelDeltaY/b.abs(m.wheelDeltaY)}else{if("wheelDelta" in m){l=m.wheelDelta/b.abs(m.wheelDelta)}else{if("detail" in m){l=-m.detail/b.abs(m.wheelDelta)}else{return}}}}n=this.scale+l/5;this.zoom(n,m.pageX,m.pageY,0)},_initWheel:function(){g.addEvent(this.wrapper,"wheel",this);g.addEvent(this.wrapper,"mousewheel",this);g.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){g.removeEvent(this.wrapper,"wheel",this);g.removeEvent(this.wrapper,"mousewheel",this);g.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(q){if(!this.enabled){return}q.preventDefault();q.stopPropagation();var n,l,r,o,k=this;if(this.wheelTimeout===undefined){k._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){k._execEvent("scrollEnd");k.wheelTimeout=undefined},400);if("deltaX" in q){n=-q.deltaX;l=-q.deltaY}else{if("wheelDeltaX" in q){n=q.wheelDeltaX/120*this.options.mouseWheelSpeed;l=q.wheelDeltaY/120*this.options.mouseWheelSpeed}else{if("wheelDelta" in q){n=l=q.wheelDelta/120*this.options.mouseWheelSpeed}else{if("detail" in q){n=l=-q.detail/3*this.options.mouseWheelSpeed}else{return}}}}n*=this.options.invertWheelDirection;l*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){n=l;l=0}if(this.options.snap){r=this.currentPage.pageX;o=this.currentPage.pageY;if(n>0){r--}else{if(n<0){r++}}if(l>0){o--}else{if(l<0){o++}}this.goToPage(r,o);return}r=this.x+b.round(this.hasHorizontalScroll?n:0);o=this.y+b.round(this.hasVerticalScroll?l:0);if(r>0){r=0}else{if(r<this.maxScrollX){r=this.maxScrollX}}if(!this.hasVerticalScroll){o=0;if(n>0){h=false;this._execEvent("prevPage")}else{h=true;this._execEvent("nextPage")}}else{if(o>0){o=0;h=false;this._execEvent("prevPage")}else{if(o<this.maxScrollY){o=this.maxScrollY;h=true;this._execEvent("nextPage")}}}if(this.options.keepCenter){var m=this._getMarginToCenter(this.scale);r+=m.left>0?m.left:0;o+=m.top>0?m.top:0}this.scrollTo(r,o,0)},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var u=0,s,q=0,o,t,r,z=0,w,B=this.options.snapStepX||this.wrapperWidth,A=this.options.snapStepY||this.wrapperHeight,k;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){t=b.round(B/2);r=b.round(A/2);while(z>-this.scrollerWidth){this.pages[u]=[];s=0;w=0;while(w>-this.scrollerHeight){this.pages[u][s]={x:b.max(z,this.maxScrollX),y:b.max(w,this.maxScrollY),width:B,height:A,cx:z-t,cy:w-r};w-=A;s++}z-=B;u++}}else{k=this.options.snap;s=k.length;o=-1;for(;u<s;u++){if(u===0||k[u].offsetLeft<=k[u-1].offsetLeft){q=0;o++}if(!this.pages[q]){this.pages[q]=[]}z=b.max(-k[u].offsetLeft,this.maxScrollX);w=b.max(-k[u].offsetTop,this.maxScrollY);t=z-b.round(k[u].offsetWidth/2);r=w-b.round(k[u].offsetHeight/2);this.pages[q][o]={x:z,y:w,width:k[u].offsetWidth,height:k[u].offsetHeight,cx:t,cy:r};if(z>this.maxScrollX){q++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=b.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=b.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var k=this.options.snapSpeed||b.max(b.max(b.min(b.abs(this.x-this.startX),1000),b.min(b.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,k)})},_nearestSnap:function(n,r){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var q=0,o=this.pages.length,k=0;if(b.abs(n-this.absStartX)<this.snapThresholdX&&b.abs(r-this.absStartY)<this.snapThresholdY){return this.currentPage}if(n>0){n=0}else{if(n<this.maxScrollX){n=this.maxScrollX}}if(r>0){r=0}else{if(r<this.maxScrollY){r=this.maxScrollY}}for(;q<o;q++){if(n>=this.pages[q][0].cx){n=this.pages[q][0].x;break}}o=this.pages[q].length;for(;k<o;k++){if(r>=this.pages[0][k].cy){r=this.pages[0][k].y;break}}if(q==this.currentPage.pageX){q+=this.directionX;if(q<0){q=0}else{if(q>=this.pages.length){q=this.pages.length-1}}n=this.pages[q][0].x}if(k==this.currentPage.pageY){k+=this.directionY;if(k<0){k=0}else{if(k>=this.pages[0].length){k=this.pages[0].length-1}}r=this.pages[0][k].y}return{x:n,y:r,pageX:q,pageY:k}},goToPage:function(k,q,l,o){o=o||this.options.bounceEasing;if(k>=this.pages.length){k=this.pages.length-1}else{if(k<0){k=0}}if(q>=this.pages[k].length){q=this.pages[k].length-1}else{if(q<0){q=0}}var n=this.pages[k][q].x,m=this.pages[k][q].y;l=l===undefined?this.options.snapSpeed||b.max(b.max(b.min(b.abs(n-this.x),1000),b.min(b.abs(m-this.y),1000)),300):l;this.currentPage={x:n,y:m,pageX:k,pageY:q};this.scrollTo(n,m,l,o)},next:function(l,n){var k=this.currentPage.pageX,m=this.currentPage.pageY;k++;if(k>=this.pages.length&&this.hasVerticalScroll){k=0;m++}this.goToPage(k,m,l,n)},prev:function(l,n){var k=this.currentPage.pageX,m=this.currentPage.pageY;k--;if(k<0&&this.hasVerticalScroll){k=0;m--}this.goToPage(k,m,l,n)},_initKeys:function(m){var l={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var k;if(typeof this.options.keyBindings=="object"){for(k in this.options.keyBindings){if(typeof this.options.keyBindings[k]=="string"){this.options.keyBindings[k]=this.options.keyBindings[k].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(k in l){this.options.keyBindings[k]=this.options.keyBindings[k]||l[k]}g.addEvent(e,"keydown",this);this.on("destroy",function(){g.removeEvent(e,"keydown",this)})},_key:function(q){if(!this.enabled){return}var k=this.options.snap,r=k?this.currentPage.pageX:this.x,o=k?this.currentPage.pageY:this.y,m=g.getTime(),l=this.keyTime||0,n=0.25,s;if(this.options.useTransition&&this.isInTransition){s=this.getComputedPosition();this._translate(b.round(s.x),b.round(s.y));this.isInTransition=false}this.keyAcceleration=m-l<200?b.min(this.keyAcceleration+n,50):0;switch(q.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){r+=k?1:this.wrapperWidth}else{o+=k?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){r-=k?1:this.wrapperWidth}else{o-=k?1:this.wrapperHeight}break;case this.options.keyBindings.end:r=k?this.pages.length-1:this.maxScrollX;o=k?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:r=0;o=0;break;case this.options.keyBindings.left:r+=k?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:o+=k?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:r-=k?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:o-=k?1:5+this.keyAcceleration>>0;break;default:return}switch(q.keyCode){case this.options.keyBindings.pageUp:if(this.y===0||!this.hasVerticalScroll){h=false;this._execEvent("prevPage")}else{h=true}break;case this.options.keyBindings.pageDown:if(this.y===this.maxScrollY||!this.hasVerticalScroll){h=true;this._execEvent("nextPage")}else{h=false}break}if(k){this.goToPage(r,o);return}if(r>0){r=0;this.keyAcceleration=0}else{if(r<this.maxScrollX){r=this.maxScrollX;this.keyAcceleration=0}}if(o>0){o=0;this.keyAcceleration=0}else{if(o<this.maxScrollY){o=this.maxScrollY;this.keyAcceleration=0}else{h=undefined}}if(h){o=0}else{if(h==false){o=this.maxScrollY}}this.scrollTo(r,o,0);this.resetPosition();this.keyTime=m},_animate:function(u,t,n,k){var r=this,q=this.x,o=this.y,l=g.getTime(),s=l+n;function m(){var w=g.getTime(),y,x,z;if(w>=s){r.isAnimating=false;r._translate(u,t);if(!r.resetPosition(r.options.bounceTime)){r._execEvent("scrollEnd")}return}w=(w-l)/n;z=k(w);y=(u-q)*z+q;x=(t-o)*z+o;r._translate(y,x);if(r.isAnimating){a(m)}}this.isAnimating=true;m()},handleEvent:function(k){switch(k.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(k);if(this.options.zoom&&k.touches&&k.touches.length>1){this._zoomStart(k)}break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":if(this.options.zoom&&k.touches&&k.touches[1]){this._zoom(k);return}this._move(k);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":if(this.scaled){this._zoomEnd(k);return}this._end(k);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(k);break;case"wheel":case"DOMMouseScroll":case"mousewheel":if(this.options.wheelAction=="zoom"){this._wheelZoom(k);return}this._wheel(k);break;case"keydown":this._key(k);break}},setScrollTop:function(k){h=k},getScrollTop:function(){return h},getMaxScrollY:function(){return this.maxScrollY}};function c(n,l,m){var o=f.createElement("div"),k=f.createElement("div");if(m===true){o.style.cssText="position:absolute;z-index:9999";k.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"}k.className="iScrollIndicator";if(n=="h"){if(m===true){o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0";k.style.height="100%"}o.className="iScrollHorizontalScrollbar"}else{if(m===true){o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px";k.style.width="100%"}o.className="iScrollVerticalScrollbar"}o.style.cssText+=";overflow:hidden";if(!l){o.style.pointerEvents="none"}o.appendChild(k);return o}function j(k,l){this.wrapper=typeof l.el=="string"?f.querySelector(l.el):l.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=k;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var m in l){this.options[m]=l[m]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){g.addEvent(this.indicator,"touchstart",this);g.addEvent(e,"touchend",this)}if(!this.options.disablePointer){g.addEvent(this.indicator,g.prefixPointerEvent("pointerdown"),this);g.addEvent(e,g.prefixPointerEvent("pointerup"),this)}if(!this.options.disableMouse){g.addEvent(this.indicator,"mousedown",this);g.addEvent(e,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[g.style.transform]=this.scroller.translateZ;this.wrapperStyle[g.style.transitionDuration]=g.isBadAndroid?"0.001s":"0ms";this.wrapperStyle.opacity="0"}}j.prototype={handleEvent:function(k){switch(k.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(k);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(k);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(k);break}},destroy:function(){if(this.options.interactive){g.removeEvent(this.indicator,"touchstart",this);g.removeEvent(this.indicator,g.prefixPointerEvent("pointerdown"),this);g.removeEvent(this.indicator,"mousedown",this);g.removeEvent(e,"touchmove",this);g.removeEvent(e,g.prefixPointerEvent("pointermove"),this);g.removeEvent(e,"mousemove",this);g.removeEvent(e,"touchend",this);g.removeEvent(e,g.prefixPointerEvent("pointerup"),this);g.removeEvent(e,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(l){var k=l.touches?l.touches[0]:l;l.preventDefault();l.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=k.pageX;this.lastPointY=k.pageY;this.startTime=g.getTime();if(!this.options.disableTouch){g.addEvent(e,"touchmove",this)}if(!this.options.disablePointer){g.addEvent(e,g.prefixPointerEvent("pointermove"),this)}if(!this.options.disableMouse){g.addEvent(e,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(q){var l=q.touches?q.touches[0]:q,m,k,r,o,n=g.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;m=l.pageX-this.lastPointX;this.lastPointX=l.pageX;k=l.pageY-this.lastPointY;this.lastPointY=l.pageY;r=this.x+m;o=this.y+k;this._pos(r,o);q.preventDefault();q.stopPropagation()},_end:function(m){if(!this.initiated){return}this.initiated=false;m.preventDefault();m.stopPropagation();g.removeEvent(e,"touchmove",this);g.removeEvent(e,g.prefixPointerEvent("pointermove"),this);g.removeEvent(e,"mousemove",this);if(this.scroller.options.snap){var k=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var l=this.options.snapSpeed||b.max(b.max(b.min(b.abs(this.scroller.x-k.x),1000),b.min(b.abs(this.scroller.y-k.y),1000)),300);if(this.scroller.x!=k.x||this.scroller.y!=k.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=k;this.scroller.scrollTo(k.x,k.y,l,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(k){k=k||0;this.indicatorStyle[g.style.transitionDuration]=k+"ms";if(!k&&g.isBadAndroid){this.indicatorStyle[g.style.transitionDuration]="0.001s"}},transitionTimingFunction:function(k){this.indicatorStyle[g.style.transitionTimingFunction]=k},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){g.addClass(this.wrapper,"iScrollBothScrollbars");g.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{g.removeClass(this.wrapper,"iScrollBothScrollbars");g.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}var k=this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=b.max(b.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink=="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=b.max(b.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink=="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var k=this.options.listenX&&b.round(this.sizeRatioX*this.scroller.x)||0,l=this.options.listenY&&b.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(k<this.minBoundaryX){if(this.options.shrink=="scale"){this.width=b.max(this.indicatorWidth+k,8);this.indicatorStyle.width=this.width+"px"}k=this.minBoundaryX}else{if(k>this.maxBoundaryX){if(this.options.shrink=="scale"){this.width=b.max(this.indicatorWidth-(k-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";k=this.maxPosX+this.indicatorWidth-this.width}else{k=this.maxBoundaryX}}else{if(this.options.shrink=="scale"&&this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(l<this.minBoundaryY){if(this.options.shrink=="scale"){this.height=b.max(this.indicatorHeight+l*3,8);this.indicatorStyle.height=this.height+"px"}l=this.minBoundaryY}else{if(l>this.maxBoundaryY){if(this.options.shrink=="scale"){this.height=b.max(this.indicatorHeight-(l-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";l=this.maxPosY+this.indicatorHeight-this.height}else{l=this.maxBoundaryY}}else{if(this.options.shrink=="scale"&&this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}}this.x=k;this.y=l;if(this.scroller.options.useTransform){this.indicatorStyle[g.style.transform]="translate("+k+"px,"+l+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=k+"px";this.indicatorStyle.top=l+"px"}},_pos:function(k,l){if(k<0){k=0}else{if(k>this.maxPosX){k=this.maxPosX}}if(l<0){l=0}else{if(l>this.maxPosY){l=this.maxPosY}}k=this.options.listenX?b.round(k/this.sizeRatioX):this.scroller.x;l=this.options.listenY?b.round(l/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(k,l)},fade:function(n,m){if(m&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var l=n?250:500,k=n?0:300;n=n?"1":"0";this.wrapperStyle[g.style.transitionDuration]=l+"ms";this.fadeTimeout=setTimeout((function(o){this.wrapperStyle.opacity=o;this.visible=+o}).bind(this,n),k)}};d.utils=g;if(typeof module!="undefined"&&module.exports){module.exports=d}else{e.IScroll=d}})(window,document,Math);
/*! $.noUiSlider
 @version 5.0.0
 @author Leon Gersen https://twitter.com/LeonGersen
 @license WTFPL http://www.wtfpl.net/about/
 @documentation http://refreshless.com/nouislider/
*/
(function(a){if(a.zepto&&!a.fn.removeData){throw new ReferenceError("Zepto is loaded without the data module.")}a.fn.crownixNoUiSlider=function(A,j){var h=a(document),z=a("body"),K=".nui",L=a.fn.val,M=["crownix-noUi-base","crownix-noUi-origin","crownix-noUi-handle","crownix-noUi-input","crownix-noUi-active","crownix-noUi-state-tap","crownix-noUi-target","-lower","-upper","crownix-noUi-connect","crownix-noUi-horizontal","crownix-noUi-vertical","crownix-noUi-background","crownix-noUi-stacking","crownix-noUi-block","crownix-noUi-state-blocked","crownix-noUi-ltr","crownix-noUi-rtl","crownix-noUi-dragable","crownix-noUi-extended","crownix-noUi-state-drag"],I=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"};function q(R,S){return(S*100)/(R[1]-R[0])}function C(R,S){return q(R,R[0]<0?S+Math.abs(R[0]):S-R[0])}function t(R,S){return((S*(R[1]-R[0]))/100)+R[0]}function e(R){return R instanceof a||(a.zepto&&a.zepto["isZ"](R))}function y(R){return !isNaN(parseFloat(R))&&isFinite(R)}function b(S,R){if(!a.isArray(S)){S=[S]}a.each(S,function(){if(typeof this==="function"){this.call(R)}})}function O(S,R){return function(){var T=[null,null];T[R]=a(this).val();S.val(T,true)}}function x(R,S){return Math.round(R/S)*S}function E(S,R){S=S.toFixed(R.decimals);if(parseFloat(S)===0){S=S.replace("-0","0")}return S.replace(".",R.serialization["mark"])}function g(S,R,T){if(S.length===1){return S[0]}var U=S[0].offset()[T]+S[1].offset()[T];return S[R<U/2?0:1]}function Q(S,R){return parseFloat(S.toFixed(R))}function P(U){U.preventDefault();var X=U.type.indexOf("touch")===0,S=U.type.indexOf("mouse")===0,V=U.type.indexOf("pointer")===0,R,W,T=U;if(U.type.indexOf("MSPointer")===0){V=true}if(U.originalEvent){U=U.originalEvent}if(X){R=U.changedTouches[0].pageX;W=U.changedTouches[0].pageY}if(S||V){if(!V&&window.pageXOffset===undefined){window.pageXOffset=document.documentElement.scrollLeft;window.pageYOffset=document.documentElement.scrollTop}R=U.clientX+window.pageXOffset;W=U.clientY+window.pageYOffset}return a.extend(T,{pointX:R,pointY:W,cursor:S})}function r(S,R,V,T){var U=T.target;S=S.replace(/\s/g,K+" ")+K;return R.on(S,function(X){var W=U.attr("disabled");W=!(W===undefined||W===null);if(U.hasClass("crownix-noUi-state-tap")||W){return false}V(P(X),T,U.data("base").data("options"))})}function f(R){var S=this.target;if(R===undefined){return this.element.data("value")}if(R===true){R=this.element.data("value")}else{this.element.data("value",R)}if(R===undefined){return}a.each(this.elements,function(){if(typeof this==="function"){this.call(S,R)}else{this[0][this[1]](R)}})}function u(U,S,R){if(e(S)){var T=[],V=U.data("target");if(U.data("options").direction){R=R?0:1}S.each(function(){a(this).on("change"+K,O(V,R));T.push([a(this),"val"])});return T}if(typeof S==="string"){S=[a('<input type="hidden" name="'+S+'">').appendTo(U).addClass(M[3]).change(function(W){W.stopPropagation()}),"val"]}return[S]}function c(U,S,R){var T=[];a.each(R.to[S],function(V){T=T.concat(u(U,R.to[S][V],S))});return{element:U,elements:T,target:U.data("target"),val:f}}function o(R,T){var S=R.data("target");if(!S.hasClass(M[14])){if(!T){S.addClass(M[15]);setTimeout(function(){S.removeClass(M[15])},450)}S.addClass(M[14]);b(R.data("options").block,S)}}function D(S,T){var R=S.data("options");T=Q(T,7);S.data("target").removeClass(M[14]);S.css(R.style,T+"%").data("pct",T);if(S.is(":first-child")){S.toggleClass(M[13],T>50)}if(R.direction){T=100-T}S.data("store").val(E(t(R.range,T),R))}function d(W,X){var V=W.data("base"),U=V.data("options"),S=V.data("handles"),R=0,T=100;if(!y(X)){return false}if(U.step){X=x(X,U.step)}if(S.length>1){if(W[0]!==S[0][0]){R=Q(S[0].data("pct")+U.margin,7)}else{T=Q(S[1].data("pct")-U.margin,7)}}X=Math.min(Math.max(X,R),T<0?100:T);if(X===W.data("pct")){return[!R?false:R,T===100?false:T]}D(W,X);return true}function n(T,S,U,R){T.addClass(M[5]);setTimeout(function(){T.removeClass(M[5])},300);d(S,U);b(R,T.data("target"));T.data("target").change()}function s(S,W,Z){var aa=W.handles,R,Y=S[W.point]-W.start[W.point];Y=(Y*100)/W.size;if(aa.length===1){R=d(aa[0],W.positions[0]+Y);if(R!==true){if(a.inArray(aa[0].data("pct"),R)>=0){o(W.base,!Z.margin)}return}}else{var X,U,V,T;if(Z.step){Y=x(Y,Z.step)}X=V=W.positions[0]+Y;U=T=W.positions[1]+Y;if(X<0){U+=-1*X;X=0}else{if(U>100){X-=(U-100);U=100}}if(V<0&&!X&&!aa[0].data("pct")){return}if(U===100&&T>100&&aa[1].data("pct")===100){return}D(aa[0],X);D(aa[1],U)}b(Z.slide,W.target)}function w(S,T,R){if(T.handles.length===1){T.handles[0].data("grab").removeClass(M[4])}if(S.cursor){z.css("cursor","").off(K)}h.off(K);T.target.removeClass(M[14]+" "+M[20]).change();b(R.set,T.target)}function B(S,T,R){if(T.handles.length===1){T.handles[0].data("grab").addClass(M[4])}S.stopPropagation();r(I.move,h,s,{start:S,base:T.base,target:T.target,handles:T.handles,positions:[T.handles[0].data("pct"),T.handles[T.handles.length-1].data("pct")],point:R.orientation?"pointY":"pointX",size:R.orientation?T.base.height():T.base.width()});r(I.end,h,w,{target:T.target,handles:T.handles});if(S.cursor){z.css("cursor",a(S.target).css("cursor"));if(T.handles.length>1){T.target.addClass(M[20])}z.on("selectstart"+K,function(){return false})}}function H(U,X,S){var W=X.base,V,Y,R,T;U.stopPropagation();if(S.orientation){R=U.pointY;T=W.height()}else{R=U.pointX;T=W.width()}V=g(W.data("handles"),R,S.style);Y=((R-W.offset()[S.style])*100)/T;n(W,V,Y,[S.slide,S.set])}function m(U,V,R){var T=V.base.data("handles"),W,S;S=R.orientation?U.pointY:U.pointX;S=S<V.base.offset()[R.style];W=S?0:100;S=S?0:T.length-1;n(V.base,T[S],W,[R.slide,R.set])}function k(T,V){function S(W){if(W.length!==2){return false}W=[parseFloat(W[0]),parseFloat(W[1])];if(!y(W[0])||!y(W[1])){return false}if(W[1]<W[0]){return false}return W}var R={resolution:function(W,X){switch(W){case 1:case 0.1:case 0.01:case 0.001:case 0.0001:case 0.00001:W=W.toString().split(".");X.decimals=W[0]==="1"?0:W[1].length;break;case undefined:X.decimals=2;break;default:return false}return true},mark:function(X,Y,W){if(!X){Y[W]["mark"]=".";return true}switch(X){case".":case",":return true;default:return false}},to:function(ab,ac,X){function W(ad){return e(ad)||typeof ad==="string"||typeof ad==="function"||ad===false||(e(ad[0])&&typeof ad[0][ad[1]]==="function")}function aa(ae){var ad=[[],[]];if(W(ae)){ad[0].push(ae)}else{a.each(ae,function(af,ag){if(af>1){return}if(W(ag)){ad[af].push(ag)}else{ad[af]=ad[af].concat(ag)}})}return ad}if(!ab){ac[X]["to"]=[[],[]]}else{var Z,Y;ab=aa(ab);if(ac.direction&&ab[1].length){ab.reverse()}for(Z=0;Z<ac.handles;Z++){for(Y=0;Y<ab[Z].length;Y++){if(!W(ab[Z][Y])){return false}if(!ab[Z][Y]){ab[Z].splice(Y,1)}}}ac[X]["to"]=ab}return true}},U={handles:{r:true,t:function(W){W=parseInt(W,10);return(W===1||W===2)}},range:{r:true,t:function(X,Y,W){Y[W]=S(X);return Y[W]&&Y[W][0]!==Y[W][1]}},start:{r:true,t:function(X,Y,W){if(Y.handles===1){if(a.isArray(X)){X=X[0]}X=parseFloat(X);Y.start=[X];return y(X)}Y[W]=S(X);return !!Y[W]}},connect:{r:true,t:function(X,Y,W){if(X==="lower"){Y[W]=1}else{if(X==="upper"){Y[W]=2}else{if(X===true){Y[W]=3}else{if(X===false){Y[W]=0}else{return false}}}}return true}},orientation:{t:function(X,Y,W){switch(X){case"horizontal":Y[W]=0;break;case"vertical":Y[W]=1;break;default:return false}return true}},margin:{r:true,t:function(X,Y,W){X=parseFloat(X);Y[W]=q(Y.range,X);return y(X)}},direction:{r:true,t:function(X,Y,W){switch(X){case"ltr":Y[W]=0;break;case"rtl":Y[W]=1;Y.connect=[0,2,1,3][Y.connect];break;default:return false}return true}},behaviour:{r:true,t:function(X,Y,W){Y[W]={tap:X!==(X=X.replace("tap","")),extend:X!==(X=X.replace("extend","")),drag:X!==(X=X.replace("drag","")),fixed:X!==(X=X.replace("fixed",""))};return !X.replace("none","").replace(/\-/g,"")}},serialization:{r:true,t:function(X,Y,W){return R.to(X.to,Y,W)&&R.resolution(X.resolution,Y)&&R.mark(X.mark,Y,W)}},slide:{t:function(W){return a.isFunction(W)}},set:{t:function(W){return a.isFunction(W)}},block:{t:function(W){return a.isFunction(W)}},step:{t:function(X,Y,W){X=parseFloat(X);Y[W]=q(Y.range,X);return y(X)}}};a.each(U,function(W,Z){var Y=T[W],X=Y!==undefined;if((Z.r&&!X)||(X&&!Z.t(Y,T,W))){if(console&&console.log&&console.group){console.group("Invalid noUiSlider initialisation:");console.log("Option:\t",W);console.log("Value:\t",Y);console.log("Slider(s):\t",V);console.groupEnd()}throw new RangeError("noUiSlider")}})}function l(R){this.data("options",a.extend(true,{},R));R=a.extend({handles:2,margin:0,connect:false,direction:"ltr",behaviour:"tap",orientation:"horizontal"},R);R.serialization=R.serialization||{};k(R,this);R.style=R.orientation?"top":"left";return this.each(function(){var X=a(this),T,W,S=[],V,U=a("<div/>").appendTo(X);if(X.data("base")){throw new Error("Slider was already initialized.")}X.data("base",U).addClass([M[6],M[16+R.direction],M[10+R.orientation]].join(" "));for(T=0;T<R.handles;T++){V=a("<div><div/></div>").appendTo(U);V.addClass(M[1]);V.children().addClass([M[2],M[2]+M[7+R.direction+(R.direction?-1*T:T)]].join(" "));V.data({base:U,target:X,options:R,grab:V.children(),pct:-1}).attr("data-style",R.style);V.data({store:c(V,T,R.serialization)});S.push(V)}switch(R.connect){case 1:X.addClass(M[9]);S[0].addClass(M[12]);break;case 3:S[1].addClass(M[12]);case 2:S[0].addClass(M[9]);case 0:X.addClass(M[12]);break}U.addClass(M[0]).data({target:X,options:R,handles:S});X.val(R.start);if(!R.behaviour["fixed"]){for(T=0;T<S.length;T++){r(I.start,S[T].children(),B,{base:U,target:X,handles:[S[T]]})}}if(R.behaviour["tap"]){r(I.start,U,H,{base:U,target:X})}if(R.behaviour["extend"]){X.addClass(M[19]);if(R.behaviour["tap"]){r(I.start,X,m,{base:U,target:X})}}if(R.behaviour["drag"]){W=U.find("."+M[9]).addClass(M[18]);if(R.behaviour["fixed"]){W=W.add(U.children().not(W).data("grab"))}r(I.start,W,B,{base:U,target:X,handles:S})}})}function G(){var S=a(this).data("base"),R=[];a.each(S.data("handles"),function(){R.push(a(this).data("store").val())});if(R.length===1){return R[0]}if(S.data("options").direction){return R.reverse()}return R}function F(R,S){if(!a.isArray(R)){R=[R]}return this.each(function(){var T=a(this).data("base"),X,V,U=Array.prototype.slice.call(T.data("handles"),0),W=T.data("options");if(U.length>1){U[2]=U[0]}if(W.direction){R.reverse()}for(V=0;V<U.length;V++){X=R[V%2];if(X===null||X===undefined){continue}if(a.type(X)==="string"){X=X.replace(",",".")}X=C(W.range,parseFloat(X));if(W.direction){X=100-X}if(d(U[V],X)!==true){U[V].data("store").val(true)}if(S===true){b(W.set,a(this))}}})}function N(S){var R=[[S,""]];a.each(S.data("base").data("handles"),function(){R=R.concat(a(this).data("store").elements)});a.each(R,function(){if(this.length>1){this[0].off(K)}});S.removeClass(M.join(" "));S.empty().removeData("base options")}function J(R){return this.each(function(){var T=a(this).val()||false,U=a(this).data("options"),S=a.extend({},U,R);if(T!==false){N(a(this))}if(!R){return}a(this)["crownixNoUiSlider"](S);if(T!==false&&S.start===U.start){a(this).val(T)}})}a.fn.val=function(){if(this.hasClass(M[6])){return arguments.length?F.apply(this,arguments):G.apply(this)}return L.apply(this,arguments)};return(j?J:l).call(this,A)}}(window.jQuery||window.Zepto));
/*! jQuery UI - v1.10.4 - 2014-04-13
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.datepicker.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(b,f){var a=0,e=/^ui-id-\d+$/;b.ui=b.ui||{};b.extend(b.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:(function(g){return function(h,j){return typeof h==="number"?this.each(function(){var k=this;setTimeout(function(){b(k).focus();if(j){j.call(k)}},h)}):g.apply(this,arguments)}})(b.fn.focus),scrollParent:function(){var g;if((b.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){g=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(b.css(this,"position"))&&(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}else{g=this.parents().filter(function(){return(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!g.length?b(document):g},zIndex:function(k){if(k!==f){return this.css("zIndex",k)}if(this.length){var h=b(this[0]),g,j;while(h.length&&h[0]!==document){g=h.css("position");if(g==="absolute"||g==="relative"||g==="fixed"){j=parseInt(h.css("zIndex"),10);if(!isNaN(j)&&j!==0){return j}}h=h.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++a)}})},removeUniqueId:function(){return this.each(function(){if(e.test(this.id)){b(this).removeAttr("id")}})}});function d(j,g){var l,k,h,m=j.nodeName.toLowerCase();if("area"===m){l=j.parentNode;k=l.name;if(!j.href||!k||l.nodeName.toLowerCase()!=="map"){return false}h=b("img[usemap=#"+k+"]")[0];return !!h&&c(h)}return(/input|select|textarea|button|object/.test(m)?!j.disabled:"a"===m?j.href||g:g)&&c(j)}function c(g){return b.expr.filters.visible(g)&&!b(g).parents().addBack().filter(function(){return b.css(this,"visibility")==="hidden"}).length}b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(g){return function(h){return !!b.data(h,g)}}):function(j,h,g){return !!b.data(j,g[3])},focusable:function(g){return d(g,!isNaN(b.attr(g,"tabindex")))},tabbable:function(j){var g=b.attr(j,"tabindex"),h=isNaN(g);return(h||g>=0)&&d(j,!h)}});if(!b("<a>").outerWidth(1).jquery){b.each(["Width","Height"],function(j,g){var h=g==="Width"?["Left","Right"]:["Top","Bottom"],k=g.toLowerCase(),m={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};function l(q,o,n,r){b.each(h,function(){o-=parseFloat(b.css(q,"padding"+this))||0;if(n){o-=parseFloat(b.css(q,"border"+this+"Width"))||0}if(r){o-=parseFloat(b.css(q,"margin"+this))||0}});return o}b.fn["inner"+g]=function(n){if(n===f){return m["inner"+g].call(this)}return this.each(function(){b(this).css(k,l(this,n)+"px")})};b.fn["outer"+g]=function(n,o){if(typeof n!=="number"){return m["outer"+g].call(this,n)}return this.each(function(){b(this).css(k,l(this,n,true,o)+"px")})}})}if(!b.fn.addBack){b.fn.addBack=function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}}if(b("<a>").data("a-b","a").removeData("a-b").data("a-b")){b.fn.removeData=(function(g){return function(h){if(arguments.length){return g.call(this,b.camelCase(h))}else{return g.call(this)}}})(b.fn.removeData)}b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart" in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(h,j,l){var g,k=b.ui[h].prototype;for(g in l){k.plugins[g]=k.plugins[g]||[];k.plugins[g].push([j,l[g]])}},call:function(g,j,h){var k,l=g.plugins[j];if(!l||!g.element[0].parentNode||g.element[0].parentNode.nodeType===11){return}for(k=0;k<l.length;k++){if(g.options[l[k][0]]){l[k][1].apply(g.element,h)}}}},hasScroll:function(k,h){if(b(k).css("overflow")==="hidden"){return false}var g=(h&&h==="left")?"scrollLeft":"scrollTop",j=false;if(k[g]>0){return true}k[g]=1;j=(k[g]>0);k[g]=0;return j}})})(jQuery);(function(d,f){d.extend(d.ui,{crownixdatepicker:{version:"1.10.4"}});var e="crownixdatepicker",b;function g(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="crownix-ui-datepicker-div";this._inlineClass="crownix-ui-datepicker-inline";this._appendClass="crownix-ui-datepicker-append";this._triggerClass="crownix-ui-datepicker-trigger";this._dialogClass="crownix-ui-datepicker-dialog";this._disableClass="crownix-ui-datepicker-disabled";this._unselectableClass="crownix-ui-datepicker-unselectable";this._currentClass="crownix-ui-datepicker-current-day";this._dayOverClass="crownix-ui-datepicker-days-cell-over";this.locale="ko";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this.regional.ko={closeText:"닫기",prevText:"이전달",nextText:"다음달",currentText:"오늘",monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthNamesShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayNames:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],dayNamesShort:["일","월","화","수","목","금","토"],dayNamesMin:["일","월","화","수","목","금","토"],weekHeader:"Wk",dateFormat:"yy-mm-dd",firstDay:0,isRTL:false,showMonthAfterYear:true,yearSuffix:"년"};this.regional.ja={closeText:"閉じる",prevText:"&#x3C;前",nextText:"次&#x3E;",currentText:"今日",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],weekHeader:"週",dateFormat:"yy/mm/dd",firstDay:0,isRTL:false,showMonthAfterYear:true,yearSuffix:"年"};this.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:true,yearSuffix:"年"};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false,};d.extend(this._defaults,this.regional[""]);this.dpDiv=c(d("<div id='"+this._mainDivId+"' class='crownix-ui-datepicker crownix-ui-widget crownix-ui-widget-content crownix-ui-helper-clearfix crownix-ui-corner-all'></div>"))}d.extend(g.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(h){a(this._defaults,h||{});return this},_attachDatepicker:function(l,h){var m,k,j;m=l.nodeName.toLowerCase();k=(m==="div"||m==="span");if(!l.id){this.uuid+=1;l.id="dp"+this.uuid}j=this._newInst(d(l),k);j.settings=d.extend({},h||{});if(m==="input"){this._connectDatepicker(l,j)}else{if(k){this._inlineDatepicker(l,j)}}},_newInst:function(j,h){var k=j[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:k,input:j,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:h,dpDiv:(!h?this.dpDiv:c(d("<div class='"+this._inlineClass+" crownix-ui-datepicker crownix-ui-widget crownix-ui-widget-content crownix-ui-helper-clearfix crownix-ui-corner-all'></div>")))}},_connectDatepicker:function(k,j){var h=d(k);j.append=d([]);j.trigger=d([]);if(h.hasClass(this.markerClassName)){return}this._attachments(h,j);h.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(j);d.data(k,e,j);if(j.settings.disabled){this._disableDatepicker(k)}},_attachments:function(k,n){var j,m,h,o=this._get(n,"appendText"),l=this._get(n,"isRTL");if(n.append){n.append.remove()}if(o){n.append=d("<span class='"+this._appendClass+"'>"+o+"</span>");k[l?"before":"after"](n.append)}k.unbind("focus",this._showDatepicker);if(n.trigger){n.trigger.remove()}j=this._get(n,"showOn");if(j==="focus"||j==="both"){k.focus(this._showDatepicker)}if(j==="button"||j==="both"){m=this._get(n,"buttonText");h=this._get(n,"buttonImage");n.trigger=d(this._get(n,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:h,alt:m,title:m}):d("<button type='button'></button>").addClass(this._triggerClass).html(!h?m:d("<img/>").attr({src:h,alt:m,title:m})));k[l?"before":"after"](n.trigger);n.trigger.click(function(){if(d.crownixdatepicker._datepickerShowing&&d.crownixdatepicker._lastInput===k[0]){d.crownixdatepicker._hideDatepicker()}else{if(d.crownixdatepicker._datepickerShowing&&d.crownixdatepicker._lastInput!==k[0]){d.crownixdatepicker._hideDatepicker();d.crownixdatepicker._showDatepicker(k[0])}else{d.crownixdatepicker._showDatepicker(k[0])}}return false})}},_autoSize:function(o){if(this._get(o,"autoSize")&&!o.inline){var l,j,k,n,m=new Date(2009,12-1,20),h=this._get(o,"dateFormat");if(h.match(/[DM]/)){l=function(q){j=0;k=0;for(n=0;n<q.length;n++){if(q[n].length>j){j=q[n].length;k=n}}return k};m.setMonth(l(this._get(o,(h.match(/MM/)?"monthNames":"monthNamesShort"))));m.setDate(l(this._get(o,(h.match(/DD/)?"dayNames":"dayNamesShort")))+20-m.getDay())}o.input.attr("size",this._formatDate(o,m).length)}},_inlineDatepicker:function(j,h){var k=d(j);if(k.hasClass(this.markerClassName)){return}k.addClass(this.markerClassName).append(h.dpDiv);d.data(j,e,h);this._setDate(h,this._getDefaultDate(h),true);this._updateDatepicker(h);this._updateAlternate(h);if(h.settings.disabled){this._disableDatepicker(j)}h.dpDiv.css("display","block")},_dialogDatepicker:function(q,j,n,k,o){var h,t,m,s,r,l=this._dialogInst;if(!l){this.uuid+=1;h="dp"+this.uuid;this._dialogInput=d("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);l=this._dialogInst=this._newInst(this._dialogInput,false);l.settings={};d.data(this._dialogInput[0],e,l)}a(l.settings,k||{});j=(j&&j.constructor===Date?this._formatDate(l,j):j);this._dialogInput.val(j);this._pos=(o?(o.length?o:[o.pageX,o.pageY]):null);if(!this._pos){t=document.documentElement.clientWidth;m=document.documentElement.clientHeight;s=document.documentElement.scrollLeft||document.body.scrollLeft;r=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(t/2)-100+s,(m/2)-150+r]}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");l.settings.onSelect=n;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(d.blockUI){d.blockUI(this.dpDiv)}d.data(this._dialogInput[0],e,l);return this},_destroyDatepicker:function(k){var l,h=d(k),j=d.data(k,e);if(!h.hasClass(this.markerClassName)){return}l=k.nodeName.toLowerCase();d.removeData(k,e);if(l==="input"){j.append.remove();j.trigger.remove();h.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(l==="div"||l==="span"){h.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(l){var m,k,h=d(l),j=d.data(l,e);if(!h.hasClass(this.markerClassName)){return}m=l.nodeName.toLowerCase();if(m==="input"){l.disabled=false;j.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(m==="div"||m==="span"){k=h.children("."+this._inlineClass);k.children().removeClass("crownix-ui-state-disabled");k.find("select.crownix-ui-datepicker-month, select.crownix-ui-datepicker-year").prop("disabled",false)}}this._disabledInputs=d.map(this._disabledInputs,function(n){return(n===l?null:n)})},_disableDatepicker:function(l){var m,k,h=d(l),j=d.data(l,e);if(!h.hasClass(this.markerClassName)){return}m=l.nodeName.toLowerCase();if(m==="input"){l.disabled=true;j.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(m==="div"||m==="span"){k=h.children("."+this._inlineClass);k.children().addClass("crownix-ui-state-disabled");k.find("select.crownix-ui-datepicker-month, select.crownix-ui-datepicker-year").prop("disabled",true)}}this._disabledInputs=d.map(this._disabledInputs,function(n){return(n===l?null:n)});this._disabledInputs[this._disabledInputs.length]=l},_isDisabledDatepicker:function(j){if(!j){return false}for(var h=0;h<this._disabledInputs.length;h++){if(this._disabledInputs[h]===j){return true}}return false},_getInst:function(j){try{return d.data(j,e)}catch(h){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(o,j,n){var k,h,m,q,l=this._getInst(o);if(arguments.length===2&&typeof j==="string"){return(j==="defaults"?d.extend({},d.crownixdatepicker._defaults):(l?(j==="all"?d.extend({},l.settings):this._get(l,j)):null))}k=j||{};if(typeof j==="string"){k={};k[j]=n}if(l){if(this._curInst===l){this._hideDatepicker()}h=this._getDateDatepicker(o,true);m=this._getMinMaxDate(l,"min");q=this._getMinMaxDate(l,"max");a(l.settings,k);if(m!==null&&k.dateFormat!==f&&k.minDate===f){l.settings.minDate=this._formatDate(l,m)}if(q!==null&&k.dateFormat!==f&&k.maxDate===f){l.settings.maxDate=this._formatDate(l,q)}if("disabled" in k){if(k.disabled){this._disableDatepicker(o)}else{this._enableDatepicker(o)}}this._attachments(d(o),l);this._autoSize(l);this._setDate(l,h);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(k,h,j){this._optionDatepicker(k,h,j)},_refreshDatepicker:function(j){var h=this._getInst(j);if(h){this._updateDatepicker(h)}},_setDateDatepicker:function(k,h){var j=this._getInst(k);if(j){this._setDate(j,h);this._updateDatepicker(j);this._updateAlternate(j)}},_getDateDatepicker:function(k,h){var j=this._getInst(k);if(j&&!j.inline){this._setDateFromField(j,h)}return(j?this._getDate(j):null)},_doKeyDown:function(l){var j,h,n,m=d.crownixdatepicker._getInst(l.target),o=true,k=m.dpDiv.is(".crownix-ui-datepicker-rtl");m._keyEvent=true;if(d.crownixdatepicker._datepickerShowing){switch(l.keyCode){case 9:d.crownixdatepicker._hideDatepicker();o=false;break;case 13:n=d("td."+d.crownixdatepicker._dayOverClass+":not(."+d.crownixdatepicker._currentClass+")",m.dpDiv);if(n[0]){d.crownixdatepicker._selectDay(l.target,m.selectedMonth,m.selectedYear,n[0])}j=d.crownixdatepicker._get(m,"onSelect");if(j){h=d.crownixdatepicker._formatDate(m);j.apply((m.input?m.input[0]:null),[h,m])}else{d.crownixdatepicker._hideDatepicker()}return false;case 27:d.crownixdatepicker._hideDatepicker();break;case 33:d.crownixdatepicker._adjustDate(l.target,(l.ctrlKey?-d.crownixdatepicker._get(m,"stepBigMonths"):-d.crownixdatepicker._get(m,"stepMonths")),"M");break;case 34:d.crownixdatepicker._adjustDate(l.target,(l.ctrlKey?+d.crownixdatepicker._get(m,"stepBigMonths"):+d.crownixdatepicker._get(m,"stepMonths")),"M");break;case 35:if(l.ctrlKey||l.metaKey){d.crownixdatepicker._clearDate(l.target)}o=l.ctrlKey||l.metaKey;break;case 36:if(l.ctrlKey||l.metaKey){d.crownixdatepicker._gotoToday(l.target)}o=l.ctrlKey||l.metaKey;break;case 37:if(l.ctrlKey||l.metaKey){d.crownixdatepicker._adjustDate(l.target,(k?+1:-1),"D")}o=l.ctrlKey||l.metaKey;if(l.originalEvent.altKey){d.crownixdatepicker._adjustDate(l.target,(l.ctrlKey?-d.crownixdatepicker._get(m,"stepBigMonths"):-d.crownixdatepicker._get(m,"stepMonths")),"M")}break;case 38:if(l.ctrlKey||l.metaKey){d.crownixdatepicker._adjustDate(l.target,-7,"D")}o=l.ctrlKey||l.metaKey;break;case 39:if(l.ctrlKey||l.metaKey){d.crownixdatepicker._adjustDate(l.target,(k?-1:+1),"D")}o=l.ctrlKey||l.metaKey;if(l.originalEvent.altKey){d.crownixdatepicker._adjustDate(l.target,(l.ctrlKey?+d.crownixdatepicker._get(m,"stepBigMonths"):+d.crownixdatepicker._get(m,"stepMonths")),"M")}break;case 40:if(l.ctrlKey||l.metaKey){d.crownixdatepicker._adjustDate(l.target,+7,"D")}o=l.ctrlKey||l.metaKey;break;default:o=false}}else{if(l.keyCode===36&&l.ctrlKey){d.crownixdatepicker._showDatepicker(this)}else{o=false}}if(o){l.preventDefault();l.stopPropagation()}},_doKeyPress:function(k){var j,h,l=d.crownixdatepicker._getInst(k.target);if(d.crownixdatepicker._get(l,"constrainInput")){j=d.crownixdatepicker._possibleChars(d.crownixdatepicker._get(l,"dateFormat"));h=String.fromCharCode(k.charCode==null?k.keyCode:k.charCode);return k.ctrlKey||k.metaKey||(h<" "||!j||j.indexOf(h)>-1)}},_doKeyUp:function(k){var h,l=d.crownixdatepicker._getInst(k.target);if(l.input.val()!==l.lastVal){try{h=d.crownixdatepicker.parseDate(d.crownixdatepicker._get(l,"dateFormat"),(l.input?l.input.val():null),d.crownixdatepicker._getFormatConfig(l));if(h){d.crownixdatepicker._setDateFromField(l);d.crownixdatepicker._updateAlternate(l);d.crownixdatepicker._updateDatepicker(l)}}catch(j){}}return true},_showDatepicker:function(j){j=j.target||j;if(j.nodeName.toLowerCase()!=="input"){j=d("input",j.parentNode)[0]}if(d.crownixdatepicker._isDisabledDatepicker(j)||d.crownixdatepicker._lastInput===j){return}var l,q,k,n,o,h,m;l=d.crownixdatepicker._getInst(j);if(d.crownixdatepicker._curInst&&d.crownixdatepicker._curInst!==l){d.crownixdatepicker._curInst.dpDiv.stop(true,true);if(l&&d.crownixdatepicker._datepickerShowing){d.crownixdatepicker._hideDatepicker(d.crownixdatepicker._curInst.input[0])}}q=d.crownixdatepicker._get(l,"beforeShow");k=q?q.apply(j,[j,l]):{};if(k===false){return}a(l.settings,k);l.lastVal=null;d.crownixdatepicker._lastInput=j;d.crownixdatepicker._setDateFromField(l);if(d.crownixdatepicker._inDialog){j.value=""}if(!d.crownixdatepicker._pos){d.crownixdatepicker._pos=d.crownixdatepicker._findPos(j);d.crownixdatepicker._pos[1]+=j.offsetHeight}n=false;d(j).parents().each(function(){n|=d(this).css("position")==="fixed";return !n});o={left:d.crownixdatepicker._pos[0],top:d.crownixdatepicker._pos[1]};d.crownixdatepicker._pos=null;l.dpDiv.empty();l.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.crownixdatepicker._updateDatepicker(l);o=d.crownixdatepicker._checkOffset(l,o,n);l.dpDiv.css({position:(d.crownixdatepicker._inDialog&&d.blockUI?"static":(n?"fixed":"absolute")),display:"none",left:o.left+"px",top:o.top+"px"});if(!l.inline){h=d.crownixdatepicker._get(l,"showAnim");m=d.crownixdatepicker._get(l,"duration");(d(j).zIndex()<d("#crownix-html5-viewer").zIndex())?l.dpDiv.zIndex(d("#crownix-html5-viewer").zIndex()+1):l.dpDiv.zIndex(d(j).zIndex()+1);d.crownixdatepicker._datepickerShowing=true;if(d.effects&&d.effects.effect[h]){l.dpDiv.show(h,d.crownixdatepicker._get(l,"showOptions"),m)}else{l.dpDiv[h||"show"](h?m:null)}if(d.crownixdatepicker._shouldFocusInput(l)){l.input.focus()}d.crownixdatepicker._curInst=l}},_updateDatepicker:function(k){this.maxRows=4;b=k;k.dpDiv.empty().append(this._generateHTML(k));this._attachHandlers(k);k.dpDiv.find("."+this._dayOverClass+" a").mouseover();var m,h=this._getNumberOfMonths(k),l=h[1],j=17;k.dpDiv.removeClass("crownix-ui-datepicker-multi-2 crownix-ui-datepicker-multi-3 crownix-ui-datepicker-multi-4").width("");if(l>1){k.dpDiv.addClass("crownix-ui-datepicker-multi-"+l).css("width",(j*l)+"em")}k.dpDiv[(h[0]!==1||h[1]!==1?"add":"remove")+"Class"]("crownix-ui-datepicker-multi");k.dpDiv[(this._get(k,"isRTL")?"add":"remove")+"Class"]("crownix-ui-datepicker-rtl");if(k===d.crownixdatepicker._curInst&&d.crownixdatepicker._datepickerShowing&&d.crownixdatepicker._shouldFocusInput(k)){k.input.focus()}if(k.yearshtml){m=k.yearshtml;setTimeout(function(){if(m===k.yearshtml&&k.yearshtml){k.dpDiv.find("select.crownix-ui-datepicker-year:first").replaceWith(k.yearshtml)}m=k.yearshtml=null},0)}},_shouldFocusInput:function(h){return h.input&&h.input.is(":visible")&&!h.input.is(":disabled")&&!h.input.is(":focus")},_checkOffset:function(n,l,k){var m=n.dpDiv.outerWidth(),r=n.dpDiv.outerHeight(),q=n.input?n.input.outerWidth():0,h=n.input?n.input.outerHeight():0,o=document.documentElement.clientWidth+(k?0:d(document).scrollLeft()),j=document.documentElement.clientHeight+(k?0:d(document).scrollTop());l.left-=(this._get(n,"isRTL")?(m-q):0);l.left-=(k&&l.left===n.input.offset().left)?d(document).scrollLeft():0;l.top-=(k&&l.top===(n.input.offset().top+h))?d(document).scrollTop():0;l.left-=Math.min(l.left,(l.left+m>o&&o>m)?Math.abs(l.left+m-o):0);l.top-=Math.min(l.top,(l.top+r>j&&j>r)?Math.abs(r+h):0);return l},_findPos:function(l){var h,k=this._getInst(l),j=this._get(k,"isRTL");while(l&&(l.type==="hidden"||l.nodeType!==1||d.expr.filters.hidden(l))){l=l[j?"previousSibling":"nextSibling"]}h=d(l).offset();return[h.left,h.top]},_hideDatepicker:function(k){var j,n,m,h,l=this._curInst;if(!l||(k&&l!==d.data(k,e))){return}if(this._datepickerShowing){j=this._get(l,"showAnim");n=this._get(l,"duration");m=function(){d.crownixdatepicker._tidyDialog(l)};if(d.effects&&(d.effects.effect[j]||d.effects[j])){l.dpDiv.hide(j,d.crownixdatepicker._get(l,"showOptions"),n,m)}else{l.dpDiv[(j==="slideDown"?"slideUp":(j==="fadeIn"?"fadeOut":"hide"))]((j?n:null),m)}if(!j){m()}this._datepickerShowing=false;h=this._get(l,"onClose");if(h){h.apply((l.input?l.input[0]:null),[(l.input?l.input.val():""),l])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(h){h.dpDiv.removeClass(this._dialogClass).unbind(".crownix-ui-datepicker-calendar")},_checkExternalClick:function(j){if(!d.crownixdatepicker._curInst){return}var h=d(j.target),k=d.crownixdatepicker._getInst(h[0]);if(((h[0].id!==d.crownixdatepicker._mainDivId&&h.parents("#"+d.crownixdatepicker._mainDivId).length===0&&!h.hasClass(d.crownixdatepicker.markerClassName)&&!h.closest("."+d.crownixdatepicker._triggerClass).length&&d.crownixdatepicker._datepickerShowing&&!(d.crownixdatepicker._inDialog&&d.blockUI)))||(h.hasClass(d.crownixdatepicker.markerClassName)&&d.crownixdatepicker._curInst!==k)){d.crownixdatepicker._hideDatepicker()}},_adjustDate:function(m,l,k){var j=d(m),h=this._getInst(j[0]);if(this._isDisabledDatepicker(j[0])){return}this._adjustInstDate(h,l+(k==="M"?this._get(h,"showCurrentAtPos"):0),k);this._updateDatepicker(h)},_gotoToday:function(l){var h,k=d(l),j=this._getInst(k[0]);if(this._get(j,"gotoCurrent")&&j.currentDay){j.selectedDay=j.currentDay;j.drawMonth=j.selectedMonth=j.currentMonth;j.drawYear=j.selectedYear=j.currentYear}else{h=new Date();j.selectedDay=h.getDate();j.drawMonth=j.selectedMonth=h.getMonth();j.drawYear=j.selectedYear=h.getFullYear()}this._notifyChange(j);this._adjustDate(k)},_selectMonthYear:function(m,h,l){var k=d(m),j=this._getInst(k[0]);j["selected"+(l==="M"?"Month":"Year")]=j["draw"+(l==="M"?"Month":"Year")]=parseInt(h.options[h.selectedIndex].value,10);this._notifyChange(j);this._adjustDate(k)},_selectDay:function(n,l,h,m){var j,k=d(n);if(d(m).hasClass(this._unselectableClass)||this._isDisabledDatepicker(k[0])){return}j=this._getInst(k[0]);j.selectedDay=j.currentDay=d("a",m).html();j.selectedMonth=j.currentMonth=l;j.selectedYear=j.currentYear=h;this._selectDate(n,this._formatDate(j,j.currentDay,j.currentMonth,j.currentYear))},_clearDate:function(j){var h=d(j);this._selectDate(h,"")},_selectDate:function(m,h){var j,l=d(m),k=this._getInst(l[0]);h=(h!=null?h:this._formatDate(k));if(k.input){k.input.val(h)}this._updateAlternate(k);j=this._get(k,"onSelect");if(j){j.apply((k.input?k.input[0]:null),[h,k])}else{if(k.input){k.input.trigger("change")}}if(k.inline){this._updateDatepicker(k)}else{this._hideDatepicker();this._lastInput=k.input[0];if(typeof(k.input[0])!=="object"){k.input.focus()}this._lastInput=null}},_updateAlternate:function(m){var l,k,h,j=this._get(m,"altField");if(j){l=this._get(m,"altFormat")||this._get(m,"dateFormat");k=this._getDate(m);h=this.formatDate(l,k,this._getFormatConfig(m));d(j).each(function(){d(this).val(h)})}},noWeekends:function(j){var h=j.getDay();return[(h>0&&h<6),""]},iso8601Week:function(h){var j,k=new Date(h.getTime());k.setDate(k.getDate()+4-(k.getDay()||7));j=k.getTime();k.setMonth(0);k.setDate(1);return Math.floor(Math.round((j-k)/86400000)/7)+1},parseDate:function(k,j,h){if(k==null||j==null){throw"Invalid arguments"}j=(typeof j==="object"?j.toString():j+"");if(j===""){return null}return new Date(m2soft.crownix.DateParser.getDateFromFormat(k,j,d.crownixdatepicker.locale))},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(l,j,k){if(!j){return""}var h=new Date();j.setHours(h.getHours());j.setMinutes(h.getMinutes());j.setSeconds(h.getSeconds());return m2soft.crownix.DateParser.formatDate(l,j,d.crownixdatepicker.locale)},_possibleChars:function(m){var l,k="",j=false,h=function(n){var o=(l+1<m.length&&m.charAt(l+1)===n);if(o){l++}return o};for(l=0;l<m.length;l++){if(j){if(m.charAt(l)==="'"&&!h("'")){j=false}else{k+=m.charAt(l)}}else{switch(m.charAt(l)){case"d":case"m":case"y":case"@":k+="0123456789";break;case"D":case"M":return null;case"'":if(h("'")){k+="'"}else{j=true}break;default:k+=m.charAt(l)}}}return k},_get:function(j,h){return j.settings[h]!==f?j.settings[h]:this._defaults[h]},_setDateFromField:function(n,k){if(n.input.val()===n.lastVal){return}var h=this._get(n,"dateFormat"),q=n.lastVal=n.input?n.input.val():null,o=this._getDefaultDate(n),j=o,l=this._getFormatConfig(n);try{j=this.parseDate(h,q,l)||o}catch(m){q=(k?"":q)}n.selectedDay=j.getDate();n.drawMonth=n.selectedMonth=j.getMonth();n.drawYear=n.selectedYear=j.getFullYear();n.currentDay=(q?j.getDate():0);n.currentMonth=(q?j.getMonth():0);n.currentYear=(q?j.getFullYear():0);this._adjustInstDate(n)},_getDefaultDate:function(h){return this._restrictMinMax(h,this._determineDate(h,this._get(h,"defaultDate"),new Date()))},_determineDate:function(m,j,n){var l=function(q){var o=new Date();o.setDate(o.getDate()+q);return o},k=function(x){try{return d.crownixdatepicker.parseDate(d.crownixdatepicker._get(m,"dateFormat"),x,d.crownixdatepicker._getFormatConfig(m))}catch(w){}var q=(x.toLowerCase().match(/^c/)?d.crownixdatepicker._getDate(m):null)||new Date(),r=q.getFullYear(),u=q.getMonth(),o=q.getDate(),t=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=t.exec(x);while(s){switch(s[2]||"d"){case"d":case"D":o+=parseInt(s[1],10);break;case"w":case"W":o+=parseInt(s[1],10)*7;break;case"m":case"M":u+=parseInt(s[1],10);o=Math.min(o,d.crownixdatepicker._getDaysInMonth(r,u));break;case"y":case"Y":r+=parseInt(s[1],10);o=Math.min(o,d.crownixdatepicker._getDaysInMonth(r,u));break}s=t.exec(x)}return new Date(r,u,o)},h=(j==null||j===""?n:(typeof j==="string"?k(j):(typeof j==="number"?(isNaN(j)?n:l(j)):new Date(j.getTime()))));h=(h&&h.toString()==="Invalid Date"?n:h);if(h){h.setHours(0);h.setMinutes(0);h.setSeconds(0);h.setMilliseconds(0)}return this._daylightSavingAdjust(h)},_daylightSavingAdjust:function(h){if(!h){return null}h.setHours(h.getHours()>12?h.getHours()+2:0);return h},_setDate:function(o,l,n){var h=!l,k=o.selectedMonth,m=o.selectedYear,j=this._restrictMinMax(o,this._determineDate(o,l,new Date()));o.selectedDay=o.currentDay=j.getDate();o.drawMonth=o.selectedMonth=o.currentMonth=j.getMonth();o.drawYear=o.selectedYear=o.currentYear=j.getFullYear();if((k!==o.selectedMonth||m!==o.selectedYear)&&!n){this._notifyChange(o)}this._adjustInstDate(o);if(o.input){o.input.val(h?"":this._formatDate(o))}},_getDate:function(j){var h=(!j.currentYear||(j.input&&j.input.val()==="")?null:this._daylightSavingAdjust(new Date(j.currentYear,j.currentMonth,j.currentDay)));return h},_attachHandlers:function(j){var h=this._get(j,"stepMonths"),k="#"+j.id.replace(/\\\\/g,"\\");j.dpDiv.find("[data-handler]").map(function(){var l={prev:function(){d.crownixdatepicker._adjustDate(k,-h,"M")},next:function(){d.crownixdatepicker._adjustDate(k,+h,"M")},hide:function(){d.crownixdatepicker._hideDatepicker()},today:function(){d.crownixdatepicker._gotoToday(k)},selectDay:function(){d.crownixdatepicker._selectDay(k,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){d.crownixdatepicker._selectMonthYear(k,this,"M");return false},selectYear:function(){d.crownixdatepicker._selectMonthYear(k,this,"Y");return false}};d(this).bind(this.getAttribute("data-event"),l[this.getAttribute("data-handler")])})},_generateHTML:function(aa){var D,C,V,N,m,ae,Y,R,ah,L,al,u,x,w,j,ad,s,G,ag,T,am,F,K,t,n,W,P,S,Q,r,I,y,Z,ac,l,af,aj,O,z,ab=new Date(),E=this._daylightSavingAdjust(new Date(ab.getFullYear(),ab.getMonth(),ab.getDate())),ai=this._get(aa,"isRTL"),ak=this._get(aa,"showButtonPanel"),U=this._get(aa,"hideIfNoPrevNext"),J=this._get(aa,"navigationAsDateFormat"),A=this._getNumberOfMonths(aa),q=this._get(aa,"showCurrentAtPos"),M=this._get(aa,"stepMonths"),H=(A[0]!==1||A[1]!==1),k=this._daylightSavingAdjust((!aa.currentDay?new Date(9999,9,9):new Date(aa.currentYear,aa.currentMonth,aa.currentDay))),o=this._getMinMaxDate(aa,"min"),B=this._getMinMaxDate(aa,"max"),h=aa.drawMonth-q,X=aa.drawYear;if(h<0){h+=12;X--}if(B){D=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth()-(A[0]*A[1])+1,B.getDate()));D=(o&&D<o?o:D);while(this._daylightSavingAdjust(new Date(X,h,1))>D){h--;if(h<0){h=11;X--}}}aa.drawMonth=h;aa.drawYear=X;C=this._get(aa,"prevText");C=(!J?C:this.formatDate(C,this._daylightSavingAdjust(new Date(X,h-M,1)),this._getFormatConfig(aa)));V=(this._canAdjustMonth(aa,-1,X,h)?"<a class='crownix-ui-datepicker-prev crownix-ui-corner-all' data-handler='prev' data-event='click' title='"+C+"'><span class='crownix-ui-icon crownix-ui-icon-circle-triangle-"+(ai?"e":"w")+"'>◀</span></a>":(U?"":"<a class='crownix-ui-datepicker-prev crownix-ui-corner-all crownix-ui-state-disabled' title='"+C+"'><span class='crownix-ui-icon crownix-ui-icon-circle-triangle-"+(ai?"e":"w")+"'>◀</span></a>"));N=this._get(aa,"nextText");N=(!J?N:this.formatDate(N,this._daylightSavingAdjust(new Date(X,h+M,1)),this._getFormatConfig(aa)));m=(this._canAdjustMonth(aa,+1,X,h)?"<a class='crownix-ui-datepicker-next crownix-ui-corner-all' data-handler='next' data-event='click' title='"+N+"'><span class='crownix-ui-icon crownix-ui-icon-circle-triangle-"+(ai?"w":"e")+"'>▶</span></a>":(U?"":"<a class='crownix-ui-datepicker-next crownix-ui-corner-all crownix-ui-state-disabled' title='"+N+"'><span class='crownix-ui-icon crownix-ui-icon-circle-triangle-"+(ai?"w":"e")+"'>▶</span></a>"));ae=this._get(aa,"currentText");Y=(this._get(aa,"gotoCurrent")&&aa.currentDay?k:E);ae=(!J?ae:this.formatDate(ae,Y,this._getFormatConfig(aa)));R=(!aa.inline?"<button type='button' class='crownix-ui-datepicker-close crownix-ui-state-default crownix-ui-priority-primary crownix-ui-corner-all' data-handler='hide' data-event='click'>"+this._get(aa,"closeText")+"</button>":"");ah=(ak)?"<div class='crownix-ui-datepicker-buttonpane crownix-ui-widget-content'>"+(ai?R:"")+(this._isInRange(aa,Y)?"<button type='button' class='crownix-ui-datepicker-current crownix-ui-state-default crownix-ui-priority-secondary crownix-ui-corner-all' data-handler='today' data-event='click'>"+ae+"</button>":"")+(ai?"":R)+"</div>":"";L=parseInt(this._get(aa,"firstDay"),10);L=(isNaN(L)?0:L);al=this._get(aa,"showWeek");u=this._get(aa,"dayNames");x=this._get(aa,"dayNamesMin");w=this._get(aa,"monthNames");j=this._get(aa,"monthNamesShort");ad=this._get(aa,"beforeShowDay");s=this._get(aa,"showOtherMonths");G=this._get(aa,"selectOtherMonths");ag=this._getDefaultDate(aa);T="";am;for(F=0;F<A[0];F++){K="";this.maxRows=4;for(t=0;t<A[1];t++){n=this._daylightSavingAdjust(new Date(X,h,aa.selectedDay));W=" crownix-ui-corner-all";P="";if(H){P+="<div class='crownix-ui-datepicker-group";if(A[1]>1){switch(t){case 0:P+=" crownix-ui-datepicker-group-first";W=" crownix-ui-corner-"+(ai?"right":"left");break;case A[1]-1:P+=" crownix-ui-datepicker-group-last";W=" crownix-ui-corner-"+(ai?"left":"right");break;default:P+=" crownix-ui-datepicker-group-middle";W="";break}}P+="'>"}P+="<div class='crownix-ui-datepicker-header crownix-ui-widget-header crownix-ui-helper-clearfix"+W+"'>"+(/all|left/.test(W)&&F===0?(ai?m:V):"")+(/all|right/.test(W)&&F===0?(ai?V:m):"")+this._generateMonthYearHeader(aa,h,X,o,B,F>0||t>0,w,j)+"</div><table class='crownix-ui-datepicker-calendar'><thead><tr>";S=(al?"<th class='crownix-ui-datepicker-week-col'>"+this._get(aa,"weekHeader")+"</th>":"");for(am=0;am<7;am++){Q=(am+L)%7;S+="<th"+((am+L+6)%7>=5?" class='crownix-ui-datepicker-week-end'":"")+"><span title='"+u[Q]+"'>"+x[Q]+"</span></th>"}P+=S+"</tr></thead><tbody>";r=this._getDaysInMonth(X,h);if(X===aa.selectedYear&&h===aa.selectedMonth){aa.selectedDay=Math.min(aa.selectedDay,r)}I=(this._getFirstDayOfMonth(X,h)-L+7)%7;y=Math.ceil((I+r)/7);Z=(H?this.maxRows>y?this.maxRows:y:y);this.maxRows=Z;ac=this._daylightSavingAdjust(new Date(X,h,1-I));for(l=0;l<Z;l++){P+="<tr>";af=(!al?"":"<td class='crownix-ui-datepicker-week-col'>"+this._get(aa,"calculateWeek")(ac)+"</td>");for(am=0;am<7;am++){aj=(ad?ad.apply((aa.input?aa.input[0]:null),[ac]):[true,""]);O=(ac.getMonth()!==h);z=(O&&!G)||!aj[0]||(o&&ac<o)||(B&&ac>B);af+="<td class='"+((am+L+6)%7>=5?" crownix-ui-datepicker-week-end":"")+(O?" crownix-ui-datepicker-other-month":"")+((ac.getTime()===n.getTime()&&h===aa.selectedMonth&&aa._keyEvent)||(ag.getTime()===ac.getTime()&&ag.getTime()===n.getTime())?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" crownix-ui-state-disabled":"")+(O&&!s?"":" "+aj[1]+(ac.getTime()===k.getTime()?" "+this._currentClass:"")+(ac.getTime()===E.getTime()?" crownix-ui-datepicker-today":""))+"'"+((!O||s)&&aj[2]?" title='"+aj[2].replace(/'/g,"&#39;")+"'":"")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+ac.getMonth()+"' data-year='"+ac.getFullYear()+"'")+">"+(O&&!s?"&#xa0;":(z?"<span class='crownix-ui-state-default'>"+ac.getDate()+"</span>":"<a class='crownix-ui-state-default"+(ac.getTime()===E.getTime()?" crownix-ui-state-highlight":"")+(ac.getTime()===k.getTime()?" crownix-ui-state-active":"")+(O?" crownix-ui-priority-secondary":"")+"' href='#'>"+ac.getDate()+"</a>"))+"</td>";ac.setDate(ac.getDate()+1);ac=this._daylightSavingAdjust(ac)}P+=af+"</tr>"}h++;if(h>11){h=0;X++}P+="</tbody></table>"+(H?"</div>"+((A[0]>0&&t===A[1]-1)?"<div class='crownix-ui-datepicker-row-break'></div>":""):"");K+=P}T+=K}T+=ah;aa._keyEvent=false;return T},_generateMonthYearHeader:function(m,k,w,o,t,x,r,h){var B,j,C,z,n,y,u,q,l=this._get(m,"changeMonth"),D=this._get(m,"changeYear"),E=this._get(m,"showMonthAfterYear"),s="<div class='crownix-ui-datepicker-title'>",A="";if(x||!l){A+="<span class='crownix-ui-datepicker-month'>"+r[k]+"</span>"}else{B=(o&&o.getFullYear()===w);j=(t&&t.getFullYear()===w);A+="<select class='crownix-ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(C=0;C<12;C++){if((!B||C>=o.getMonth())&&(!j||C<=t.getMonth())){A+="<option value='"+C+"'"+(C===k?" selected='selected'":"")+">"+h[C]+"</option>"}}A+="</select>"}if(!E){s+=A+(x||!(l&&D)?"&#xa0;":"")}if(!m.yearshtml){m.yearshtml="";if(x||!D){s+="<span class='crownix-ui-datepicker-year'>"+w+"</span>"}else{z=this._get(m,"yearRange").split(":");n=new Date().getFullYear();y=function(G){var F=(G.match(/c[+\-].*/)?w+parseInt(G.substring(1),10):(G.match(/[+\-].*/)?n+parseInt(G,10):parseInt(G,10)));return(isNaN(F)?n:F)};u=y(z[0]);q=Math.max(u,y(z[1]||""));u=(o?Math.max(u,o.getFullYear()):u);q=(t?Math.min(q,t.getFullYear()):q);m.yearshtml+="<select class='crownix-ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;u<=q;u++){m.yearshtml+="<option value='"+u+"'"+(u===w?" selected='selected'":"")+">"+u+"</option>"}m.yearshtml+="</select>";s+=m.yearshtml;m.yearshtml=null}}s+=this._get(m,"yearSuffix");if(E){s+=(x||!(l&&D)?"&#xa0;":"")+A}s+="</div>";return s},_adjustInstDate:function(l,o,n){var k=l.drawYear+(n==="Y"?o:0),m=l.drawMonth+(n==="M"?o:0),h=Math.min(l.selectedDay,this._getDaysInMonth(k,m))+(n==="D"?o:0),j=this._restrictMinMax(l,this._daylightSavingAdjust(new Date(k,m,h)));l.selectedDay=j.getDate();l.drawMonth=l.selectedMonth=j.getMonth();l.drawYear=l.selectedYear=j.getFullYear();if(n==="M"||n==="Y"){this._notifyChange(l)}},_restrictMinMax:function(l,j){var k=this._getMinMaxDate(l,"min"),m=this._getMinMaxDate(l,"max"),h=(k&&j<k?k:j);return(m&&h>m?m:h)},_notifyChange:function(j){var h=this._get(j,"onChangeMonthYear");if(h){h.apply((j.input?j.input[0]:null),[j.selectedYear,j.selectedMonth+1,j])}},_getNumberOfMonths:function(j){var h=this._get(j,"numberOfMonths");return(h==null?[1,1]:(typeof h==="number"?[1,h]:h))},_getMinMaxDate:function(j,h){return this._determineDate(j,this._get(j,h+"Date"),null)},_getDaysInMonth:function(h,j){return 32-this._daylightSavingAdjust(new Date(h,j,32)).getDate()},_getFirstDayOfMonth:function(h,j){return new Date(h,j,1).getDay()},_canAdjustMonth:function(l,n,k,m){var h=this._getNumberOfMonths(l),j=this._daylightSavingAdjust(new Date(k,m+(n<0?n:h[0]*h[1]),1));if(n<0){j.setDate(this._getDaysInMonth(j.getFullYear(),j.getMonth()))}return this._isInRange(l,j)},_isInRange:function(m,k){var j,q,l=this._getMinMaxDate(m,"min"),h=this._getMinMaxDate(m,"max"),r=null,n=null,o=this._get(m,"yearRange");if(o){j=o.split(":");q=new Date().getFullYear();r=parseInt(j[0],10);n=parseInt(j[1],10);if(j[0].match(/[+\-].*/)){r+=q}if(j[1].match(/[+\-].*/)){n+=q}}return((!l||k.getTime()>=l.getTime())&&(!h||k.getTime()<=h.getTime())&&(!r||k.getFullYear()>=r)&&(!n||k.getFullYear()<=n))},_getFormatConfig:function(h){var j=this._get(h,"shortYearCutoff");j=(typeof j!=="string"?j:new Date().getFullYear()%100+parseInt(j,10));return{shortYearCutoff:j,dayNamesShort:this._get(h,"dayNamesShort"),dayNames:this._get(h,"dayNames"),monthNamesShort:this._get(h,"monthNamesShort"),monthNames:this._get(h,"monthNames")}},_formatDate:function(l,h,m,k){if(!h){l.currentDay=l.selectedDay;l.currentMonth=l.selectedMonth;l.currentYear=l.selectedYear}var j=(h?(typeof h==="object"?h:this._daylightSavingAdjust(new Date(k,m,h))):this._daylightSavingAdjust(new Date(l.currentYear,l.currentMonth,l.currentDay)));return this.formatDate(this._get(l,"dateFormat"),j,this._getFormatConfig(l))}});function c(j){var h="button, .crownix-ui-datepicker-prev, .crownix-ui-datepicker-next, .crownix-ui-datepicker-calendar td a";return j.delegate(h,"mouseout",function(){d(this).removeClass("crownix-ui-state-hover");if(this.className.indexOf("crownix-ui-datepicker-prev")!==-1){d(this).removeClass("crownix-ui-datepicker-prev-hover")}if(this.className.indexOf("crownix-ui-datepicker-next")!==-1){d(this).removeClass("crownix-ui-datepicker-next-hover")}}).delegate(h,"mouseover",function(){if(!d.crownixdatepicker._isDisabledDatepicker(b.inline?j.parent()[0]:b.input[0])){d(this).parents(".crownix-ui-datepicker-calendar").find("a").removeClass("crownix-ui-state-hover");d(this).addClass("crownix-ui-state-hover");if(this.className.indexOf("crownix-ui-datepicker-prev")!==-1){d(this).addClass("crownix-ui-datepicker-prev-hover")}if(this.className.indexOf("crownix-ui-datepicker-next")!==-1){d(this).addClass("crownix-ui-datepicker-next-hover")}}})}function a(k,j){d.extend(k,j);for(var h in j){if(j[h]==null){k[h]=j[h]}}return k}d.fn.crownixdatepicker=function(j){if(!this.length){return this}if(!d.crownixdatepicker.initialized){d(document).mousedown(d.crownixdatepicker._checkExternalClick);d.crownixdatepicker.initialized=true}if(d("#"+d.crownixdatepicker._mainDivId).length===0){d("body").append(d.crownixdatepicker.dpDiv)}var h=Array.prototype.slice.call(arguments,1);if(typeof j==="string"&&(j==="isDisabled"||j==="getDate"||j==="widget")){return d.crownixdatepicker["_"+j+"Datepicker"].apply(d.crownixdatepicker,[this[0]].concat(h))}if(j==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return d.crownixdatepicker["_"+j+"Datepicker"].apply(d.crownixdatepicker,[this[0]].concat(h))}return this.each(function(){typeof j==="string"?d.crownixdatepicker["_"+j+"Datepicker"].apply(d.crownixdatepicker,[this].concat(h)):d.crownixdatepicker._attachDatepicker(this,j)})};d.crownixdatepicker=new g();d.crownixdatepicker.initialized=false;d.crownixdatepicker.uuid=new Date().getTime();d.crownixdatepicker.version="1.10.4"})(jQuery);m2soft.ns("m2soft.crownix.ImageLoader");m2soft.crownix.ImageLoader.loadImage=(function(e){var c=function(n,q,m){var k=document.createElement("img"),l,o;k.onerror=q;k.onload=function(){if(o&&!(m&&m.noRevoke)){c.revokeObjectURL(o)}if(q){q(c.scale(k,m))}};if(c.isInstanceOf("Blob",n)||c.isInstanceOf("File",n)){l=o=c.createObjectURL(n);k._type=n.type}else{if(typeof n==="string"){l=n;if(m&&m.crossOrigin){k.crossOrigin=m.crossOrigin}}else{return false}}if(l){k.src=l;return k}return c.readFile(n,function(s){var r=s.target;if(r&&r.result){k.src=r.result}else{if(q){q(s)}}})},h=(window.createObjectURL&&window)||(window.URL&&URL.revokeObjectURL&&URL)||(window.webkitURL&&webkitURL);c.isInstanceOf=function(k,l){return Object.prototype.toString.call(l)==="[object "+k+"]"};c.transformCoordinates=function(){return};c.getTransformedOptions=function(k){return k};c.renderImageToCanvas=function(m,r,o,l,k,q,t,s,u,n){m.getContext("2d").drawImage(r,o,l,k,q,t,s,u,n);return m};c.hasCanvasOption=function(k){return k.canvas||k.crop};c.scale=function(F,m){m=m||{};var D=5000000;if(m2soft.crownix.Util.browser.ios&&(F.width*F.height>D)){m.maxWidth=Math.floor(Math.sqrt((F.width/F.height)*D));m.maxHeight=Math.floor(Math.sqrt((F.height/F.width)*D))}var l=document.createElement("canvas"),o=F.getContext||(c.hasCanvasOption(m)&&l.getContext),A=F.naturalWidth||F.width,w=F.naturalHeight||F.height,n=A,r=w,C,z,u,q,s,k,y,x,E,t=function(){var G=Math.max((u||n)/n,(q||r)/r);if(G>1){n=Math.ceil(n*G);r=Math.ceil(r*G)}},B=function(){var G=Math.min((C||n)/n,(z||r)/r);if(G<1){n=Math.ceil(n*G);r=Math.ceil(r*G)}};if(o){m=c.getTransformedOptions(m);y=m.left||0;x=m.top||0;if(m.sourceWidth){s=m.sourceWidth;if(m.right!==undefined&&m.left===undefined){y=A-s-m.right}}else{s=A-y-(m.right||0)}if(m.sourceHeight){k=m.sourceHeight;if(m.bottom!==undefined&&m.top===undefined){x=w-k-m.bottom}}else{k=w-x-(m.bottom||0)}n=s;r=k}C=m.maxWidth;z=m.maxHeight;u=m.minWidth;q=m.minHeight;if(o&&C&&z&&m.crop){n=C;r=z;E=s/k-C/z;if(E<0){k=z*s/C;if(m.top===undefined&&m.bottom===undefined){x=(w-k)/2}}else{if(E>0){s=C*k/z;if(m.left===undefined&&m.right===undefined){y=(A-s)/2}}}}else{if(m.contain||m.cover){u=C=C||u;q=z=z||q}if(m.cover){B();t()}else{t();B()}}if(o){l.width=n;l.height=r;c.transformCoordinates(l,m);return c.renderImageToCanvas(l,F,y,x,s,k,0,0,n,r)}F.width=n;F.height=r;return F};c.createObjectURL=function(k){return h?h.createObjectURL(k):false};c.revokeObjectURL=function(k){return h?h.revokeObjectURL(k):false};c.readFile=function(l,n,m){if(window.FileReader){var k=new FileReader();k.onload=k.onerror=n;m=m||"readAsDataURL";if(k[m]){k[m](l);return k}}return false};if(window.navigator&&window.navigator.platform&&(/iP(hone|od|ad)/).test(window.navigator.platform)){var d=c.renderImageToCanvas;c.detectSubsampling=function(k){var l,m;if(k.width*k.height>1024*1024){l=document.createElement("canvas");l.width=l.height=1;m=l.getContext("2d");m.drawImage(k,-k.width+1,0);return m.getImageData(0,0,1,1).data[3]===0}return false};c.detectVerticalSquash=function(o,s){var u=o.naturalHeight||o.height,l=document.createElement("canvas"),k=l.getContext("2d"),n,r,q,t,m;if(s){u/=2}l.width=1;l.height=u;k.drawImage(o,0,0);n=k.getImageData(0,0,1,u).data;r=0;q=u;t=u;while(t>r){m=n[(t-1)*4+3];if(m===0){q=t}else{r=t}t=(q+r)>>1}return(t/u)||1};c.renderImageToCanvas=function(q,D,z,y,x,o,C,B,r,t){if(D._type==="image/jpeg"){var n=q.getContext("2d"),l=document.createElement("canvas"),w=1024,k=l.getContext("2d"),m,A,u,s;l.width=w;l.height=w;n.save();m=c.detectSubsampling(D);if(m){z/=2;y/=2;x/=2;o/=2}A=c.detectVerticalSquash(D,m);if(m||A!==1){y*=A;r=Math.ceil(w*r/x);t=Math.ceil(w*t/o/A);B=0;s=0;while(s<o){C=0;u=0;while(u<x){k.clearRect(0,0,w,w);k.drawImage(D,z,y,x,o,-u,-s,x,o);n.drawImage(l,0,0,w,w,C,B,r,t);u+=w;C+=r}s+=w;B+=t}n.restore();return q}}return d(q,D,z,y,x,o,C,B,r,t)}}var f=c.hasCanvasOption;c.hasCanvasOption=function(k){return f(k)||k.orientation};c.transformCoordinates=function(o,n){var l=o.getContext("2d"),q=o.width,k=o.height,m=n.orientation;if(!m){return}if(m>4){o.width=k;o.height=q}switch(m){case 2:l.translate(q,0);l.scale(-1,1);break;case 3:l.translate(q,k);l.rotate(Math.PI);break;case 4:l.translate(0,k);l.scale(1,-1);break;case 5:l.rotate(0.5*Math.PI);l.scale(1,-1);break;case 6:l.rotate(0.5*Math.PI);l.translate(0,-k);break;case 7:l.rotate(0.5*Math.PI);l.translate(q,-k);l.scale(-1,1);break;case 8:l.rotate(-0.5*Math.PI);l.translate(-q,0);break}};c.getTransformedOptions=function(k){if(!k.orientation||k.orientation===1){return k}var m={},l;for(l in k){if(k.hasOwnProperty(l)){m[l]=k[l]}}switch(k.orientation){case 2:m.left=k.right;m.right=k.left;break;case 3:m.left=k.right;m.top=k.bottom;m.right=k.left;m.bottom=k.top;break;case 4:m.top=k.bottom;m.bottom=k.top;break;case 5:m.left=k.top;m.top=k.left;m.right=k.bottom;m.bottom=k.right;break;case 6:m.left=k.top;m.top=k.right;m.right=k.bottom;m.bottom=k.left;break;case 7:m.left=k.bottom;m.top=k.right;m.right=k.top;m.bottom=k.left;break;case 8:m.left=k.bottom;m.top=k.left;m.right=k.top;m.bottom=k.right;break}if(k.orientation>4){m.maxWidth=k.maxHeight;m.maxHeight=k.maxWidth;m.minWidth=k.minHeight;m.minHeight=k.minWidth;m.sourceWidth=k.sourceHeight;m.sourceHeight=k.sourceWidth}return m};var g=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);c.blobSlice=g&&function(){var k=this.slice||this.webkitSlice||this.mozSlice;return k.apply(this,arguments)};c.metaDataParsers={jpeg:{65505:[]}};c.parseMetaData=function(l,r,k){k=k||{};var n=this,q=k.maxMetaDataSize||262144,o={},m=!(window.DataView&&l&&l.size>=12&&l.type==="image/jpeg"&&c.blobSlice);if(m||!c.readFile(c.blobSlice.call(l,0,q),function(A){var x=A.target.result,B=new DataView(x),u=2,t=B.byteLength-4,z=u,s,w,C,y;if(B.getUint16(0)===65496){while(u<t){s=B.getUint16(u);if((s>=65504&&s<=65519)||s===65534){w=B.getUint16(u+2)+2;if(u+w>B.byteLength){console.log("Invalid meta data: Invalid segment size.");break}C=c.metaDataParsers.jpeg[s];if(C){for(y=0;y<C.length;y+=1){C[y].call(n,B,u,w,o,k)}}u+=w;z=u}else{break}}if(!k.disableImageHead&&z>6){if(x.slice){o.imageHead=x.slice(0,z)}else{o.imageHead=new Uint8Array(x).subarray(0,z)}}}else{console.log("Invalid JPEG file: Missing JPEG marker.")}r(o)},"readAsArrayBuffer")){r(o)}};c.ExifMap=function(){return this};c.ExifMap.prototype.map={Orientation:274};c.ExifMap.prototype.get=function(k){return this[k]||this[this.map[k]]};c.getExifThumbnail=function(q,o,n){var m,l,k;if(!n||o+n>q.byteLength){console.log("Invalid Exif data: Invalid thumbnail data.");return}m=[];for(l=0;l<n;l+=1){k=q.getUint8(o+l);m.push((k<16?"0":"")+k.toString(16))}return"data:image/jpeg,%"+m.join("%")};c.exifTagTypes={1:{getValue:function(l,k){return l.getUint8(k)},size:1},2:{getValue:function(l,k){return String.fromCharCode(l.getUint8(k))},size:1,ascii:true},3:{getValue:function(m,k,l){return m.getUint16(k,l)},size:2},4:{getValue:function(m,k,l){return m.getUint32(k,l)},size:4},5:{getValue:function(m,k,l){return m.getUint32(k,l)/m.getUint32(k+4,l)},size:8},9:{getValue:function(m,k,l){return m.getInt32(k,l)},size:4},10:{getValue:function(m,k,l){return m.getInt32(k,l)/m.getInt32(k+4,l)},size:8}};c.exifTagTypes[7]=c.exifTagTypes[1];c.getExifValue=function(w,u,o,t,m,k){var x=c.exifTagTypes[t],l,n,y,q,s,r;if(!x){console.log("Invalid Exif data: Invalid tag type.");return}l=x.size*m;n=l>4?u+w.getUint32(o+8,k):(o+8);if(n+l>w.byteLength){console.log("Invalid Exif data: Invalid data offset.");return}if(m===1){return x.getValue(w,n,k)}y=[];for(q=0;q<m;q+=1){y[q]=x.getValue(w,n+q*x.size,k)}if(x.ascii){s="";for(q=0;q<y.length;q+=1){r=y[q];if(r==="\u0000"){break}s+=r}return s}return y};c.parseExifTag=function(q,l,o,n,m){var k=q.getUint16(o,n);m.exif[k]=c.getExifValue(q,l,o,q.getUint16(o+2,n),q.getUint32(o+4,n),n)};c.parseExifTags=function(r,n,l,q,o){var s,k,m;if(l+6>r.byteLength){console.log("Invalid Exif data: Invalid directory offset.");return}s=r.getUint16(l,q);k=l+2+12*s;if(k+4>r.byteLength){console.log("Invalid Exif data: Invalid directory size.");return}for(m=0;m<s;m+=1){this.parseExifTag(r,n,l+2+12*m,q,o)}return r.getUint32(k,q)};c.parseExifData=function(r,n,l,o,t){if(t.disableExif){return}var q=n+10,k,s,m;if(r.getUint32(n+4)!==1165519206){return}if(q+8>r.byteLength){console.log("Invalid Exif data: Invalid segment size.");return}if(r.getUint16(n+8)!==0){console.log("Invalid Exif data: Missing byte alignment offset.");return}switch(r.getUint16(q)){case 18761:k=true;break;case 19789:k=false;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}if(r.getUint16(q+2,k)!==42){console.log("Invalid Exif data: Missing TIFF marker.");return}s=r.getUint32(q+4,k);o.exif=new c.ExifMap();s=c.parseExifTags(r,q,q+s,k,o);if(s&&!t.disableExifThumbnail){m={exif:{}};s=c.parseExifTags(r,q,q+s,k,m);if(m.exif[513]){o.exif.Thumbnail=c.getExifThumbnail(r,q+m.exif[513],m.exif[514])}}if(o.exif[34665]&&!t.disableExifSub){c.parseExifTags(r,q,q+o.exif[34665],k,o)}if(o.exif[34853]&&!t.disableExifGps){c.parseExifTags(r,q,q+o.exif[34853],k,o)}};c.metaDataParsers.jpeg[65505].push(c.parseExifData);var j,b,a;c.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"};c.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}};c.ExifMap.prototype.getText=function(l){var k=this.get(l);switch(l){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[l][k];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(k[0],k[1],k[2],k[3]);case"ComponentsConfiguration":return this.stringValues[l][k[0]]+this.stringValues[l][k[1]]+this.stringValues[l][k[2]]+this.stringValues[l][k[3]];case"GPSVersionID":return k[0]+"."+k[1]+"."+k[2]+"."+k[3]}return String(k)};j=c.ExifMap.prototype.tags;b=c.ExifMap.prototype.map;for(a in j){if(j.hasOwnProperty(a)){b[j[a]]=a}}c.ExifMap.prototype.getAll=function(){var k={},m,l;for(m in this){if(this.hasOwnProperty(m)){l=j[m];if(l){k[l]=this.getText(l)}}}return k};return c}(this));m2soft.ns("m2soft.crownix.PageSwiper");(function(){var a=function(b,d){var h=Math.min(b.width()/10,m2soft.crownix.util.Unit.inToPx(1)),c=h*1.6;transX=0;var j=$(m2soft.crownix.resource.Icon.PREV_PAGE).attr("id","crownix-swipe-icon-prev").attr("class","crownix-swipe-icon").css({left:0,width:h+"px","margin-left":-h*1.2+"px",}).appendTo(b);var f=$(m2soft.crownix.resource.Icon.NEXT_PAGE).attr("id","crownix-swipe-icon-next").attr("class","crownix-swipe-icon").css({right:0,width:h+"px","margin-right":-h*1.2+"px",}).appendTo(b);var g=function(l,k,o,n,m){l.css({transition:!m?"none":"all "+m+"ms ease-in",transform:["translateX(",k,"px) translateY(",o,"px) scale(",n,")"].join("")})};var e=function(k){setTimeout(function(){d.viewer.movePage(k)},200)};this.pullOut=function(l){if(!d.options.swipe.useOnZoom&&d.scroll.hasHorizontalScroll){return}var k=2;if(d.options.swipe.sensitivity>=1&&d.options.swipe.sensitivity<=3){k=d.options.swipe.sensitivity}if(l.deltaX==0){transX=this.distX*k/3}else{if(l.newX<0){transX=-(b.width()-(this.scrollerWidth+l.newX))*k}else{if(l.newX>0){transX=l.newX*k}}}if((transX>0&&d.currentPage==1)||(transX<0&&d.currentPage==d.totalPage)){return}if(transX>0){j.show();f.hide()}else{f.show();j.hide()}g(transX>0?j:f,transX>0?Math.min(transX,c):Math.max(transX,-c),0,Math.abs(transX)>c?1.4:1,0)};this.pullEnd=function(){if(transX>c&&d.currentPage>1){g(j,c*1.6,0,3,200);j.fadeOut(200);e(d.currentPage-1)}else{if(transX<-c&&d.currentPage<d.totalPage){g(f,-c*1.6,0,3,200);f.fadeOut(200);e(d.currentPage+1)}else{g(j,0,0,1,200);g(f,0,0,1,200)}}transX=0};this.cancel=function(){if(transX>0){j.fadeOut(200)}else{if(transX<0){f.fadeOut(200)}}transX=0}};m2soft.crownix.PageSwiper=m2soft.crownix.util.SingleTone(a)})();m2soft.ns("m2soft.crownix.Report");m2soft.crownix.Report=function(l,A){var f=m2soft.crownix.Resource;var g=m2soft.crownix.Util;var a=m2soft.crownix.Message;var e=m2soft.crownix.Map;var n=m2soft.crownix.Painter;var r=m2soft.crownix.Report;var t=m2soft.crownix.MMLTokenizer;var D=m2soft.crownix.NoteManager;var B=g.isSupportSVG();var s=l;var x=A;var w=0;var h={};var o=new t();var c=-1;var m="";var d;var b;var C=[];var q=function(){this.title="";this.mrd="";this.dataServerURL="";this.fontList=new e();this.faceAttrList={};this.textAttrList={};this.lineAttrList={};this.firstPage=9007199254740992;this.lastPage=-1;this.page={};this.formFieldMode=undefined;this.dataServerURL="";this.variableList={};this.inqueryAttrList={};this.indexedImageList={}};q.prototype.insertPage=function(F,H,G,E){if(F<this.firstPage){this.firstPage=F}if(F>this.lastPage){this.lastPage=F}if(s.stateLess){this.page[F]=[H,G]}else{this.page[F]=E}};var u=function(){o=new t();o.onOpen("mml",function(F){if(r.debug){a.log("[Tokenizer] mmlOpen : ",F)}var E=0;var H=/<MML version="([^"]*)">/;w=parseFloat(H.exec(F)[1]);var G=w>=2.4?"document":"head";o.onClose("license",function(I){s.license.init($(I).text());if((s.license.isAllowedFeature("Note")&&s.options.enableNote)===true){if(B){s.noteManager=new D(x,s)}else{s.dialog.show(f.get("unsupported_note_error"))}}});o.onOpen(G,function(I){if(r.debug){a.log("[Tokenizer] documentOpen : ",I)}var J=/<DOCUMENT index="([^"]*)">/;if(I&&J.test(I)){E=parseInt(J.exec(I)[1])}E++;var K=h[E];o.onClose("head",function(L){if(r.debug){a.log("[Tokenizer] headClose")}if(!K&&L){K=k(L);h[E]=K}if(w>=2.4&&!s.isAppendReport&&K.dataServerURL!=""&&Object.keys(K.inqueryAttrList).length>0){s.inquery.setData(K.dataServerURL,K.variableList,K.inqueryAttrList,s.openFile,s.mrdPath,s.mrdParam,K.formFieldMode,s.options,s.license,s.encType);s.toolbar.enableToolbarItem(["inquery"])}else{s.toolbar.disableToolbarItem(["inquery"])}});o.onClose("page",function(M,P,O,L){if(r.debug){a.log("[Tokenizer] pageClose")}if(s.stateLess){d=++s.totalPage;if(K.page[s.totalPage]){return}K.insertPage(s.totalPage,P,O);M=s.totalPage}else{if(!M||K.page[M]){return}K.insertPage(M,P,O,L);if(s.totalPage==0){s.totalPage=1}}if(s.license.isAllowedFeature("FormField")&&K.formFieldMode){try{s.formManager.buildFormField(L,M)}catch(N){a.log(N.stack);s.dialog.show(N.message);s.client.abort();s.toolbar.disableAllItems();$("#m2soft-crownix-page").remove();return}}s.drilldownManager.buildDrilldown(M,$(L));if(s.currentPage===0){a.progress.hide(x);s.viewer.moveFirstPage();s.toolbar.enableToolbarItem(["zoomin","zoomout","ratio","move","storage"])}s.dialog.pagenum(s.currentPage,s.totalPage,true);n.updatePageNum(s.currentPage,s.totalPage)});o.onClose("mmlfooter",function(L){if(r.debug){a.log("[Tokenizer] mmlFooterClose : "+L)}j(L)});o.onClose("document",function(){K=null})});o.onClose("mml",function(){E=-1})})};u();var k=this.parseHead=function(E){var F=new q();$(E).each(function(){var G=this.tagName;if(G==="INFORMATION"){$(this).children("TITLE").each(function(){F.title=$(this).text()});$(this).children("MRD").each(function(){F.mrd=$(this).text()});$(this).children("PGINFO").each(function(){if(c==-1){c=parseInt($(this).attr("cover"))}if($(this).attr("startnum")){s.startPageNo=parseInt($(this).attr("startnum"))}})}else{if(G==="TITLE"){F.title=$(this).text()}else{if(G==="MRD"){F.mrd=$(this).text()}else{if(G==="FONTLIST"){$(this).children().each(function(){F.fontList.put($(this).attr("id"),$(this).attr("name"))})}else{if(G==="TALIST"){$(this).children().each(function(){F.textAttrList[$(this).attr("id")]={fi:$(this).attr("fi"),pt:$(this).attr("pt"),cl:$(this).attr("cl"),cb:$(this).attr("cb"),ci:$(this).attr("ci"),cu:$(this).attr("cu"),cs:$(this).attr("cs"),cr:$(this).attr("cr"),sc:$(this).attr("sc"),ls:$(this).attr("ls"),ss:$(this).attr("ss"),}})}else{if(G==="FALIST"){$(this).children().each(function(){F.faceAttrList[$(this).attr("id")]={fc:$(this).attr("fc")||"#FFFFFF",al:$(this).attr("al")||1,pt:$(this).attr("pt")||0,}})}else{if(G==="LALIST"){$(this).children().each(function(){F.lineAttrList[$(this).attr("id")]={st:$(this).attr("st")||0,wd:n.adjustWidth($(this).attr("wd")),lc:$(this).attr("lc")||"#000000",al:$(this).attr("al")||1,ap:$(this).attr("ap")||0,at:$(this).attr("at")||0,as:$(this).attr("as")||1,}})}else{if(G==="DSURL"){F.dataServerURL=$(this).text()}else{if(G==="VALIST"){$(this).children().each(function(){F.variableList[$(this).attr("key")]=$(this).text()})}else{if(G==="IQLIST"){$(this).children().each(function(){var I=$(this).attr("va");F.inqueryAttrList[I]={id:$(this).attr("va"),va:$(this).attr("va"),ty:$(this).attr("ty")||"co",ca:$(this).attr("ca")||"",rq:$(this).attr("rq")||0,il:$(this).attr("il")||0,db:$(this).attr("db")||0,ds:$(this).attr("ds"),qr:$(this).attr("qr"),sp:$(this).attr("sp"),pv:$(this).attr("pv"),sd:$(this).attr("sd"),ad:$(this).attr("ad"),se:$(this).attr("se")||"@",sc:$(this).attr("sc"),ac:$(this).attr("ac"),cl:$(this).attr("cl")||f.language||"korean",pa:new Array(),};$(this).children("IQSP_PALIST").each(function(){var J=0;$(this).children().each(function(){F.inqueryAttrList[I].pa[J]=$(this).attr("va");J++})})})}else{if(G==="IMLIST"){$(this).children().each(function(){var J=$(this);var I=F.indexedImageList[J.attr("id")]=new Image();I.complete;I.src=J.attr("va");if(r.debug){a.log("[indexed image] "+J.attr("id")+" : "+J.attr("va"))}})}}}}}}}}}}}if(w<=2.1){if(G==="FORMMODE"){s.isFormEditMode=true;F.formFieldMode=$(this).text()==="1";if((s.license.isAllowedFeature("Note")&&s.options.enableNote)&&B&&(s.license.isAllowedFeature("FormField")&&F.formFieldMode)){s.noteManager.setFormFieldMode(true)}}}else{if(w>=2.4){if(G==="FF_ALIST"||G==="FF_A"){var H;if(G==="FF_ALIST"){H=$(this).children("FF_A")}else{H=$(this)}H.each(function(){var J=$(this);var I={id:J.attr("id"),commonFieldHintingType:J.attr("sh"),commonFieldHintingColor:J.attr("hc"),requiredFieldHintingColor:J.attr("rhc"),formLoadComplete:J.attr("elc"),};if(F.formFieldMode===undefined){F.formFieldMode=(s.isFormEditMode||J.attr("fm")==="1");s.isFormEditMode=F.formFieldMode}s.isFormExportMode=J.attr("fe")==="1";if((s.license.isAllowedFeature("FormField")&&F.formFieldMode)){try{s.formManager.addFormAttr(I)}catch(K){a.log(K.stack);s.dialog.show(K.message);s.client.abort();initialize();return}}if((s.license.isAllowedFeature("Note")&&s.options.enableNote)===true&&B&&(s.license.isAllowedFeature("FormField")&&F.formFieldMode)){s.noteManager.setFormFieldMode(true)}})}}}});if(r.debug){a.log("[HEAD TITLE]"+F.title);a.log("[HEAD MRD]"+F.mrd);a.log("[HEAD DATASERVERURL]"+F.dataServerURL);a.log("[HEAD FONTLIST]\n"+F.fontList.toString());a.log("[HEAD VALIST]\n"+JSON.stringify(F.variableList));a.log("[HEAD IQLIST]\n"+decodeURIComponent($.param(F.inqueryAttrList)))}return F};var j=function(E){$(E).each(function(){var F=this.tagName;if(F==="MMLFOOTER"){$(this).children("REPORTINFO").each(function(){m=$(this).attr("subreportname")})}})};var z=function(E){C.forEach(function(F){if(F<=E){E++}});return E};var y=function(F){F=z(F);for(var E in h){if(h[E].page[F]){return h[E].page[F]}}return null};this.toData=function(){return{id:this.id,value:this.value,type:this.type}};this.getMmlVersion=function(){return w};this.getDocumentList=function(){return h};this.getPage=function(F){var E=y(F);if(E==null){return null}if(s.stateLess){return b.slice(E[0],E[1])}else{return E}};this.getHeadForPage=function(F){F=z(F);for(var E in h){if(h[E].page[F]){return h[E]}}return null};this.hasPage=function(E){return y(E)!=null};this.getCoverPage=function(){return c};this.getSubReportName=function(){return m};this.parseMML=function(F,E){b=F;E=z(E);try{if(E!=undefined){u()}o.parse(F,E)}catch(G){a.log(G.stack);throw new Error(f.get("parsing_error_mml"))}};this.getTotalPage=function(){return d};this.setTotalPage=function(E){d=E};this.findPage=function(E){return z(E)};this.removePage=function(G){var H;for(var F=0,E=G.length;F<E;F++){H=G[F];if(C.indexOf(H)==-1&&H>0&&H<=d){C.push(H);s.noteManager&&s.noteManager.removeNote(H);s.formManager&&s.formManager.ignoreField(H,true);s.totalPage--}}C.sort(g.ASCENDING_COMPARATOR);if(s.currentPage>s.totalPage){s.viewer.moveLastPage()}else{if(C.indexOf(s.currentPage)!=-1){s.viewer.movePage(s.currentPage)}else{s.dialog.pagenum(s.currentPage,s.totalPage)}}};this.restorePage=function(H){var I,F;for(var G=0,E=H.length;G<E;G++){I=H[G];F=C.indexOf(I);if(F!=-1){if(z(s.currentPage)>I){s.currentPage++}C.splice(F,1);s.noteManager&&s.noteManager.restoreNote(I);s.formManager&&s.formManager.ignoreField(I,false);s.totalPage++}}s.dialog.pagenum(s.currentPage,s.totalPage)};this.getRemovedPage=function(){return C}};m2soft.ns("m2soft.crownix.DrilldownManager");m2soft.crownix.DrilldownManager=(function(O,E,S){var g=m2soft.crownix.Painter;var k=m2soft.crownix.Resource;var e=m2soft.crownix.Util;var n=O;var q=n.openFile;var U=n.viewer.movePage;var c=E;var F={};var t=null;var T=null;var a=null;var u=null;var b=null;var C=0;var m=this;var G=0;var L=0;var N=0;var o;var j=false;var w=false;this.toggle=function(W){if(j){n.dialog.show(k.get("image_export_disabled_before_done"));return}var V=l.getDrillObject(W);if(!V){return $.Deferred().reject()}var R=this;if(V.isOpend){return M(W)}else{return z(W)}};this.open=function(W,V,R){if(j){n.dialog.show(k.get("image_export_disabled_before_done"));return}if(this.isOpened(W)){return new $.Deferred().resolve()}return z(W,V,R)};this.close=function(V,R){if(j){n.dialog.show(k.get("image_export_disabled_before_done"));return}if(!this.isOpened(V)){return new $.Deferred().resolve()}return M(V,R)};this.reload=function(R){if(j){n.dialog.show(k.get("image_export_disabled_before_done"));return}if(o===undefined){o=n.dialog.message(k.get("image_export_disabled_before_done"))}for(var X in F){var W=F[X];if(W.pagenum!=R){continue}W.position.offsetX=0;W.position.offsetY=0}var V=l.getOpenedObjectID(R);V=$.map(F,function(Y,Z){if(C==Y.pagenum&&Y.isOpend&&Y.depth==1){return Z}}).sort(function(Z,Y){if(F[Z].direction===F[Y].direction){return l.comparePosition(F[Z],F[Y])?-1:1}else{return 0}}).reverse();setTimeout(function(){z(V,undefined,true)},0);return P.timingDefer};this.getDrilldownInfo=function(V){var R=l.getDrillObject(V);return{mrdPath:R.mrdPath,mrdParam:R.mrdParam,isOpened:R.isOpend,isLoaded:R.isLoaded,}};this.updateInfo=function(R,W,X,Z,V,Y){R&&(C=R);t=X;T=Z;a=Y;u=V;b=W;l.updateDrilldownList(R,b)};this.buildDrilldown=function(R,V){l.updateDrilldownList(R,V)};this["export"]=function(){var R={};for(var W in F){var V=F[W];R[W]=d.serialize(V)}return R};this["import"]=function(V,ab){if(!V){return}var W={};var Z=[];for(var R in V){Z.push(R)}Z=Z.sort(function(ae,ad){var ag=JSON.parse(V[ae]),af=JSON.parse(V[ad]);return ag.depth-af.depth});for(var Y in Z){var R=Z[Y];var ac=V[R];var X=W[R]=d.deserialize(ac,W);if(X.isLoaded&&n.isFormEditMode){n.report.parseHead(X.$headMML.children());n.formManager.buildFormField(X.$pageMML,X.pagenum,true,X.id)}}F=W;var aa=this;if(!ab){setTimeout(function(){aa.reload(n.currentPage)},0)}};this.toXML=function(){var W=[];for(var Y in F){W.push(Y)}W=W.sort(function(aa,Z){return F[aa].depth-F[Z].depth});var R="<drilldown>";for(var V=0;V<W.length;V++){var X=F[W[V]];if(!X.isOpend){continue}R+=d.toXML(X)}R+="</drilldown>";return R};this.isOpened=function(V){var R=l.getDrillObject(V);return R&&R.isOpend};this.getDrilldownLength=function(){var V=0;for(var R in F){V++}return V};this.expand=function(V){if(j){n.dialog.show(k.get("image_export_disabled_before_done"));return}var R=$.map(F,function(W,X){if((C==W.pagenum)&&(W.depth>V)&&W.isOpend){return X}}).sort(function(X,W){if(F[X].direction===F[W].direction){return l.comparePosition(F[X],F[W])?-1:1}else{return 0}});if(R.length>0){M(R)}if(V>0){R=$.map(F,function(W,X){if(C==W.pagenum&&((W.depth==1&&!W.isOpend)||(W.depth!=1&&W.depth<=V&&!W.isOpend&&W.parent.isOpend))){return X}}).sort(function(X,W){if(F[X].direction===F[W].direction){return l.comparePosition(F[X],F[W])?-1:1}else{return 0}}).reverse();if(R.length>0){z(R,{depth:V})}else{f()}}else{f()}};this.drilldownNext=function(){if(N<L){N++}this.expand(N)};this.drilldownPrev=function(){if(N>0){N--}this.expand(N)};this.drilldownFinished=function(){f()};this.isOpening=function(){return j};this.stopDrilldown=function(){w=true};var f=function(){J();n.toolbar.disableToolbarItem(["cancel"]);j=false;if(o){o.remove();o=undefined}w=false};var J=function(){N=0;for(id in F){var R=F[id];if(R.isOpend&&R.depth>N){N=R.depth}}};var z=function(Z,X,V){var W=[];if(Object.prototype.toString.call(Z)==="[object Array]"){W=Z;Z=W.pop()}n.toolbar.enableToolbarItem(["cancel"]);j=true;if(o===undefined){o=n.dialog.message(k.get("image_export_disabled_before_done"))}var Y=l.getDrillObject(Z);if(!Y){f();return $.Deferred().resolve()}if(!X){X={}}if(l.isInTheCurrentPage(Y)){if(l.isOverlapped(Y)){f();return $.Deferred().reject(k.get("drilldown_not_allowed"))}D(Y);var R=P.push(function(){Y.isOpend=true;return s(Y,X).pipe(function(){B();var ab=I(Y,function(ae,ad,ag,ah,af,ac){H(ae,ad,ag,ah,af,ac)});var aa=function(){var ac=Y.children.sort(function(ae,ad){return(ae.position.originalBottom<ad.position.originalBottom)?-1:1}).reverse();ac.forEach(function(ad){if(X.depth&&Y.depth<X.depth){W.push(ad.id)}else{if(ad.isOpend){W.push(ad.id)}}});if(w){W=[]}if(W.length>0){setTimeout(function(){z(W,X)},0)}else{f()}};if(Y.isDrillOver){return h(Y,ab.textDom,X.callback,function(){aa()})}else{return y(ab.pageDom,ab.canvasDom,ab.textDom,ab.documentSize,Y,ab.withoutClear,X.callback,function(){aa()})}}).fail(function(aa){Y.isOpend=false;n.dialog.show(aa)})})}else{D(Y);var R=P.push(function(){Y.isOpend=true;return s(Y,X).pipe(function(){if(!Y.isLoaded){if(n.isFormEditMode){try{n.report.parseHead(Y.$headMML.children());n.formManager.buildFormField(Y.$pageMML,Y.pagenum,true,Y.id)}catch(aa){return defer.reject(aa)}}Y.isLoaded=true}}).fail(function(aa){Y.isOpend=false;n.dialog.show(aa)})})}P.push(x);if(n.shareManager&&n.shareManager.isConnected()){P.push(A,[V,Y,true,X])}return R};var A=function(Y){var R=Y[0],V=Y[1],W=Y[2],X=Y[3];if(!R){n.shareManager.sendScript({name:W?"expandDrilldown":"collapseDrilldown",id:V.id,option:X});n.shareManager.sendDrilldownInfo()}};var s=function(Z,ab){var R=new $.Deferred();if(Z.$pageMML&&!ab.mrdPath&&!ab.mrdParam){R.resolve(Z);return R}var ae=(ab.mrdPath||Z.mrdPath);var ac=/^(?:\/|[a-z]+:\/\/)/.test(ae);var ad="";var V="";if(ac){ad=V=ae}else{var X=Math.max(n.mrdPath.lastIndexOf("\\"),n.mrdPath.lastIndexOf("/"));var aa=((X>=0)?n.mrdPath.substring(0,X+1):"");if(Z.parent){var Y=Z.parent;while(Y){var ag=Math.max(Y.mrdPath.lastIndexOf("\\"),Y.mrdPath.lastIndexOf("/"));V=((ag>=0)?Y.mrdPath.substring(0,ag+1):"")+V;Y=Y.parent}}V+=ae;ad=aa+V}var af=[(ab.mrdParam||Z.mrdParam)," /rhyperlinkkey [",Z.id,"]"," /ronepgrpt",];Z.isLoaded=false;if(!n.isFormEditMode){af.push(" /rformmode [0]")}var ah=function(){};var W=function(ai){if(ai&&ai.indexOf("</MML>")<0&&ai.indexOf("</DOCUMENT>")<0){var ak;var aj=ai.indexOf("[ERS-");if(aj>=0){ak=ai.substr(aj)}else{ak=k.get("execute_error")}R.reject(ak);return}var al=$($.parseXML(ai));Z.$pageMML=al.find("PG");Z.$headMML=al.find("HEAD");Z.boundary=l.getObjectBoundary(Z.$pageMML);l.updateDrilldownList(Z.pagenum,Z.$pageMML,Z);R.resolve(Z)};Z.currentMrdPath=V;Z.currentMrdParam=af.join("");S(ad,Z.currentMrdParam,"","",ah,W,700);return R};var I=function(aa,X){var ae=t;var ah=u[0];var V=T;var af=b;var ad=C;var ab=af;var ai=false;var ag=aa;var Z=[aa];while(ag){var ac=ag.getDrillOverAncestor();Z.push(ac);ag=ac}Z.pop();while(Z.length>0){var Y=Z.pop();var ac=Y.getDrillOverAncestor();if(ac){ae=$("."+K(ac).split(" ")[0],t).first();V=ae.find(".crownix-text:first");ah=ae.find(".crownix-canvas:first")[0];ai=true;var W=ac.getBoundaryWithChildren();var R={width:W.right-W.left+1,height:W.bottom-W.top+1}}else{ae=t;V=T;ah=u[0];af=b;ai=false;var R=l.getAdjustPageSize(ab,ad,ac)}X(ae,ah,V,R,Y,ai)}return{pageDom:ae,canvasDom:ah,textDom:V,documentSize:R,withoutClear:ai,}};var D=function(R){if(!R||R.isDrillOver){return $.Deferred().resolve()}var Z=R.divideOffset.isHorizontally;var ab=function(ac){return ac&&Z!=ac.divideOffset.isHorizontally};var X=function(ac){return Z==ac.divideOffset.isHorizontally&&ac.divideOffset.offset()==R.divideOffset.offset()};var V=[];for(var aa in F){var Y=F[aa];if(Y.pagenum==R.pagenum&&Y!=R&&!Y.isDrillOver&&R.isSiblingOf(Y)&&(ab(Y)||X(Y))){V.push(Y.id)}}for(var W in V){M(V[W],true)}return P.timingDefer};var h=function(W,ad,ah,aj){var V=W.boundary;var X={top:V.top,left:0};var ai={width:V.right-V.left+1,height:V.bottom-V.top+1};var Y=W.$pageMML;var ae=n.report.parseHead(W.$headMML.children());var R=$.Deferred();var ag=$("<div>").addClass("crownix-text").addClass("crownix-text-index").css({height:ai.height,width:ai.width,position:"absolute"});var ac=$("<canvas>").addClass("crownix-canvas").addClass("crownix-canvas-index").attr("height",ai.height).attr("width",ai.width).css({position:"absolute"});var aa=$("<div>").append(ac,ag).addClass("crownix-drilldown-page").css({top:"-9999999",left:"-9999999",height:ai.height,width:ai.width,position:"absolute"});if(!W.isLoaded){if(n.isFormEditMode){try{n.formManager.buildFormField(W.$pageMML,W.pagenum,true,W.id)}catch(Z){return R.reject(Z)}}W.isLoaded=true}aa.appendTo(ad);var af=new m2soft.crownix.Painter(n,ac[0],ag,U,c);var ab={x:-V.left,y:-V.top};af.setFormFieldMode(ae.formFieldMode);af.drawPage(Y,ae,function(){if(n.isFormEditMode){n.formManager.bindEvent();if(n.shareManager&&n.shareManager.isConnected()){n.shareManager.initFields()}}aa.addClass(K(W)).css({top:W.position.bottom()+1,left:W.getDrillOverAncestor()?0:V.left,});n.formManager.removePreventEvent();R.resolve();if(ah){ah()}if(aj){aj()}},"d",ab,0,true);return R};var H=function(ac,X,Y,W,ag,ah){var ak=X.getContext("2d");var aj=ak.getImageData(0,0,X.width,X.height);X.height=W.height;X.width=W.width;ac.height(X.height);ac.width(X.width);if(a){a.height(X.height);a.width(X.width)}if(!ah){ak.save();ak.fillStyle="#FFFFFF";ak.fillRect(0,0,X.width,X.height);ak.restore()}var ae=l.getLineAdjustWidth(ag,ag.$containedTo);var Z=ag.divideOffset.isHorizontally;var aa=ag.divideOffset.offset();var al=ag.boundary;var ai=0;if(ag.isDrillOver){ak.putImageData(aj,0,0,0,0,aj.width,aj.height);var af=0;var am=0}else{if(Z){ak.putImageData(aj,0,0,0,0,aj.width,aa);ai=al.bottom-al.top+1+ae;var V=0;var R=aa-ae;var af=aj.width;var am=aj.height-R;var ad=0;var ab=ai}else{ak.putImageData(aj,0,0,0,0,aa,aj.height);ai=al.right-al.left+1+ae;var V=aa-ae;var R=0;var af=aj.width-V;var am=aj.height;var ad=ai;var ab=0}}if(af>0&&am>0){ak.putImageData(aj,ad,ab,V,R,af,am)}if(!ag.isDrillOver){Y.children().each(function(){var ap=$(this);var ao=parseInt(ap.css("top"));var an=parseInt(ap.css("left"));if(ap.hasClass("crownix-background-object")){return true}if(Z&&ao>=aa){ap.css({top:parseInt(ap.css("top"))+ai})}if(!Z&&an>=aa){ap.css({left:parseInt(ap.css("left"))+ai})}})}l.updateDrilldownPosition(F,ag,ai);n.scroll.refresh()};var y=function(ac,X,af,R,ag,ah,Z,al){var ab=ag.divideOffset.offset()+1;var aa=ag.divideOffset.isHorizontally;var ak=ag.boundary;var aj=aa?R.width:ak.right-ak.left+1;var ai=aa?ak.bottom-ak.top+1:R.height;var ao=$("<div>").css({top:aa?ab:0,left:!aa?ab:0,height:ai,width:aj,position:"absolute"});var ad=$("<canvas>").attr("width",aj).attr("height",ai).css({top:aa?ab:0,left:!aa?ab:0,position:"absolute"})[0];var W=$.Deferred();var an=new g(n,ad,ao,U,c);var V=ag.$pageMML;var Y=n.report.parseHead(ag.$headMML.children());if(!ag.isLoaded){if(n.isFormEditMode){try{n.formManager.buildFormField(ag.$pageMML,ag.pagenum,true,ag.id)}catch(am){return W.reject(am)}}ag.isLoaded=true}ao.appendTo(af);var ae={x:!aa&&-ak.left,y:aa&&-ak.top};an.setFormFieldMode(n.isFormEditMode);an.drawPage(V,Y,function(){ao.children().each(function(){var at=$(this);if(aa){at.css({top:parseInt(at.css("top"))+ab})}else{at.css({left:parseInt(at.css("left"))+ab})}});ao.children().addClass(K(ag)).appendTo(af);ao.remove();var ap=X.getContext("2d");var aq=ad.getContext("2d");var ar=aq.getImageData(0,0,ad.width,ad.height);if(aa){ap.putImageData(ar,0,ab-1,0,0,ar.width,ar.height)}else{ap.putImageData(ar,ab-1,0,0,0,ar.width,ar.height)}if(n.isFormEditMode){n.formManager.bindEvent();if(n.shareManager&&n.shareManager.isConnected()){n.shareManager.initFields()}}n.formManager.removePreventEvent();W.resolve();if(Z){Z()}if(al){al()}},"d",ae,0,ah);return W};var K=function(W){var V=l.convertIDtoClassName(W);var R=W.parent;while(R){V+=" "+l.convertIDtoClassName(R);R=R.parent}return V};var B=function(){clearTimeout(G);T.off("DOMSubtreeModified")};var x=function(){G=m2soft.crownix.Forgery.detect(T,u[0],n.isFormEditMode)};var M=function(X,V){var W=[];if(Object.prototype.toString.call(X)==="[object Array]"){W=X;X=W.pop()}n.toolbar.enableToolbarItem(["cancel"]);j=true;if(o===undefined){o=n.dialog.message(k.get("image_export_disabled_before_done"))}var R=P.push(function(){var aa=function(ac,af){var ad=af||[];for(var ae in ac){if(ac[ae].children.length>0){aa(ac[ae].children,ad)}if(ac[ae].isOpend&&ad.indexOf(ac[ae])<0){ad.push(ac[ae])}}return ad};var ab=l.getDrillObject(X);if(!ab){f();return}var Y=aa([ab]);if(Y.length==0){return}if(l.isInTheCurrentPage(ab)){B();for(var Z in Y){var ab=Y[Z];ab.isOpend=false;r(ab);I(ab,function(ad,ac,ae,ag,af){Q(ad,ac,ae.children(),ag,af);if(w){W=[]}if(W.length>0){setTimeout(function(){M(W)},0)}else{f()}})}}else{for(var Z in Y){var ab=Y[Z];ab.isOpend=false}}if(n.shareManager&&n.shareManager.isConnected()){P.push(A,[V,ab,false])}});P.push(x);return R};var r=function(R){$("."+l.convertIDtoClassName(R),t).remove()};var Q=function(ab,X,al,W,af){var ak=X.getContext("2d");var ah=ak.getImageData(0,0,X.width,X.height);X.height=W.height;X.width=W.width;ab.height(X.height);ab.width(X.width);ak.save();ak.fillStyle="#FFFFFF";ak.fillRect(0,0,X.width,X.height);ak.restore();var ad=l.getLineAdjustWidth(af,af.$containedTo);var Y=af.divideOffset.isHorizontally;var Z=af.divideOffset.offset();var am=af.boundary;var ag=0;if(af.isDrillOver){ak.putImageData(ah,0,0,0,0,ah.width,ah.height);var ae=0;var ap=0}else{if(Y){ak.putImageData(ah,0,0,0,0,ah.width,Z);ag=am.bottom-am.top+1+ad;var V=0;var R=Z+ag;var ae=ah.width;var ap=ah.height-R;var ac=0;var aa=-ag;var ao=0;var an=ah.height-ag;var aj=X.width;var ai=X.height-an}else{ak.putImageData(ah,0,0,0,0,Z,ah.height);ag=am.right-am.left+1+ad;var V=Z+ag;var R=0;var ae=ah.width-V;var ap=ah.height;var ac=-ag;var aa=0;var ao=ah.width-ag;var an=0;var aj=X.width-ao;var ai=X.height}}if(ae>0&&ap>0){ak.putImageData(ah,ac,aa,V,R,ae,ap)}ak.save();ak.fillStyle="#FFFFFF";ak.fillRect(ao,an,aj,ai);ak.restore();if(!af.isDrillOver){al.each(function(){var at=$(this);var au=at.hasClass("crownix-drilldown-page");var aq=parseInt(at.css("top"))+(au?0:at.height());var ar=parseInt(at.css("left"))+(au?0:at.width());if(at.hasClass("crownix-background-object")){return true}if(Y&&aq>=Z){at.css({top:parseInt(at.css("top"))-ag})}else{if(!Y&&ar>=Z){at.css({left:parseInt(at.css("left"))-ag})}}})}l.updateDrilldownPosition(F,af,-ag);n.scroll.refresh()};var d=function(aa,ai,af,W){var ab=$(W);var R=ab.attr("hi");var ac=l.adjustCoord(parseInt(ab.attr("sy")));var ad=l.adjustCoord(parseInt(ab.attr("sx")));var Y=l.adjustCoord(parseInt(ab.attr("ey")));var Z=l.adjustCoord(parseInt(ab.attr("ex")));this.id=R;this.$pageMML=null;this.$headMML=null;this.boundary=null;this.pagenum=aa;this.mrdPath=ab.attr("hdm");this.mrdParam=ab.attr("hdp");this.currentMrdPath=this.mrdPath;this.currentMrdParam=this.mrdParam;this.$containedTo=ai;this.isOpend=false;this.isLoaded=false;this.parent=af;this.children=[];if(af){af.children.push(this)}if(af&&af.isDrillOver){ac=ac-af.boundary.top;Y=Y-af.boundary.top}else{if(af&&af.divideOffset.isHorizontally){ac=ac-af.boundary.top+af.position.originalBottom+1;Y=Y-af.boundary.top+af.position.originalBottom+1}else{if(af&&!af.divideOffset.isHorizontally){ad=ad-af.boundary.left+af.position.originalRight+1;Z=Z-af.boundary.left+af.position.originalRight+1}}}this.position={top:function(){return this.originalTop+this.offsetY},left:function(){return this.originalLeft+this.offsetX},right:function(){return this.originalRight+this.offsetX},bottom:function(){return this.originalBottom+this.offsetY},originalTop:ac,originalLeft:ad,originalRight:Z,originalBottom:Y,offsetX:af?af.position.offsetX:0,offsetY:af?af.position.offsetY:0};var X=this.position;var ae={0:"bottom",1:"right",2:"over"};this.direction=ae[ab.attr("hdt")]||"bottom";var V=this.direction;var ag=V==="bottom";this.isDrillOver=V=="over";if(this.isDrillOver){V=ae[0]}var ah=this;this.drillOverAncestor=undefined;this.divideOffset={offset:function(){var aj=ah.getDrillOverAncestor();if(aj&&!ag){return X[V]()-aj.boundary.left+1}else{return X[V]()+1}},isHorizontally:ag};this.elementTag=ab.prop("outerHTML");if(this.elementTag==undefined){this.elementTag=(new XMLSerializer()).serializeToString(W)}this.depth=af?af.depth+1:1;if(this.depth>L){L=this.depth}this.isDescendant=function(ak){if(this.children.length==0){return false}if(this.children.indexOf(ak)>=0){return true}else{var aj=false;this.children.forEach(function(al){aj=al.isDescendant(ak);if(aj){return true}});return aj}};this.isAncestor=function(aj){if(this.parent){if(this.parent==aj){return true}else{return this.parent.isAncestor(aj)}}else{return false}}};d.prototype.isSiblingOf=function(W){var V=this.getDrillOverAncestor();var R=W.getDrillOverAncestor();return V==R};d.prototype.getScreenBoundary=function(){var W=$.extend({},this.boundary);if(this.isDrillOver){W.bottom=W.bottom-W.top+this.position.bottom();W.top=W.top-W.top+this.position.bottom()}else{if(this.divideOffset.isHorizontally){W.bottom=W.bottom-W.top+this.position.bottom();W.top=W.top-W.top+this.position.bottom()}else{W.right=W.right-W.left+this.position.right();W.left=W.left-W.left+this.position.right()}}var R=this.getDrillOverAncestor();if(!this.isDrillOver&&R){var V=R.getScreenBoundary();W.left+=V.left+1;W.right+=V.left+1;W.top+=V.top+1;W.bottom+=V.top+1}return W};d.prototype.getBoundaryWithChildren=function(){var aa=this.getScreenBoundary();var X={right:0,bottom:0};for(var W in this.children){var Z=this.children[W];if(!Z.isOpend){continue}var Y=Z.getBoundaryWithChildren();var R=l.getLineAdjustWidth(Z,Z.$containedTo);if(Z.isDrillOver){var V=Y.bottom-Y.top+1+Z.position.originalBottom;X.bottom=Math.max(X.bottom,V);X.right=Math.max(X.right,Y.right)}else{if(Z.divideOffset.isHorizontally){aa.bottom+=Y.bottom-Y.top+1+R;aa.right=Math.max(aa.right,Y.right)}else{aa.bottom=Math.max(aa.bottom,Y.bottom);aa.right+=Y.right-Y.left+1+R}}}aa.bottom=Math.max(aa.bottom,X.bottom);aa.right=Math.max(aa.right,X.right);return aa};d.prototype.getDrillOverAncestor=function(R){if(this.drillOverAncestor!=undefined){return this.drillOverAncestor}var V=this;while(V){if(V.parent&&V.parent.isDrillOver){return V.parent}V=V.parent}return null};d.serialize=function(V){var R={pagenum:V.pagenum,containedTo:V.$containedTo.prop("outerHTML"),parentID:V.parent&&V.parent.id,element:V.elementTag,isOpend:V.isOpend,isLoaded:V.isLoaded,pageMML:V.$pageMML&&V.$pageMML.prop("outerHTML"),headMML:V.$headMML&&V.$headMML.prop("outerHTML"),boundary:V.boundary&&JSON.stringify(V.boundary),mrdPath:V.currentMrdPath,mrdParam:V.currentMrdParam,depth:V.depth};return JSON.stringify(R)};d.deserialize=function(Y,X){var V=JSON.parse(Y);var R=X[V.parentID];var W=new d(V.pagenum,$(V.containedTo),R,V.element);W.isOpend=V.isOpend;W.$pageMML=V.pageMML&&$(V.pageMML);W.$headMML=V.headMML&&$($.parseXML(V.headMML)).find("HEAD");W.boundary=JSON.parse(V.boundary);W.isLoaded=V.isLoaded;W.currentMrdPath=V.mrdPath;W.currentMrdParam=V.mrdParam;W.depth=V.depth;return W};d.toXML=function(V){var R=['<obj pg="',V.pagenum,'" did="',V.id,'" path="',e.escapeXmlEntities(V.currentMrdPath),'" param="',e.escapeXmlEntities(V.currentMrdParam),'" />'];return R.join("")};var P={timingDefer:$.Deferred().resolve(),toResolve:function(){this.timingDefer=this.timingDefer.pipe(null,function(){return $.Deferred().resolve()})},push:function(V,R){this.toResolve();this.timingDefer=this.timingDefer.pipe(function(){return V(R)});return this.timingDefer}};var l={getDrillObject:function(R){return F[R]},getDrillObjectList:function(R){return $.map(R,function(V){return F[V]})},getOpenedObjectID:function(R){return $.map(F,function(W,Y){var X="."+l.convertIDtoClassName(W);var V=$(X,t).length;if(W.isOpend&&R==W.pagenum&&V==0){return Y}}).sort(function(W,V){return W.indexOf(V)==0})},adjustCoord:function(R){return Math.floor(R/10.3+24.3)},getLineAdjustWidth:function(W,R){var V=false;R.find("LN[rhi][ll]").each(function(X,Y){if($(Y).attr("rhi").split(",").indexOf(W.id)>=0){V=true}return !V});return V?0:1},updateDrilldownList:function(R,V,W){F=$.extend(l.getAllDrillObject(R,V,W),F)},isOverlapped:function(Z){if(Z.isDrillOver){return false}var Y=false;var W=function(ah,ag,af,ae,ad,ac){return !ah&&af<ag&&ag<ad||ah&&ae<ag&&ag<ac};var ab=Z.divideOffset.isHorizontally;var V=Z.$containedTo;var X=Z.parent;if(X&&!X.isDrillOver&&(X.divideOffset.isHorizontally!=Z.divideOffset.isHorizontally)){return true}var R=$(Z.elementTag);var aa=0;if(ab){aa=parseInt(R.attr("ey"))}else{aa=parseInt(R.attr("ex"))}V.find("*").each(function(){var ag=$(this);if(ag.attr("dr")){return true}if((ag.get(0).tagName=="RA"||ag.get(0).tagName=="TL")&&ag.attr("ba")==="1"){return true}var af=parseInt(ag.attr("sy"));var ae=parseInt(ag.attr("sx"));var ac=parseInt(ag.attr("ey"));var ad=parseInt(ag.attr("ex"));if(W(ab,aa,ae,af,ad,ac)){Y=true}return !Y});return Y},getAdjustPageSize:function(ae,ab,Z){var aa=$(ae);var V=l.getObjectBoundary(aa);var af=aa.attr("wd")/10.3;var ai=aa.attr("ht")/10.3;var ad={right:0,bottom:0};for(var Y in F){var R=F[Y];if(!R||R.pagenum!=ab||!R.isOpend||R.parent){continue}var ac=R.getBoundaryWithChildren();var X=l.getLineAdjustWidth(R,R.$containedTo);if(R.isDrillOver){var ag=ac.bottom-ac.top+1+R.position.originalBottom;ad.bottom=Math.max(ad.bottom,ag);ad.right=Math.max(ad.right,ac.right)}else{if(R.divideOffset.isHorizontally){V.bottom+=ac.bottom-ac.top+1+X;V.right=Math.max(V.right,ac.right)}else{V.bottom=Math.max(V.bottom,ac.bottom);V.right+=ac.right-ac.left+1+X}}}V.bottom=Math.max(V.bottom,ad.bottom);V.right=Math.max(V.right,ad.right);var W=af;var ah=ai;ai=Math.max(ai,V.bottom);af=Math.max(af,V.right);ah!=ai&&ai++;W!=af&&af++;return{height:ai,width:af,}},updateDrilldownPosition:function(R,aa,ad){var ae=aa.divideOffset.isHorizontally;var ab=aa.divideOffset.offset();var V=function(ag,af){return ag.divideOffset.isHorizontally==af.divideOffset.isHorizontally};var X=function(af){if(af.isDrillOver){if(ae){return af.position.bottom()>ab}else{return af.position.right()>ab}}else{return V(aa,af)&&l.comparePosition(aa,af)}};for(var Y in R){var ac=R[Y];var W=ac.divideOffset.isHorizontally;var Z=ac.isDrillOver;if(aa.isDescendant(ac)||aa.isAncestor(ac)||aa.pagenum!=ac.pagenum||!aa.isSiblingOf(ac)){continue}if(ae&&X(ac)){ac.position.offsetY+=ad}else{if(!ae&&X(ac)&&!ac.isDrillOver){ac.position.offsetX+=ad}}}},comparePosition:function(W,Z){var R=[W],Y=[Z];while(R[R.length-1].parent){R.push(R[R.length-1].parent)}while(Y[Y.length-1].parent){Y.push(Y[Y.length-1].parent)}while(R.length>0&&Y.length>0){var V=R.pop(),X=Y.pop();if(V.id===X.id){continue}if(W.direction==="bottom"){return X.position.originalBottom>V.position.originalBottom}else{return X.position.originalRight>V.position.originalRight}}},getAllDrillObject:function(V,X,W){var R={};X.find("[hl=7]").each(function(){var Y=new d(V,X,W,this);R[Y.id]=Y});return R},getObjectBoundary:function(V){var R={top:0,left:0,bottom:0,right:0};V.find("*").each(function(X){var Y=$(this);var Z={top:parseInt(Y.attr("sy")),left:parseInt(Y.attr("sx")),bottom:parseInt(Y.attr("ey")),right:parseInt(Y.attr("ex"))};if(X==0){R=Z;return}if(Z.left<R.left){R.left=Z.left}if(Z.top<R.top){R.top=Z.top}if(Z.right>R.right){R.right=Z.right}if(Z.bottom>R.bottom){R.bottom=Z.bottom}});for(var W in R){R[W]=l.adjustCoord(R[W])}return R},isInTheCurrentPage:function(R){return R.pagenum==C},convertIDtoClassName:function(R){return"drilldown-"+R.id.split(".").join("-")},findContainedDom:function(W){while(W){var X=$("."+l.convertIDtoClassName(W),t);var R=X.find(".crownix-text:first");var V=X.find(".crownix-canvas:first");if(R.length>0&&V.length>0){return{$pageDom:X,$textDom:R,$canvasDom:V}}W=W.parent}return{$pageDom:t,$textDom:T,$canvasDom:u}}}});m2soft.ns("m2soft.crownix.Viewer");m2soft.crownix.Viewer=(function(){var AjaxClient=m2soft.crownix.Ajax;var Toolbar=m2soft.crownix.Toolbar;var Report=m2soft.crownix.Report;var Painter=m2soft.crownix.Painter;var Message=m2soft.crownix.Message;var Dialog=m2soft.crownix.Dialog;var Map=m2soft.crownix.Map;var Window=m2soft.crownix.Window;var R=m2soft.crownix.Resource;var FormManager=m2soft.crownix.FormManager;var FieldOrder=m2soft.crownix.FieldOrder;var DrilldownManager=m2soft.crownix.DrilldownManager;var Inquery=m2soft.crownix.Inquery;var Constant=m2soft.crownix.Constant;var Util=m2soft.crownix.Util;var License=m2soft.crownix.License;var Converter=m2soft.crownix.util.Converter;var Runtime=m2soft.crownix.Runtime;var IKE=m2soft.crownix.security.IKE;var WorkerUtil=m2soft.crownix.WorkerUtil;var ExportAgent=m2soft.crownix.ExportAgent;var ParameterBuilder=m2soft.crownix.ParameterBuilder;var LinkManager=m2soft.crownix.LinkManager;var PageSwiper=m2soft.crownix.PageSwiper;var Icon=m2soft.crownix.resource.Icon;var ShareManager=m2soft.crownix.ShareManager;var CONTAINER_ID="m2soft-crownix-container";var PAGE_ID="m2soft-crownix-page";var CANVAS_ID="m2soft-crownix-canvas";var TEXT_ID="m2soft-crownix-text";var NOTE_ID="m2soft-crownix-note";var CONTAINER_PADDING=12;var serverUrl_;var parentId_;var setting_={};var settingDefault={viewerWidth:0.9,viewerHeight:0.9,enableCloseButton:true,toolbarScale:1};var mrdPath_;var mrdParam_;var mrdPlainParam_;var mrdData_;var options={};var optionsDefault={enableNote:false,enableSecure:false,includeNoteInPrint:undefined,includeNoteInExport:undefined,scrollbarOnNote:{width:"18px",color:"rgba(0, 0, 0, 0.498039)"},scrollbarOnViewer:{width:"7px",color:"rgba(0, 0, 0, 0.5)"},isHyperlink:false,defaultZoom:undefined,defaultZoomCentre:"center",noDataDialog:{show:true},showSubmitConfirm:{show:false},submitPreview:false,imageDrawOption:{useCanvas:true},useScrollTransition:true,swipe:{useOnZoom:true,sensitivity:2},exportMethod:undefined,timeout:30,submitMsgPosition:undefined,keepZoomRatio:false,downloadProtocolFile:false,showPageNum:true,pdfReaderNotFoundMessage:undefined,downloadFileName:undefined,download:{partsave:undefined},infotalk:{timeout:30},saveMmlToPdf:false,showXlsKeepFormDialog:false,pdfPrintSpoolName:undefined,textOnCanvas:false};var preventPrintExport=false;var submitFormList;var finishEventHandler;var go={};var report;var toolbar;var dialog;var inquery;var scroll;var client;var rdid="";var formManager;var drilldownManager;var mmlString;var eventHandler={};var parameterBuilder;var C;var encType;var oldRuntimeParam;var shareManager;var zoomRatio=1;var packRatio=1;var isFinished=false;var isDownload=false;var isOverlay=false;var useWebFont=false;var useAdjustLetterSpace=true;var useAdjustCharacterScale=false;var stateLess=true;var cancelExportToImageFlag=false;var isFirstPageDraw=true;var pageCheckInterval=null;var containerDom;var pageDom;var canvasDom;var textDom;var noteDom;var isExport=false;var runtimeParam=new Runtime();var isSupportSVG=Util.isSupportSVG();var isDesktopBlink=!Util.browser.mobile&&(Util.browser.chrome||Util.browser.opera);var forgeryInterval;var linkManager=new LinkManager(go);var movePage=function(pageNumber,moveScrollTop){if(scroll!==undefined&&moveScrollTop===undefined){scroll.setScrollTop(true)}if(typeof pageNumber==="string"&&!pageNumber.match(/^[1-9][0-9]*$/)){dialog.show(R.get("wrong_page_number"));return}if(pageNumber>go.totalPage){if(isFinished){dialog.show(R.get("page_not_exist"))}else{dialog.show(R.get("page_not_create"))}return}if(pageNumber<1){dialog.show(R.get("page_not_exist"));return}if(drilldownManager&&drilldownManager.isOpening()){go.dialog.show(R.get("image_export_disabled_before_done"));return}if(pageNumber==1){toolbar.disableToolbarItem(["first","prev"]);toolbar.enableToolbarItem(["next","last"])}else{if(pageNumber==go.totalPage){if(isFinished){toolbar.disableToolbarItem(["next","last"])}toolbar.enableToolbarItem(["first","prev"])}else{toolbar.enableToolbarItem(["first","prev","next","last"])}}if(shareManager){shareManager.movePage(pageNumber)}if(stateLess){drawPage(pageNumber)}else{downloadPage(pageNumber)}};var checkLastpage=function(pageNumber){if(isFinished&&pageNumber==go.totalPage){emit("lastpage",{currentPage:pageNumber})}};var drawPage=function(pageNumber){var pageXml=report.getPage(pageNumber);var page=$(pageXml);var head=report.getHeadForPage(pageNumber);var width=page.attr("wd")/10.3;var height=page.attr("ht")/10.3;var nodata=page.attr("nd");if(nodata==="1"&&options.noDataDialog.show){dialog.show(options.noDataDialog.message||R.get("no_data_message"),{title:options.noDataDialog.title,input:false})}go.currentPage=parseInt(pageNumber);$("#"+PAGE_ID).remove();createPageDom(width,height);go.drilldownManager.updateInfo(pageNumber,$(page),pageDom,textDom,canvasDom,noteDom);refreshScroll();drawWithPainter(document.getElementById(CANVAS_ID),textDom,page,head,function(){m2soft.crownix.Forgery.detect(textDom,document.getElementById(CANVAS_ID),go.isFormEditMode);$("#"+PAGE_ID).css("visibility","visible");go.drilldownManager.reload(pageNumber)});if(go.license.isAllowedFeature("FormField")&&go.isFormEditMode){FieldOrder.getInstance().bind(textDom,scroll,pageNumber)}if(Util.browser.ios&&parseFloat(Util.browser.version)>=8){textDom.on("focus","input[type=text], textarea",function(){scroll.disable()}).on("blur","input[type=text], textarea",function(){scroll.initiated=0;scroll.enable()})}if(options.defaultZoom){var centre=options.defaultZoomCentre.toUpperCase();if(!isNaN(options.defaultZoom)){zoomRatio=options.defaultZoom}else{if(options.defaultZoom.toUpperCase()=="WIDTH"){zoomRatio=getWidthFitRatio()}else{if(options.defaultZoom.toUpperCase()=="HEIGHT"){zoomRatio=getHeightFitRatio()}}}scroll.zoom(zoomRatio);if(centre=="CENTER"){scroll.scrollTo(-((pageDom.width()*zoomRatio-containerDom.width())/2),-((pageDom.height()*zoomRatio-containerDom.height())/2),0)}else{if(centre=="LEFTTOP"){scroll.scrollTo(0,0,0)}}if(!isNaN(options.defaultZoom)){$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(scroll.scale*100)+"%")}else{if(options.defaultZoom.toUpperCase()=="WIDTH"){$("#crownix-toolbar #crownix-toolbar-ratio div button").html($(Icon.FIT_WIDTH))}else{if(options.defaultZoom.toUpperCase()=="HEIGHT"){$("#crownix-toolbar #crownix-toolbar-ratio div button").html($(Icon.FIT_HEIGHT))}}}isFirstPageDraw=false;scroll.resetPosition(100)}else{pack();isFirstPageDraw=false}if((go.license.isAllowedFeature("Note")&&options.enableNote)===true&&isSupportSVG){go.noteManager.drawPage(noteDom,pageNumber);go.noteManager.setRatio(zoomRatio)}checkLastpage(pageNumber);if(shareManager&&shareManager.isConnected()){shareManager.initFields()}};var drawWithPainter=function(canvasDom_,textDom_,page,head,callback,drawMedia){var painter=new Painter(go,canvasDom_,textDom_,movePage,serverUrl_);painter.useAdjustLetterSpace(useAdjustLetterSpace);painter.useAdjustCharacterScale(useAdjustCharacterScale);painter.setFormFieldMode(go.license.isAllowedFeature("FormField")&&head.formFieldMode);painter.drawPage(page,head,callback,drawMedia)};var drawWithPainterForPrint=function(canvasDom_,textDom_,page,head,callback){drawWithPainter(canvasDom_,textDom_,page,head,callback,"p")};var refreshScroll=function(){if(!!scroll){scroll.destroy()}scroll=new IScroll("#"+CONTAINER_ID,{zoom:true,zoomMin:0.25,zoomMax:2.5,useTransition:options.useScrollTransition,scrollX:true,scrollY:true,scrollbars:"custom",interactiveScrollbars:true,freeScroll:true,zoomStart:Math.min(1,getWidthFitRatio()),keepCenter:true,tap:Util.hasTouch(),doubleTap:Util.hasTouch(),mouseWheel:true,click:false,keyBindings:{pageUp:33,pageDown:34,end:-1,home:-1,left:-1,up:-1,right:-1,down:-1},});go.scroll=scroll;scroll.on("zoomEnd",function(){zoomRatio=this.scale;if((go.license.isAllowedFeature("Note")&&options.enableNote)===true&&isSupportSVG){go.noteManager.setRatio(this.scale)}$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(this.scale*100)+"%")});scroll.on("scrollEnd",function(){if(isDesktopBlink){var evt=document.createEvent("UIEvents");evt.initUIEvent("resize",true,false,window,0);window.dispatchEvent(evt)}});scroll.on("beforeScrollStart",function(e){dialog.pagenum(go.currentPage,go.totalPage)});scroll.on("zoomStart",function(e){dialog.pagenum(go.currentPage,go.totalPage)});scroll.on("resize",function(){if(Util.browser.mobile&&this.scale==packRatio){pack()}this.zoom(this.scale,containerDom.width()/2,containerDom.width()/2);this.resetPosition(100)});scroll.on("prevPage",function(){if(go.currentPage!==1){movePage(go.currentPage-1,false)}else{if(go.currentPage==1){scroll.setScrollTop(true)}}});scroll.on("nextPage",function(){if(go.currentPage<Number(go.totalPage)){movePage(go.currentPage+1,false)}else{if(go.currentPage==go.totalPage){scroll.setScrollTop(false)}}});if(Util.browser.mobile){scroll.on("pullOut",PageSwiper.getInstance(containerDom,go).pullOut);scroll.on("pullEnd",PageSwiper.getInstance(containerDom,go).pullEnd);scroll.on("zoomStart",PageSwiper.getInstance(containerDom,go).cancel)}$(scroll.scroller).bind("doubleTap",function(ev){if(getWidthFitRatio()==scroll.scale||scroll.scale==1){scroll.zoom(scroll.scale*2,ev.pageX,ev.pageY)}else{if(!pack()){scroll.zoom(1,ev.pageX,ev.pageY)}}});if((go.license.isAllowedFeature("Note")&&options.enableNote)===true&&isSupportSVG){$(scroll.scroller).on("mousedown touchstart",function(e){!!noteDom&&noteDom.find(":focus").blur()})}var width=parseInt(options.scrollbarOnViewer.width);Util.changeScrollbar(width,width,options.scrollbarOnViewer.color,"","")};var prevDoc=function(){linkManager.prevDoc()};var nextDoc=function(){linkManager.nextDoc()};var zoomIn=function(){zoomRatio+=0.2;if(zoomRatio>scroll.options.zoomMax){zoomRatio=scroll.options.zoomMax}scroll.zoom(zoomRatio,containerDom.width()/2,containerDom.height()/2);return zoomRatio};var zoomOut=function(){zoomRatio-=0.2;if(zoomRatio<scroll.options.zoomMin){zoomRatio=scroll.options.zoomMin}scroll.zoom(zoomRatio,containerDom.width()/2,containerDom.height()/2);return zoomRatio};var createViewerDom=function(){$(parentId_+" > *").remove();if(isOverlay){parentId_="#crownix-html5-viewer";var overlay=$("<div>").addClass("crownix-overlay").css("z-index",Constant.VIEWER_OVERLAY_Z_INDEX).prependTo("body").fadeIn(500);if(typeof setting_.viewerWidth!="number"||setting_.viewerWidth<0||setting_.viewerWidth>1){setting_.viewerWidth=0.9}if(typeof setting_.viewerHeight!="number"||setting_.viewerHeight<0||setting_.viewerHeight>1){setting_.viewerHeight=0.9}var parentDom=$('<div id="crownix-html5-viewer">').css({display:"none",position:"absolute",width:setting_.viewerWidth*100+"%",height:setting_.viewerHeight*100+"%",left:(100-setting_.viewerWidth*100)/2+"%",top:(100-setting_.viewerHeight*100)/2+"%","margin-left":window.pageXOffset,"margin-top":window.pageYOffset,border:"1px solid #666","z-index":Constant.VIEWER_Z_INDEX,}).prependTo("body");var tmpOverflowX=$("body").css("overflow-x");var tmpOverflowY=$("body").css("overflow-y");if(setting_.viewerWidth==1){$("body").css("overflow-x","hidden")}if(setting_.viewerWidth==1&&setting_.viewerHeight==1){$("body").css("overflow-y","hidden")}$('<span class="crownix-close-button">X</span>').bind("click",function(){client.abort();parentDom.remove();overlay.remove();$("body").css("overflow-x",tmpOverflowX);$("body").css("overflow-y",tmpOverflowY);FieldOrder.dispose();PageSwiper.dispose();formManager&&formManager.saved()}).css({display:setting_.enableCloseButton?"block":"none",}).appendTo(parentDom);parentDom.fadeIn(500)}containerDom=$("<div>").attr("id",CONTAINER_ID).addClass("crownix-container").addClass("crownix-container-gradient").appendTo(parentId_);$('<div><iframe id="crownix-download-iframe" name="crownix-download-iframe" style="display: none"></iframe><form id="crownix-download-form" target="crownix-download-iframe" method="post" style="display:none" accept-charset="utf-8"><input type="hidden" name="filename"/><input type="hidden" name="delete" value="true"/></form></div>').appendTo(parentId_)};var createPageDom=function(pageWidth,pageHeight){pageDom=$("<div>").attr("id",PAGE_ID).css({width:pageWidth,height:pageHeight,position:"relative",visibility:"hidden","margin-left":"0px","margin-right":"0px",padding:"12px"}).prependTo("#"+CONTAINER_ID);canvasDom=$("<canvas>").attr("id",CANVAS_ID).attr("width",pageWidth).attr("height",pageHeight).css({position:"absolute","z-index":1}).addClass("crownix-page").appendTo("#"+PAGE_ID);textDom=$("<div>").attr("id",TEXT_ID).css({position:"absolute",width:pageWidth,height:pageHeight,"z-index":2,border:"1px solid rgba(255,255,255,0)"}).appendTo("#"+PAGE_ID);if((go.license.isAllowedFeature("Note")&&options.enableNote)===true&&isSupportSVG){noteDom=$("<div>").attr("id",NOTE_ID).css({position:"absolute",display:"block",width:pageWidth,height:pageHeight,"z-index":3,}).appendTo("#"+PAGE_ID)}};var getWidthFitRatio=function(){if(!canvasDom){return 1}var containerWidth=containerDom.innerWidth()-2;var canvasWidth=canvasDom.innerWidth();var padding=CONTAINER_PADDING*2*containerWidth/canvasWidth;return(containerWidth-padding)/canvasWidth};var getHeightFitRatio=function(){var containerHeight=containerDom.innerHeight()-2;var canvasHeight=canvasDom.innerHeight();var padding=CONTAINER_PADDING*2*containerHeight/canvasHeight;return(containerHeight-padding)/canvasHeight};var getZoomMin=function(){return Math.min(getHeightFitRatio(),getWidthFitRatio())};var pack=function(){if($("#"+PAGE_ID).length==0){return}this.moveScroll=function(){scroll.zoom(zoomRatio,containerDom.width()/2,containerDom.height()/2,0);if(scroll.getScrollTop()===false){scroll.scrollTo(containerDom.width()/2,scroll.getMaxScrollY())}else{scroll.scrollTo(containerDom.width()/2,0)}scroll.resetPosition()};packRatio=getWidthFitRatio();if(packRatio<1){if(!options.keepZoomRatio||isFirstPageDraw){zoomRatio=packRatio}this.moveScroll();return true}else{if(!options.keepZoomRatio){zoomRatio=scroll.scale}this.moveScroll();dialog.pagenum(go.currentPage,go.totalPage);$("#crownix-toolbar #crownix-toolbar-ratio div button").text(Math.round(scroll.scale*100)+"%");return false}};var checkError=function(xhr){if(xhr.getResponseHeader("crownix-status")==="error"){Message.progress.hide(parentId_);var errMsg;var errIndex=xhr.responseText.indexOf("[ERS-");if(errIndex>=0){errMsg=xhr.responseText.substr(errIndex)}else{errMsg=R.get("request_server_error")}dialog.show(errMsg);toolbar.disableToolbarItem(["cancel"]);return true}return false};var doFinishWork=function(done,data){toolbar.disableToolbarItem(["cancel"]);oldRuntimeParam=runtimeParam;runtimeParam=new Runtime();if(done){if(!!data&&data.indexOf("</MML>")<0&&data.indexOf("</DOCUMENT>")<0){var errMsg;var errIndex=data.indexOf("[ERS-");if(errIndex>=0){errMsg=data.substr(errIndex)}else{errMsg=R.get("execute_error")}dialog.show(errMsg);Message.progress.hide(parentId_);return}dialog.pagenum(go.currentPage,go.totalPage,false);if(parseInt(go.totalPage)===1){toolbar.disableToolbarItem(["next","last","move"])}isFinished=true;for(var i in report.getDocumentList()){preventPrintExport=preventPrintExport||(go.license.isAllowedFeature("FormField")&&report.getDocumentList()[i].formFieldMode&&!go.isFormExportMode)}if(!preventPrintExport){toolbar.enableToolbarItem(["save","print","print_pdf"])}if(go.isFormEditMode){toolbar.showToolbarItem(["storage-formdata"])}else{toolbar.hideToolbarItem(["storage-formdata"])}var docStackArr=[];if(!linkManager.isEmptyPrevDocStack()){docStackArr.push("prevDoc")}if(!linkManager.isEmptyNextDocStack()){docStackArr.push("nextDoc")}if(docStackArr.length>0){toolbar.showToolbarItem(["prevDoc","nextDoc"]);toolbar.disableToolbarItem(["prevDoc","nextDoc"]);toolbar.enableToolbarItem(docStackArr)}else{toolbar.hideToolbarItem(["prevDoc","nextDoc"])}if(go.isFormEditMode){formManager.fireLoadCompleteEvent();formManager.bindEvent()}if(!go.license.isAllowedFeature("ShareServer")){toolbar.hideToolbarItem(["share"]);if(shareManager){shareManager.unableLicense()}}formManager.removePreventEvent();mmlString=data;setTimeout(function(){fireFinishEvent();emit("report-finished",getReportInfo());checkLastpage(1);if(shareManager&&shareManager.isConnected()){shareManager.reportFinished()}if(go.isFormEditMode&&stateLess&&go.formManager.existRequiredFileField()&&!window.FormData){dialog.show(R.get("not_support_file_append"),"",function(){var fields=go.formManager.getRequiredFileFields();for(var i=0,length=fields.length;i<length;i++){fields[i].setRequired(false)}})}},0)}};var getReportInfo=function(){var reportname=[];var documentList=report.getDocumentList();if(Util.isArray(mrdPath_)){for(var i in documentList){reportname.push(documentList[i].mrd)}}else{reportname=documentList[1].mrd}return{reportname:reportname,reportlongname:mrdPath_,reportparams:mrdParam_,subreportname:report.getSubReportName().split("@@"),totalPage:go.totalPage}};var fireFinishEvent=function(){for(var i=0;i<finishEventHandler.length;i++){finishEventHandler[i].handler.apply(this,finishEventHandler[i].arg)}finishEventHandler=[]};var addFinishEventHandler=function(handler,arg){finishEventHandler.push({handler:handler,arg:arg})};var displayMML=function(mml){$(document).bind("keypress",function(e){if(e.shiftKey&&e.which===68){window.open("data:text/xml;charset=utf-8,"+encodeURI(mml))}})};var showMMLStorageDialog=function(viewer_){if(!m2soft.crownix.storage||!m2soft.crownix.storage.Window){dialog.show(R.get("unsupported_feature_localStorage"));return}var StorageWindow=m2soft.crownix.storage.Window;var storageWindow=new StorageWindow("mml",dialog);storageWindow.setDataGetter(function(includeImage){return viewer_.exportMML({includeImage:includeImage})});storageWindow.setDataLoader(function(data){storageWindow.close();viewer_.importMML(data)});storageWindow.show({parent:parentId_})};var showFormDataStorageDialog=function(viewer_){if(!m2soft.crownix.storage||!m2soft.crownix.storage.Window||!go.isFormEditMode){dialog.show(R.get("unsupported_feature_localStorage"));return}var StorageWindow=m2soft.crownix.storage.Window;var storageWindow=new StorageWindow("formdata",dialog);storageWindow.setDataGetter(function(checkValid){return viewer_.exportFormData({checkValid:checkValid})});storageWindow.setDataLoader(function(data){var load=function(){storageWindow.close();viewer_.importFormData(data);formManager.saved()};if(formManager.isModified()){dialog.show(R.get("storage_formfield_import"),{confirm:true,input:false},function(result){if(result){load()}})}else{load()}});storageWindow.show({parent:parentId_,closeOnError:true,})};var getMML=function(mrdPath,mrdParam,mrdPlainParam,mrdData,loadHandler,doneHandler,opcode){client=new AjaxClient();client.setConnectTimeout(options.timeout);var worker=getEncryptWorker("decrypt");worker.addEventListener("message",function(msg){var xmlData=msg.data.text;var method=msg.data.method;var rdid=msg.data.rdid;if(method==="process"){loadHandler(xmlData,rdid)}else{if(method==="finalize"){doneHandler(xmlData,rdid);worker.terminate()}}});client.setHandler({load:function(xhr){if(checkError(xhr)){return}worker.postMessage({method:"process",rdid:xhr.getResponseHeader("crownix-rdid"),text:xhr.responseText})},done:function(xhr){if(checkError(xhr)){return}worker.postMessage({method:"finalize",rdid:xhr.getResponseHeader("crownix-rdid"),text:xhr.responseText})},error:function(xhr,message){Message.progress.hide(parentId_);worker.terminate();if(message){dialog.show(message)}else{if(xhr.status==0){dialog.show(R.get("server_connect_error"))}else{dialog.show(R.get("request_server_error")+"("+xhr.status+")")}}doFinishWork(false)},abort:function(){Message.progress.hide(parentId_);worker.terminate();dialog.show(R.get("request_abort_error"));doFinishWork(false)},timeout:function(){Message.progress.hide(parentId_);worker.terminate();dialog.show(R.get("request_timeout_error"));doFinishWork(false)}});var mrdPathLocal="";var mrdParamLocal="";var mrdPlainParamLocal="";var mrdDataLocal="";if(Util.isArray(mrdPath)){mrdPathLocal=JSON.stringify(mrdPath);mrdParamLocal=JSON.stringify(mrdParam);if(Util.isArray(mrdPlainParam)&&mrdPlainParam.length>0){mrdPlainParamLocal=JSON.stringify(mrdPlainParam)}if(Util.isArray(mrdData)&&mrdData.length>0){mrdDataLocal=JSON.stringify(mrdData)}}else{mrdPathLocal=mrdPath;mrdParamLocal=mrdParam;if(typeof mrdPlainParam=="string"&&mrdPlainParam!=""){mrdPlainParamLocal=mrdPlainParam}if(typeof mrdData=="string"&&mrdData!=""){mrdDataLocal=mrdData}}var requestParam={opcode:opcode,mrd_path:mrdPathLocal,mrd_param:mrdParamLocal,mrd_plain_param:mrdPlainParamLocal,mrd_data:mrdDataLocal,runtime_param:runtimeParam.toJson(),mmlVersion:report.getMmlVersion(),protocol:"sync",};if(encType>3&&linkManager.isEmptyPrevDocStack()&&go.drilldownManager.getDrilldownLength()==0){requestParam.enc_type=encType}if(rdid){requestParam.rdid=rdid}var encryptWorker=getEncryptWorker("encrypt");encryptWorker.addEventListener("message",function(msg){var requestParam=msg.data.obj;var method=msg.data.method;if(method==="object"){if(options.enableSecure){client.setRequestHeader("crownix-rdid",rdid);client.setRequestHeader("crownix-encrypt-type","parameter")}client.invoke(serverUrl_+(rdid?"?rdid="+rdid:""),requestParam);encryptWorker.terminate()}});encryptWorker.postMessage({method:"object",obj:requestParam})};var openFileAsSingle=function(mrdPath,mrdParam,mrdData,mrdPlainParamLocal){Message.progress.show(parentId_);var loadHandler=function(xmlData,rdid){report.parseMML(xmlData);toolbar.enableToolbarItem(["cancel"])};var doneHandler=function(xmlData,rdid){report.parseMML(xmlData);parameterBuilder=new ParameterBuilder(go,isIncludeNote);doFinishWork(true,xmlData);if(Constructor.debug){displayMML(xmlData)}};getMML(mrdPath,mrdParam,mrdPlainParamLocal,mrdData,loadHandler,doneHandler,700)};var openFileAsMulti=function(mrdPath,mrdParam,mrdData,mrdPlainParamLocal){Message.progress.show(parentId_);toolbar.enableToolbarItem(["cancel"]);var loadHandler=function(xmlData,rdid_){rdid=rdid_;checkPage()};var doneHandler=function(xmlData,rdid_){rdid=rdid_;report.parseMML(xmlData,1);parameterBuilder=new ParameterBuilder(go,isIncludeNote);if(!pageCheckInterval){pageCheckInterval=setInterval(function(){checkPage()},500)}};getMML(mrdPath,mrdParam,mrdPlainParamLocal,mrdData,loadHandler,doneHandler,701)};var getEncryptWorker=function(type){if(options.enableSecure){var algorithm=IKE.getAlgorithm(rdid);var key=IKE.getKey(rdid);return WorkerUtil.getCryptoWorker(type,algorithm,key)}else{return WorkerUtil.getIdentifyWorker()}};var checkPage=function(){var client=new AjaxClient();client.setConnectTimeout(options.timeout);var worker=getCheckPageWorker();client.setHandler({load:function(xhr){},done:function(xhr){if(checkError(xhr)){return}var status=xhr.getResponseHeader("crownix-status");checkLastpage(go.currentPage);worker.postMessage({method:"finalize",text:xhr.responseText,status:status})},error:function(xhr){worker.terminate();clearInterval(pageCheckInterval);if(xhr.status==0){dialog.show(R.get("server_connect_error"))}else{dialog.show(R.get("request_server_error")+"("+xhr.status+")")}},abort:function(){worker.terminate();dialog.show(R.get("request_abort_error"));clearInterval(pageCheckInterval)},timeout:function(){worker.terminate();dialog.show(R.get("request_timeout_error"));clearInterval(pageCheckInterval)}});var requestParam={opcode:702,rdid:rdid,};go.rdid=rdid;var encryptWorker=getEncryptWorker("encrypt");encryptWorker.addEventListener("message",function(msg){var requestParam=msg.data.obj;var method=msg.data.method;if(method==="object"){if(options.enableSecure){client.setRequestHeader("crownix-rdid",rdid);client.setRequestHeader("crownix-encrypt-type","parameter")}client.invoke(serverUrl_+(rdid?"?rdid="+rdid:""),requestParam);encryptWorker.terminate()}});encryptWorker.postMessage({method:"object",obj:requestParam})};var getCheckPageWorker=function(){var worker=getEncryptWorker("decrypt");worker.addEventListener("message",function(msg){var totalPage=msg.data.text;var method=msg.data.method;var status=msg.data.status;if(method==="finalize"&&Painter.updatePageNum){go.totalPage=totalPage;dialog.pagenum(go.currentPage,go.totalPage,true);Painter.updatePageNum();if(status==="done"){clearInterval(pageCheckInterval);report.setTotalPage(parseInt(totalPage));doFinishWork(true)}worker.terminate()}});return worker};var downloadPage=function(pageNumber){if(report.hasPage(pageNumber)){drawPage(pageNumber)}else{var client=new AjaxClient();client.setConnectTimeout(options.timeout);var worker=getDownloadPageLoadWorker(pageNumber);pageNumber=report.findPage(pageNumber);client.setHandler({load:function(xhr){},done:function(xhr){if(checkError(xhr)){clearInterval(pageCheckInterval);return}worker.postMessage({method:"finalize",text:xhr.responseText})},error:function(xhr){clearInterval(pageCheckInterval);worker.terminate();if(xhr.status==0){dialog.show(R.get("server_connect_error"))}else{dialog.show(R.get("request_server_error")+"("+xhr.status+")")}},abort:function(){dialog.show(R.get("request_abort_error"));worker.terminate();clearInterval(pageCheckInterval)},timeout:function(){dialog.show(R.get("request_timeout_error"));worker.terminate();clearInterval(pageCheckInterval)}});var doc=report.getHeadForPage(pageNumber);var withHead=doc==null;var requestParam={opcode:703,page:pageNumber,withHead:withHead,mmlVersion:report.getMmlVersion(),rdid:rdid,};if(options.enableSecure){client.setRequestHeader("crownix-rdid",rdid);client.setRequestHeader("crownix-encrypt-type","parameter")}var encryptWorker=getEncryptWorker("encrypt");encryptWorker.addEventListener("message",function(msg){var requestParam=msg.data.obj;var method=msg.data.method;if(method==="object"){client.invoke(serverUrl_+(rdid?"?rdid="+rdid:""),requestParam);encryptWorker.terminate()}});encryptWorker.postMessage({method:"object",obj:requestParam})}};var getDownloadPageLoadWorker=function(pageNumber){var worker=getEncryptWorker("decrypt");worker.addEventListener("message",function(msg){var text=msg.data.text;var method=msg.data.method;if(method==="finalize"){report.parseMML(text,pageNumber);if(isFinished){doFinishWork(true,text)}drawPage(pageNumber);worker.terminate()}});return worker};var cancelReport=function(){var client=new AjaxClient();client.setHandler({load:function(xhr){},done:function(xhr){dialog.show(R.get("request_abort_error"));clearInterval(pageCheckInterval)},error:function(xhr){clearInterval(pageCheckInterval);if(xhr.status==0){dialog.show(R.get("server_connect_error"))}else{dialog.show(R.get("request_server_error")+"("+xhr.status+")")}},abort:function(){dialog.show(R.get("request_abort_error"));clearInterval(pageCheckInterval)},timeout:function(){dialog.show(R.get("request_timeout_error"));clearInterval(pageCheckInterval)}});var requestParam={opcode:709,rdid:rdid,};var encryptWorker=getEncryptWorker("encrypt");encryptWorker.addEventListener("message",function(msg){var method=msg.data.method;if(method==="object"){var requestParam=msg.data.obj;if(options.enableSecure){client.setRequestHeader("crownix-rdid",rdid);client.setRequestHeader("crownix-encrypt-type","parameter")}client.invoke(serverUrl_+(rdid?"?rdid="+rdid:""),requestParam);encryptWorker.terminate()}});encryptWorker.postMessage({method:"object",obj:requestParam})};var downloadFile=function(type,callback){var mrdPath=parameterBuilder.concatMrdPath(mrdPath_);var mrdParam;if(encType>3){mrdParam=parameterBuilder.concatMrdPath(mrdParam_);go.mrdPlainParam=parameterBuilder.concatMrdParam(formManager.getFormList(),mrdPlainParam_)}else{mrdParam=parameterBuilder.concatMrdParam(formManager.getFormList(),mrdParam_)}var mrdData;if(mrdData_!=undefined){mrdData=parameterBuilder.concatMrdPath(mrdData_)}var exportDownload=function(){var exportAgent=new ExportAgent(go,dialog,toolbar,options);isDownload=true;if(go.options.downloadProtocolFile===false){exportAgent.downloadFile(serverUrl_,type,mrdPath,mrdParam,mrdData,oldRuntimeParam,callback,linkManager).always(function(){isDownload=false})}else{exportAgent.downloadFileDirect(serverUrl_,type,mrdPath,mrdParam,mrdData,oldRuntimeParam,linkManager);isDownload=false}};if(type=="xls"&&options.showXlsKeepFormDialog==true){dialog.show(R.get("keep_report_layout_message"),{verify:true,input:"",textYes:R.get("yes_button_text"),textNo:R.get("no_button_text"),textAlign:"center"},function(verify){var temp=verify?65537:65538;if(encType>3){go.mrdPlainParam="/rxlsopt ["+temp+"] "+go.mrdPlainParam}else{mrdParam="/rxlsopt ["+temp+"] "+mrdParam}exportDownload()})}else{exportDownload()}};var showPdfWindow=function(){var mrdPath=parameterBuilder.concatMrdPath(mrdPath_);var mrdParam;if(encType>3){go.mrdPlainParam=parameterBuilder.concatMrdParam(formManager.getFormList(),mrdPlainParam_,true);mrdParam=parameterBuilder.concatMrdPath(mrdParam_)}else{mrdParam=parameterBuilder.concatMrdParam(formManager.getFormList(),mrdParam_,true)}var mrdData;if(mrdData_!=undefined){mrdData=parameterBuilder.concatMrdPath(mrdData_)}var exportAgent=new ExportAgent(go,dialog,toolbar,options);isDownload=true;if(go.options.downloadProtocolFile===false){exportAgent.showPdfWindow(serverUrl_,mrdPath,mrdParam,mrdData,oldRuntimeParam,linkManager).always(function(){isDownload=false})}else{exportAgent.showPdfWindowDirect(serverUrl_,mrdPath,mrdParam,mrdData,oldRuntimeParam,linkManager);isDownload=false}};var showPrintWindow=function(){var printWindow=$('<div id="crownix-print-frame">').appendTo("body");if(!Util.browser.mobile&&!Util.browser.edge&&!(Util.browser.msie&&Util.browser.version>9)){var printViewer=$('<iframe id="crownix-print-viewer">').css({width:"100%",height:"100%",});printViewer.prependTo(printWindow);var iframeDoc=printViewer.contents()[0];iframeDoc.open();iframeDoc.write('<!DOCTYPE html><head></head><body id="'+CONTAINER_ID+'"></body></html>');iframeDoc.close();printViewer.contents().find("head").append($("link").clone())}for(var i=0,max=go.totalPage;i<max;i++){var pageNum=i+1;var pageXml=report.getPage(pageNum);var docHead=report.getHeadForPage(pageNum);var page=$(pageXml);var pageWidth=page.attr("wd")/10.3;var pageHeight=page.attr("ht")/10.3;var pageStyle=page.attr("or")==="l"?"margin: 0; size: landscape;":"size: portrait;";var printPageDom=$("<div>").attr("id",PAGE_ID).addClass(PAGE_ID).css({width:pageWidth,height:pageHeight,position:"relative",visibility:"visible"});if(pageNum<go.totalPage){printPageDom.css({"page-break-after":"always"})}if(!Util.browser.mobile&&(!Util.browser.edge&&!(Util.browser.msie&&Util.browser.version>9))&&i===0){var head=printViewer.contents()[0].getElementsByTagName("head")[0];var printStyle=$("<style>").attr("type","text/css").attr("media","print").append("body {margin: 0;padding: 0;}@page {"+pageStyle+"}").appendTo(head)}var printCanvasDom=$("<canvas>").attr("id",CANVAS_ID).attr("width",pageWidth).attr("height",pageHeight).addClass(CANVAS_ID).css({"z-index":1}).appendTo(printPageDom);var printTextDom=$("<div>").attr("id",TEXT_ID).addClass(TEXT_ID).css({width:pageWidth,height:pageHeight,"z-index":2,"-webkit-print-color-adjust":"exact"}).appendTo(printPageDom);var noteDom=$("<div>").attr("id",NOTE_ID).addClass(NOTE_ID).css({width:pageWidth,height:pageHeight,"z-index":3}).appendTo(printPageDom);if(Util.browser.safari){printPageDom.css({zoom:0.83})}if(!Util.browser.firefox){printCanvasDom.css("position","absolute");printTextDom.css("position","absolute");noteDom.css("position","absolute")}if(!Util.browser.mobile&&!Util.browser.edge&&!(Util.browser.msie&&Util.browser.version>9)){printPageDom.appendTo(printViewer.contents().find("body"))}else{printPageDom.appendTo(printWindow)}(function(page,printPageDom,printTextDom,printCanvasDom,pageNum){drawWithPainterForPrint(printCanvasDom[0],printTextDom,page,docHead,function(){go.drilldownManager.updateInfo(pageNum,page,printPageDom,printTextDom,printCanvasDom);go.drilldownManager.reload(pageNum)})})(page,printPageDom,printTextDom,printCanvasDom,pageNum);if(isIncludeNote("includeNoteInPrint")){go.noteManager.drawNote(noteDom,pageNum)}}if(!Util.browser.mobile&&!Util.browser.edge&&!(Util.browser.msie&&Util.browser.version>9)){var iframeDom=document.getElementById("crownix-print-viewer");var iframeWindow=iframeDom.contentWindow||iframeDom.contentDocument}else{printWindow.appendTo($(document).find("body"));printWindow.css({position:"absolute",top:"0px",left:"0px",})}setTimeout(function(){Message.progress.hide(parentId_);if(!Util.browser.mobile&&!Util.browser.edge&&!(Util.browser.msie&&Util.browser.version>9)){iframeWindow.focus();iframeWindow.print()}else{$(parentId_).hide();print();$(parentId_).show()}if(Util.browser.opera){iframeWindow.onfocus=function(){printWindow.remove()}}else{printWindow.remove()}var pageXml=report.getPage(go.currentPage);var page=$(pageXml);go.drilldownManager.updateInfo(go.currentPage,page,pageDom,textDom,canvasDom)},1000)};var checkStorageFeature=function(){if(shareManager&&shareManager.isConnected()){return}if(!m2soft.crownix.storage||!m2soft.crownix.storage.Window){dialog.show(R.get("unsupported_feature_localStorage"));throw R.get("unsupported_feature_localStorage")}};var exportMML=function(includeImage){if(!isFinished){throw Error(R.get("image_export_disabled_before_done"))}if(drilldownManager&&drilldownManager.isOpening()){throw Error(R.get("image_export_disabled_before_done"))}if(typeof includeImage=="undefined"){includeImage=true}return{mml:includeImage?mmlString:mmlString.replace(/<IM[^>]+>/g,""),mrd_path:mrdPath_,mrd_param:mrdParam_,drilldownInfo:go.drilldownManager["export"](),options:options,preventPrintExport:preventPrintExport,useAdjustLetterSpace:useAdjustLetterSpace,useAdjustCharacterScale:useAdjustCharacterScale,useWebFont:useWebFont,isAppendReport:go.isAppendReport,removedPage:report.getRemovedPage(),version:"1.0",}};var importMML=function(data){mrdPath_=data.mrd_path||"";mrdParam_=data.mrd_param||"";options=$.extend({},optionsDefault);if(typeof data.options==="object"){$.extend(true,options,data.options)}preventPrintExport=data.preventPrintExport;useAdjustLetterSpace=data.useAdjustLetterSpace;useAdjustCharacterScale=data.useAdjustCharacterScale;useWebFont=data.useWebFont;isAppendReport=data.isAppendReport;openMML(data.mml);go.drilldownManager["import"](data.drilldownInfo);report.removePage(data.removedPage)};var exportFormData=function(options){if(!isFinished){throw Error(R.get("image_export_disabled_before_done"))}if(!go.isFormEditMode){throw Error(R.get("unsupported_feature_without_formedit_mode"))}if(drilldownManager&&drilldownManager.isOpening()){throw Error(R.get("image_export_disabled_before_done"))}var data=formManager["export"](options.checkValid===true);formManager&&formManager.saved();if(options.includeExtra===true){return{formData:data,removedPage:report.getRemovedPage(),drilldownInfo:go.drilldownManager["export"]()}}else{return Converter.json2xml(data)}};var importFormData=function(data){if(!isFinished){throw Error(R.get("image_export_disabled_before_done"))}if(!go.isFormEditMode){throw Error(R.get("unsupported_feature_without_formedit_mode"))}if(typeof data=="object"){go.drilldownManager["import"](data.drilldownInfo,true);report.removePage(data.removedPage);formManager["import"](data.formData)}else{if(typeof data=="string"){var data=Converter.xml2json(data,{arrayAccessFormPaths:["formdata.form","formdata.form.fields.field"]});if(data===null){throw Error(R.get("parsing_error_mml"))}formManager["import"](data)}}setTimeout(function(){drawPage(go.currentPage)},0);formManager&&formManager.removePreventEvent()};var exportMmlFormData=function(includeImage,checkValid){return{mmlData:exportMML(includeImage),formData:exportFormData({}),version:"1.0",}};var importMmlFormData=function(data){importMML(data.mmlData);importFormData(data.formData)};var openMML=function(mml){initialize();go.isAppendReport=false;report.parseMML(mml);parameterBuilder=new ParameterBuilder(go,isIncludeNote);doFinishWork(true,mml)};var isIncludeNote=function(optionName){if((go.license.isAllowedFeature("Note")&&options.enableNote)===true&&isSupportSVG){if(options[optionName]===undefined){return(go.noteManager.getMode()==="editable"||go.noteManager.getMode()==="disable")}else{return(options[optionName]===true)}}};var checkSupportedBrowser=function(){if(typeof document.createElement("canvas").getContext!=="function"){dialog.show(R.get("unsupported_canvas_error"));return false}return true};var submitFinished=function(result,submitFormList){if(formManager.isAllFormSubmitted()){toolbar.enableToolbarItem(["save","print","print_pdf"]);preventPrintExport=false}if(shareManager&&shareManager.isConnected()){if(result.status){shareManager.submitFinished(result,submitFormList)}else{shareManager.submitFailed()}}emit("submit-finished",result);formManager.saved()};var initialize=function(){zoomRatio=1;rdid="";isFinished=false;isExport=false;preventPrintExport=false;if(options.saveMmlToPdf){stateLess=false}go.toolbar=toolbar;go.inquery=inquery;go.scroll=scroll;go.client=client;go.rdid=rdid;go.mmlString=mmlString;go.eventHandler=eventHandler;go.parameterBuilder=parameterBuilder;go.options=options;go.stateLess=stateLess;go.useWebFont=useWebFont;go.isFormEditMode=false;go.isFormExportMode=false;go.currentPage=0;go.totalPage=0;go.containerDom=containerDom;go.mrdPath=mrdPath_;go.mrdParam=mrdParam_;go.mrdPlainParam=mrdPlainParam_;go.encType=encType;go.mrdData=mrdData_;go.startPageNo=0;go.openFile=openFile;go.exportMML=exportMML;go.exportFormData=exportFormData;go.importMML=importMML;go.importFormData=importFormData;go.startPageNo=0;go.emit=emit;var license=new License();drilldownManager=new DrilldownManager(go,serverUrl_,getMML);formManager=new FormManager(submitFinished,getBuilder,go);report=new Report(go,parentId_);if(go.noteManager){go.noteManager.destroyNoteToolbar();go.noteManager=null}if(!!pageCheckInterval){clearInterval(pageCheckInterval)}pageCheckInterval=null;go.license=license;go.report=report;go.drilldownManager=drilldownManager;go.formManager=formManager;FieldOrder.getInstance(go).clear();$("#"+PAGE_ID).remove()};var getBuilder=function(){return parameterBuilder};var concatBasePath=function(path){return path};var openFile=function(mrdPath,mrdParam,options_){if(!checkSupportedBrowser()){return}if(shareManager&&shareManager.isConnected()&&!shareManager.isHost()){dialog.show(R.get("unsupported_feature_localStorage"));return}if(options_&&options_.isHyperlink===true){options_.isHyperlink=false;if(!(mrdPath.indexOf("http://")>=0||mrdPath.indexOf("https://")>=0)){mrdPath=mrdPath_.substring(0,mrdPath_.lastIndexOf("/")+1)+mrdPath}if(!linkManager.saveState("new")){dialog.show(R.get("hyperlink_full_stack_warning"));return}linkManager.deleteNextDocStack();if(linkManager.isExistData(mrdPath+"_"+mrdParam)){linkManager.restoreState(mrdPath+"_"+mrdParam);return}}else{linkManager=new LinkManager(go)}var mrdPathLocal=null;var mrdParamLocal=null;var mrdPlainParamLocal=null;var mrdDataLocal=null;if(Util.isArray(mrdPath)){go.isAppendReport=true;mrdPathLocal=[];mrdParamLocal=[];mrdPlainParamLocal=[];mrdDataLocal=[];for(var i=0;i<mrdPath.length;i++){if(typeof C==="object"){mrdPathLocal.push(C.unprocess(mrdPath[i].mrdPath,encType));mrdParamLocal.push(C.unprocess(mrdPath[i].mrdParam,encType));if(typeof mrdPath[i].rdata=="string"){mrdDataLocal.push(C.unprocess(mrdPath[i].rdata,encType))}}else{mrdPathLocal.push(mrdPath[i].mrdPath);mrdParamLocal.push(mrdPath[i].mrdParam);if(typeof mrdPath[i].rdata=="string"){mrdDataLocal.push(mrdPath[i].rdata)}}if(inquery.getMrdPlainParam()){mrdPlainParamLocal.push(inquery.getMrdPlainParam())}else{mrdPlainParamLocal.push("")}}options_=mrdParam}else{go.isAppendReport=false;if(typeof C==="object"){mrdPathLocal=C.unprocess(mrdPath,encType);mrdParamLocal=C.unprocess(mrdParam,encType);if(typeof mrdData_=="string"){mrdDataLocal=C.unprocess(mrdData_,encType)}}else{mrdPathLocal=mrdPath;mrdParamLocal=mrdParam;if(typeof mrdData_=="string"){mrdDataLocal=mrdData_}}mrdPlainParamLocal=inquery.getMrdPlainParam()}mrdPath_=mrdPathLocal;mrdParam_=mrdParamLocal;mrdData_=mrdDataLocal;mrdPlainParam_=mrdPlainParamLocal;options=$.extend({},optionsDefault);if(typeof options_==="object"){$.extend(true,options,options_)}initialize();var open=function(){if(stateLess){openFileAsSingle(mrdPathLocal,mrdParamLocal,mrdDataLocal,mrdPlainParamLocal)}else{openFileAsMulti(mrdPathLocal,mrdParamLocal,mrdDataLocal,mrdPlainParamLocal)}};if(!options.showPageNum){$(".crownix-dialog-message-pagenum").remove()}if(options.enableSecure){if(rdid){IKE.removeSession(rdid)}IKE.request({serverUrl:serverUrl_}).done(function(rdid_){rdid=rdid_;open()}).fail(function(e){Message.log(e.stack);dialog.show("Key exchange error("+e+")")})}else{open()}if(typeof C==="object"){C=undefined;m2soft.crownix.EncEval=undefined;m2soft.crownix.Enc=undefined;delete m2soft.crownix.EncEval;delete m2soft.crownix.Enc}};var emit=function(eventName){if(typeof eventHandler[eventName]!=="function"){Constructor.debug&&Message.log("[event emitted] "+eventName+" is not registerd");return}var args=[];Array.prototype.push.apply(args,arguments);args.shift();eventHandler[eventName].apply(null,args)};var addVisibilityEvent=function(){document.addEventListener("visibilitychange",function(){var canvas=document.getElementById("m2soft-crownix-canvas");var ctx=canvas.getContext("2d");var page=ctx.getImageData(0,0,canvas.width,canvas.height);canvas.width++;canvas.width--;ctx.putImageData(page,0,0)})};var Constructor;Constructor=function(serverUrl,parentId,setting){serverUrl_=serverUrl;if(typeof parentId!="string"){isOverlay=true;setting_=$.extend({},settingDefault);if(typeof parentId=="object"){$.extend(true,setting_,parentId)}}else{parentId_="#"+parentId;setting_=$.extend({},settingDefault);$.extend(true,setting_,setting)}finishEventHandler=[];createViewerDom();toolbar=new Toolbar(parentId_,this,{getHeightFitRatio:getHeightFitRatio,getWidthFitRatio:getWidthFitRatio,scale:setting_.toolbarScale});containerDom.css("top",toolbar.getHeight()+"px");dialog=new Dialog(CONTAINER_ID);inquery=new Inquery(CONTAINER_ID);toolbar.disableAllItems();if(isOverlay){toolbar.enableToolbarItem(["close"])}go.viewer=this;go.dialog=dialog;if(setting_.share){shareManager=new ShareManager(setting_.share,go,parentId);go.shareManager=shareManager;toolbar.enableToolbarItem(["share"])}if(isDesktopBlink){addVisibilityEvent()}if(setting_.downloadUrl){go.downloadUrl=setting_.downloadUrl}Message.log("[Crownix Viewer] "+R.get("developer_console_warnning"))};Constructor.prototype={constructor:m2soft.crownix.Viewer,openFile:function(mrdPath,mrdParam,options_){openFile(mrdPath,mrdParam,options_)},hideToolbar:function(){toolbar.hideToolbar();containerDom.css("top","0px");refreshScroll();scroll.zoom(zoomRatio,containerDom.width()/2,containerDom.height()/2)},showToolbar:function(){toolbar.showToolbar();containerDom.css("top",toolbar.getHeight()+"px");refreshScroll();scroll.zoom(zoomRatio,containerDom.width()/2,containerDom.height()/2)},hideToolbarItem:function(){toolbar.hideToolbarItem.apply(this,arguments)},showToolbarItem:function(){toolbar.showToolbarItem.apply(this,arguments)},addToolbarItem:function(item){toolbar.addToolbarItem(item)},nextPage:function(){movePage(go.currentPage+1)},prevPage:function(){movePage(go.currentPage-1)},moveFirstPage:function(){movePage(1)},moveLastPage:function(){movePage(go.totalPage)},movePage:function(pageNumber){movePage(pageNumber)},prevDoc:function(){prevDoc()},nextDoc:function(){nextDoc()},zoomIn:function(){return zoomIn()},zoomOut:function(){return zoomOut()},zoom:function(ratio){scroll.zoom(ratio,containerDom.width()/2,containerDom.height()/2);return scroll.scale},pack:function(){pack()},showMovePageDialog:function(){dialog.show(R.get("insert_page_number"),{input:"number"},function(number){if(number===false){return}movePage(number)})},setDownloadFileName:function(fileName){go.options.downloadFileName=fileName},downloadFile:function(type,callback){if(isDownload||!isFinished){throw new Error(R.get("download_duplicate_error"))}if(preventPrintExport){throw new Error(R.get("form_not_submit_save_error"))}if(drilldownManager&&drilldownManager.isOpening()){throw new Error(R.get("image_export_disabled_before_done"))}downloadFile(type,callback)},print:function(){if(preventPrintExport){throw new Error(R.get("form_not_submit_print_error"))}if(drilldownManager&&drilldownManager.isOpening()){throw new Error(R.get("image_export_disabled_before_done"))}if(!Util.browser.mobile||Util.browser.android){var option=arguments[0];if(!isFinished){addFinishEventHandler(this.print,arguments)}else{if(typeof option==="object"&&option.isServerSide===true&&(typeof option.limitedPage!=="number"||option.limitedPage>=go.totalPage)){if(options.pdfReaderNotFoundMessage&&(Util.browser.msie||(Util.browser.safari&&!Util.os.macos))&&!Util.getAcrobatInfo().isInstalled){dialog.show(options.pdfReaderNotFoundMessage);return}else{if(!Util.browser.android){showPdfWindow()}}}else{Message.progress.show(parentId_,R.get("print_progress"),function(){showPrintWindow()})}}}},cancelExport:function(){cancelExportToImage()},setStateLessMode:function(isStateLess){stateLess=isStateLess},useWebFont:function(use){useWebFont=use},useAdjustLetterSpace:function(use){useAdjustLetterSpace=use},useAdjustCharacterScale:function(use){useAdjustCharacterScale=use},bind:function(eventName,callback){eventHandler[eventName]=callback},cancel:function(){if(drilldownManager&&drilldownManager.isOpening()){drilldownManager.stopDrilldown();return}if(stateLess){client.abort()}else{cancelReport()}dialog.pagenum(go.currentPage,go.totalPage,false)},"export":function(type,callback,options){if(!isFinished){throw Error(R.get("image_export_disabled_before_done"))}if(isExport){throw Error(R.get("export_duplicate_error"))}else{isExport=true}var converter;if(type==="png"||type==="jpeg"){converter=new m2soft.crownix.ImageConverter()}else{if(type==="pdf"){converter=new m2soft.crownix.PdfConverter()}else{throw Error(R.get("unsupported_format")+": "+type)}}if(go.license.isAllowedFeature("FormField")&&go.isFormEditMode){formManager.disableEdit();converter.setFormManager(formManager);formManager.saved()}if(go.license.isAllowedFeature("Note")&&isIncludeNote("includeNoteInExport")){converter.setNoteManager(go.noteManager)}converter.convert(report,type,callback,options)},showMMLStorageDialog:function(){showMMLStorageDialog(this)},showFormDataStorageDialog:function(){showFormDataStorageDialog(this)},exportMML:function(options){checkStorageFeature();if(!isFinished){throw Error(R.get("image_export_disabled_before_done"))}if(drilldownManager&&drilldownManager.isOpening()){throw Error(R.get("image_export_disabled_before_done"))}if(!options){options={}}if(options.includeFormData){return exportMmlFormData(options.includeImage)}else{return exportMML(options.includeImage)}},exportFormData:function(options){checkStorageFeature();if(!options){options={}}return exportFormData(options)},importMML:function(data_){checkStorageFeature();var data;try{if(typeof data_==="string"){data=JSON.parse(data_)}else{if(typeof data_==="object"){data=data_}else{data={}}}}catch(e){Message.log(e);data={}}if(data.mmlData&&data.formData){importMmlFormData(data)}else{importMML(data)}},importFormData:function(data){checkStorageFeature();importFormData(data)},showInqueryDialog:function(){if(shareManager&&shareManager.isConnected()&&!shareManager.isHost()){dialog.show(R.get("unsupported_feature_localStorage"));return}inquery.show()},addColumn:function(name,width,option){return runtimeParam.addColumn(name,width,option)},setRData:function(mrdData){mrdData_=mrdData},setParameterEncrypt:function(type_){encType=type_;if(type_>-1&&type_<12){encType=type_}else{Message.log("setParameterEncrypt value is only 0~11.")}if(type_<4){m2soft.crownix.EncEval.eval();C=new m2soft.crownix.Enc()}},getMrdPath:function(){return mrdPath_},getMrdParam:function(){return mrdParam_},setMrdPath:function(value){mrdPath_=value},setMrdParam:function(value){mrdParam_=value},submit:function(url,datasource,servicecode,target){formManager.submitForMethod(url,datasource,servicecode,target)},getForm:function(id){return formManager.getFormWrapper(id)},showShareDialog:function(){if(shareManager){shareManager.showDialog()}},shareDisconnect:function(){if(shareManager){shareManager.disconnect()}},createReport:function(name,password){if(shareManager){shareManager.createReport(name,password)}},joinReport:function(name,password){if(shareManager){shareManager.joinReport(name,password)}},initViewer:function(){if(go.isFormEditMode){FieldOrder.getInstance().blur();FieldOrder.dispose()}go={};Constructor.call(this,serverUrl_,parentId_.substring(1,parentId_.length),setting_)},setPreventPrintExport:function(isTrue){preventPrintExport=isTrue},};return Constructor}());!function(b,f){f["true"]=b;var d=function(k){function m(q){var o={};this.subscribe=function(r,w,x){if("function"!=typeof w){return !1}o.hasOwnProperty(r)||(o[r]={});var u=Math.random().toString(35);return o[r][u]=[w,!!x],u},this.unsubscribe=function(r){for(var s in o){if(o[s][r]){return delete o[s][r],!0}}return !1},this.publish=function(y){if(o.hasOwnProperty(y)){var w=Array.prototype.slice.call(arguments,1),x=[];for(var t in o[y]){var e=o[y][t];try{e[0].apply(q,w)}catch(r){k.console&&console.error("jsPDF PubSub Error",r.message,r)}e[1]&&x.push(t)}x.length&&x.forEach(this.unsubscribe)}}}function l(a4,aQ,a1,aU){var aZ={};"object"==typeof a4&&(aZ=a4,a4=aZ.orientation,aQ=aZ.unit||aQ,a1=aZ.format||a1,aU=aZ.compress||aZ.compressPdf||aU),aQ=aQ||"mm",a1=a1||"a4",a4=(""+(a4||"P")).toLowerCase();var a0,aX,aS,aT,aN,aK=(""+a1).toLowerCase(),aY=!!aU&&"function"==typeof Uint8Array,aP=aZ.textColor||"0 g",a2=aZ.drawColor||"0 G",aR=aZ.fontSize||16,aM=aZ.lineHeight||1.15,aV=aZ.lineWidth||0.200025,a6=2,aA=!1,ax=[],af={},au={},aJ=0,ap=[],ad=[],az=0,aj=0,ai=0,ag={title:"",subject:"",author:"",keywords:"",creator:""},aw={},ac=new m(aw),at=function(q){return q.toFixed(2)},am=function(q){return q.toFixed(3)},aW=function(q){return("0"+parseInt(q)).slice(-2)},ak=function(q){aA?ap[aJ].push(q):(ai+=q.length+1,ad.push(q))},al=function(){return a6++,ax[a6]=ai,ak(a6+" 0 obj"),a6},aq=function(q){ak("stream"),ak(q),ak("endstream")},ar=function(){var A,w,q,y,D,E,C,x=aT*aX,z=aN*aX;for(C=k.adler32cs||l.adler32cs,aY&&"undefined"==typeof C&&(aY=!1),A=1;aJ>=A;A++){if(al(),ak("<</Type /Page"),ak("/Parent 1 0 R"),ak("/Resources 2 0 R"),ak("/Contents "+(a6+1)+" 0 R>>"),ak("endobj"),w=ap[A].join("\n"),al(),aY){for(q=[],y=w.length;y--;){q[y]=w.charCodeAt(y)}E=C.from(w),D=new c(6),D.append(new Uint8Array(q)),w=D.flush(),q=new Uint8Array(w.length+6),q.set(new Uint8Array([120,156])),q.set(w,2),q.set(new Uint8Array([255&E,E>>8&255,E>>16&255,E>>24&255]),w.length+2),w=String.fromCharCode.apply(null,q),ak("<</Length "+w.length+" /Filter [/FlateDecode]>>")}else{ak("<</Length "+w.length+">>")}aq(w),ak("endobj")}ax[1]=ai,ak("1 0 obj"),ak("<</Type /Pages");var B="/Kids [";for(y=0;aJ>y;y++){B+=3+2*y+" 0 R "}ak(B+"]"),ak("/Count "+aJ),ak("/MediaBox [0 0 "+at(x)+" "+at(z)+"]"),ak(">>"),ak("endobj")},ao=function(q){q.objectNumber=al(),ak("<</BaseFont/"+q.PostScriptName+"/Type/Font"),"string"==typeof q.encoding&&ak("/Encoding/"+q.encoding),ak("/Subtype/Type1>>"),ak("endobj")},ab=function(){for(var q in af){af.hasOwnProperty(q)&&ao(af[q])}},aa=function(){ac.publish("putXobjectDict")},s=function(){ak("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ak("/Font <<");for(var q in af){af.hasOwnProperty(q)&&ak("/"+q+" "+af[q].objectNumber+" 0 R")}ak(">>"),ak("/XObject <<"),aa(),ak(">>")},r=function(){ab(),ac.publish("putResources"),ax[2]=ai,ak("2 0 obj"),ak("<<"),s(),ak(">>"),ak("endobj"),ac.publish("postPutResources")},an=function(q,w,u){au.hasOwnProperty(w)||(au[w]={}),au[w][u]=q},ah=function(q,x,w,z){var u="F"+(Object.keys(af).length+1).toString(10),y=af[u]={id:u,PostScriptName:q,fontName:x,fontStyle:w,encoding:z,metadata:{}};return an(u,x,w),ac.publish("addFont",y),u},aD=function(){for(var G="helvetica",B="times",q="courier",x="normal",H="bold",w="italic",z="bolditalic",E="StandardEncoding",F=[["Helvetica",G,x],["Helvetica-Bold",G,H],["Helvetica-Oblique",G,w],["Helvetica-BoldOblique",G,z],["Courier",q,x],["Courier-Bold",q,H],["Courier-Oblique",q,w],["Courier-BoldOblique",q,z],["Times-Roman",B,x],["Times-Bold",B,H],["Times-Italic",B,w],["Times-BoldItalic",B,z]],D=0,y=F.length;y>D;D++){var A=ah(F[D][0],F[D][1],F[D][2],E),C=F[D][0].split("-");an(A,C[0],C[1]||"")}ac.publish("addFonts",{fonts:af,dictionary:au})},o=function(q){return q.foo=function(){try{return q.apply(this,arguments)}catch(w){var x=w.stack||"";~x.indexOf(" at ")&&(x=x.split(" at ")[1]);var u="Error in function "+x.split("\n")[0].split("<")[0]+": "+w.message;if(!k.console){throw new Error(u)}console.log(u,w),k.alert&&alert(u),console.trace()}},q.foo.bar=q,q.foo},t=function(E,A){var q,x,F,w,z,C,D,B,y;if(A=A||{},F=A.sourceEncoding||"Unicode",z=A.outputEncoding,(A.autoencode||z)&&af[a0].metadata&&af[a0].metadata[F]&&af[a0].metadata[F].encoding&&(w=af[a0].metadata[F].encoding,!z&&af[a0].encoding&&(z=af[a0].encoding),!z&&w.codePages&&(z=w.codePages[0]),"string"==typeof z&&(z=w[z]),z)){for(D=!1,C=[],q=0,x=E.length;x>q;q++){B=z[E.charCodeAt(q)],B?C.push(String.fromCharCode(B)):C.push(E[q]),C[q].charCodeAt(0)>>8&&(D=!0)}E=C.join("")}for(q=E.length;void 0===D&&0!==q;){E.charCodeAt(q-1)>>8&&(D=!0),q--}if(!D){return E}for(C=A.noBOM?[]:[254,255],q=0,x=E.length;x>q;q++){if(B=E.charCodeAt(q),y=B>>8,y>>8){throw new Error("Character at position "+q+" of string '"+E+"' exceeds 16bits. Cannot be encoded into UCS-2 BE")}C.push(y),C.push(B-(y<<8))}return String.fromCharCode.apply(void 0,C)},a3=function(q,u){return t(q,u).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},aL=function(){ak("/Producer (jsPDF "+l.version+")");for(var q in ag){ag.hasOwnProperty(q)&&ag[q]&&ak("/"+q.substr(0,1).toUpperCase()+q.substr(1)+" ("+a3(ag[q])+")")}var u=new Date;ak(["/CreationDate (D:",u.getFullYear(),aW(u.getMonth()+1),aW(u.getDate()),aW(u.getHours()),aW(u.getMinutes()),aW(u.getSeconds()),")"].join(""))},e=function(){ak("/Type /Catalog"),ak("/Pages 1 0 R"),ak("/OpenAction [3 0 R /FitH null]"),ak("/PageLayout /OneColumn"),ac.publish("putCatalog")},aC=function(){ak("/Size "+(a6+1)),ak("/Root "+a6+" 0 R"),ak("/Info "+(a6-1)+" 0 R")},aI=function(){aJ++,aA=!0,ap[aJ]=[]},aG=function(){aI(),ak(at(aV*aX)+" w"),ak(a2),0!==az&&ak(az+" J"),0!==aj&&ak(aj+" j"),ac.publish("addPage",{pageNumber:aJ})},av=function(q,w){var u;q=void 0!==q?q:af[a0].fontName,w=void 0!==w?w:af[a0].fontStyle;try{u=au[q][w]}catch(x){}if(!u){throw new Error("Unable to look up font label for font '"+q+"', '"+w+"'. Refer to getFontList() for available fonts.")}return u},aO=function(){aA=!1,a6=2,ad=[],ax=[],ak("%PDF-"+n),ar(),r(),al(),ak("<<"),aL(),ak(">>"),ak("endobj"),al(),ak("<<"),e(),ak(">>"),ak("endobj");var q,w=ai,u="0000000000";for(ak("xref"),ak("0 "+(a6+1)),ak(u+" 65535 f "),q=1;a6>=q;q++){ak((u+ax[q]).slice(-10)+" 00000 n ")}return ak("trailer"),ak("<<"),aC(),ak(">>"),ak("startxref"),ak(w),ak("%%EOF"),aA=!0,ad.join("\n")},aE=function(q){var u="S";return"F"===q?u="f":"FD"===q||"DF"===q?u="B":("f"===q||"f*"===q||"B"===q||"B*"===q)&&(u=q),u},aH=function(){for(var q=aO(),w=q.length,u=new ArrayBuffer(w),x=new Uint8Array(u);w--;){x[w]=q.charCodeAt(w)}return u},aF=function(){return new Blob([aH()],{type:"application/pdf"})},ay=o(function(u,q){switch(u){case void 0:return aO();case"save":if(navigator.getUserMedia&&(void 0===k.URL||void 0===k.URL.createObjectURL)){return aw.output("dataurlnewwindow")}h(aF(),q),"function"==typeof h.unload&&k.setTimeout&&setTimeout(h.unload,70);break;case"arraybuffer":return aH();case"blob":return aF();case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(aO());case"datauri":case"dataurl":k.document.location.href="data:application/pdf;base64,"+btoa(aO());break;case"dataurlnewwindow":k.open("data:application/pdf;base64,"+btoa(aO()));break;default:throw new Error('Output type "'+u+'" is not supported.')}});switch(aQ){case"pt":aX=1;break;case"mm":aX=72/25.4;break;case"cm":aX=72/2.54;break;case"in":aX=72;break;case"px":aX=96/72;break;case"pc":aX=12;break;case"em":aX=12;break;case"ex":aX=6;break;default:throw"Invalid unit: "+aQ}if(j.hasOwnProperty(aK)){aN=j[aK][1]/aX,aT=j[aK][0]/aX}else{try{aN=a1[1],aT=a1[0]}catch(a5){throw new Error("Invalid format: "+a1)}}if("p"===a4||"portrait"===a4){a4="p",aT>aN&&(aS=aT,aT=aN,aN=aS)}else{if("l"!==a4&&"landscape"!==a4){throw"Invalid orientation: "+a4}a4="l",aN>aT&&(aS=aT,aT=aN,aN=aS)}aw.internal={pdfEscape:a3,getStyle:aE,getFont:function(){return af[av.apply(aw,arguments)]},getFontSize:function(){return aR},getLineHeight:function(){return aR*aM},write:function(q){ak(1===arguments.length?q:Array.prototype.join.call(arguments," "))},getCoordinateString:function(q){return at(q*aX)},getVerticalCoordinateString:function(q){return at((aN-q)*aX)},collections:{},newObject:al,putStream:aq,events:ac,scaleFactor:aX,pageSize:{width:aT,height:aN},output:function(q,u){return ay(q,u)},getNumberOfPages:function(){return ap.length-1},pages:ap},aw.addPage=function(){return aG(),this},aw.text=function(H,C,q,x,I){function w(u){return u=u.split("	").join(Array(aZ.TabLen||9).join(" ")),a3(u,x)}"number"==typeof H&&(aS=q,q=C,C=H,H=aS),"string"==typeof H&&H.match(/[\n\r]/)&&(H=H.split(/\r\n|\r|\n/g)),"number"==typeof x&&(I=x,x=null);var B="",F="Td";if(I){I*=Math.PI/180;var G=Math.cos(I),D=Math.sin(I);B=[at(G),at(D),at(-1*D),at(G),""].join(" "),F="Tm"}if(x=x||{},"noBOM" in x||(x.noBOM=!0),"autoencode" in x||(x.autoencode=!0),"string"==typeof H){H=w(H)}else{if(!(H instanceof Array)){throw new Error('Type of text must be string or Array. "'+H+'" is not recognized.')}for(var A=H.concat(),z=[],E=A.length;E--;){z.push(w(A.shift()))}H=z.join(") Tj\nT* (")}return ak("BT\n/"+a0+" "+aR+" Tf\n"+aR*aM+" TL\n"+aP+"\n"+B+at(C*aX)+" "+at((aN-q)*aX)+" "+F+"\n("+H+") Tj\nET"),this},aw.line=function(q,w,u,x){return this.lines([[u-q,x-w]],q,w)},aw.lines=function(L,E,q,x,M,w){var B,I,K,G,A,D,F,z,H,C,J;for("number"==typeof L&&(aS=q,q=E,E=L,L=aS),x=x||[1,1],ak(am(E*aX)+" "+am((aN-q)*aX)+" m "),B=x[0],I=x[1],G=L.length,C=E,J=q,K=0;G>K;K++){A=L[K],2===A.length?(C=A[0]*B+C,J=A[1]*I+J,ak(am(C*aX)+" "+am((aN-J)*aX)+" l")):(D=A[0]*B+C,F=A[1]*I+J,z=A[2]*B+C,H=A[3]*I+J,C=A[4]*B+C,J=A[5]*I+J,ak(am(D*aX)+" "+am((aN-F)*aX)+" "+am(z*aX)+" "+am((aN-H)*aX)+" "+am(C*aX)+" "+am((aN-J)*aX)+" c"))}return w&&ak(" h"),null!==M&&ak(aE(M)),this},aw.rect=function(q,x,w,y,u){aE(u);return ak([at(q*aX),at((aN-x)*aX),at(w*aX),at(-y*aX),"re"].join(" ")),null!==u&&ak(aE(u)),this},aw.triangle=function(u,y,x,A,w,z,q){return this.lines([[x-u,A-y],[w-x,z-A],[u-w,y-z]],u,y,[1,1],q,!0),this},aw.roundedRect=function(w,z,y,B,x,A,u){var q=4/3*(Math.SQRT2-1);return this.lines([[y-2*x,0],[x*q,0,x,A-A*q,x,A],[0,B-2*A],[0,A*q,-(x*q),A,-x,A],[-y+2*x,0],[-(x*q),0,-x,-(A*q),-x,-A],[0,-B+2*A],[0,-(A*q),x*q,-A,x,-A]],w+x,z,[1,1],u),this},aw.ellipse=function(u,y,x,A,w){var z=4/3*(Math.SQRT2-1)*x,q=4/3*(Math.SQRT2-1)*A;return ak([at((u+x)*aX),at((aN-y)*aX),"m",at((u+x)*aX),at((aN-(y-q))*aX),at((u+z)*aX),at((aN-(y-A))*aX),at(u*aX),at((aN-(y-A))*aX),"c"].join(" ")),ak([at((u-z)*aX),at((aN-(y-A))*aX),at((u-x)*aX),at((aN-(y-q))*aX),at((u-x)*aX),at((aN-y)*aX),"c"].join(" ")),ak([at((u-x)*aX),at((aN-(y+q))*aX),at((u-z)*aX),at((aN-(y+A))*aX),at(u*aX),at((aN-(y+A))*aX),"c"].join(" ")),ak([at((u+z)*aX),at((aN-(y+A))*aX),at((u+x)*aX),at((aN-(y+q))*aX),at((u+x)*aX),at((aN-y)*aX),"c"].join(" ")),null!==w&&ak(aE(w)),this},aw.circle=function(q,w,u,x){return this.ellipse(q,w,u,u,x)},aw.setProperties=function(q){for(var u in ag){ag.hasOwnProperty(u)&&q[u]&&(ag[u]=q[u])}return this},aw.setFontSize=function(q){return aR=q,this},aw.setFont=function(q,u){return a0=av(q,u),this},aw.setFontStyle=aw.setFontType=function(q){return a0=av(void 0,q),this},aw.getFontList=function(){var q,w,u,x={};for(q in au){if(au.hasOwnProperty(q)){x[q]=u=[];for(w in au[q]){au[q].hasOwnProperty(w)&&u.push(w)}}}return x},aw.setLineWidth=function(q){return ak((q*aX).toFixed(2)+" w"),this},aw.setDrawColor=function(q,x,w,y){var u;return u=void 0===x||void 0===y&&q===x===w?"string"==typeof q?q+" G":at(q/255)+" G":void 0===y?"string"==typeof q?[q,x,w,"RG"].join(" "):[at(q/255),at(x/255),at(w/255),"RG"].join(" "):"string"==typeof q?[q,x,w,y,"K"].join(" "):[at(q),at(x),at(w),at(y),"K"].join(" "),ak(u),this},aw.setFillColor=function(q,x,w,y){var u;return u=void 0===x||void 0===y&&q===x===w?"string"==typeof q?q+" g":at(q/255)+" g":void 0===y?"string"==typeof q?[q,x,w,"rg"].join(" "):[at(q/255),at(x/255),at(w/255),"rg"].join(" "):"string"==typeof q?[q,x,w,y,"k"].join(" "):[at(q),at(x),at(w),at(y),"k"].join(" "),ak(u),this},aw.setTextColor=function(q,w,u){if("string"==typeof q&&/^#[0-9A-Fa-f]{6}$/.test(q)){var x=parseInt(q.substr(1),16);q=x>>16&255,w=x>>8&255,u=255&x}return aP=0===q&&0===w&&0===u||"undefined"==typeof w?am(q/255)+" g":[am(q/255),am(w/255),am(u/255),"rg"].join(" "),this},aw.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},aw.setLineCap=function(q){var u=this.CapJoinStyles[q];if(void 0===u){throw new Error("Line cap style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}return az=u,ak(u+" J"),this},aw.setLineJoin=function(q){var u=this.CapJoinStyles[q];if(void 0===u){throw new Error("Line join style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}return aj=u,ak(u+" j"),this},aw.output=ay,aw.save=function(q){aw.output("save",q)};for(var aB in l.API){l.API.hasOwnProperty(aB)&&("events"===aB&&l.API.events.length?!function(q,x){var w,y,u;for(u=x.length-1;-1!==u;u--){w=x[u][0],y=x[u][1],q.subscribe.apply(q,[w].concat("function"==typeof y?[y]:y))}}(ac,l.API.events):aw[aB]=l.API[aB])}return aD(),a0="F1",aG(),ac.publish("initialized"),aw}var n="1.3",j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return l.API={events:[]},l.version="1.0.150-git 2014-05-30T00:40:diegocr","function"==typeof define&&define.amd?define(function(){return l}):k.jsPDF=l,l}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);!function(e){e.addHTML=function(z,q,j,l,A){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML){throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js")}"number"!=typeof q&&(l=q,A=j),"function"==typeof l&&(A=l,l=null);var k=this.internal,m=k.scaleFactor,x=k.pageSize.width,y=k.pageSize.height;if(l=l||{},l.onrendered=function(F){q=parseInt(q)||0,j=parseInt(j)||0;var r=l.dim||{},E=r.h||0,u=r.w||Math.min(x,F.width/m)-q,C="JPEG";if(l.format&&(C=l.format),F.height>y&&l.pagesplit){var D=function(){for(var I=0;;){var G=document.createElement("canvas");G.width=Math.min(x*m,F.width),G.height=Math.min(y*m,F.height-I);var H=G.getContext("2d");H.drawImage(F,0,I,F.width,G.height,0,0,G.width,G.height);var t=[G,q,I?0:j,G.width/m,G.height/m,C,null,"SLOW"];if(this.addImage.apply(this,t),I+=G.height,I>=F.height){break}this.addPage()}A(u,I,null,t)}.bind(this);if("CANVAS"===F.nodeName){var B=new Image;B.onload=D,B.src=F.toDataURL("image/png"),F=B}else{D()}}else{var n=Math.random().toString(35),s=[F,q,j,u,E,C,n,"SLOW"];this.addImage.apply(this,s),A(u,E,n,s)}}.bind(this),"undefined"!=typeof html2canvas&&!l.rstz){return html2canvas(z,l)}if("undefined"!=typeof rasterizeHTML){var w="drawDocument";return"string"==typeof z&&(w=/^http/.test(z)?"drawURL":"drawHTML"),l.width=l.width||x*m,rasterizeHTML[w](z,void 0,l).then(function(n){l.onrendered(n.image)},function(n){A(null,n)})}return null}}(d.API),function(z){var L="addImage_",B=["jpeg","jpg","png"],E=function(S){var w=this.internal.newObject(),l=this.internal.write,T=this.internal.putStream;if(S.n=w,l("<</Type /XObject"),l("/Subtype /Image"),l("/Width "+S.w),l("/Height "+S.h),S.cs===this.color_spaces.INDEXED?l("/ColorSpace [/Indexed /DeviceRGB "+(S.pal.length/3-1)+" "+("smask" in S?w+2:w+1)+" 0 R]"):(l("/ColorSpace /"+S.cs),S.cs===this.color_spaces.DEVICE_CMYK&&l("/Decode [1 0 1 0 1 0 1 0]")),l("/BitsPerComponent "+S.bpc),"f" in S&&l("/Filter /"+S.f),"dp" in S&&l("/DecodeParms <<"+S.dp+">>"),"trns" in S&&S.trns.constructor==Array){for(var m="",n=0,Q=S.trns.length;Q>n;n++){m+=S.trns[n]+" "+S.trns[n]+" "}l("/Mask ["+m+"]")}if("smask" in S&&l("/SMask "+(w+1)+" 0 R"),l("/Length "+S.data.length+">>"),T(S.data),l("endobj"),"smask" in S){var R="/Predictor 15 /Colors 1 /BitsPerComponent "+S.bpc+" /Columns "+S.w,y={w:S.w,h:S.h,cs:"DeviceGray",bpc:S.bpc,dp:R,data:S.smask};"f" in S&&(y.f=S.f),E.call(this,y)}S.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),l("<< /Length "+S.pal.length+">>"),T(this.arrayBufferToBinaryString(new Uint8Array(S.pal))),l("endobj"))},A=function(){var e=this.internal.collections[L+"images"];for(var l in e){E.call(this,e[l])}},D=function(){var e,m=this.internal.collections[L+"images"],o=this.internal.write;for(var l in m){e=m[l],o("/I"+e.i,e.n,"0","R")}},H=function(l){return l&&"string"==typeof l&&(l=l.toUpperCase()),l in z.image_compression?l:z.image_compression.NONE},P=function(){var e=this.internal.collections[L+"images"];return e||(this.internal.collections[L+"images"]=e={},this.internal.events.subscribe("putResources",A),this.internal.events.subscribe("putXobjectDict",D)),e},x=function(l){var m=0;return l&&(m=Object.keys?Object.keys(l).length:function(n){var s=0;for(var o in n){n.hasOwnProperty(o)&&s++}return s}(l)),m},N=function(e){return"undefined"==typeof e||null===e},G=function(){return void 0},K=function(e){return -1===B.indexOf(e)},M=function(l){return"function"!=typeof z["process"+l.toUpperCase()]},I=function(e){return"object"==typeof e&&1===e.nodeType},C=function(l,o){if("IMG"===l.nodeName&&l.hasAttribute("src")&&0===(""+l.getAttribute("src")).indexOf("data:image/")){return l.getAttribute("src")}if("CANVAS"===l.nodeName){var m=l}else{var m=document.createElement("canvas");m.width=l.clientWidth||l.width,m.height=l.clientHeight||l.height;var s=m.getContext("2d");if(!s){throw"addImage requires canvas to be supported by browser."}s.drawImage(l,0,0,m.width,m.height)}return m.toDataURL("png"==o?"image/png":"image/jpeg")},F=function(l,o){var m;if(o){for(var s in o){if(l===o[s].alias){m=o[s];break}}}return m},k=function(l,n,m){return l||n||(l=-96,n=-96),0>l&&(l=-1*m.w*72/l/this.internal.scaleFactor),0>n&&(n=-1*m.h*72/n/this.internal.scaleFactor),0===l&&(l=n*m.w/m.h),0===n&&(n=l*m.h/m.w),[l,n]},j=function(U,Q,l,w,V,m,y){var S=k.call(this,l,w,V),T=this.internal.getCoordinateString,R=this.internal.getVerticalCoordinateString;l=S[0],w=S[1],y[m]=V,this.internal.write("q",T(l),"0 0",T(w),T(U),R(Q+w),"cm /I"+V.i,"Do Q")};z.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"},z.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},z.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},z.isString=function(e){return"string"==typeof e},z.extractInfoFromBase64DataURI=function(e){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(e)},z.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},z.isArrayBuffer=function(e){return this.supportsArrayBuffer()?e instanceof ArrayBuffer:!1},z.isArrayBufferView=function(e){return this.supportsArrayBuffer()?"undefined"==typeof Uint32Array?!1:e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array:!1},z.binaryStringToUint8Array=function(l){for(var o=l.length,m=new Uint8Array(o),s=0;o>s;s++){m[s]=l.charCodeAt(s)}return m},z.arrayBufferToBinaryString=function(l){this.isArrayBuffer(l)&&(l=new Uint8Array(l));for(var o="",m=l.byteLength,s=0;m>s;s++){o+=String.fromCharCode(l[s])}return o},z.arrayBufferToBase64=function(Y){for(var T,m,y,Z,w,R="",W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X=new Uint8Array(Y),V=X.byteLength,Q=V%3,S=V-Q,U=0;S>U;U+=3){w=X[U]<<16|X[U+1]<<8|X[U+2],T=(16515072&w)>>18,m=(258048&w)>>12,y=(4032&w)>>6,Z=63&w,R+=W[T]+W[m]+W[y]+W[Z]}return 1==Q?(w=X[S],T=(252&w)>>2,m=(3&w)<<4,R+=W[T]+W[m]+"=="):2==Q&&(w=X[S]<<8|X[S+1],T=(64512&w)>>10,m=(1008&w)>>4,y=(15&w)<<2,R+=W[T]+W[m]+W[y]+"="),R},z.createImageInfo=function(Y,T,m,y,Z,w,R,W,X,V,Q,S){var U={alias:W,w:T,h:m,cs:y,bpc:Z,i:R,data:Y};return w&&(U.f=w),X&&(U.dp=X),V&&(U.trns=V),Q&&(U.pal=Q),S&&(U.smask=S),U},z.addImage=function(Y,S,y,Z,u,V,R,X){if("number"==typeof S){var T=V;V=u,u=Z,Z=y,y=S,S=T}var m,U,Q=P.call(this);if(X=H(X),S=(S||"JPEG").toLowerCase(),N(R)&&(R=G(Y)),I(Y)&&(Y=C(Y,S)),this.isString(Y)){var W=this.extractInfoFromBase64DataURI(Y);W?(S=W[2],Y=atob(W[3]),this.supportsArrayBuffer()&&(U=Y,Y=this.binaryStringToUint8Array(Y))):255!==Y.charCodeAt(0)&&(m=F(Y,Q))}if(K(S)){throw new Error("addImage currently only supports formats "+B+", not '"+S+"'")}if(M(S)){throw new Error("please ensure that the plugin for '"+S+"' support is added")}var r=x(Q),l=m;if(l||(l=this["process"+S.toUpperCase()](Y,r,R,X,U)),!l){throw new Error("An unkwown error occurred whilst processing the image")}return j.call(this,y,Z,u,V,l,r,Q),this};var J=function(l){var w,u;if(255===!l.charCodeAt(0)||216===!l.charCodeAt(1)||255===!l.charCodeAt(2)||224===!l.charCodeAt(3)||!l.charCodeAt(6)==="J".charCodeAt(0)||!l.charCodeAt(7)==="F".charCodeAt(0)||!l.charCodeAt(8)==="I".charCodeAt(0)||!l.charCodeAt(9)==="F".charCodeAt(0)||0===!l.charCodeAt(10)){throw new Error("getJpegSize requires a binary string jpeg file")}for(var Q=256*l.charCodeAt(4)+l.charCodeAt(5),m=4,y=l.length;y>m;){if(m+=Q,255!==l.charCodeAt(m)){throw new Error("getJpegSize could not find the size of the image")}if(192===l.charCodeAt(m+1)||193===l.charCodeAt(m+1)||194===l.charCodeAt(m+1)||195===l.charCodeAt(m+1)||196===l.charCodeAt(m+1)||197===l.charCodeAt(m+1)||198===l.charCodeAt(m+1)||199===l.charCodeAt(m+1)){return u=256*l.charCodeAt(m+5)+l.charCodeAt(m+6),w=256*l.charCodeAt(m+7)+l.charCodeAt(m+8),[w,u]}m+=2,Q=256*l.charCodeAt(m)+l.charCodeAt(m+1)}},q=function(u){var Q=u[0]<<8|u[1];if(65496!==Q){throw new Error("Supplied data is not a JPEG")}for(var y,S,w,R=u.length,m=(u[4]<<8)+u[5],l=4;R>l;){if(l+=m,y=O(u,l),m=(y[2]<<8)+y[3],(192===y[1]||194===y[1])&&255===y[0]&&m>7){return y=O(u,l+5),S=(y[2]<<8)+y[3],w=(y[0]<<8)+y[1],{width:S,height:w}}l+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")},O=function(l,m){return l.subarray(m,m+4)};z.processJPEG=function(T,Q,l,w,U){var m,y=this.color_spaces.DEVICE_RGB,R=this.decode.DCT_DECODE,S=8;return this.isString(T)?(m=J(T),this.createImageInfo(T,m[0],m[1],y,S,R,Q,l)):(this.isArrayBuffer(T)&&(T=new Uint8Array(T)),this.isArrayBufferView(T)?(m=q(T),T=U||this.arrayBufferToBinaryString(T),this.createImageInfo(T,m.width,m.height,y,S,R,Q,l)):null)},z.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(d.API),function(e){e.autoPrint=function(){var j;return this.internal.events.subscribe("postPutResources",function(){j=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+j+" 0 R")}),this}}(d.API),function(C){var y,j,m,D,k=3,w=13,A={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},B=1,z=function(l,E,u,F,o){A={x:l,y:E,w:u,h:F,ln:o}},q=function(){return A},x={left:0,top:0,bottom:0};C.setHeaderFunction=function(e){D=e},C.getTextDimensions=function(l){y=this.internal.getFont().fontName,j=this.table_font_size||this.internal.getFontSize(),m=this.internal.getFont().fontStyle;var n,r,e=19.049976/25.4;return r=document.createElement("font"),r.id="jsPDFCell",r.style.fontStyle=m,r.style.fontName=y,r.style.fontSize=j+"pt",r.innerText=l,document.body.appendChild(r),n={w:(r.offsetWidth+1)*e,h:(r.offsetHeight+1)*e},document.body.removeChild(r),n},C.cellAddPage=function(){var e=this.margins||x;this.addPage(),z(e.left,e.top,void 0,void 0),B+=1},C.cellInitialize=function(){A={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},B=1},C.cell=function(M,H,l,E,N,J,L){var I=q();if(void 0!==I.ln){if(I.ln===J){M=I.x+I.w,H=I.y}else{var G=this.margins||x;I.y+I.h+E+w>=this.internal.pageSize.height-G.bottom&&(this.cellAddPage(),this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(J,!0)),H=q().y+q().h}}if(void 0!==N[0]){if(this.printingHeaderRow?this.rect(M,H,l,E,"FD"):this.rect(M,H,l,E),"right"===L){if(N instanceof Array){for(var o=0;o<N.length;o++){var F=N[o],K=this.getStringUnitWidth(F)*this.internal.getFontSize();this.text(F,M+l-K-k,H+this.internal.getLineHeight()*(o+1))}}}else{this.text(N,M+k,H+this.internal.getLineHeight())}}return z(M,H,l,E,J),this},C.arrayMax=function(l,F){var E,H,u,G=l[0];for(E=0,H=l.length;H>E;E+=1){u=l[E],F?-1===F(G,u)&&(G=u):u>G&&(G=u)}return G},C.table=function(ab,O,U,M,T){if(!U){throw"No data for PDF table"}var Y,ad,W,ac,Z,R,V,J,F,aa,K=[],ae=[],P={},H={},X=[],af=[],Q=!1,N=!0,t=12,L=x;if(L.width=this.internal.pageSize.width,T&&(T.autoSize===!0&&(Q=!0),T.printHeaders===!1&&(N=!1),T.fontSize&&(t=T.fontSize),T.margins&&(L=T.margins)),this.lnMod=0,A={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},B=1,this.printHeaders=N,this.margins=L,this.setFontSize(t),this.table_font_size=t,void 0===M||null===M){K=Object.keys(U[0])}else{if(M[0]&&"string"!=typeof M[0]){var u=19.049976/25.4;for(ad=0,W=M.length;W>ad;ad+=1){Y=M[ad],K.push(Y.name),ae.push(Y.prompt),H[Y.name]=Y.width*u}}else{K=M}}if(Q){for(aa=function(e){return e[Y]},ad=0,W=K.length;W>ad;ad+=1){for(Y=K[ad],P[Y]=U.map(aa),X.push(this.getTextDimensions(ae[ad]||Y).w),R=P[Y],V=0,ac=R.length;ac>V;V+=1){Z=R[V],X.push(this.getTextDimensions(Z).w)}H[Y]=C.arrayMax(X)}}if(N){var G=this.calculateLineHeight(K,H,ae.length?ae:K);for(ad=0,W=K.length;W>ad;ad+=1){Y=K[ad],af.push([ab,O,H[Y],G,String(ae.length?ae[ad]:Y)])}this.setTableHeaderRow(af),this.printHeaderRow(1,!1)}for(ad=0,W=U.length;W>ad;ad+=1){var G;for(J=U[ad],G=this.calculateLineHeight(K,H,J),V=0,F=K.length;F>V;V+=1){Y=K[V],this.cell(ab,O,H[Y],G,J[Y],ad+2,Y.align)}}return this.lastCellPos=A,this.table_x=ab,this.table_y=O,this},C.calculateLineHeight=function(u,G,F){for(var H,E=0,o=0;o<u.length;o++){H=u[o],F[H]=this.splitTextToSize(String(F[H]),G[H]-k);var l=this.internal.getLineHeight()*F[H].length+k;l>E&&(E=l)}return E},C.setTableHeaderRow=function(e){this.tableHeaderRow=e},C.printHeaderRow=function(F,H){if(!this.tableHeaderRow){throw"Property tableHeaderRow does not exist."}var G,J,I,E;if(this.printingHeaderRow=!0,void 0!==D){var u=D(this,B);z(u[0],u[1],u[2],u[3],-1)}this.setFontStyle("bold");var s=[];for(I=0,E=this.tableHeaderRow.length;E>I;I+=1){this.setFillColor(200,200,200),G=this.tableHeaderRow[I],H&&(G[1]=this.margins&&this.margins.top||0,s.push(G)),J=[].concat(G),this.cell.apply(this,J.concat(F))}s.length>0&&this.setTableHeaderRow(s),this.setFontStyle("normal"),this.printingHeaderRow=!1}}(d.API),function(z){var L,B,E,A,D,H,O,x,N,G,K,M,I,C,F,k,j;L=function(){function e(){}return function(l){return e.prototype=l,new e}}(),O=function(u){var P,y,R,w,Q,m,l;for(y=0,R=u.length,P=void 0,w=!1,m=!1;!w&&y!==R;){P=u[y]=u[y].trimLeft(),P&&(w=!0),y++}for(y=R-1;R&&!m&&-1!==y;){P=u[y]=u[y].trimRight(),P&&(m=!0),y--}for(Q=/\s+$/g,l=!0,y=0;y!==R;){P=u[y].replace(/\s+/g," "),l&&(P=P.trimLeft()),P&&(l=Q.test(P)),u[y]=P,y++}return u},x=function(l,o,m,s){return this.pdf=l,this.x=o,this.y=m,this.settings=s,this.init(),this},N=function(l){var o,n,m;for(o=void 0,m=l.split(","),n=m.shift();!o&&n;){o=E[n.trim().toLowerCase()],n=m.shift()}return o},G=function(l){l="auto"===l?"0px":l,l.indexOf("em")>-1&&!isNaN(Number(l.replace("em","")))&&(l=18.719*Number(l.replace("em",""))+"px"),l.indexOf("pt")>-1&&!isNaN(Number(l.replace("pt","")))&&(l=1.333*Number(l.replace("pt",""))+"px");var o,m,s;return m=void 0,o=16,(s=K[l])?s:(s={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:l}],s!==m?K[l]=s/o:(s=parseFloat(l))?K[l]=s/o:(s=l.match(/([\d\.]+)(px)/),K[l]=3===s.length?parseFloat(s[1])/o:1))},H=function(l){var o,m,s;return s=function(n){var r;return r=function(e){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle?e.currentStyle:e.style}(n),function(e){return e=e.replace(/-\D/g,function(u){return u.charAt(1).toUpperCase()}),r[e]}}(l),o={},m=void 0,o["font-family"]=N(s("font-family"))||"times",o["font-style"]=A[s("font-style")]||"normal",o["text-align"]=TextAlignMap[s("text-align")]||"left",m=D[s("font-weight")]||"normal","bold"===m&&(o["font-style"]="normal"===o["font-style"]?m:m+o["font-style"]),o["font-size"]=G(s("font-size"))||1,o["line-height"]=G(s("line-height"))||1,o.display="inline"===s("display")?"inline":"block","block"===o.display&&(o["margin-top"]=G(s("margin-top"))||0,o["margin-bottom"]=G(s("margin-bottom"))||0,o["padding-top"]=G(s("padding-top"))||0,o["padding-bottom"]=G(s("padding-bottom"))||0,o["margin-left"]=G(s("margin-left"))||0,o["margin-right"]=G(s("margin-right"))||0,o["padding-left"]=G(s("padding-left"))||0,o["padding-right"]=G(s("padding-right"))||0),o},M=function(u,P,y){var R,w,Q,m,l;if(Q=!1,w=void 0,m=void 0,l=void 0,R=y["#"+u.id]){if("function"==typeof R){Q=R(u,P)}else{for(w=0,m=R.length;!Q&&w!==m;){Q=R[w](u,P),w++}}}if(R=y[u.nodeName],!Q&&R){if("function"==typeof R){Q=R(u,P)}else{for(w=0,m=R.length;!Q&&w!==m;){Q=R[w](u,P),w++}}}return Q},j=function(W,S){var m,y,X,w,Q,U,V,T,P,R;for(m=[],y=[],X=0,R=W.rows[0].cells.length,T=W.clientWidth;R>X;){P=W.rows[0].cells[X],y[X]={name:P.textContent.toLowerCase().replace(/\s+/g,""),prompt:P.textContent.replace(/\r?\n/g,""),width:P.clientWidth/T*S.pdf.internal.pageSize.width},X++}for(X=1;X<W.rows.length;){for(U=W.rows[X],Q={},w=0;w<U.cells.length;){Q[y[w].name]=U.cells[w].textContent.replace(/\r?\n/g,""),w++}m.push(Q),X++}return V={rows:m,headers:y}};var J={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},q=1;B=function(Q,aa,V){var R,U,ad,P,ab,X,Z,T,W;for(U=Q.childNodes,R=void 0,ad=H(Q),ab="block"===ad.display,ab&&(aa.setBlockBoundary(),aa.setBlockStyle(ad)),Z=19.049976/25.4,P=0,X=U.length;X>P;){if(R=U[P],"object"==typeof R){if(1===R.nodeType&&"HEADER"===R.nodeName){var y=R,ac=aa.pdf.margins_doc.top;aa.pdf.internal.events.subscribe("addPage",function(){aa.y=ac,B(y,aa,V),aa.pdf.margins_doc.top=aa.y+10,aa.y+=10},!1)}if(8===R.nodeType&&"#comment"===R.nodeName){~R.textContent.indexOf("ADD_PAGE")&&(aa.pdf.addPage(),aa.y=aa.pdf.margins_doc.top)}else{if(1!==R.nodeType||J[R.nodeName]){if(3===R.nodeType){var S=R.nodeValue;if(R.nodeValue&&"LI"===R.parentNode.nodeName){if("OL"===R.parentNode.parentNode.nodeName){S=q+++". "+S}else{var r=16*ad["font-size"],Y=2;r>20&&(Y=3),W=function(l,m){this.pdf.circle(l,m,Y,"FD")}}}aa.addText(S,ad)}else{"string"==typeof R&&aa.addText(R,ad)}}else{if("IMG"===R.nodeName&&I[R.getAttribute("src")]){aa.pdf.internal.pageSize.height-aa.pdf.margins_doc.bottom<aa.y+R.height&&aa.y>aa.pdf.margins_doc.top&&(aa.pdf.addPage(),aa.y=aa.pdf.margins_doc.top),aa.pdf.addImage(I[R.getAttribute("src")],aa.x,aa.y,R.width,R.height),aa.y+=R.height}else{if("TABLE"===R.nodeName){T=j(R,aa),aa.y+=10,aa.pdf.table(aa.x,aa.y,T.rows,T.headers,{autoSize:!1,printHeaders:!0,margins:aa.pdf.margins_doc}),aa.y=aa.pdf.lastCellPos.y+aa.pdf.lastCellPos.h+20}else{if("OL"===R.nodeName||"UL"===R.nodeName){q=1,M(R,aa,V)||B(R,aa,V),aa.y+=10}else{if("LI"===R.nodeName){var ae=aa.x;aa.x+="UL"===R.parentNode.nodeName?22:10,aa.y+=3,M(R,aa,V)||B(R,aa,V),aa.x=ae}else{M(R,aa,V)||B(R,aa,V)}}}}}}}P++}return ab?aa.setBlockBoundary(W):void 0},I={},C=function(S,P,l,w){function T(){P.pdf.internal.events.publish("imagesLoaded"),w()}function m(o,u,s){if(o){var U=new Image;++R,U.crossOrigin="",U.onerror=U.onload=function(){U.complete&&(0===U.src.indexOf("data:image/")&&(U.width=u||U.width||0,U.height=s||U.height||0),U.width+U.height&&(I[o]=I[o]||U)),--R||T()},U.src=o}}for(var y=S.getElementsByTagName("img"),Q=y.length,R=0;Q--;){m(y[Q].getAttribute("src"),y[Q].width,y[Q].height)}return R||T()},F=function(U,Q,r,V){var m=U.getElementsByTagName("footer");if(m.length>0){m=m[0];var y=Q.pdf.internal.write,S=Q.y;Q.pdf.internal.write=function(){},B(m,Q,r);var T=Math.ceil(Q.y-S)+5;Q.y=S,Q.pdf.internal.write=y,Q.pdf.margins_doc.bottom+=T;for(var R=function(n){var o=void 0!==n?n.pageNumber:1,l=Q.y;Q.y=Q.pdf.internal.pageSize.height-Q.pdf.margins_doc.bottom,Q.pdf.margins_doc.bottom-=T;for(var e=m.getElementsByTagName("span"),u=0;u<e.length;++u){(" "+e[u].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1&&(e[u].innerHTML=o),(" "+e[u].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&(e[u].innerHTML="###jsPDFVarTotalPages###")}B(m,Q,r),Q.pdf.margins_doc.bottom+=T,Q.y=l},w=m.getElementsByTagName("span"),P=0;P<w.length;++P){(" "+w[P].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&Q.pdf.internal.events.subscribe("htmlRenderingFinished",Q.pdf.putTotalPages.bind(Q.pdf,"###jsPDFVarTotalPages###"),!0)}Q.pdf.internal.events.subscribe("addPage",R,!1),R(),J.FOOTER=1}V()},k=function(r,w,P,u,y,m){if(!w){return !1}"string"==typeof w||w.parentNode||(w=""+w.innerHTML),"string"==typeof w&&(w=function(o){var S,R,T,Q;return T="jsPDFhtmlText"+Date.now().toString()+(1000*Math.random()).toFixed(0),Q="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",R=document.createElement("div"),R.style.cssText=Q,R.innerHTML='<iframe style="height:1px;width:1px" name="'+T+'" />',document.body.appendChild(R),S=window.frames[T],S.document.body.innerHTML=o,S.document.body}(w.replace(/<\/?script[^>]*?>/gi,"")));var l=new x(r,P,u,y);return m=m||function(){},C.call(this,w,l,y.elementHandlers,function(){F.call(this,w,l,y.elementHandlers,function(){B(w,l,y.elementHandlers),l.pdf.internal.events.publish("htmlRenderingFinished"),m(l.dispose())})}),l.dispose()},x.prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},x.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y}},x.prototype.splitFragmentsIntoLines=function(S,U){var Y,T,X,ab,ai,R,ag,aa,ae,af,ac,W,Z,P,e;for(T=12,ac=this.pdf.internal.scaleFactor,ai={},X=void 0,af=void 0,ab=void 0,R=void 0,e=void 0,ae=void 0,aa=void 0,ag=void 0,W=[],Z=[W],Y=0,P=this.settings.width;S.length;){if(R=S.shift(),e=U.shift(),R){if(X=e["font-family"],af=e["font-style"],ab=ai[X+af],ab||(ab=this.pdf.internal.getFont(X,af).metadata.Unicode,ai[X+af]=ab),ae={widths:ab.widths,kerning:ab.kerning,fontSize:e["font-size"]*T,textIndent:Y},aa=this.pdf.getStringUnitWidth(R,ae)*ae.fontSize/ac,Y+aa>P){for(ag=this.pdf.splitTextToSize(R,P,ae),W.push([ag.shift(),e]);ag.length;){W=[[ag.shift(),e]],Z.push(W)}Y=this.pdf.getStringUnitWidth(W[0][0],ae)*ae.fontSize/ac}else{W.push([R,e]),Y+=aa}}}if(void 0!==e["text-align"]&&("center"===e["text-align"]||"right"===e["text-align"]||"justify"===e["text-align"])){for(var ad=0;ad<Z.length;++ad){var Q=this.pdf.getStringUnitWidth(Z[ad][0][0],ae)*ae.fontSize/ac;ad>0&&(Z[ad][0][1]=L(Z[ad][0][1]));var ah=P-Q;if("right"===e["text-align"]){Z[ad][0][1]["margin-left"]=ah}else{if("center"===e["text-align"]){Z[ad][0][1]["margin-left"]=ah/2}else{if("justify"===e["text-align"]){var V=Z[ad][0][0].split(" ").length-1;Z[ad][0][1]["word-spacing"]=ah/V,ad===Z.length-1&&(Z[ad][0][1]["word-spacing"]=0)}}}}}return Z},x.prototype.RenderTextFragment=function(l,o){var m,s;this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")),m=12,s=this.pdf.internal.getFont(o["font-family"],o["font-style"]),void 0!==o["word-spacing"]&&o["word-spacing"]>0&&this.pdf.internal.write(o["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+s.id,(m*o["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(l)+") Tj"),void 0!==o["word-spacing"]&&this.pdf.internal.write(0,"Tw")},x.prototype.renderParagraph=function(S){var ae,U,X,T,W,aa,R,ag,Z,ad,af,ab,V,Y,Q;if(T=O(this.paragraph.text),Y=this.paragraph.style,ae=this.paragraph.blockstyle,V=this.paragraph.blockstyle||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:ae},T.join("").trim()){ag=this.splitFragmentsIntoLines(T,Y),R=void 0,Z=void 0,U=12,X=U/this.pdf.internal.scaleFactor,ab=(Math.max((ae["margin-top"]||0)-(V["margin-bottom"]||0),0)+(ae["padding-top"]||0))*X,af=((ae["margin-bottom"]||0)+(ae["padding-bottom"]||0))*X,ad=this.pdf.internal.write,W=void 0,aa=void 0,this.y+=ab,ad("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var P=0;ag.length;){for(R=ag.shift(),Z=0,W=0,aa=R.length;W!==aa;){R[W][0].trim()&&(Z=Math.max(Z,R[W][1]["line-height"],R[W][1]["font-size"]),Q=7*R[W][1]["font-size"]),W++}var ac=0;for(void 0!==R[0][1]["margin-left"]&&R[0][1]["margin-left"]>0&&(wantedIndent=this.pdf.internal.getCoordinateString(R[0][1]["margin-left"]),ac=wantedIndent-P,P=wantedIndent),ad(ac,(-1*U*Z).toFixed(2),"Td"),W=0,aa=R.length;W!==aa;){R[W][0]&&this.RenderTextFragment(R[W][0],R[W][1]),W++}this.y+=Z*X}return S&&"function"==typeof S&&S.call(this,this.x-9,this.y-Q/2),ad("ET","Q"),this.y+=af}},x.prototype.setBlockBoundary=function(e){return this.renderParagraph(e)},x.prototype.setBlockStyle=function(e){return this.paragraph.blockstyle=e},x.prototype.addText=function(l,m){return this.paragraph.text.push(l),this.paragraph.style.push(m)},E={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},D={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},A={normal:"normal",italic:"italic",oblique:"italic"},TextAlignMap={left:"left",right:"right",center:"center",justify:"justify"},K={normal:1},z.fromHTML=function(l,w,u,P,m,y){return this.margins_doc=y||{top:0,bottom:0},P||(P={}),P.elementHandlers||(P.elementHandlers={}),k(this,l,w||4,u||4,P,m)}}(d.API),function(j){var l,k,m;j.addJS=function(e){return m=e,this.internal.events.subscribe("postPutResources",function(){l=this.internal.newObject(),this.internal.write("<< /Names [(EmbeddedJS) "+(l+1)+" 0 R] >>","endobj"),k=this.internal.newObject(),this.internal.write("<< /S /JavaScript /JS (",m,") >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==l&&void 0!==k&&this.internal.write("/Names <</JavaScript "+l+" 0 R>>")}),this}}(d.API),function(K){var D=function(){return"function"!=typeof PNG||"function"!=typeof a},j=function(l){return l!==K.image_compression.NONE&&s()},s=function(){var e="function"==typeof c;if(!e){throw new Error("requires deflate.js for compression")}return e},q=function(R,t,M,L){var P=5,O=E;switch(L){case K.image_compression.FAST:P=3,O=C;break;case K.image_compression.MEDIUM:P=6,O=A;break;case K.image_compression.SLOW:P=9,O=k}R=F(R,t,M,O);var N=new Uint8Array(H(P)),U=J(R),T=new c(P),Q=T.append(R),V=T.flush(),S=N.length+Q.length+V.length,u=new Uint8Array(S+4);return u.set(N),u.set(Q,N.length),u.set(V,N.length+Q.length),u[S++]=U>>>24&255,u[S++]=U>>>16&255,u[S++]=U>>>8&255,u[S++]=255&U,K.arrayBufferToBinaryString(u)},H=function(m,y){var w=8,M=Math.LOG2E*Math.log(32768)-8,u=M<<4|w,L=u<<8,l=Math.min(3,(y-1&255)>>1);return L|=l<<6,L|=0,L+=31-L%31,[u,255&L&255]},J=function(u,L){for(var y,N=1,w=65535&N,M=N>>>16&65535,m=u.length,l=0;m>0;){y=m>L?L:m,m-=y;do{w+=u[l++],M+=w}while(--y);w%=65521,M%=65521}return(M<<16|w)>>>0},F=function(V,Q,m,L){for(var W,y,N,T=V.length/Q,U=new Uint8Array(V.length+T),S=I(),M=0;T>M;M++){if(N=M*Q,W=V.subarray(N,N+Q),L){U.set(L(W,m,y),N+M)}else{for(var P=0,R=S.length,O=[];R>P;P++){O[P]=S[P](W,m,y)}var w=G(O.concat());U.set(O[w],N+M)}y=W}return U},z=function(l){var m=Array.apply([],l);return m.unshift(0),m},C=function(l,w){var u,L=[],m=0,y=l.length;for(L[0]=1;y>m;m++){u=l[m-w]||0,L[m+1]=l[m]-u+256&255}return L},E=function(m,y,w){var M,u=[],L=0,l=m.length;for(u[0]=2;l>L;L++){M=w&&w[L]||0,u[L+1]=m[L]-M+256&255}return u},A=function(u,L,y){var N,w,M=[],m=0,l=u.length;for(M[0]=3;l>m;m++){N=u[m-L]||0,w=y&&y[m]||0,M[m+1]=u[m]+256-(N+w>>>1)&255}return M},k=function(P,L,l){var w,Q,m,y,N=[],O=0,M=P.length;for(N[0]=4;M>O;O++){w=P[O-L]||0,Q=l&&l[O]||0,m=l&&l[O-L]||0,y=x(w,Q,m),N[O+1]=P[O]-y+256&255}return N},x=function(m,y,w){var M=m+y-w,u=Math.abs(M-m),L=Math.abs(M-y),l=Math.abs(M-w);return L>=u&&l>=u?m:l>=L?y:w},I=function(){return[z,C,E,A,k]},G=function(l){for(var w,u,L,m=0,y=l.length;y>m;){w=B(l[m].slice(1)),(u>w||!u)&&(u=w,L=m),m++}return L},B=function(l){for(var o=0,m=l.length,u=0;m>o;){u+=Math.abs(l[o++])}return u};K.processPNG=function(Q,X,R,ab){var ai,O,ag,Z,ae,af,ac=this.color_spaces.DEVICE_RGB,W=this.decode.FLATE_DECODE,Y=8;if(this.isArrayBuffer(Q)&&(Q=new Uint8Array(Q)),this.isArrayBufferView(Q)){if(D()){throw new Error("PNG support requires png.js and zlib.js")}if(ai=new PNG(Q),Q=ai.imgData,Y=ai.bits,ac=ai.colorSpace,Z=ai.colors,-1!==[4,6].indexOf(ai.colorType)){if(8===ai.bits){for(var M,r,ad=window["Uint"+ai.pixelBitlength+"Array"],N=new ad(ai.decodePixels().buffer),ah=N.length,U=new Uint8Array(ah*ai.colors),L=new Uint8Array(ah),aa=ai.pixelBitlength-ai.bits,aj=0,V=0;ah>aj;aj++){for(M=N[aj],r=0;aa>r;){U[V++]=M>>>r&255,r+=ai.bits}L[aj]=M>>>r&255}}if(16===ai.bits){for(var M,N=new Uint32Array(ai.decodePixels().buffer),ah=N.length,U=new Uint8Array(ah*(32/ai.pixelBitlength)*ai.colors),L=new Uint8Array(ah*(32/ai.pixelBitlength)),T=ai.colors>1,aj=0,V=0,e=0;ah>aj;){M=N[aj++],U[V++]=M>>>0&255,T&&(U[V++]=M>>>16&255,M=N[aj++],U[V++]=M>>>0&255),L[e++]=M>>>16&255}Y=8}j(ab)?(Q=q(U,ai.width*ai.colors,ai.colors,ab),af=q(L,ai.width,1,ab)):(Q=U,af=L,W=null)}if(3===ai.colorType&&(ac=this.color_spaces.INDEXED,ae=ai.palette,ai.transparency.indexed)){for(var P=ai.transparency.indexed,o=0,aj=0,ah=P.length;ah>aj;++aj){o+=P[aj]}if(o/=255,o===ah-1&&-1!==P.indexOf(0)){ag=[P.indexOf(0)]}else{if(o!==ah){for(var N=ai.decodePixels(),L=new Uint8Array(N.length),aj=0,ah=N.length;ah>aj;aj++){L[aj]=P[N[aj]]}af=q(L,ai.width,1)}}}return O=W===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+Z+" /BitsPerComponent "+Y+" /Columns "+ai.width:"/Colors "+Z+" /BitsPerComponent "+Y+" /Columns "+ai.width,(this.isArrayBuffer(Q)||this.isArrayBufferView(Q))&&(Q=this.arrayBufferToBinaryString(Q)),(af&&this.isArrayBuffer(af)||this.isArrayBufferView(af))&&(af=this.arrayBufferToBinaryString(af)),this.createImageInfo(Q,ai.width,ai.height,ac,Y,W,X,R,O,ag,ae,af)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(d.API),function(e){e.addSVG=function(z,L,B,E,A){function D(l,n){var m=n.createElement("style");m.type="text/css",m.styleSheet?m.styleSheet.cssText=l:m.appendChild(n.createTextNode(l)),n.getElementsByTagName("head")[0].appendChild(m)}function H(l){var n="childframe",m=l.createElement("iframe");return D(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",l),m.name=n,m.setAttribute("width",0),m.setAttribute("height",0),m.setAttribute("frameborder","0"),m.setAttribute("scrolling","no"),m.setAttribute("seamless","seamless"),m.setAttribute("class","jsPDF_sillysvg_iframe"),l.body.appendChild(m),m}function O(l,n){var m=(n.contentWindow||n.contentDocument).document;return m.write(l),m.close(),m.getElementsByTagName("svg")[0]}function x(l){for(var w=parseFloat(l[1]),u=parseFloat(l[2]),P=[],m=3,y=l.length;y>m;){"c"===l[m]?(P.push([parseFloat(l[m+1]),parseFloat(l[m+2]),parseFloat(l[m+3]),parseFloat(l[m+4]),parseFloat(l[m+5]),parseFloat(l[m+6])]),m+=7):"l"===l[m]?(P.push([parseFloat(l[m+1]),parseFloat(l[m+2])]),m+=3):m+=1}return[w,u,P]}var N;if(L===N||L===N){throw new Error("addSVG needs values for 'x' and 'y'")}var G=H(document),K=O(z,G),M=[1,1],I=parseFloat(K.getAttribute("width")),C=parseFloat(K.getAttribute("height"));I&&C&&(E&&A?M=[E/I,A/C]:E?M=[E/I,E/I]:A&&(M=[A/C,A/C]));var F,k,j,J,q=K.childNodes;for(F=0,k=q.length;k>F;F++){j=q[F],j.tagName&&"PATH"===j.tagName.toUpperCase()&&(J=x(j.getAttribute("d").split(" ")),J[0]=J[0]*M[0]+L,J[1]=J[1]*M[1]+B,this.lines.call(this,J[2],J[0],J[1],M))}return this}}(d.API),function(j){var m=j.getCharWidthsArray=function(G,C){C||(C={});var w,y,H,x=C.widths?C.widths:this.internal.getFont().metadata.Unicode.widths,A=x.fof?x.fof:1,E=C.kerning?C.kerning:this.internal.getFont().metadata.Unicode.kerning,F=E.fof?E.fof:1,D=0,z=x[0]||A,B=[];for(w=0,y=G.length;y>w;w++){H=G.charCodeAt(w),B.push((x[H]||z)/A+(E[H]&&E[H][D]||0)/F),D=H}return B},l=function(n){for(var s=n.length,o=0;s;){s--,o+=n[s]}return o},u=j.getStringUnitWidth=function(e,o){return l(m.call(this,e,o))},k=function(D,A,w,y){for(var E=[],x=0,z=D.length,B=0;x!==z&&B+A[x]<w;){B+=A[x],x++}E.push(D.slice(0,x));var C=x;for(B=0;x!==z;){B+A[x]>y&&(E.push(D.slice(C,x)),B=0,C=x),B+=A[x],x++}return C!==x&&E.push(D.slice(C,x)),E},q=function(A,D,H){H||(H={});var O,z,M,F,K,L,I=[],C=[I],E=H.textIndent||0,r=0,e=0,J=A.split(" "),s=m(" ",H)[0];if(L=-1===H.lineIndent?J[0].length+2:H.lineIndent||0){var N=Array(L).join(" "),B=[];J.map(function(o){o=o.split(/\s*\n/),o.length>1?B=B.concat(o.map(function(w,x){return(x&&w.length?"\n":"")+w})):B.push(o[0])}),J=B,L=u(N,H)}for(M=0,F=J.length;F>M;M++){var n=0;if(O=J[M],L&&"\n"==O[0]&&(O=O.substr(1),n=1),z=m(O,H),e=l(z),E+r+e>D||n){if(e>D){for(K=k(O,z,D-(E+r),D),I.push(K.shift()),I=[K.pop()];K.length;){C.push([K.shift()])}e=l(z.slice(O.length-I[0].length))}else{I=[O]}C.push(I),E=e+L,r=s}else{I.push(O),E+=r+e,r=s}}if(L){var G=function(o,w){return(w?N:"")+o.join(" ")}}else{var G=function(o){return o.join(" ")}}return C.map(G)};j.splitTextToSize=function(D,z,o){o||(o={});var w,E=o.fontSize||this.internal.getFontSize(),y=function(F){var I={0:1},H={};if(F.widths&&F.kerning){return{widths:F.widths,kerning:F.kerning}}var J=this.internal.getFont(F.fontName,F.fontStyle),G="Unicode";return J.metadata[G]?{widths:J.metadata[G].widths||I,kerning:J.metadata[G].kerning||H}:{widths:I,kerning:H}}.call(this,o);w=Array.isArray(D)?D:D.split(/\r?\n/);var B=1*this.internal.scaleFactor*z/E;y.textIndent=o.textIndent?1*o.textIndent*this.internal.scaleFactor/E:0,y.lineIndent=o.lineIndent;var C,A,x=[];for(C=0,A=w.length;A>C;C++){x=x.concat(q(w[C],B,y))}return x}}(d.API),function(j){var m=function(L){for(var F="0123456789abcdef",q="klmnopqrstuvwxyz",z={},M=0;M<q.length;M++){z[q[M]]=F[M]}var y,C,I,K,H,B={},E=1,G=B,D=[],x="",A="",J=L.length-1;for(M=1;M!=J;){H=L[M],M+=1,"'"==H?C?(K=C.join(""),C=y):C=[]:C?C.push(H):"{"==H?(D.push([G,K]),G={},K=y):"}"==H?(I=D.pop(),I[0][I[1]]=G,K=y,G=I[0]):"-"==H?E=-1:K===y?z.hasOwnProperty(H)?(x+=z[H],K=parseInt(x,16)*E,E=1,x=""):x+=H:z.hasOwnProperty(H)?(A+=z[H],G[K]=parseInt(A,16)*E,E=1,K=y,A=""):A+=H}return B},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:m("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},o={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},k={Unicode:{"Courier-Oblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":m("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":m("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":m("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":m("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":m("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":m("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":m("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};j.events.push(["addFonts",function(w){var y,x,z,s,n,q="Unicode";for(x in w.fonts){w.fonts.hasOwnProperty(x)&&(y=w.fonts[x],z=k[q][y.PostScriptName],z&&(s=y.metadata[q]?y.metadata[q]:y.metadata[q]={},s.widths=z.widths,s.kerning=z.kerning),n=o[q][y.PostScriptName],n&&(s=y.metadata[q]?y.metadata[q]:y.metadata[q]={},s.encoding=n,n.codePages&&n.codePages.length&&(y.encoding=n.codePages[0])))}}])}(d.API),function(e){e.putTotalPages=function(j){for(var l=new RegExp(j,"g"),k=1;k<=this.internal.getNumberOfPages();k++){for(var m=0;m<this.internal.pages[k].length;m++){this.internal.pages[k][m]=this.internal.pages[k][m].replace(l,this.internal.getNumberOfPages())}}return this}}(d.API),function(j){if(j.URL=j.URL||j.webkitURL,j.Blob&&j.URL){try{return new Blob,void 0}catch(l){}}var k=j.BlobBuilder||j.WebKitBlobBuilder||j.MozBlobBuilder||function(A){var L=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},C=function(){this.data=[]},F=function(m,o,n){this.data=m,this.size=m.length,this.type=o,this.encoding=n},B=C.prototype,E=F.prototype,I=A.FileReaderSync,O=function(e){this.code=this[this.name=e]},z="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),N=z.length,H=A.URL||A.webkitURL||A,K=H.createObjectURL,M=H.revokeObjectURL,J=H,D=A.btoa,G=A.atob,x=A.ArrayBuffer,q=A.Uint8Array;for(F.fake=E.fake=!0;N--;){O.prototype[z[N]]=N+1}return H.createObjectURL||(J=A.URL={}),J.createObjectURL=function(m){var o,n=m.type;return null===n&&(n="application/octet-stream"),m instanceof F?(o="data:"+n,"base64"===m.encoding?o+";base64,"+m.data:"URI"===m.encoding?o+","+decodeURIComponent(m.data):D?o+";base64,"+D(m.data):o+","+encodeURIComponent(m.data)):K?K.call(H,m):void 0},J.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&M&&M.call(H,e)},B.append=function(n){var y=this.data;if(q&&(n instanceof x||n instanceof q)){for(var w="",P=new q(n),m=0,Q=P.length;Q>m;m++){w+=String.fromCharCode(P[m])}y.push(w)}else{if("Blob"===L(n)||"File"===L(n)){if(!I){throw new O("NOT_READABLE_ERR")}var e=new I;y.push(e.readAsBinaryString(n))}else{n instanceof F?"base64"===n.encoding&&G?y.push(G(n.data)):"URI"===n.encoding?y.push(decodeURIComponent(n.data)):"raw"===n.encoding&&y.push(n.data):("string"!=typeof n&&(n+=""),y.push(unescape(encodeURIComponent(n))))}}},B.getBlob=function(e){return arguments.length||(e=null),new F(this.data.join(""),e,"raw")},B.toString=function(){return"[object BlobBuilder]"},E.slice=function(m,u,o){var n=arguments.length;return 3>n&&(o=null),new F(this.data.slice(m,n>1?u:this.data.length),o,this.encoding)},E.toString=function(){return"[object Blob]"},E.close=function(){this.size=this.data.length=0},C}(j);j.Blob=function(q,u){var x=u?u.type||"":"",r=new k;if(q){for(var w=0,m=q.length;m>w;w++){r.append(q[w])}}return r.getBlob(x)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var h=h||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(J){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var D=J.document,j=function(){return J.URL||J.webkitURL||J},x=D.createElementNS("http://www.w3.org/1999/xhtml","a"),K=!J.externalHost&&"download" in x,q=function(e){var l=D.createEvent("MouseEvents");l.initMouseEvent("click",!0,!1,J,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(l)},A=J.webkitRequestFileSystem,G=J.requestFileSystem||A||J.mozRequestFileSystem,I=function(l){(J.setImmediate||J.setTimeout)(function(){throw l},0)},F="application/octet-stream",z=0,C=[],E=function(){for(var l=C.length;l--;){var m=C[l];"string"==typeof m?j().revokeObjectURL(m):m.remove()}C.length=0},B=function(l,w,u){w=[].concat(w);for(var M=w.length;M--;){var m=l["on"+w[M]];if("function"==typeof m){try{m.call(l,u||l)}catch(L){I(L)}}}},k=function(t,R){var L,n,o,P=this,N=t.type,s=!1,Q=function(){var e=j().createObjectURL(t);return C.push(e),e},M=function(){B(P,"writestart progress write writeend".split(" "))},l=function(){(s||!L)&&(L=Q(t)),n?n.location.href=L:window.open(L,"_blank"),P.readyState=P.DONE,M()},O=function(e){return function(){return P.readyState!==P.DONE?e.apply(this,arguments):void 0}},r={create:!0,exclusive:!1};return P.readyState=P.INIT,R||(R="download"),K?(L=Q(t),x.href=L,x.download=R,q(x),P.readyState=P.DONE,M(),void 0):(J.chrome&&N&&N!==F&&(o=t.slice||t.webkitSlice,t=o.call(t,0,t.size,F),s=!0),A&&"download"!==R&&(R+=".download"),(N===F||A)&&(n=J),G?(z+=t.size,G(J.TEMPORARY,z,O(function(e){e.root.getDirectory("saved",r,O(function(m){var u=function(){m.getFile(R,r,O(function(w){w.createWriter(O(function(S){S.onwriteend=function(T){n.location.href=w.toURL(),C.push(w),P.readyState=P.DONE,B(P,"writeend",T)},S.onerror=function(){var T=S.error;T.code!==T.ABORT_ERR&&l()},"writestart progress write abort".split(" ").forEach(function(T){S["on"+T]=P["on"+T]}),S.write(t),P.abort=function(){S.abort(),P.readyState=P.DONE},P.readyState=P.WRITING}),l)}),l)};m.getFile(R,{create:!1},O(function(w){w.remove(),u()}),O(function(w){w.code===w.NOT_FOUND_ERR?u():l()}))}),l)}),l),void 0):(l(),void 0))},y=k.prototype,H=function(l,m){return new k(l,m)};return y.abort=function(){var e=this;e.readyState=e.DONE,B(e,"abort")},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,J.addEventListener("unload",E,!1),H.unload=function(){E(),J.removeEventListener("unload",E,!1)},H}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=h:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return h}),void function(j,k){"object"==typeof module?module.exports=k():j.adler32cs=k()}(d,function(){var y="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,q=null,j=function(){if(!y){return function(){return !1}}try{var e=require("buffer");"function"==typeof e.Buffer&&(q=e.Buffer)}catch(o){}return function(n){return n instanceof ArrayBuffer||null!==q&&n instanceof q}}(),l=function(){return null!==q?function(e){return new q(e,"utf8").toString("binary")}:function(e){return unescape(encodeURIComponent(e))}}(),z=65521,k=function(u,B){for(var A=65535&u,D=u>>>16,C=0,s=B.length;s>C;C++){A=(A+(255&B.charCodeAt(C)))%z,D=(D+A)%z}return(D<<16|A)>>>0},m=function(u,B){for(var A=65535&u,D=u>>>16,C=0,s=B.length;s>C;C++){A=(A+B[C])%z,D=(D+A)%z}return(D<<16|A)>>>0},w={},x=w.Adler32=function(){var o=function(e){if(!(this instanceof o)){throw new TypeError("Constructor cannot called be as a function.")}if(!isFinite(e=null==e?1:+e)){throw new Error("First arguments needs to be a finite number.")}this.checksum=e>>>0},n=o.prototype={};return n.constructor=o,o.from=function(e){return e.prototype=n,e}(function(e){if(!(this instanceof o)){throw new TypeError("Constructor cannot called be as a function.")}if(null==e){throw new Error("First argument needs to be a string.")}this.checksum=k(1,e.toString())}),o.fromUtf8=function(e){return e.prototype=n,e}(function(e){if(!(this instanceof o)){throw new TypeError("Constructor cannot called be as a function.")}if(null==e){throw new Error("First argument needs to be a string.")}var s=l(e.toString());this.checksum=k(1,s)}),y&&(o.fromBuffer=function(e){return e.prototype=n,e}(function(e){if(!(this instanceof o)){throw new TypeError("Constructor cannot called be as a function.")}if(!j(e)){throw new Error("First argument needs to be ArrayBuffer.")}var r=new Uint8Array(e);return this.checksum=m(1,r)})),n.update=function(e){if(null==e){throw new Error("First argument needs to be a string.")}return e=e.toString(),this.checksum=k(this.checksum,e)},n.updateUtf8=function(r){if(null==r){throw new Error("First argument needs to be a string.")}var s=l(r.toString());return this.checksum=k(this.checksum,s)},y&&(n.updateBuffer=function(r){if(!j(r)){throw new Error("First argument needs to be ArrayBuffer.")}var s=new Uint8Array(r);return this.checksum=m(this.checksum,s)}),n.clone=function(){return new x(this.checksum)},o}();return w.from=function(e){if(null==e){throw new Error("First argument needs to be a string.")}return k(1,e.toString())},w.fromUtf8=function(n){if(null==n){throw new Error("First argument needs to be a string.")}var o=l(n.toString());return k(1,o)},y&&(w.fromBuffer=function(n){if(!j(n)){throw new Error("First argument need to be ArrayBuffer.")}var o=new Uint8Array(n);return m(1,o)}),w});var c=function(){function aJ(){function j(F){var B,n,G,w,D,E,C=m.dyn_tree,y=m.stat_desc.static_tree,A=m.stat_desc.extra_bits,z=m.stat_desc.extra_base,q=m.stat_desc.max_length,x=0;for(w=0;aU>=w;w++){F.bl_count[w]=0}for(C[2*F.heap[F.heap_max]+1]=0,B=F.heap_max+1;aZ>B;B++){n=F.heap[B],w=C[2*C[2*n+1]+1]+1,w>q&&(w=q,x++),C[2*n+1]=w,n>m.max_code||(F.bl_count[w]++,D=0,n>=z&&(D=A[n-z]),E=C[2*n],F.opt_len+=E*(w+D),y&&(F.static_len+=E*(y[2*n+1]+D)))}if(0!==x){do{for(w=q-1;0===F.bl_count[w];){w--}F.bl_count[w]--,F.bl_count[w+1]+=2,F.bl_count[q]--,x-=2}while(x>0);for(w=q;0!==w;w--){for(n=F.bl_count[w];0!==n;){G=F.heap[--B],G>m.max_code||(C[2*G+1]!=w&&(F.opt_len+=(w-C[2*G+1])*C[2*G],C[2*G+1]=w),n--)}}}}function l(n,q){var o=0;do{o|=1&n,n>>>=1,o<<=1}while(--q>0);return o>>>1}function k(w,y,B){var x,z,e,q=[],A=0;for(x=1;aU>=x;x++){q[x]=A=A+B[x-1]<<1}for(z=0;y>=z;z++){e=w[2*z+1],0!==e&&(w[2*z]=l(q[e]++,e))}}var m=this;m.build_tree=function(x){var w,y,t,q=m.dyn_tree,r=m.stat_desc.static_tree,z=m.stat_desc.elems,n=-1;for(x.heap_len=0,x.heap_max=aZ,w=0;z>w;w++){0!==q[2*w]?(x.heap[++x.heap_len]=n=w,x.depth[w]=0):q[2*w+1]=0}for(;x.heap_len<2;){t=x.heap[++x.heap_len]=2>n?++n:0,q[2*t]=1,x.depth[t]=0,x.opt_len--,r&&(x.static_len-=r[2*t+1])}for(m.max_code=n,w=Math.floor(x.heap_len/2);w>=1;w--){x.pqdownheap(q,w)}t=z;do{w=x.heap[1],x.heap[1]=x.heap[x.heap_len--],x.pqdownheap(q,1),y=x.heap[1],x.heap[--x.heap_max]=w,x.heap[--x.heap_max]=y,q[2*t]=q[2*w]+q[2*y],x.depth[t]=Math.max(x.depth[w],x.depth[y])+1,q[2*w+1]=q[2*y+1]=t,x.heap[1]=t++,x.pqdownheap(q,1)}while(x.heap_len>=2);x.heap[--x.heap_max]=x.heap[1],j(x),k(q,m.max_code,x.bl_count)}}function aY(j,m,l,u,k){var q=this;q.static_tree=j,q.extra_bits=m,q.extra_base=l,q.elems=u,q.max_length=k}function aL(j,m,l,u,k){var q=this;q.good_length=j,q.max_lazy=m,q.nice_length=l,q.max_chain=u,q.func=k}function aP(j,m,l,u){var k=j[2*m],q=j[2*l];return q>k||k==q&&u[m]<=u[l]}function aK(){function K(){var o;for(bc=2*ba,bm[Y-1]=0,o=0;Y-1>o;o++){bm[o]=0}G=ap[x].max_lazy,C=ap[x].good_length,E=ap[x].nice_length,Z=ap[x].max_chain,bC=0,m=0,bA=0,q=U=aa-1,bq=0,bf=0}function J(){var o;for(o=0;aX>o;o++){bd[2*o]=0}for(o=0;a3>o;o++){bu[2*o]=0}for(o=0;aI>o;o++){a7[2*o]=0}bd[2*aV]=1,e.opt_len=e.static_len=0,bg=F=0}function P(){bw.dyn_tree=bd,bw.stat_desc=aY.static_l_desc,a5.dyn_tree=bu,a5.stat_desc=aY.static_d_desc,bk.dyn_tree=a7,bk.stat_desc=aY.static_bl_desc,bt=0,w=0,bv=8,J()}function S(bK,bH){var O,bF,bL=-1,be=bK[1],bG=0,bI=7,bJ=4;for(0===be&&(bI=138,bJ=3),bK[2*(bH+1)+1]=65535,O=0;bH>=O;O++){bF=be,be=bK[2*(O+1)+1],++bG<bI&&bF==be||(bJ>bG?a7[2*bF]+=bG:0!==bF?(bF!=bL&&a7[2*bF]++,a7[2*aQ]++):10>=bG?a7[2*aG]++:a7[2*aE]++,bG=0,bL=bF,0===be?(bI=138,bJ=3):bF==be?(bI=6,bJ=3):(bI=7,bJ=4))}}function W(){var o;for(S(bd,bw.max_code),S(bu,a5.max_code),bk.build_tree(e),o=aI-1;o>=3&&0===a7[2*aJ.bl_order[o]+1];o--){}return e.opt_len+=3*(o+1)+5+5+4,o}function V(o){e.pending_buf[e.pending++]=o}function M(o){V(255&o),V(o>>>8&255)}function a8(o){V(o>>8&255),V(255&o&255)}function bB(o,O){var s,be=O;w>aW-be?(s=o,bt|=s<<w&65535,M(bt),bt=s>>>aW-w,w+=be-aW):(bt|=o<<w&65535,w+=be)}function bb(o,O){var s=2*o;bB(65535&O[s],65535&O[s+1])}function bp(bK,bH){var O,bF,bL=-1,be=bK[1],bG=0,bI=7,bJ=4;for(0===be&&(bI=138,bJ=3),O=0;bH>=O;O++){if(bF=be,be=bK[2*(O+1)+1],!(++bG<bI&&bF==be)){if(bJ>bG){do{bb(bF,a7)}while(0!==--bG)}else{0!==bF?(bF!=bL&&(bb(bF,a7),bG--),bb(aQ,a7),bB(bG-3,2)):10>=bG?(bb(aG,a7),bB(bG-3,3)):(bb(aE,a7),bB(bG-11,7))}bG=0,bL=bF,0===be?(bI=138,bJ=3):bF==be?(bI=6,bJ=3):(bI=7,bJ=4)}}}function T(be,O,bF){var o;for(bB(be-257,5),bB(O-1,5),bB(bF-4,4),o=0;bF>o;o++){bB(a7[2*aJ.bl_order[o]+1],3)}bp(bd,be-1),bp(bu,O-1)}function Q(){16==w?(M(bt),bt=0,w=0):w>=8&&(V(255&bt),bt>>>=8,w-=8)}function bj(){bB(ak<<1,3),bb(aV,aY.static_ltree),Q(),9>1+bv+10-w&&(bB(ak<<1,3),bb(aV,aY.static_ltree),Q()),bv=7}function X(bF,be){var bH,O,bG;if(e.pending_buf[N+2*bg]=bF>>>8&255,e.pending_buf[N+2*bg+1]=255&bF,e.pending_buf[I+bg]=255&be,bg++,0===bF?bd[2*be]++:(F++,bF--,bd[2*(aJ._length_code[be]+aR+1)]++,bu[2*aJ.d_code(bF)]++),0===(8191&bg)&&x>2){for(bH=8*bg,O=bC-m,bG=0;a3>bG;bG++){bH+=bu[2*bG]*(5+aJ.extra_dbits[bG])}if(bH>>>=3,F<Math.floor(bg/2)&&bH<Math.floor(O/2)){return !0}}return bg==H-1}function L(bH,bG){var bJ,bF,bI,be,O=0;if(0!==bg){do{bJ=e.pending_buf[N+2*O]<<8&65280|255&e.pending_buf[N+2*O+1],bF=255&e.pending_buf[I+O],O++,0===bJ?bb(bF,bH):(bI=aJ._length_code[bF],bb(bI+aR+1,bH),be=aJ.extra_lbits[bI],0!==be&&(bF-=aJ.base_length[bI],bB(bF,be)),bJ--,bI=aJ.d_code(bJ),bb(bI,bG),be=aJ.extra_dbits[bI],0!==be&&(bJ-=aJ.base_dist[bI],bB(bJ,be)))}while(bg>O)}bb(aV,bH),bv=bH[2*aV+1]}function bz(){w>8?M(bt):w>0&&V(255&bt),bt=0,w=0}function bx(o,O,s){bz(),bv=8,s&&(M(O),M(~O)),e.pending_buf.set(bh.subarray(o,o+O),e.pending),e.pending+=O}function y(o,O,s){bB((aq<<1)+(s?1:0),3),bx(o,O,!0)}function a9(be,bF,bH){var bG,O,s=0;x>0?(bw.build_tree(e),a5.build_tree(e),s=W(),bG=e.opt_len+3+7>>>3,O=e.static_len+3+7>>>3,bG>=O&&(bG=O)):bG=O=bF+5,bG>=bF+4&&-1!=be?y(be,bF,bH):O==bG?(bB((ak<<1)+(bH?1:0),3),L(aY.static_ltree,aY.static_dtree)):(bB((aC<<1)+(bH?1:0),3),T(bw.max_code+1,a5.max_code+1,s+1),L(bd,bu)),J(),bH&&bz()}function B(o){a9(m>=0?m:-1,bC-m,o),m=bC,n.flush_pending()}function bn(){var o,O,s,be;do{if(be=bc-bA-bC,0===be&&0===bC&&0===bA){be=ba}else{if(-1==be){be--}else{if(bC>=ba+ba-a2){bh.set(bh.subarray(ba,ba+ba),0),bo-=ba,bC-=ba,m-=ba,o=Y,s=o;do{O=65535&bm[--s],bm[s]=O>=ba?O-ba:0}while(0!==--o);o=ba,s=o;do{O=65535&bs[--s],bs[s]=O>=ba?O-ba:0}while(0!==--o);be+=ba}}}if(0===n.avail_in){return}o=n.read_buf(bh,bC+bA,be),bA+=o,bA>=aa&&(bf=255&bh[bC],bf=(bf<<bi^255&bh[bC+1])&R)}while(a2>bA&&0!==n.avail_in)}function t(o){var O,s=65535;for(s>l-5&&(s=l-5);;){if(1>=bA){if(bn(),0===bA&&o==aS){return an}if(0===bA){break}}if(bC+=bA,bA=0,O=m+s,(0===bC||bC>=O)&&(bA=bC-O,bC=O,B(!1),0===n.avail_out)){return an}if(bC-m>=ba-a2&&(B(!1),0===n.avail_out)){return an}}return B(o==az),0===n.avail_out?o==az?au:an:o==az?av:ao}function br(bN){var bJ,O,bF=Z,bO=bC,be=U,bH=bC>ba-a2?bC-(ba-a2):0,bL=E,bM=A,bK=bC+ad,bG=bh[bO+be-1],bI=bh[bO+be];U>=C&&(bF>>=2),bL>bA&&(bL=bA);do{if(bJ=bN,bh[bJ+be]==bI&&bh[bJ+be-1]==bG&&bh[bJ]==bh[bO]&&bh[++bJ]==bh[bO+1]){bO+=2,bJ++;do{}while(bh[++bO]==bh[++bJ]&&bh[++bO]==bh[++bJ]&&bh[++bO]==bh[++bJ]&&bh[++bO]==bh[++bJ]&&bh[++bO]==bh[++bJ]&&bh[++bO]==bh[++bJ]&&bh[++bO]==bh[++bJ]&&bh[++bO]==bh[++bJ]&&bK>bO);if(O=ad-(bK-bO),bO=bK-ad,O>be){if(bo=bN,be=O,O>=bL){break}bG=bh[bO+be-1],bI=bh[bO+be]}}}while((bN=65535&bs[bN&bM])>bH&&0!==--bF);return bA>=be?be:bA}function bl(o){for(var O,s=0;;){if(a2>bA){if(bn(),a2>bA&&o==aS){return an}if(0===bA){break}}if(bA>=aa&&(bf=(bf<<bi^255&bh[bC+(aa-1)])&R,s=65535&bm[bf],bs[bC&A]=bm[bf],bm[bf]=bC),0!==s&&ba-a2>=(bC-s&65535)&&j!=aM&&(q=br(s)),q>=aa){if(O=X(bC-bo,q-aa),bA-=q,G>=q&&bA>=aa){q--;do{bC++,bf=(bf<<bi^255&bh[bC+(aa-1)])&R,s=65535&bm[bf],bs[bC&A]=bm[bf],bm[bf]=bC}while(0!==--q);bC++}else{bC+=q,q=0,bf=255&bh[bC],bf=(bf<<bi^255&bh[bC+1])&R}}else{O=X(0,255&bh[bC]),bA--,bC++}if(O&&(B(!1),0===n.avail_out)){return an}}return B(o==az),0===n.avail_out?o==az?au:an:o==az?av:ao}function D(o){for(var O,s,be=0;;){if(a2>bA){if(bn(),a2>bA&&o==aS){return an}if(0===bA){break}}if(bA>=aa&&(bf=(bf<<bi^255&bh[bC+(aa-1)])&R,be=65535&bm[bf],bs[bC&A]=bm[bf],bm[bf]=bC),U=q,z=bo,q=aa-1,0!==be&&G>U&&ba-a2>=(bC-be&65535)&&(j!=aM&&(q=br(be)),5>=q&&(j==a1||q==aa&&bC-bo>4096)&&(q=aa-1)),U>=aa&&U>=q){s=bC+bA-aa,O=X(bC-1-z,U-aa),bA-=U-1,U-=2;do{++bC<=s&&(bf=(bf<<bi^255&bh[bC+(aa-1)])&R,be=65535&bm[bf],bs[bC&A]=bm[bf],bm[bf]=bC)}while(0!==--U);if(bq=0,q=aa-1,bC++,O&&(B(!1),0===n.avail_out)){return an}}else{if(0!==bq){if(O=X(0,255&bh[bC-1]),O&&B(!1),bC++,bA--,0===n.avail_out){return an}}else{bq=1,bC++,bA--}}}return 0!==bq&&(O=X(0,255&bh[bC-1]),bq=0),B(o==az),0===n.avail_out?o==az?au:an:o==az?av:ao}function a6(o){return o.total_in=o.total_out=0,o.msg=null,e.pending=0,e.pending_out=0,bD=ae,by=aS,P(),K(),ai}var n,bD,l,k,by,ba,bE,A,bh,bc,bs,bm,bf,Y,u,R,bi,m,q,z,bq,bC,bo,bA,U,Z,G,x,j,C,E,bd,bu,a7,e=this,bw=new aJ,a5=new aJ,bk=new aJ;e.depth=[];var I,H,bg,N,F,bv,bt,w;e.bl_count=[],e.heap=[],bd=[],bu=[],a7=[],e.pqdownheap=function(O,bG){for(var bF=e.heap,be=bF[bG],bH=bG<<1;bH<=e.heap_len&&(bH<e.heap_len&&aP(O,bF[bH+1],bF[bH],e.depth)&&bH++,!aP(O,be,bF[bH],e.depth));){bF[bG]=bF[bH],bG=bH,bH<<=1}bF[bG]=be},e.deflateInit=function(O,bG,bF,bI,be,bH){return bI||(bI=ab),be||(be=aj),bH||(bH=aF),O.msg=null,bG==aH&&(bG=6),1>be||be>al||bI!=ab||9>bF||bF>15||0>bG||bG>9||0>bH||bH>aM?at:(O.dstate=e,bE=bF,ba=1<<bE,A=ba-1,u=be+7,Y=1<<u,R=Y-1,bi=Math.floor((u+aa-1)/aa),bh=new Uint8Array(2*ba),bs=[],bm=[],H=1<<be+6,e.pending_buf=new Uint8Array(4*H),l=4*H,N=Math.floor(H/2),I=3*H,x=bG,j=bH,k=255&bI,a6(O))},e.deflateEnd=function(){return bD!=af&&bD!=ae&&bD!=ac?at:(e.pending_buf=null,bm=null,bs=null,bh=null,e.dstate=null,bD==ae?ah:ai)},e.deflateParams=function(o,O,s){var be=ai;return O==aH&&(O=6),0>O||O>9||0>s||s>aM?at:(ap[x].func!=ap[O].func&&0!==o.total_in&&(be=o.deflate(a4)),x!=O&&(x=O,G=ap[x].max_lazy,C=ap[x].good_length,E=ap[x].nice_length,Z=ap[x].max_chain),j=s,be)},e.deflateSetDictionary=function(O,bG,bF){var bI,be=bF,bH=0;if(!bG||bD!=af){return at}if(aa>be){return ai}for(be>ba-a2&&(be=ba-a2,bH=bF-be),bh.set(bG.subarray(bH,bH+be),0),bC=be,m=be,bf=255&bh[0],bf=(bf<<bi^255&bh[1])&R,bI=0;be-aa>=bI;bI++){bf=(bf<<bi^255&bh[bI+(aa-1)])&R,bs[bI&A]=bm[bf],bm[bf]=bI}return ai},e.deflate=function(be,bH){var bG,bJ,bF,bI,O;if(bH>az||0>bH){return at}if(!be.next_out||!be.next_in&&0!==be.avail_in||bD==ac&&bH!=az){return be.msg=aT[aD-at],at}if(0===be.avail_out){return be.msg=aT[aD-aA],aA}if(n=be,bI=by,by=bH,bD==af&&(bJ=ab+(bE-8<<4)<<8,bF=(x-1&255)>>1,bF>3&&(bF=3),bJ|=bF<<6,0!==bC&&(bJ|=ar),bJ+=31-bJ%31,bD=ae,a8(bJ)),0!==e.pending){if(n.flush_pending(),0===n.avail_out){return by=-1,ai}}else{if(0===n.avail_in&&bI>=bH&&bH!=az){return n.msg=aT[aD-aA],aA}}if(bD==ac&&0!==n.avail_in){return be.msg=aT[aD-aA],aA}if(0!==n.avail_in||0!==bA||bH!=aS&&bD!=ac){switch(O=-1,ap[x].func){case ay:O=t(bH);break;case ag:O=bl(bH);break;case aw:O=D(bH)}if((O==au||O==av)&&(bD=ac),O==an||O==au){return 0===n.avail_out&&(by=-1),ai}if(O==ao){if(bH==a4){bj()}else{if(y(0,0,!1),bH==aB){for(bG=0;Y>bG;bG++){bm[bG]=0}}}if(n.flush_pending(),0===n.avail_out){return by=-1,ai}}}return bH!=az?ai:ax}}function aO(){var e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}var aU=15,a3=30,aI=19,a0=29,aR=256,aX=aR+1+a0,aZ=2*aX+1,aV=256,aN=7,aQ=16,aG=17,aE=18,aW=16,aH=-1,a1=1,aM=2,aF=0,aS=0,a4=1,aB=3,az=4,ai=0,ax=1,aD=2,at=-2,ah=-3,aA=-5,am=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];aJ._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],aJ.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],aJ.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],aJ.d_code=function(e){return 256>e?am[e]:am[256+(e>>>7)]},aJ.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],aJ.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],aJ.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],aJ.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],aY.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],aY.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],aY.static_l_desc=new aY(aY.static_ltree,aJ.extra_lbits,aR+1,aX,aU),aY.static_d_desc=new aY(aY.static_dtree,aJ.extra_dbits,0,a3,aU),aY.static_bl_desc=new aY(null,aJ.extra_blbits,0,aI,aN);var al=9,aj=8,ay=0,ag=1,aw=2,ap=[new aL(0,0,0,0,ay),new aL(4,4,8,4,ag),new aL(4,5,16,8,ag),new aL(4,6,32,32,ag),new aL(4,4,16,16,aw),new aL(8,16,32,32,aw),new aL(8,16,128,128,aw),new aL(8,32,128,256,aw),new aL(32,128,258,1024,aw),new aL(32,258,258,4096,aw)],aT=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],an=0,ao=1,au=2,av=3,ar=32,af=42,ae=113,ac=666,ab=8,aq=0,ak=1,aC=2,aa=3,ad=258,a2=ad+aa+1;return aO.prototype={deflateInit:function(j,l){var k=this;return k.dstate=new aK,l||(l=aU),k.dstate.deflateInit(k,j,l)},deflate:function(j){var k=this;return k.dstate?k.dstate.deflate(k,j):at},deflateEnd:function(){var j=this;if(!j.dstate){return at}var k=j.dstate.deflateEnd();return j.dstate=null,k},deflateParams:function(j,l){var k=this;return k.dstate?k.dstate.deflateParams(k,j,l):at},deflateSetDictionary:function(j,l){var k=this;return k.dstate?k.dstate.deflateSetDictionary(k,j,l):at},read_buf:function(j,m,l){var o=this,k=o.avail_in;return k>l&&(k=l),0===k?0:(o.avail_in-=k,j.set(o.next_in.subarray(o.next_in_index,o.next_in_index+k),m),o.next_in_index+=k,o.total_in+=k,k)},flush_pending:function(){var j=this,k=j.dstate.pending;k>j.avail_out&&(k=j.avail_out),0!==k&&(j.next_out.set(j.dstate.pending_buf.subarray(j.dstate.pending_out,j.dstate.pending_out+k),j.next_out_index),j.next_out_index+=k,j.dstate.pending_out+=k,j.total_out+=k,j.avail_out-=k,j.dstate.pending-=k,0===j.dstate.pending&&(j.dstate.pending_out=0))}},function(k){var o=this,m=new aO,q=512,l=aS,j=new Uint8Array(q);"undefined"==typeof k&&(k=aH),m.deflateInit(k),m.next_out=j,o.append=function(w,y){var z,r,s=[],A=0,n=0,x=0;if(w.length){m.next_in_index=0,m.next_in=w,m.avail_in=w.length;do{if(m.next_out_index=0,m.avail_out=q,z=m.deflate(l),z!=ai){throw"deflating: "+m.msg}m.next_out_index&&(m.next_out_index==q?s.push(new Uint8Array(j)):s.push(new Uint8Array(j.subarray(0,m.next_out_index)))),x+=m.next_out_index,y&&m.next_in_index>0&&m.next_in_index!=A&&(y(m.next_in_index),A=m.next_in_index)}while(m.avail_in>0||0===m.avail_out);return r=new Uint8Array(x),s.forEach(function(e){r.set(e,n),n+=e.length}),r}},o.flush=function(){var r,w,u=[],x=0,n=0;do{if(m.next_out_index=0,m.avail_out=q,r=m.deflate(az),r!=ax&&r!=ai){throw"deflating: "+m.msg}q-m.avail_out>0&&u.push(new Uint8Array(j.subarray(0,m.next_out_index))),n+=m.next_out_index}while(m.avail_in>0||0===m.avail_out);return m.deflateEnd(),w=new Uint8Array(n),u.forEach(function(e){w.set(e,x),x+=e.length}),w}}}(this);!function(j){var k;k=function(){function y(R){var M,D,G,S,F,J,P,Q,O,I,L,N,K,E,H;for(this.data=R,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},J=null;;){switch(M=this.readUInt32(),I=function(){var l,n;for(n=[],P=l=0;4>l;P=++l){n.push(String.fromCharCode(this.data[this.pos++]))}return n}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(M);break;case"fcTL":J&&this.animation.frames.push(J),this.pos+=4,J={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},F=this.readUInt16(),S=this.readUInt16()||100,J.delay=1000*F/S,J.disposeOp=this.data[this.pos++],J.blendOp=this.data[this.pos++],J.data=[];break;case"IDAT":case"fdAT":for("fdAT"===I&&(this.pos+=4,M-=4),R=(null!=J?J.data:void 0)||this.imgData,P=K=0;M>=0?M>K:K>M;P=M>=0?++K:--K){R.push(this.data[this.pos++])}break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(G=this.palette.length/3,this.transparency.indexed=this.read(M),this.transparency.indexed.length>G){throw new Error("More transparent colors than palette size")}if(L=G-this.transparency.indexed.length,L>0){for(P=E=0;L>=0?L>E:E>L;P=L>=0?++E:--E){this.transparency.indexed.push(255)}}break;case 0:this.transparency.grayscale=this.read(M)[0];break;case 2:this.transparency.rgb=this.read(M)}break;case"tEXt":N=this.read(M),Q=N.indexOf(0),O=String.fromCharCode.apply(String,N.slice(0,Q)),this.text[O]=String.fromCharCode.apply(String,N.slice(Q+1));break;case"IEND":return J&&this.animation.frames.push(J),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(H=this.colorType)||6===H,D=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*D,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),this.imgData=new Uint8Array(this.imgData),void 0;default:this.pos+=M}if(this.pos+=4,this.pos>this.data.length){throw new Error("Incomplete or corrupt PNG file")}}}var m,t,C,q,A,B,z,w;y.load=function(e,o,u){var l;return"function"==typeof o&&(u=o),l=new XMLHttpRequest,l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=function(){var n,r;return n=new Uint8Array(l.response||l.mozResponseArrayBuffer),r=new y(n),"function"==typeof(null!=o?o.getContext:void 0)&&r.render(o),"function"==typeof u?u(r):void 0},l.send(null)},q=0,C=1,A=2,t=0,m=1,y.prototype.read=function(l){var s,o,u;for(u=[],s=o=0;l>=0?l>o:o>l;s=l>=0?++o:--o){u.push(this.data[this.pos++])}return u},y.prototype.readUInt32=function(){var l,s,o,u;return l=this.data[this.pos++]<<24,s=this.data[this.pos++]<<16,o=this.data[this.pos++]<<8,u=this.data[this.pos++],l|s|o|u},y.prototype.readUInt16=function(){var l,n;return l=this.data[this.pos++]<<8,n=this.data[this.pos++],l|n},y.prototype.decodePixels=function(I){var V,K,O,J,N,Z,H,X,Q,U,W,S,M,P,F,D,T,G,Y,L,E,R,aa;if(null==I&&(I=this.imgData),0===I.length){return new Uint8Array(0)}for(I=new a(I),I=I.getBytes(),S=this.pixelBitlength/8,D=S*this.width,M=new Uint8Array(D*this.height),Z=I.length,F=0,P=0,K=0;Z>P;){switch(I[P++]){case 0:for(J=Y=0;D>Y;J=Y+=1){M[K++]=I[P++]}break;case 1:for(J=L=0;D>L;J=L+=1){V=I[P++],N=S>J?0:M[K-S],M[K++]=(V+N)%256}break;case 2:for(J=E=0;D>E;J=E+=1){V=I[P++],O=(J-J%S)/S,T=F&&M[(F-1)*D+O*S+J%S],M[K++]=(T+V)%256}break;case 3:for(J=R=0;D>R;J=R+=1){V=I[P++],O=(J-J%S)/S,N=S>J?0:M[K-S],T=F&&M[(F-1)*D+O*S+J%S],M[K++]=(V+Math.floor((N+T)/2))%256}break;case 4:for(J=aa=0;D>aa;J=aa+=1){V=I[P++],O=(J-J%S)/S,N=S>J?0:M[K-S],0===F?T=G=0:(T=M[(F-1)*D+O*S+J%S],G=O&&M[(F-1)*D+(O-1)*S+J%S]),H=N+T-G,X=Math.abs(H-N),U=Math.abs(H-T),W=Math.abs(H-G),Q=U>=X&&W>=X?N:W>=U?T:G,M[K++]=(V+Q)%256}break;default:throw new Error("Invalid filter algorithm: "+I[P-1])}F++}return M},y.prototype.decodePalette=function(){var K,G,l,E,L,D,F,I,J,H;for(E=this.palette,F=this.transparency.indexed||[],D=new Uint8Array((F.length||0)+E.length),L=0,l=E.length,K=0,G=I=0,J=E.length;J>I;G=I+=3){D[L++]=E[G],D[L++]=E[G+1],D[L++]=E[G+2],D[L++]=null!=(H=F[K++])?H:255}return D},y.prototype.copyToImageData=function(O,J){var D,F,P,E,H,M,N,L,G,I,K;if(F=this.colors,G=null,D=this.hasAlphaChannel,this.palette.length&&(G=null!=(K=this._decodedPalette)?K:this._decodedPalette=this.decodePalette(),F=4,D=!0),P=O.data||O,L=P.length,H=G||J,E=M=0,1===F){for(;L>E;){N=G?4*J[E/4]:M,I=H[N++],P[E++]=I,P[E++]=I,P[E++]=I,P[E++]=D?H[N++]:255,M=N}}else{for(;L>E;){N=G?4*J[E/4]:M,P[E++]=H[N++],P[E++]=H[N++],P[E++]=H[N++],P[E++]=D?H[N++]:255,M=N}}},y.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};try{z=j.document.createElement("canvas"),w=z.getContext("2d")}catch(x){return -1}return B=function(l){var n;return w.width=l.width,w.height=l.height,w.clearRect(0,0,l.width,l.height),w.putImageData(l,0,0),n=new Image,n.src=z.toDataURL(),n},y.prototype.decodeFrames=function(I){var F,l,D,J,u,E,H,G;if(this.animation){for(H=this.animation.frames,G=[],l=u=0,E=H.length;E>u;l=++u){F=H[l],D=I.createImageData(F.width,F.height),J=this.decodePixels(new Uint8Array(F.data)),this.copyToImageData(D,J),F.imageData=D,G.push(F.image=B(D))}return G}},y.prototype.renderFrame=function(n,u){var s,D,l;return D=this.animation.frames,s=D[u],l=D[u-1],0===u&&n.clearRect(0,0,this.width,this.height),(null!=l?l.disposeOp:void 0)===C?n.clearRect(l.xOffset,l.yOffset,l.width,l.height):(null!=l?l.disposeOp:void 0)===A&&n.putImageData(l.imageData,l.xOffset,l.yOffset),s.blendOp===t&&n.clearRect(s.xOffset,s.yOffset,s.width,s.height),n.drawImage(s.image,s.xOffset,s.yOffset)},y.prototype.animate=function(D){var G,F,I,E,H,u,l=this;return F=0,u=this.animation,E=u.numFrames,I=u.frames,H=u.numPlays,(G=function(){var n,e;return n=F++%E,e=I[n],l.renderFrame(D,n),E>1&&H>F/E?l.animation._timeout=setTimeout(G,e.delay):void 0})()},y.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},y.prototype.render=function(l){var o,n;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,o=l.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(n=o.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),o.putImageData(n,0,0))},y}(),j.PNG=k}("undefined"!=typeof window&&window||this);var g=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(j){var m=this.buffer,l=m?m.byteLength:0;if(l>j){return m}for(var u=512;j>u;){u<<=1}for(var k=new Uint8Array(u),q=0;l>q;++q){k[q]=m[q]}return this.buffer=k},getByte:function(){for(var j=this.pos;this.bufferLength<=j;){if(this.eof){return null}this.readBlock()}return this.buffer[this.pos++]},getBytes:function(j){var l=this.pos;if(j){this.ensureBuffer(l+j);for(var k=l+j;!this.eof&&this.bufferLength<k;){this.readBlock()}var m=this.bufferLength;k>m&&(k=m)}else{for(;!this.eof;){this.readBlock()}var k=this.bufferLength}return this.pos=k,this.buffer.subarray(l,k)},lookChar:function(){for(var j=this.pos;this.bufferLength<=j;){if(this.eof){return null}this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var j=this.pos;this.bufferLength<=j;){if(this.eof){return null}this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(j,l,k){for(var m=j+l;this.bufferLength<=m&&!this.eof;){this.readBlock()}return new Stream(this.buffer,j,l,k)},skip:function(j){j||(j=1),this.pos+=j},reset:function(){this.pos=0}},e}(),a=function(){function l(e){throw new Error(e)}function q(x){var w=0,y=x[w++],t=x[w++];(-1==y||-1==t)&&l("Invalid header in flate stream"),8!=(15&y)&&l("Unknown compression method in flate stream"),((y<<8)+t)%31!=0&&l("Bad FCHECK in flate stream"),32&t&&l("FDICT bit set in flate stream"),this.bytes=x,this.bytesPos=w,this.codeSize=0,this.codeBuf=0,g.call(this)}if("undefined"==typeof Uint32Array){return void 0}var o=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),m=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),k=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,590000,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],j=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return q.prototype=Object.create(g.prototype),q.prototype.getBits=function(y){for(var x,A=this.codeSize,w=this.codeBuf,z=this.bytes,t=this.bytesPos;y>A;){"undefined"==typeof(x=z[t++])&&l("Bad encoding in flate stream"),w|=x<<A,A+=8}return x=w&(1<<y)-1,this.codeBuf=w>>y,this.codeSize=A-=y,this.bytesPos=t,x},q.prototype.getCode=function(B){for(var t=B[0],x=B[1],F=this.codeSize,w=this.codeBuf,z=this.bytes,D=this.bytesPos;x>F;){var E;"undefined"==typeof(E=z[D++])&&l("Bad encoding in flate stream"),w|=E<<F,F+=8}var C=t[w&(1<<x)-1],y=C>>16,A=65535&C;return(0==F||y>F||0==y)&&l("Bad encoding in flate stream"),this.codeBuf=w>>y,this.codeSize=F-y,this.bytesPos=D,A},q.prototype.generateHuffmanTable=function(G){for(var C=G.length,w=0,y=0;C>y;++y){G[y]>w&&(w=G[y])}for(var H=1<<w,x=new Uint32Array(H),A=1,E=0,F=2;w>=A;++A,E<<=1,F<<=1){for(var D=0;C>D;++D){if(G[D]==A){for(var z=0,B=E,y=0;A>y;++y){z=z<<1|1&B,B>>=1}for(var y=z;H>y;y+=F){x[y]=A<<16|D}++E}}}return[x,w]},q.prototype.readBlock=function(){function ad(w,z,y,B,x){for(var A=w.getBits(y)+B;A-->0;){z[Z++]=x}}var W=this.getBits(3);if(1&W&&(this.eof=!0),W>>=1,0==W){var L,af=this.bytes,Y=this.bytesPos;"undefined"==typeof(L=af[Y++])&&l("Bad block header in flate stream");var ac=L;"undefined"==typeof(L=af[Y++])&&l("Bad block header in flate stream"),ac|=L<<8,"undefined"==typeof(L=af[Y++])&&l("Bad block header in flate stream");var ae=L;"undefined"==typeof(L=af[Y++])&&l("Bad block header in flate stream"),ae|=L<<8,ae!=(65535&~ac)&&l("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var aa=this.bufferLength,V=this.ensureBuffer(aa+ac),X=aa+ac;this.bufferLength=X;for(var J=aa;X>J;++J){if("undefined"==typeof(L=af[Y++])){this.eof=!0;break}V[J]=L}return this.bytesPos=Y,void 0}var F,ab;if(1==W){F=k,ab=j}else{if(2==W){for(var K=this.getBits(5)+257,ag=this.getBits(5)+1,R=this.getBits(4)+4,H=Array(o.length),Z=0;R>Z;){H[o[Z++]]=this.getBits(3)}for(var ah=this.generateHuffmanTable(H),U=0,Z=0,N=K+ag,r=new Array(N);N>Z;){var M=this.getCode(ah);16==M?ad(this,r,2,3,U):17==M?ad(this,r,3,3,U=0):18==M?ad(this,r,7,11,U=0):r[Z++]=U=M}F=this.generateHuffmanTable(r.slice(0,K)),ab=this.generateHuffmanTable(r.slice(K,N))}else{l("Unknown block type in flate stream")}}for(var V=this.buffer,D=V?V.length:0,G=this.bufferLength;;){var n=this.getCode(F);if(256>n){G+1>=D&&(V=this.ensureBuffer(G+1),D=V.length),V[G++]=n}else{if(256==n){return this.bufferLength=G,void 0}n-=257,n=u[n];var Q=n>>16;Q>0&&(Q=this.getBits(Q));var U=(65535&n)+Q;n=this.getCode(ab),n=m[n],Q=n>>16,Q>0&&(Q=this.getBits(Q));var t=(65535&n)+Q;G+U>=D&&(V=this.ensureBuffer(G+U),D=V.length);for(var s=0;U>s;++s,++G){V[G]=V[G-t]}}}},q}();!function(j){var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";"undefined"==typeof j.btoa&&(j.btoa=function(F){var e,w,G,q,y,D,E,C,x=0,A=0,B="",z=[];if(!F){return F}do{e=F.charCodeAt(x++),w=F.charCodeAt(x++),G=F.charCodeAt(x++),C=e<<16|w<<8|G,q=C>>18&63,y=C>>12&63,D=C>>6&63,E=63&C,z[A++]=k.charAt(q)+k.charAt(y)+k.charAt(D)+k.charAt(E)}while(x<F.length);B=z.join("");var m=F.length%3;return(m?B.slice(0,m-3):B)+"===".slice(m||3)}),"undefined"==typeof j.atob&&(j.atob=function(E){var e,q,F,m,x,C,D,B,w=0,z=0,A="",y=[];if(!E){return E}E+="";do{m=k.indexOf(E.charAt(w++)),x=k.indexOf(E.charAt(w++)),C=k.indexOf(E.charAt(w++)),D=k.indexOf(E.charAt(w++)),B=m<<18|x<<12|C<<6|D,e=B>>16&255,q=B>>8&255,F=255&B,y[z++]=64==C?String.fromCharCode(e):64==D?String.fromCharCode(e,q):String.fromCharCode(e,q,F)}while(w<E.length);return A=y.join("")}),Array.prototype.map||(Array.prototype.map=function(l){if(void 0===this||null===this||"function"!=typeof l){throw new TypeError}for(var u=Object(this),q=u.length>>>0,x=new Array(q),m=arguments.length>1?arguments[1]:void 0,w=0;q>w;w++){w in u&&(x[w]=l.call(m,u[w],w,u))}return x}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(l,q){if(void 0===this||null===this||"function"!=typeof l){throw new TypeError}for(var o=Object(this),u=o.length>>>0,m=0;u>m;m++){m in o&&l.call(q,o[m],m,o)}}),Object.keys||(Object.keys=function(){var l=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),m=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],q=m.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r)){throw new TypeError}var t,n,e=[];for(t in r){l.call(r,t)&&e.push(t)}if(o){for(n=0;q>n;n++){l.call(r,m[n])&&e.push(m[n])}}return e}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this)}({},function(){return this}());function RGBColor(g){this.ok=false;if(g.charAt(0)=="#"){g=g.substr(1,6)}g=g.replace(/ /g,"");g=g.toLowerCase();var a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var c in a){if(g==c){g=a[c]}}var h=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(j){return[parseInt(j[1]),parseInt(j[2]),parseInt(j[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(j){return[parseInt(j[1],16),parseInt(j[2],16),parseInt(j[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(j){return[parseInt(j[1]+j[1],16),parseInt(j[2]+j[2],16),parseInt(j[3]+j[3],16)]}}];for(var b=0;b<h.length;b++){var e=h[b].re;var d=h[b].process;var f=e.exec(g);if(f){channels=d(f);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var l=this.r.toString(16);var k=this.g.toString(16);var j=this.b.toString(16);if(l.length==1){l="0"+l}if(k.length==1){k="0"+k}if(j.length==1){j="0"+j}return"#"+l+k+j};this.getHelpXML=function(){var m=new Array();for(var o=0;o<h.length;o++){var l=h[o].example;for(var n=0;n<l.length;n++){m[m.length]=l[n]}}for(var u in a){m[m.length]=u}var q=document.createElement("ul");q.setAttribute("id","rgbcolor-examples");for(var o=0;o<m.length;o++){try{var r=document.createElement("li");var t=new RGBColor(m[o]);var w=document.createElement("div");w.style.cssText="margin: 3px; border: 1px solid black; background:"+t.toHex()+"; color:"+t.toHex();w.appendChild(document.createTextNode("test"));var k=document.createTextNode(" "+m[o]+" -> "+t.toRGB()+" -> "+t.toHex());r.appendChild(w);r.appendChild(k);q.appendChild(r)}catch(s){}}return q}}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function stackBlurImage(j,f,g,a){var d=document.getElementById(j);var k=d.naturalWidth;var e=d.naturalHeight;var c=document.getElementById(f);c.style.width=k+"px";c.style.height=e+"px";c.width=k;c.height=e;var b=c.getContext("2d");b.clearRect(0,0,k,e);b.drawImage(d,0,0);if(isNaN(g)||g<1){return}if(a){stackBlurCanvasRGBA(f,0,0,k,e,g)}else{stackBlurCanvasRGB(f,0,0,k,e,g)}}function stackBlurCanvasRGBA(N,H,F,a,c,R){if(isNaN(R)||R<1){return}R|=0;var j=document.getElementById(N);var ab=j.getContext("2d");var W;try{try{W=ab.getImageData(H,F,a,c)}catch(aa){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");W=ab.getImageData(H,F,a,c)}catch(aa){alert("Cannot access local image");throw new Error("unable to access local image data: "+aa);return}}}catch(aa){alert("Cannot access image");throw new Error("unable to access image data: "+aa)}var h=W.data;var P,O,Y,V,s,w,n,f,g,E,U,r,G,C,b,K,Q,t,q,m,u,z,A,J;var Z=R+R+1;var L=a<<2;var o=a-1;var T=c-1;var l=R+1;var S=l*(l+1)/2;var I=new BlurStack();var D=I;for(Y=1;Y<Z;Y++){D=D.next=new BlurStack();if(Y==l){var k=D}}D.next=I;var X=null;var M=null;n=w=0;var B=mul_table[R];var d=shg_table[R];for(O=0;O<c;O++){K=Q=t=q=f=g=E=U=0;r=l*(m=h[w]);G=l*(u=h[w+1]);C=l*(z=h[w+2]);b=l*(A=h[w+3]);f+=S*m;g+=S*u;E+=S*z;U+=S*A;D=I;for(Y=0;Y<l;Y++){D.r=m;D.g=u;D.b=z;D.a=A;D=D.next}for(Y=1;Y<l;Y++){V=w+((o<Y?o:Y)<<2);f+=(D.r=(m=h[V]))*(J=l-Y);g+=(D.g=(u=h[V+1]))*J;E+=(D.b=(z=h[V+2]))*J;U+=(D.a=(A=h[V+3]))*J;K+=m;Q+=u;t+=z;q+=A;D=D.next}X=I;M=k;for(P=0;P<a;P++){h[w+3]=A=(U*B)>>d;if(A!=0){A=255/A;h[w]=((f*B)>>d)*A;h[w+1]=((g*B)>>d)*A;h[w+2]=((E*B)>>d)*A}else{h[w]=h[w+1]=h[w+2]=0}f-=r;g-=G;E-=C;U-=b;r-=X.r;G-=X.g;C-=X.b;b-=X.a;V=(n+((V=P+R+1)<o?V:o))<<2;K+=(X.r=h[V]);Q+=(X.g=h[V+1]);t+=(X.b=h[V+2]);q+=(X.a=h[V+3]);f+=K;g+=Q;E+=t;U+=q;X=X.next;r+=(m=M.r);G+=(u=M.g);C+=(z=M.b);b+=(A=M.a);K-=m;Q-=u;t-=z;q-=A;M=M.next;w+=4}n+=a}for(P=0;P<a;P++){Q=t=q=K=g=E=U=f=0;w=P<<2;r=l*(m=h[w]);G=l*(u=h[w+1]);C=l*(z=h[w+2]);b=l*(A=h[w+3]);f+=S*m;g+=S*u;E+=S*z;U+=S*A;D=I;for(Y=0;Y<l;Y++){D.r=m;D.g=u;D.b=z;D.a=A;D=D.next}s=a;for(Y=1;Y<=R;Y++){w=(s+P)<<2;f+=(D.r=(m=h[w]))*(J=l-Y);g+=(D.g=(u=h[w+1]))*J;E+=(D.b=(z=h[w+2]))*J;U+=(D.a=(A=h[w+3]))*J;K+=m;Q+=u;t+=z;q+=A;D=D.next;if(Y<T){s+=a}}w=P;X=I;M=k;for(O=0;O<c;O++){V=w<<2;h[V+3]=A=(U*B)>>d;if(A>0){A=255/A;h[V]=((f*B)>>d)*A;h[V+1]=((g*B)>>d)*A;h[V+2]=((E*B)>>d)*A}else{h[V]=h[V+1]=h[V+2]=0}f-=r;g-=G;E-=C;U-=b;r-=X.r;G-=X.g;C-=X.b;b-=X.a;V=(P+(((V=O+l)<T?V:T)*a))<<2;f+=(K+=(X.r=h[V]));g+=(Q+=(X.g=h[V+1]));E+=(t+=(X.b=h[V+2]));U+=(q+=(X.a=h[V+3]));X=X.next;r+=(m=M.r);G+=(u=M.g);C+=(z=M.b);b+=(A=M.a);K-=m;Q-=u;t-=z;q-=A;M=M.next;w+=a}}ab.putImageData(W,H,F)}function stackBlurCanvasRGB(K,E,C,a,b,O){if(isNaN(O)||O<1){return}O|=0;var h=document.getElementById(K);var X=h.getContext("2d");var S;try{try{S=X.getImageData(E,C,a,b)}catch(W){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");S=X.getImageData(E,C,a,b)}catch(W){alert("Cannot access local image");throw new Error("unable to access local image data: "+W);return}}}catch(W){alert("Cannot access image");throw new Error("unable to access image data: "+W)}var g=S.data;var M,L,U,R,q,t,m,d,f,B,n,D,z,H,N,r,l,s,u,G;var V=O+O+1;var I=a<<2;var o=a-1;var Q=b-1;var k=O+1;var P=k*(k+1)/2;var F=new BlurStack();var A=F;for(U=1;U<V;U++){A=A.next=new BlurStack();if(U==k){var j=A}}A.next=F;var T=null;var J=null;m=t=0;var w=mul_table[O];var c=shg_table[O];for(L=0;L<b;L++){H=N=r=d=f=B=0;n=k*(l=g[t]);D=k*(s=g[t+1]);z=k*(u=g[t+2]);d+=P*l;f+=P*s;B+=P*u;A=F;for(U=0;U<k;U++){A.r=l;A.g=s;A.b=u;A=A.next}for(U=1;U<k;U++){R=t+((o<U?o:U)<<2);d+=(A.r=(l=g[R]))*(G=k-U);f+=(A.g=(s=g[R+1]))*G;B+=(A.b=(u=g[R+2]))*G;H+=l;N+=s;r+=u;A=A.next}T=F;J=j;for(M=0;M<a;M++){g[t]=(d*w)>>c;g[t+1]=(f*w)>>c;g[t+2]=(B*w)>>c;d-=n;f-=D;B-=z;n-=T.r;D-=T.g;z-=T.b;R=(m+((R=M+O+1)<o?R:o))<<2;H+=(T.r=g[R]);N+=(T.g=g[R+1]);r+=(T.b=g[R+2]);d+=H;f+=N;B+=r;T=T.next;n+=(l=J.r);D+=(s=J.g);z+=(u=J.b);H-=l;N-=s;r-=u;J=J.next;t+=4}m+=a}for(M=0;M<a;M++){N=r=H=f=B=d=0;t=M<<2;n=k*(l=g[t]);D=k*(s=g[t+1]);z=k*(u=g[t+2]);d+=P*l;f+=P*s;B+=P*u;A=F;for(U=0;U<k;U++){A.r=l;A.g=s;A.b=u;A=A.next}q=a;for(U=1;U<=O;U++){t=(q+M)<<2;d+=(A.r=(l=g[t]))*(G=k-U);f+=(A.g=(s=g[t+1]))*G;B+=(A.b=(u=g[t+2]))*G;H+=l;N+=s;r+=u;A=A.next;if(U<Q){q+=a}}t=M;T=F;J=j;for(L=0;L<b;L++){R=t<<2;g[R]=(d*w)>>c;g[R+1]=(f*w)>>c;g[R+2]=(B*w)>>c;d-=n;f-=D;B-=z;n-=T.r;D-=T.g;z-=T.b;R=(M+(((R=L+k)<Q?R:Q)*a))<<2;d+=(H+=(T.r=g[R]));f+=(N+=(T.g=g[R+1]));B+=(r+=(T.b=g[R+2]));T=T.next;n+=(l=J.r);D+=(s=J.g);z+=(u=J.b);H-=l;N-=s;r-=u;J=J.next;t+=a}}X.putImageData(S,E,C)}function BlurStack(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}(function(){this.canvg=function(j,m,b){if(j==null&&m==null&&b==null){var e=document.getElementsByTagName("svg");for(var g=0;g<e.length;g++){var f=e[g];var k=document.createElement("canvas");k.width=f.clientWidth;k.height=f.clientHeight;f.parentNode.insertBefore(k,f);f.parentNode.removeChild(f);var d=document.createElement("div");d.appendChild(f);canvg(k,d.innerHTML)}return}b=b||{};if(typeof j=="string"){j=document.getElementById(j)}if(j.svg!=null){j.svg.stop()}var h=a();if(!(j.childNodes.length==1&&j.childNodes[0].nodeName=="OBJECT")){j.svg=h}h.opts=b;var l=j.getContext("2d");if(typeof(m.documentElement)!="undefined"){h.loadXmlDoc(l,m)}else{if(m.substr(0,1)=="<"){h.loadXml(l,m)}else{h.load(l,m)}}};function a(){var b={};b.FRAMERATE=30;b.MAX_VIRTUAL_PIXELS=30000;b.init=function(c){var d=0;b.UniqueId=function(){d++;return"canvg"+d};b.Definitions={};b.Styles={};b.Animations=[];b.Images=[];b.ctx=c;b.ViewPort=new (function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(f,e){this.viewPorts.push({width:f,height:e})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(e){if(e!=null&&typeof(e)=="number"){return e}if(e=="x"){return this.width()}if(e=="y"){return this.height()}return Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}})};b.init();b.ImagesLoaded=function(){for(var c=0;c<b.Images.length;c++){if(!b.Images[c].loaded){return false}}return true};b.trim=function(c){return c.replace(/^\s+|\s+$/g,"")};b.compressSpaces=function(c){return c.replace(/[\s\r\t\n]+/gm," ")};b.ajax=function(d){var c;if(window.XMLHttpRequest){c=new XMLHttpRequest()}else{c=new ActiveXObject("Microsoft.XMLHTTP")}if(c){c.open("GET",d,false);c.send(null);return c.responseText}return null};b.parseXml=function(c){if(window.DOMParser){var e=new DOMParser();return e.parseFromString(c,"text/xml")}else{c=c.replace(/<!DOCTYPE svg[^>]*>/,"");var d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(c);return d}};b.Property=function(c,d){this.name=c;this.value=d};b.Property.prototype.getValue=function(){return this.value};b.Property.prototype.hasValue=function(){return(this.value!=null&&this.value!=="")};b.Property.prototype.numValue=function(){if(!this.hasValue()){return 0}var c=parseFloat(this.value);if((this.value+"").match(/%$/)){c=c/100}return c};b.Property.prototype.valueOrDefault=function(c){if(this.hasValue()){return this.value}return c};b.Property.prototype.numValueOrDefault=function(c){if(this.hasValue()){return this.numValue()}return c};b.Property.prototype.addOpacity=function(d){var e=this.value;if(d!=null&&d!=""&&typeof(this.value)=="string"){var c=new RGBColor(this.value);if(c.ok){e="rgba("+c.r+", "+c.g+", "+c.b+", "+d+")"}}return new b.Property(this.name,e)};b.Property.prototype.getDefinition=function(){var c=this.value.match(/#([^\)'"]+)/);if(c){c=c[1]}if(!c){c=this.value}return b.Definitions[c]};b.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0};b.Property.prototype.getFillStyleDefinition=function(g,f){var c=this.getDefinition();if(c!=null&&c.createGradient){return c.createGradient(b.ctx,g,f)}if(c!=null&&c.createPattern){if(c.getHrefAttribute().hasValue()){var d=c.attribute("patternTransform");c=c.getHrefAttribute().getDefinition();if(d.hasValue()){c.attribute("patternTransform",true).value=d.value}}return c.createPattern(b.ctx,g)}return null};b.Property.prototype.getDPI=function(c){return 96};b.Property.prototype.getEM=function(e){var c=12;var d=new b.Property("fontSize",b.Font.Parse(b.ctx.font).fontSize);if(d.hasValue()){c=d.toPixels(e)}return c};b.Property.prototype.getUnits=function(){var c=this.value+"";return c.replace(/[0-9\.\-]/g,"")};b.Property.prototype.toPixels=function(e,c){if(!this.hasValue()){return 0}var d=this.value+"";if(d.match(/em$/)){return this.numValue()*this.getEM(e)}if(d.match(/ex$/)){return this.numValue()*this.getEM(e)/2}if(d.match(/px$/)){return this.numValue()}if(d.match(/pt$/)){return this.numValue()*this.getDPI(e)*(1/72)}if(d.match(/pc$/)){return this.numValue()*15}if(d.match(/cm$/)){return this.numValue()*this.getDPI(e)/2.54}if(d.match(/mm$/)){return this.numValue()*this.getDPI(e)/25.4}if(d.match(/in$/)){return this.numValue()*this.getDPI(e)}if(d.match(/%$/)){return this.numValue()*b.ViewPort.ComputeSize(e)}var f=this.numValue();if(c&&f<1){return f*b.ViewPort.ComputeSize(e)}return f};b.Property.prototype.toMilliseconds=function(){if(!this.hasValue()){return 0}var c=this.value+"";if(c.match(/s$/)){return this.numValue()*1000}if(c.match(/ms$/)){return this.numValue()}return this.numValue()};b.Property.prototype.toRadians=function(){if(!this.hasValue()){return 0}var c=this.value+"";if(c.match(/deg$/)){return this.numValue()*(Math.PI/180)}if(c.match(/grad$/)){return this.numValue()*(Math.PI/200)}if(c.match(/rad$/)){return this.numValue()}return this.numValue()*(Math.PI/180)};b.Font=new (function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(l,h,e,k,d,g){var j=g!=null?this.Parse(g):this.CreateFont("","","","","",b.ctx.font);return{fontFamily:d||j.fontFamily,fontSize:k||j.fontSize,fontStyle:l||j.fontStyle,fontWeight:e||j.fontWeight,fontVariant:h||j.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var c=this;this.Parse=function(h){var j={};var k=b.trim(b.compressSpaces(h||"")).split(" ");var l={fontSize:false,fontStyle:false,fontWeight:false,fontVariant:false};var e="";for(var g=0;g<k.length;g++){if(!l.fontStyle&&c.Styles.indexOf(k[g])!=-1){if(k[g]!="inherit"){j.fontStyle=k[g]}l.fontStyle=true}else{if(!l.fontVariant&&c.Variants.indexOf(k[g])!=-1){if(k[g]!="inherit"){j.fontVariant=k[g]}l.fontStyle=l.fontVariant=true}else{if(!l.fontWeight&&c.Weights.indexOf(k[g])!=-1){if(k[g]!="inherit"){j.fontWeight=k[g]}l.fontStyle=l.fontVariant=l.fontWeight=true}else{if(!l.fontSize){if(k[g]!="inherit"){j.fontSize=k[g].split("/")[0]}l.fontStyle=l.fontVariant=l.fontWeight=l.fontSize=true}else{if(k[g]!="inherit"){e+=k[g]}}}}}}if(e!=""){j.fontFamily=e}return j}});b.ToNumberArray=function(e){var c=b.trim(b.compressSpaces((e||"").replace(/,/g," "))).split(" ");for(var d=0;d<c.length;d++){c[d]=parseFloat(c[d])}return c};b.Point=function(c,d){this.x=c;this.y=d};b.Point.prototype.angleTo=function(c){return Math.atan2(c.y-this.y,c.x-this.x)};b.Point.prototype.applyTransform=function(c){var d=this.x*c[0]+this.y*c[2]+c[4];var e=this.x*c[1]+this.y*c[3]+c[5];this.x=d;this.y=e};b.CreatePoint=function(d){var c=b.ToNumberArray(d);return new b.Point(c[0],c[1])};b.CreatePath=function(e){var c=b.ToNumberArray(e);var f=[];for(var d=0;d<c.length;d+=2){f.push(new b.Point(c[d],c[d+1]))}return f};b.BoundingBox=function(d,f,c,e){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(g,h){if(g!=null){if(isNaN(this.x1)||isNaN(this.x2)){this.x1=g;this.x2=g}if(g<this.x1){this.x1=g}if(g>this.x2){this.x2=g}}if(h!=null){if(isNaN(this.y1)||isNaN(this.y2)){this.y1=h;this.y2=h}if(h<this.y1){this.y1=h}if(h>this.y2){this.y2=h}}};this.addX=function(g){this.addPoint(g,null)};this.addY=function(g){this.addPoint(null,g)};this.addBoundingBox=function(g){this.addPoint(g.x1,g.y1);this.addPoint(g.x2,g.y2)};this.addQuadraticCurve=function(m,l,h,g,o,n){var k=m+2/3*(h-m);var j=l+2/3*(g-l);var r=k+1/3*(o-m);var q=j+1/3*(n-l);this.addBezierCurve(m,l,k,r,j,q,o,n)};this.addBezierCurve=function(x,w,l,j,r,o,z,y){var m=[x,w],k=[l,j],h=[r,o],g=[z,y];this.addPoint(m[0],m[1]);this.addPoint(g[0],g[1]);for(i=0;i<=1;i++){var A=function(E){return Math.pow(1-E,3)*m[i]+3*Math.pow(1-E,2)*E*k[i]+3*(1-E)*Math.pow(E,2)*h[i]+Math.pow(E,3)*g[i]};var C=6*m[i]-12*k[i]+6*h[i];var D=-3*m[i]+9*k[i]-9*h[i]+3*g[i];var B=3*k[i]-3*m[i];if(D==0){if(C==0){continue}var u=-B/C;if(0<u&&u<1){if(i==0){this.addX(A(u))}if(i==1){this.addY(A(u))}}continue}var n=Math.pow(C,2)-4*B*D;if(n<0){continue}var s=(-C+Math.sqrt(n))/(2*D);if(0<s&&s<1){if(i==0){this.addX(A(s))}if(i==1){this.addY(A(s))}}var q=(-C-Math.sqrt(n))/(2*D);if(0<q&&q<1){if(i==0){this.addX(A(q))}if(i==1){this.addY(A(q))}}}};this.isPointInBox=function(g,h){return(this.x1<=g&&g<=this.x2&&this.y1<=h&&h<=this.y2)};this.addPoint(d,f);this.addPoint(c,e)};b.Transform=function(c){var h=this;this.Type={};this.Type.translate=function(k){this.p=b.CreatePoint(k);this.apply=function(l){l.translate(this.p.x||0,this.p.y||0)};this.unapply=function(l){l.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(l){l.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(l){var k=b.ToNumberArray(l);this.angle=new b.Property("angle",k[0]);this.cx=k[1]||0;this.cy=k[2]||0;this.apply=function(m){m.translate(this.cx,this.cy);m.rotate(this.angle.toRadians());m.translate(-this.cx,-this.cy)};this.unapply=function(m){m.translate(this.cx,this.cy);m.rotate(-1*this.angle.toRadians());m.translate(-this.cx,-this.cy)};this.applyToPoint=function(n){var m=this.angle.toRadians();n.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);n.applyTransform([Math.cos(m),Math.sin(m),-Math.sin(m),Math.cos(m),0,0]);n.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(k){this.p=b.CreatePoint(k);this.apply=function(l){l.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(l){l.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(l){l.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(k){this.m=b.ToNumberArray(k);this.apply=function(l){l.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(l){l.applyTransform(this.m)}};this.Type.SkewBase=function(k){this.base=h.Type.matrix;this.base(k);this.angle=new b.Property("angle",k)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(k){this.base=h.Type.SkewBase;this.base(k);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(k){this.base=h.Type.SkewBase;this.base(k);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(k){for(var l=0;l<this.transforms.length;l++){this.transforms[l].apply(k)}};this.unapply=function(k){for(var l=this.transforms.length-1;l>=0;l--){this.transforms[l].unapply(k)}};this.applyToPoint=function(l){for(var k=0;k<this.transforms.length;k++){this.transforms[k].applyToPoint(l)}};var j=b.trim(b.compressSpaces(c)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var e=0;e<j.length;e++){var g=b.trim(j[e].split("(")[0]);var f=j[e].split("(")[1].replace(")","");var d=new this.Type[g](f);d.type=g;this.transforms.push(d)}};b.AspectRatio=function(t,r,d,k,s,c,g,f,q,o){r=b.compressSpaces(r);r=r.replace(/^defer\s/,"");var j=r.split(" ")[0]||"xMidYMid";var e=r.split(" ")[1]||"meet";var n=d/k;var m=s/c;var h=Math.min(n,m);var l=Math.max(n,m);if(e=="meet"){k*=h;c*=h}if(e=="slice"){k*=l;c*=l}q=new b.Property("refX",q);o=new b.Property("refY",o);if(q.hasValue()&&o.hasValue()){t.translate(-h*q.toPixels("x"),-h*o.toPixels("y"))}else{if(j.match(/^xMid/)&&((e=="meet"&&h==m)||(e=="slice"&&l==m))){t.translate(d/2-k/2,0)}if(j.match(/YMid$/)&&((e=="meet"&&h==n)||(e=="slice"&&l==n))){t.translate(0,s/2-c/2)}if(j.match(/^xMax/)&&((e=="meet"&&h==m)||(e=="slice"&&l==m))){t.translate(d-k,0)}if(j.match(/YMax$/)&&((e=="meet"&&h==n)||(e=="slice"&&l==n))){t.translate(0,s-c)}}if(j=="none"){t.scale(n,m)}else{if(e=="meet"){t.scale(h,h)}else{if(e=="slice"){t.scale(l,l)}}}t.translate(g==null?0:-g,f==null?0:-f)};b.Element={};b.EmptyProperty=new b.Property("EMPTY","");b.Element.ElementBase=function(g){this.attributes={};this.styles={};this.children=[];this.attribute=function(q,r){var j=this.attributes[q];if(j!=null){return j}if(r==true){j=new b.Property(q,"");this.attributes[q]=j}return j||b.EmptyProperty};this.getHrefAttribute=function(){for(var j in this.attributes){if(j.match(/:href$/)){return this.attributes[j]}}return b.EmptyProperty};this.style=function(q,w){var r=this.styles[q];if(r!=null){return r}var j=this.attribute(q);if(j!=null&&j.hasValue()){this.styles[q]=j;return j}var t=this.parent;if(t!=null){var u=t.style(q);if(u!=null&&u.hasValue()){return u}}if(w==true){r=new b.Property(q,"");this.styles[q]=r}return r||b.EmptyProperty};this.render=function(q){if(this.style("display").value=="none"){return}if(this.attribute("visibility").value=="hidden"){return}q.save();if(this.attribute("mask").hasValue()){var j=this.attribute("mask").getDefinition();if(j!=null){j.apply(q,this)}}else{if(this.style("filter").hasValue()){var r=this.style("filter").getDefinition();if(r!=null){r.apply(q,this)}}else{this.setContext(q);this.renderChildren(q);this.clearContext(q)}}q.restore()};this.setContext=function(j){};this.clearContext=function(j){};this.renderChildren=function(j){for(var q=0;q<this.children.length;q++){this.children[q].render(j)}};this.addChild=function(q,j){var r=q;if(j){r=b.CreateElement(q)}r.parent=this;this.children.push(r)};if(g!=null&&g.nodeType==1){for(var l=0;l<g.childNodes.length;l++){var c=g.childNodes[l];if(c.nodeType==1){this.addChild(c,true)}if(this.captureTextNodes&&c.nodeType==3){var n=c.nodeValue||c.text||"";if(b.trim(b.compressSpaces(n))!=""){this.addChild(new b.Element.tspan(c),false)}}}for(var l=0;l<g.attributes.length;l++){var f=g.attributes[l];this.attributes[f.nodeName]=new b.Property(f.nodeName,f.nodeValue)}var o=b.Styles[g.nodeName];if(o!=null){for(var e in o){this.styles[e]=o[e]}}if(this.attribute("class").hasValue()){var h=b.compressSpaces(this.attribute("class").value).split(" ");for(var k=0;k<h.length;k++){o=b.Styles["."+h[k]];if(o!=null){for(var e in o){this.styles[e]=o[e]}}o=b.Styles[g.nodeName+"."+h[k]];if(o!=null){for(var e in o){this.styles[e]=o[e]}}}}if(this.attribute("id").hasValue()){var o=b.Styles["#"+this.attribute("id").value];if(o!=null){for(var e in o){this.styles[e]=o[e]}}}if(this.attribute("style").hasValue()){var o=this.attribute("style").value.split(";");for(var l=0;l<o.length;l++){if(b.trim(o[l])!=""){var d=o[l].split(":");var e=b.trim(d[0]);var m=b.trim(d[1]);this.styles[e]=new b.Property(e,m)}}}if(this.attribute("id").hasValue()){if(b.Definitions[this.attribute("id").value]==null){b.Definitions[this.attribute("id").value]=this}}}};b.Element.RenderedElementBase=function(c){this.base=b.Element.ElementBase;this.base(c);this.setContext=function(m){if(this.style("fill").isUrlDefinition()){var j=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));if(j!=null){m.fillStyle=j}}else{if(this.style("fill").hasValue()){var l=this.style("fill");if(l.value=="currentColor"){l.value=this.style("color").value}m.fillStyle=(l.value=="none"?"rgba(0,0,0,0)":l.value)}}if(this.style("fill-opacity").hasValue()){var l=new b.Property("fill",m.fillStyle);l=l.addOpacity(this.style("fill-opacity").value);m.fillStyle=l.value}if(this.style("stroke").isUrlDefinition()){var j=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));if(j!=null){m.strokeStyle=j}}else{if(this.style("stroke").hasValue()){var k=this.style("stroke");if(k.value=="currentColor"){k.value=this.style("color").value}m.strokeStyle=(k.value=="none"?"rgba(0,0,0,0)":k.value)}}if(this.style("stroke-opacity").hasValue()){var k=new b.Property("stroke",m.strokeStyle);k=k.addOpacity(this.style("stroke-opacity").value);m.strokeStyle=k.value}if(this.style("stroke-width").hasValue()){var h=this.style("stroke-width").toPixels();m.lineWidth=h==0?0.001:h}if(this.style("stroke-linecap").hasValue()){m.lineCap=this.style("stroke-linecap").value}if(this.style("stroke-linejoin").hasValue()){m.lineJoin=this.style("stroke-linejoin").value}if(this.style("stroke-miterlimit").hasValue()){m.miterLimit=this.style("stroke-miterlimit").value}if(this.style("stroke-dasharray").hasValue()){var f=b.ToNumberArray(this.style("stroke-dasharray").value);if(typeof(m.setLineDash)!="undefined"){m.setLineDash(f)}else{if(typeof(m.webkitLineDash)!="undefined"){m.webkitLineDash=f}else{if(typeof(m.mozDash)!="undefined"){m.mozDash=f}}}var g=this.style("stroke-dashoffset").numValueOrDefault(1);if(typeof(m.lineDashOffset)!="undefined"){m.lineDashOffset=g}else{if(typeof(m.webkitLineDashOffset)!="undefined"){m.webkitLineDashOffset=g}else{if(typeof(m.mozDashOffset)!="undefined"){m.mozDashOffset=g}}}}if(typeof(m.font)!="undefined"){m.font=b.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()}if(this.attribute("transform").hasValue()){var d=new b.Transform(this.attribute("transform").value);d.apply(m)}if(this.style("clip-path").hasValue()){var e=this.style("clip-path").getDefinition();if(e!=null){e.apply(m)}}if(this.style("opacity").hasValue()){m.globalAlpha=this.style("opacity").numValue()}}};b.Element.RenderedElementBase.prototype=new b.Element.ElementBase;b.Element.PathElementBase=function(c){this.base=b.Element.RenderedElementBase;this.base(c);this.path=function(d){if(d!=null){d.beginPath()}return new b.BoundingBox()};this.renderChildren=function(e){this.path(e);b.Mouse.checkPath(this,e);if(e.fillStyle!=""){if(this.attribute("fill-rule").hasValue()){e.fill(this.attribute("fill-rule").value)}else{e.fill()}}if(e.strokeStyle!=""){e.stroke()}var g=this.getMarkers();if(g!=null){if(this.style("marker-start").isUrlDefinition()){var d=this.style("marker-start").getDefinition();d.render(e,g[0][0],g[0][1])}if(this.style("marker-mid").isUrlDefinition()){var d=this.style("marker-mid").getDefinition();for(var f=1;f<g.length-1;f++){d.render(e,g[f][0],g[f][1])}}if(this.style("marker-end").isUrlDefinition()){var d=this.style("marker-end").getDefinition();d.render(e,g[g.length-1][0],g[g.length-1][1])}}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};b.Element.PathElementBase.prototype=new b.Element.RenderedElementBase;b.Element.svg=function(c){this.base=b.Element.RenderedElementBase;this.base(c);this.baseClearContext=this.clearContext;this.clearContext=function(d){this.baseClearContext(d);b.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(g){g.strokeStyle="rgba(0,0,0,0)";g.lineCap="butt";g.lineJoin="miter";g.miterLimit=4;this.baseSetContext(g);if(!this.attribute("x").hasValue()){this.attribute("x",true).value=0}if(!this.attribute("y").hasValue()){this.attribute("y",true).value=0}g.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var h=b.ViewPort.width();var f=b.ViewPort.height();if(!this.attribute("width").hasValue()){this.attribute("width",true).value="100%"}if(!this.attribute("height").hasValue()){this.attribute("height",true).value="100%"}if(typeof(this.root)=="undefined"){h=this.attribute("width").toPixels("x");f=this.attribute("height").toPixels("y");var e=0;var l=0;if(this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()){e=-this.attribute("refX").toPixels("x");l=-this.attribute("refY").toPixels("y")}g.beginPath();g.moveTo(e,l);g.lineTo(h,l);g.lineTo(h,f);g.lineTo(e,f);g.closePath();g.clip()}b.ViewPort.SetCurrent(h,f);if(this.attribute("viewBox").hasValue()){var j=b.ToNumberArray(this.attribute("viewBox").value);var d=j[0];var k=j[1];h=j[2];f=j[3];b.AspectRatio(g,this.attribute("preserveAspectRatio").value,b.ViewPort.width(),h,b.ViewPort.height(),f,d,k,this.attribute("refX").value,this.attribute("refY").value);b.ViewPort.RemoveCurrent();b.ViewPort.SetCurrent(j[2],j[3])}}};b.Element.svg.prototype=new b.Element.RenderedElementBase;b.Element.rect=function(c){this.base=b.Element.PathElementBase;this.base(c);this.path=function(f){var e=this.attribute("x").toPixels("x");var k=this.attribute("y").toPixels("y");var g=this.attribute("width").toPixels("x");var d=this.attribute("height").toPixels("y");var j=this.attribute("rx").toPixels("x");var h=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()){h=j}if(this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()){j=h}j=Math.min(j,g/2);h=Math.min(h,d/2);if(f!=null){f.beginPath();f.moveTo(e+j,k);f.lineTo(e+g-j,k);f.quadraticCurveTo(e+g,k,e+g,k+h);f.lineTo(e+g,k+d-h);f.quadraticCurveTo(e+g,k+d,e+g-j,k+d);f.lineTo(e+j,k+d);f.quadraticCurveTo(e,k+d,e,k+d-h);f.lineTo(e,k+h);f.quadraticCurveTo(e,k,e+j,k);f.closePath()}return new b.BoundingBox(e,k,e+g,k+d)}};b.Element.rect.prototype=new b.Element.PathElementBase;b.Element.circle=function(c){this.base=b.Element.PathElementBase;this.base(c);this.path=function(e){var d=this.attribute("cx").toPixels("x");var g=this.attribute("cy").toPixels("y");var f=this.attribute("r").toPixels();if(e!=null){e.beginPath();e.arc(d,g,f,0,Math.PI*2,true);e.closePath()}return new b.BoundingBox(d-f,g-f,d+f,g+f)}};b.Element.circle.prototype=new b.Element.PathElementBase;b.Element.ellipse=function(c){this.base=b.Element.PathElementBase;this.base(c);this.path=function(e){var g=4*((Math.sqrt(2)-1)/3);var h=this.attribute("rx").toPixels("x");var f=this.attribute("ry").toPixels("y");var d=this.attribute("cx").toPixels("x");var j=this.attribute("cy").toPixels("y");if(e!=null){e.beginPath();e.moveTo(d,j-f);e.bezierCurveTo(d+(g*h),j-f,d+h,j-(g*f),d+h,j);e.bezierCurveTo(d+h,j+(g*f),d+(g*h),j+f,d,j+f);e.bezierCurveTo(d-(g*h),j+f,d-h,j+(g*f),d-h,j);e.bezierCurveTo(d-h,j-(g*f),d-(g*h),j-f,d,j-f);e.closePath()}return new b.BoundingBox(d-h,j-f,d+h,j+f)}};b.Element.ellipse.prototype=new b.Element.PathElementBase;b.Element.line=function(c){this.base=b.Element.PathElementBase;this.base(c);this.getPoints=function(){return[new b.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new b.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(d){var e=this.getPoints();if(d!=null){d.beginPath();d.moveTo(e[0].x,e[0].y);d.lineTo(e[1].x,e[1].y)}return new b.BoundingBox(e[0].x,e[0].y,e[1].x,e[1].y)};this.getMarkers=function(){var e=this.getPoints();var d=e[0].angleTo(e[1]);return[[e[0],d],[e[1],d]]}};b.Element.line.prototype=new b.Element.PathElementBase;b.Element.polyline=function(c){this.base=b.Element.PathElementBase;this.base(c);this.points=b.CreatePath(this.attribute("points").value);this.path=function(d){var f=new b.BoundingBox(this.points[0].x,this.points[0].y);if(d!=null){d.beginPath();d.moveTo(this.points[0].x,this.points[0].y)}for(var e=1;e<this.points.length;e++){f.addPoint(this.points[e].x,this.points[e].y);if(d!=null){d.lineTo(this.points[e].x,this.points[e].y)}}return f};this.getMarkers=function(){var e=[];for(var d=0;d<this.points.length-1;d++){e.push([this.points[d],this.points[d].angleTo(this.points[d+1])])}e.push([this.points[this.points.length-1],e[e.length-1][1]]);return e}};b.Element.polyline.prototype=new b.Element.PathElementBase;b.Element.polygon=function(c){this.base=b.Element.polyline;this.base(c);this.basePath=this.path;this.path=function(d){var e=this.basePath(d);if(d!=null){d.lineTo(this.points[0].x,this.points[0].y);d.closePath()}return e}};b.Element.polygon.prototype=new b.Element.polyline;b.Element.path=function(c){this.base=b.Element.PathElementBase;this.base(c);var e=this.attribute("d").value;e=e.replace(/,/gm," ");e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");e=e.replace(/([0-9])([+\-])/gm,"$1 $2");e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");e=b.compressSpaces(e);e=b.trim(e);this.PathParser=new (function(f){this.tokens=f.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new b.Point(0,0);this.control=new b.Point(0,0);this.current=new b.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){if(this.isEnd()){return true}return this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return true;break}return false};this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var d=new b.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(d)};this.getAsControlPoint=function(){var d=this.getPoint();this.control=d;return d};this.getAsCurrentPoint=function(){var d=this.getPoint();this.current=d;return d};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t"){return this.current}var d=new b.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return d};this.makeAbsolute=function(d){if(this.isRelativeCommand()){d.x+=this.current.x;d.y+=this.current.y}return d};this.addMarker=function(g,h,d){if(d!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null){this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(d)}this.addMarkerAngle(g,h==null?null:h.angleTo(g))};this.addMarkerAngle=function(g,d){this.points.push(g);this.angles.push(d)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var g=0;g<this.angles.length;g++){if(this.angles[g]==null){for(var d=g+1;d<this.angles.length;d++){if(this.angles[d]!=null){this.angles[g]=this.angles[d];break}}}}return this.angles}})(e);this.path=function(I){var K=this.PathParser;K.reset();var t=new b.BoundingBox();if(I!=null){I.beginPath()}while(!K.isEnd()){K.nextCommand();switch(K.command){case"M":case"m":var F=K.getAsCurrentPoint();K.addMarker(F);t.addPoint(F.x,F.y);if(I!=null){I.moveTo(F.x,F.y)}K.start=K.current;while(!K.isCommandOrEnd()){var F=K.getAsCurrentPoint();K.addMarker(F,K.start);t.addPoint(F.x,F.y);if(I!=null){I.lineTo(F.x,F.y)}}break;case"L":case"l":while(!K.isCommandOrEnd()){var O=K.current;var F=K.getAsCurrentPoint();K.addMarker(F,O);t.addPoint(F.x,F.y);if(I!=null){I.lineTo(F.x,F.y)}}break;case"H":case"h":while(!K.isCommandOrEnd()){var g=new b.Point((K.isRelativeCommand()?K.current.x:0)+K.getScalar(),K.current.y);K.addMarker(g,K.current);K.current=g;t.addPoint(K.current.x,K.current.y);if(I!=null){I.lineTo(K.current.x,K.current.y)}}break;case"V":case"v":while(!K.isCommandOrEnd()){var g=new b.Point(K.current.x,(K.isRelativeCommand()?K.current.y:0)+K.getScalar());K.addMarker(g,K.current);K.current=g;t.addPoint(K.current.x,K.current.y);if(I!=null){I.lineTo(K.current.x,K.current.y)}}break;case"C":case"c":while(!K.isCommandOrEnd()){var M=K.current;var j=K.getPoint();var k=K.getAsControlPoint();var x=K.getAsCurrentPoint();K.addMarker(x,k,j);t.addBezierCurve(M.x,M.y,j.x,j.y,k.x,k.y,x.x,x.y);if(I!=null){I.bezierCurveTo(j.x,j.y,k.x,k.y,x.x,x.y)}}break;case"S":case"s":while(!K.isCommandOrEnd()){var M=K.current;var j=K.getReflectedControlPoint();var k=K.getAsControlPoint();var x=K.getAsCurrentPoint();K.addMarker(x,k,j);t.addBezierCurve(M.x,M.y,j.x,j.y,k.x,k.y,x.x,x.y);if(I!=null){I.bezierCurveTo(j.x,j.y,k.x,k.y,x.x,x.y)}}break;case"Q":case"q":while(!K.isCommandOrEnd()){var M=K.current;var k=K.getAsControlPoint();var x=K.getAsCurrentPoint();K.addMarker(x,k,k);t.addQuadraticCurve(M.x,M.y,k.x,k.y,x.x,x.y);if(I!=null){I.quadraticCurveTo(k.x,k.y,x.x,x.y)}}break;case"T":case"t":while(!K.isCommandOrEnd()){var M=K.current;var k=K.getReflectedControlPoint();K.control=k;var x=K.getAsCurrentPoint();K.addMarker(x,k,k);t.addQuadraticCurve(M.x,M.y,k.x,k.y,x.x,x.y);if(I!=null){I.quadraticCurveTo(k.x,k.y,x.x,x.y)}}break;case"A":case"a":while(!K.isCommandOrEnd()){var M=K.current;var q=K.getScalar();var o=K.getScalar();var f=K.getScalar()*(Math.PI/180);var w=K.getScalar();var n=K.getScalar();var x=K.getAsCurrentPoint();var R=new b.Point(Math.cos(f)*(M.x-x.x)/2+Math.sin(f)*(M.y-x.y)/2,-Math.sin(f)*(M.x-x.x)/2+Math.cos(f)*(M.y-x.y)/2);var J=Math.pow(R.x,2)/Math.pow(q,2)+Math.pow(R.y,2)/Math.pow(o,2);if(J>1){q*=Math.sqrt(J);o*=Math.sqrt(J)}var B=(w==n?-1:1)*Math.sqrt(((Math.pow(q,2)*Math.pow(o,2))-(Math.pow(q,2)*Math.pow(R.y,2))-(Math.pow(o,2)*Math.pow(R.x,2)))/(Math.pow(q,2)*Math.pow(R.y,2)+Math.pow(o,2)*Math.pow(R.x,2)));if(isNaN(B)){B=0}var A=new b.Point(B*q*R.y/o,B*-o*R.x/q);var h=new b.Point((M.x+x.x)/2+Math.cos(f)*A.x-Math.sin(f)*A.y,(M.y+x.y)/2+Math.sin(f)*A.x+Math.cos(f)*A.y);var H=function(l){return Math.sqrt(Math.pow(l[0],2)+Math.pow(l[1],2))};var D=function(m,l){return(m[0]*l[0]+m[1]*l[1])/(H(m)*H(l))};var P=function(m,l){return(m[0]*l[1]<m[1]*l[0]?-1:1)*Math.acos(D(m,l))};var Q=P([1,0],[(R.x-A.x)/q,(R.y-A.y)/o]);var z=[(R.x-A.x)/q,(R.y-A.y)/o];var y=[(-R.x-A.x)/q,(-R.y-A.y)/o];var N=P(z,y);if(D(z,y)<=-1){N=Math.PI}if(D(z,y)>=1){N=0}var G=1-n?1:-1;var L=Q+G*(N/2);var d=new b.Point(h.x+q*Math.cos(L),h.y+o*Math.sin(L));K.addMarkerAngle(d,L-G*Math.PI/2);K.addMarkerAngle(x,L-G*Math.PI);t.addPoint(x.x,x.y);if(I!=null){var D=q>o?q:o;var E=q>o?1:q/o;var C=q>o?o/q:1;I.translate(h.x,h.y);I.rotate(f);I.scale(E,C);I.arc(0,0,D,Q,Q+N,1-n);I.scale(1/E,1/C);I.rotate(-f);I.translate(-h.x,-h.y)}}break;case"Z":case"z":if(I!=null){I.closePath()}K.current=K.start}}return t};this.getMarkers=function(){var f=this.PathParser.getMarkerPoints();var h=this.PathParser.getMarkerAngles();var g=[];for(var d=0;d<f.length;d++){g.push([f[d],h[d]])}return g}};b.Element.path.prototype=new b.Element.PathElementBase;b.Element.pattern=function(c){this.base=b.Element.ElementBase;this.base(c);this.createPattern=function(n,f){var d=this.attribute("width").toPixels("x",true);var m=this.attribute("height").toPixels("y",true);var k=new b.Element.svg();k.attributes.viewBox=new b.Property("viewBox",this.attribute("viewBox").value);k.attributes.width=new b.Property("width",d+"px");k.attributes.height=new b.Property("height",m+"px");k.attributes.transform=new b.Property("transform",this.attribute("patternTransform").value);k.children=this.children;var h=document.createElement("canvas");h.width=d;h.height=m;var e=h.getContext("2d");if(this.attribute("x").hasValue()&&this.attribute("y").hasValue()){e.translate(this.attribute("x").toPixels("x",true),this.attribute("y").toPixels("y",true))}for(var l=-1;l<=1;l++){for(var j=-1;j<=1;j++){e.save();e.translate(l*h.width,j*h.height);k.render(e);e.restore()}}var g=n.createPattern(h,"repeat");return g}};b.Element.pattern.prototype=new b.Element.ElementBase;b.Element.marker=function(c){this.base=b.Element.ElementBase;this.base(c);this.baseRender=this.render;this.render=function(e,d,g){e.translate(d.x,d.y);if(this.attribute("orient").valueOrDefault("auto")=="auto"){e.rotate(g)}if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){e.scale(e.lineWidth,e.lineWidth)}e.save();var f=new b.Element.svg();f.attributes.viewBox=new b.Property("viewBox",this.attribute("viewBox").value);f.attributes.refX=new b.Property("refX",this.attribute("refX").value);f.attributes.refY=new b.Property("refY",this.attribute("refY").value);f.attributes.width=new b.Property("width",this.attribute("markerWidth").value);f.attributes.height=new b.Property("height",this.attribute("markerHeight").value);f.attributes.fill=new b.Property("fill",this.attribute("fill").valueOrDefault("black"));f.attributes.stroke=new b.Property("stroke",this.attribute("stroke").valueOrDefault("none"));f.children=this.children;f.render(e);e.restore();if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){e.scale(1/e.lineWidth,1/e.lineWidth)}if(this.attribute("orient").valueOrDefault("auto")=="auto"){e.rotate(-g)}e.translate(-d.x,-d.y)}};b.Element.marker.prototype=new b.Element.ElementBase;b.Element.defs=function(c){this.base=b.Element.ElementBase;this.base(c);this.render=function(d){}};b.Element.defs.prototype=new b.Element.ElementBase;b.Element.GradientBase=function(d){this.base=b.Element.ElementBase;this.base(d);this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");this.stops=[];for(var c=0;c<this.children.length;c++){var e=this.children[c];if(e.type=="stop"){this.stops.push(e)}}this.getGradient=function(){};this.createGradient=function(u,k,f){var t=this;if(this.getHrefAttribute().hasValue()){t=this.getHrefAttribute().getDefinition()}var j=function(g){if(f.hasValue()){var w=new b.Property("color",g);return w.addOpacity(f.value).value}return g};var m=this.getGradient(u,k);if(m==null){return j(t.stops[t.stops.length-1].color)}for(var l=0;l<t.stops.length;l++){m.addColorStop(t.stops[l].offset,j(t.stops[l].color))}if(this.attribute("gradientTransform").hasValue()){var o=b.ViewPort.viewPorts[0];var q=new b.Element.rect();q.attributes.x=new b.Property("x",-b.MAX_VIRTUAL_PIXELS/3);q.attributes.y=new b.Property("y",-b.MAX_VIRTUAL_PIXELS/3);q.attributes.width=new b.Property("width",b.MAX_VIRTUAL_PIXELS);q.attributes.height=new b.Property("height",b.MAX_VIRTUAL_PIXELS);var s=new b.Element.g();s.attributes.transform=new b.Property("transform",this.attribute("gradientTransform").value);s.children=[q];var r=new b.Element.svg();r.attributes.x=new b.Property("x",0);r.attributes.y=new b.Property("y",0);r.attributes.width=new b.Property("width",o.width);r.attributes.height=new b.Property("height",o.height);r.children=[s];var n=document.createElement("canvas");n.width=o.width;n.height=o.height;var h=n.getContext("2d");h.fillStyle=m;r.render(h);return h.createPattern(n,"no-repeat")}return m}};b.Element.GradientBase.prototype=new b.Element.ElementBase;b.Element.linearGradient=function(c){this.base=b.Element.GradientBase;this.base(c);this.getGradient=function(d,h){var k=h.getBoundingBox();if(!this.attribute("x1").hasValue()&&!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue()){this.attribute("x1",true).value=0;this.attribute("y1",true).value=0;this.attribute("x2",true).value=1;this.attribute("y2",true).value=0}var f=(this.gradientUnits=="objectBoundingBox"?k.x()+k.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"));var j=(this.gradientUnits=="objectBoundingBox"?k.y()+k.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"));var e=(this.gradientUnits=="objectBoundingBox"?k.x()+k.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"));var g=(this.gradientUnits=="objectBoundingBox"?k.y()+k.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y"));if(f==e&&j==g){return null}return d.createLinearGradient(f,j,e,g)}};b.Element.linearGradient.prototype=new b.Element.GradientBase;b.Element.radialGradient=function(c){this.base=b.Element.GradientBase;this.base(c);this.getGradient=function(e,f){var k=f.getBoundingBox();if(!this.attribute("cx").hasValue()){this.attribute("cx",true).value="50%"}if(!this.attribute("cy").hasValue()){this.attribute("cy",true).value="50%"}if(!this.attribute("r").hasValue()){this.attribute("r",true).value="50%"}var d=(this.gradientUnits=="objectBoundingBox"?k.x()+k.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"));var l=(this.gradientUnits=="objectBoundingBox"?k.y()+k.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"));var j=d;var g=l;if(this.attribute("fx").hasValue()){j=(this.gradientUnits=="objectBoundingBox"?k.x()+k.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x"))}if(this.attribute("fy").hasValue()){g=(this.gradientUnits=="objectBoundingBox"?k.y()+k.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"))}var h=(this.gradientUnits=="objectBoundingBox"?(k.width()+k.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels());return e.createRadialGradient(j,g,0,d,l,h)}};b.Element.radialGradient.prototype=new b.Element.GradientBase;b.Element.stop=function(d){this.base=b.Element.ElementBase;this.base(d);this.offset=this.attribute("offset").numValue();if(this.offset<0){this.offset=0}if(this.offset>1){this.offset=1}var c=this.style("stop-color");if(this.style("stop-opacity").hasValue()){c=c.addOpacity(this.style("stop-opacity").value)}this.color=c.value};b.Element.stop.prototype=new b.Element.ElementBase;b.Element.AnimateBase=function(c){this.base=b.Element.ElementBase;this.base(c);b.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var e=this.attribute("attributeType").value;var d=this.attribute("attributeName").value;if(e=="CSS"){return this.parent.style(d,true)}return this.parent.attribute(d,true)};this.initialValue=null;this.initialUnits="";this.removed=false;this.calcValue=function(){return""};this.update=function(g){if(this.initialValue==null){this.initialValue=this.getProperty().value;this.initialUnits=this.getProperty().getUnits()}if(this.duration>this.maxDuration){if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite"){this.duration=0}else{if(this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed){this.removed=true;this.getProperty().value=this.initialValue;return true}else{return false}}}this.duration=this.duration+g;var d=false;if(this.begin<this.duration){var f=this.calcValue();if(this.attribute("type").hasValue()){var e=this.attribute("type").value;f=e+"("+f+")"}this.getProperty().value=f;d=true}return d};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");if(this.values.hasValue()){this.values.value=this.values.value.split(";")}this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var g=e.progress*(this.values.value.length-1);var f=Math.floor(g),d=Math.ceil(g);e.from=new b.Property("from",parseFloat(this.values.value[f]));e.to=new b.Property("to",parseFloat(this.values.value[d]));e.progress=(g-f)/(d-f)}else{e.from=this.from;e.to=this.to}return e}};b.Element.AnimateBase.prototype=new b.Element.ElementBase;b.Element.animate=function(c){this.base=b.Element.AnimateBase;this.base(c);this.calcValue=function(){var e=this.progress();var d=e.from.numValue()+(e.to.numValue()-e.from.numValue())*e.progress;return d+this.initialUnits}};b.Element.animate.prototype=new b.Element.AnimateBase;b.Element.animateColor=function(c){this.base=b.Element.AnimateBase;this.base(c);this.calcValue=function(){var h=this.progress();var k=new RGBColor(h.from.value);var j=new RGBColor(h.to.value);if(k.ok&&j.ok){var f=k.r+(j.r-k.r)*h.progress;var e=k.g+(j.g-k.g)*h.progress;var d=k.b+(j.b-k.b)*h.progress;return"rgb("+parseInt(f,10)+","+parseInt(e,10)+","+parseInt(d,10)+")"}return this.attribute("from").value}};b.Element.animateColor.prototype=new b.Element.AnimateBase;b.Element.animateTransform=function(c){this.base=b.Element.AnimateBase;this.base(c);this.calcValue=function(){var f=this.progress();var h=b.ToNumberArray(f.from.value);var g=b.ToNumberArray(f.to.value);var e="";for(var d=0;d<h.length;d++){e+=h[d]+(g[d]-h[d])*f.progress+" "}return e}};b.Element.animateTransform.prototype=new b.Element.animate;b.Element.font=function(d){this.base=b.Element.ElementBase;this.base(d);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isRTL=false;this.isArabic=false;this.fontFace=null;this.missingGlyph=null;this.glyphs=[];for(var c=0;c<this.children.length;c++){var e=this.children[c];if(e.type=="font-face"){this.fontFace=e;if(e.style("font-family").hasValue()){b.Definitions[e.style("font-family").value]=this}}else{if(e.type=="missing-glyph"){this.missingGlyph=e}else{if(e.type=="glyph"){if(e.arabicForm!=""){this.isRTL=true;this.isArabic=true;if(typeof(this.glyphs[e.unicode])=="undefined"){this.glyphs[e.unicode]=[]}this.glyphs[e.unicode][e.arabicForm]=e}else{this.glyphs[e.unicode]=e}}}}}};b.Element.font.prototype=new b.Element.ElementBase;b.Element.fontface=function(c){this.base=b.Element.ElementBase;this.base(c);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};b.Element.fontface.prototype=new b.Element.ElementBase;b.Element.missingglyph=function(c){this.base=b.Element.path;this.base(c);this.horizAdvX=0};b.Element.missingglyph.prototype=new b.Element.path;b.Element.glyph=function(c){this.base=b.Element.path;this.base(c);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};b.Element.glyph.prototype=new b.Element.path;b.Element.text=function(c){this.captureTextNodes=true;this.base=b.Element.RenderedElementBase;this.base(c);this.baseSetContext=this.setContext;this.setContext=function(d){this.baseSetContext(d);if(this.style("dominant-baseline").hasValue()){d.textBaseline=this.style("dominant-baseline").value}if(this.style("alignment-baseline").hasValue()){d.textBaseline=this.style("alignment-baseline").value}};this.getBoundingBox=function(){return new b.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)};this.renderChildren=function(d){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(d,this,0);for(var e=0;e<this.children.length;e++){this.renderChild(d,this,e)}};this.getAnchorDelta=function(e,j,h){var d=this.style("text-anchor").valueOrDefault("start");if(d!="start"){var g=0;for(var f=h;f<j.children.length;f++){var k=j.children[f];if(f>h&&k.attribute("x").hasValue()){break}g+=k.measureTextRecursive(e)}return -1*(d=="end"?g:g/2)}return 0};this.renderChild=function(d,f,e){var g=f.children[e];if(g.attribute("x").hasValue()){g.x=g.attribute("x").toPixels("x")+this.getAnchorDelta(d,f,e)}else{if(this.attribute("dx").hasValue()){this.x+=this.attribute("dx").toPixels("x")}if(g.attribute("dx").hasValue()){this.x+=g.attribute("dx").toPixels("x")}g.x=this.x}this.x=g.x+g.measureText(d);if(g.attribute("y").hasValue()){g.y=g.attribute("y").toPixels("y")}else{if(this.attribute("dy").hasValue()){this.y+=this.attribute("dy").toPixels("y")}if(g.attribute("dy").hasValue()){this.y+=g.attribute("dy").toPixels("y")}g.y=this.y}this.y=g.y;g.render(d);for(var e=0;e<g.children.length;e++){this.renderChild(d,g,e)}}};b.Element.text.prototype=new b.Element.RenderedElementBase;b.Element.TextElementBase=function(c){this.base=b.Element.RenderedElementBase;this.base(c);this.getGlyph=function(d,h,e){var j=h[e];var f=null;if(d.isArabic){var g="isolated";if((e==0||h[e-1]==" ")&&e<h.length-2&&h[e+1]!=" "){g="terminal"}if(e>0&&h[e-1]!=" "&&e<h.length-2&&h[e+1]!=" "){g="medial"}if(e>0&&h[e-1]!=" "&&(e==h.length-1||h[e+1]==" ")){g="initial"}if(typeof(d.glyphs[j])!="undefined"){f=d.glyphs[j][g];if(f==null&&d.glyphs[j].type=="glyph"){f=d.glyphs[j]}}}else{f=d.glyphs[j]}if(f==null){f=d.missingGlyph}return f};this.renderChildren=function(l){var j=this.parent.style("font-family").getDefinition();if(j!=null){var m=this.parent.style("font-size").numValueOrDefault(b.Font.Parse(b.ctx.font).fontSize);var f=this.parent.style("font-style").valueOrDefault(b.Font.Parse(b.ctx.font).fontStyle);var k=this.getText();if(j.isRTL){k=k.split("").reverse().join("")}var n=b.ToNumberArray(this.parent.attribute("dx").value);for(var g=0;g<k.length;g++){var h=this.getGlyph(j,k,g);var e=m/j.fontFace.unitsPerEm;l.translate(this.x,this.y);l.scale(e,-e);var d=l.lineWidth;l.lineWidth=l.lineWidth*j.fontFace.unitsPerEm/m;if(f=="italic"){l.transform(1,0,0.4,1,0,0)}h.render(l);if(f=="italic"){l.transform(1,0,-0.4,1,0,0)}l.lineWidth=d;l.scale(1/e,-1/e);l.translate(-this.x,-this.y);this.x+=m*(h.horizAdvX||j.horizAdvX)/j.fontFace.unitsPerEm;if(typeof(n[g])!="undefined"&&!isNaN(n[g])){this.x+=n[g]}}return}if(l.fillStyle!=""){l.fillText(b.compressSpaces(this.getText()),this.x,this.y)}if(l.strokeStyle!=""){l.strokeText(b.compressSpaces(this.getText()),this.x,this.y)}};this.getText=function(){};this.measureTextRecursive=function(d){var f=this.measureText(d);for(var e=0;e<this.children.length;e++){f+=this.children[e].measureTextRecursive(d)}return f};this.measureText=function(l){var j=this.parent.style("font-family").getDefinition();if(j!=null){var m=this.parent.style("font-size").numValueOrDefault(b.Font.Parse(b.ctx.font).fontSize);var e=0;var k=this.getText();if(j.isRTL){k=k.split("").reverse().join("")}var n=b.ToNumberArray(this.parent.attribute("dx").value);for(var g=0;g<k.length;g++){var h=this.getGlyph(j,k,g);e+=(h.horizAdvX||j.horizAdvX)*m/j.fontFace.unitsPerEm;if(typeof(n[g])!="undefined"&&!isNaN(n[g])){e+=n[g]}}return e}var d=b.compressSpaces(this.getText());if(!l.measureText){return d.length*10}l.save();this.setContext(l);var f=l.measureText(d).width;l.restore();return f}};b.Element.TextElementBase.prototype=new b.Element.RenderedElementBase;b.Element.tspan=function(c){this.captureTextNodes=true;this.base=b.Element.TextElementBase;this.base(c);this.text=c.nodeValue||c.text||"";this.getText=function(){return this.text}};b.Element.tspan.prototype=new b.Element.TextElementBase;b.Element.tref=function(c){this.base=b.Element.TextElementBase;this.base(c);this.getText=function(){var d=this.getHrefAttribute().getDefinition();if(d!=null){return d.children[0].getText()}}};b.Element.tref.prototype=new b.Element.TextElementBase;b.Element.a=function(d){this.base=b.Element.TextElementBase;this.base(d);this.hasText=true;for(var c=0;c<d.childNodes.length;c++){if(d.childNodes[c].nodeType!=3){this.hasText=false}}this.text=this.hasText?d.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var h=new b.Property("fontSize",b.Font.Parse(b.ctx.font).fontSize);b.Mouse.checkBoundingBox(this,new b.BoundingBox(this.x,this.y-h.toPixels("y"),this.x+this.measureText(e),this.y))}else{var f=new b.Element.g();f.children=this.children;f.parent=this;f.render(e)}};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){b.ctx.canvas.style.cursor="pointer"}};b.Element.a.prototype=new b.Element.TextElementBase;b.Element.image=function(e){this.base=b.Element.RenderedElementBase;this.base(e);var d=this.getHrefAttribute().value;var f=d.match(/\.svg$/);b.Images.push(this);this.loaded=false;if(!f){this.img=document.createElement("img");var c=this;this.img.onload=function(){c.loaded=true};this.img.onerror=function(){if(typeof(console)!="undefined"){console.log('ERROR: image "'+d+'" not found');c.loaded=true}};this.img.src=d}else{this.img=b.ajax(d);this.loaded=true}this.renderChildren=function(j){var h=this.attribute("x").toPixels("x");var l=this.attribute("y").toPixels("y");var k=this.attribute("width").toPixels("x");var g=this.attribute("height").toPixels("y");if(k==0||g==0){return}j.save();if(f){j.drawSvg(this.img,h,l,k,g)}else{j.translate(h,l);b.AspectRatio(j,this.attribute("preserveAspectRatio").value,k,this.img.width,g,this.img.height,0,0);j.drawImage(this.img,0,0)}j.restore()};this.getBoundingBox=function(){var h=this.attribute("x").toPixels("x");var k=this.attribute("y").toPixels("y");var j=this.attribute("width").toPixels("x");var g=this.attribute("height").toPixels("y");return new b.BoundingBox(h,k,h+j,k+g)}};b.Element.image.prototype=new b.Element.RenderedElementBase;b.Element.g=function(c){this.base=b.Element.RenderedElementBase;this.base(c);this.getBoundingBox=function(){var e=new b.BoundingBox();for(var d=0;d<this.children.length;d++){e.addBoundingBox(this.children[d].getBoundingBox())}return e}};b.Element.g.prototype=new b.Element.RenderedElementBase;b.Element.symbol=function(c){this.base=b.Element.RenderedElementBase;this.base(c);this.baseSetContext=this.setContext;this.setContext=function(e){this.baseSetContext(e);if(this.attribute("viewBox").hasValue()){var f=b.ToNumberArray(this.attribute("viewBox").value);var d=f[0];var g=f[1];width=f[2];height=f[3];b.AspectRatio(e,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,d,g);b.ViewPort.SetCurrent(f[2],f[3])}}};b.Element.symbol.prototype=new b.Element.RenderedElementBase;b.Element.style=function(y){this.base=b.Element.ElementBase;this.base(y);var t="";for(var B=0;B<y.childNodes.length;B++){t+=y.childNodes[B].nodeValue}t=t.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");t=b.compressSpaces(t);var r=t.split("}");for(var B=0;B<r.length;B++){if(b.trim(r[B])!=""){var F=r[B].split("{");var g=F[0].split(",");var c=F[1].split(";");for(var A=0;A<g.length;A++){var o=b.trim(g[A]);if(o!=""){var e={};for(var z=0;z<c.length;z++){var d=c[z].indexOf(":");var G=c[z].substr(0,d);var x=c[z].substr(d+1,c[z].length-d);if(G!=null&&x!=null){e[b.trim(G)]=new b.Property(b.trim(G),b.trim(x))}}b.Styles[o]=e;if(o=="@font-face"){var D=e["font-family"].value.replace(/"/g,"");var q=e.src.value.split(",");for(var u=0;u<q.length;u++){if(q[u].indexOf('format("svg")')>0){var m=q[u].indexOf("url");var l=q[u].indexOf(")",m);var h=q[u].substr(m+5,l-m-6);var E=b.parseXml(b.ajax(h));var n=E.getElementsByTagName("font");for(var C=0;C<n.length;C++){var w=b.CreateElement(n[C]);b.Definitions[D]=w}}}}}}}}};b.Element.style.prototype=new b.Element.ElementBase;b.Element.use=function(c){this.base=b.Element.RenderedElementBase;this.base(c);this.baseSetContext=this.setContext;this.setContext=function(d){this.baseSetContext(d);if(this.attribute("x").hasValue()){d.translate(this.attribute("x").toPixels("x"),0)}if(this.attribute("y").hasValue()){d.translate(0,this.attribute("y").toPixels("y"))}};this.getDefinition=function(){var d=this.getHrefAttribute().getDefinition();if(this.attribute("width").hasValue()){d.attribute("width",true).value=this.attribute("width").value}if(this.attribute("height").hasValue()){d.attribute("height",true).value=this.attribute("height").value}return d};this.path=function(d){var e=this.getDefinition();if(e!=null){e.path(d)}};this.getBoundingBox=function(){var d=this.getDefinition();if(d!=null){return d.getBoundingBox()}};this.renderChildren=function(d){var f=this.getDefinition();if(f!=null){var e=f.parent;f.parent=null;f.render(d);f.parent=e}}};b.Element.use.prototype=new b.Element.RenderedElementBase;b.Element.mask=function(c){this.base=b.Element.ElementBase;this.base(c);this.apply=function(o,f){var m=this.attribute("x").toPixels("x");var l=this.attribute("y").toPixels("y");var d=this.attribute("width").toPixels("x");var n=this.attribute("height").toPixels("y");if(d==0&&n==0){var h=new b.BoundingBox();for(var g=0;g<this.children.length;g++){h.addBoundingBox(this.children[g].getBoundingBox())}var m=Math.floor(h.x1);var l=Math.floor(h.y1);var d=Math.floor(h.width());var n=Math.floor(h.height())}var r=f.attribute("mask").value;f.attribute("mask").value="";var k=document.createElement("canvas");k.width=m+d;k.height=l+n;var q=k.getContext("2d");this.renderChildren(q);var j=document.createElement("canvas");j.width=m+d;j.height=l+n;var e=j.getContext("2d");f.render(e);e.globalCompositeOperation="destination-in";e.fillStyle=q.createPattern(k,"no-repeat");e.fillRect(0,0,m+d,l+n);o.fillStyle=e.createPattern(j,"no-repeat");o.fillRect(0,0,m+d,l+n);f.attribute("mask").value=r};this.render=function(d){}};b.Element.mask.prototype=new b.Element.ElementBase;b.Element.clipPath=function(c){this.base=b.Element.ElementBase;this.base(c);this.apply=function(d){for(var f=0;f<this.children.length;f++){var g=this.children[f];if(typeof(g.path)!="undefined"){var e=null;if(g.attribute("transform").hasValue()){e=new b.Transform(g.attribute("transform").value);e.apply(d)}g.path(d);d.clip();if(e){e.unapply(d)}}}};this.render=function(d){}};b.Element.clipPath.prototype=new b.Element.ElementBase;b.Element.filter=function(c){this.base=b.Element.ElementBase;this.base(c);this.apply=function(s,j){var k=j.getBoundingBox();var o=Math.floor(k.x1);var m=Math.floor(k.y1);var e=Math.floor(k.width());var r=Math.floor(k.height());var f=j.style("filter").value;j.style("filter").value="";var q=0,n=0;for(var h=0;h<this.children.length;h++){var d=this.children[h].extraFilterDistance||0;q=Math.max(q,d);n=Math.max(n,d)}var l=document.createElement("canvas");l.width=e+2*q;l.height=r+2*n;var g=l.getContext("2d");g.translate(-o+q,-m+n);j.render(g);for(var h=0;h<this.children.length;h++){this.children[h].apply(g,0,0,e+2*q,r+2*n)}s.drawImage(l,0,0,e+2*q,r+2*n,o-q,m-n,e+2*q,r+2*n);j.style("filter",true).value=f};this.render=function(d){}};b.Element.filter.prototype=new b.Element.ElementBase;b.Element.feMorphology=function(c){this.base=b.Element.ElementBase;this.base(c);this.apply=function(f,e,h,g,d){}};b.Element.feMorphology.prototype=new b.Element.ElementBase;b.Element.feColorMatrix=function(e){this.base=b.Element.ElementBase;this.base(e);function d(h,g,l,k,f,j){return h[l*k*4+g*4+j]}function c(h,g,m,k,f,j,l){h[m*k*4+g*4+j]=l}this.apply=function(s,n,m,h,q){var k=s.getImageData(0,0,h,q);for(var m=0;m<q;m++){for(var n=0;n<h;n++){var f=d(k.data,n,m,h,q,0);var j=d(k.data,n,m,h,q,1);var l=d(k.data,n,m,h,q,2);var o=(f+j+l)/3;c(k.data,n,m,h,q,0,o);c(k.data,n,m,h,q,1,o);c(k.data,n,m,h,q,2,o)}}s.clearRect(0,0,h,q);s.putImageData(k,0,0)}};b.Element.feColorMatrix.prototype=new b.Element.ElementBase;b.Element.feGaussianBlur=function(c){this.base=b.Element.ElementBase;this.base(c);this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.extraFilterDistance=this.blurRadius;this.apply=function(f,e,h,g,d){if(typeof(stackBlurCanvasRGBA)=="undefined"){if(typeof(console)!="undefined"){console.log("ERROR: StackBlur.js must be included for blur to work")}return}f.canvas.id=b.UniqueId();f.canvas.style.display="none";document.body.appendChild(f.canvas);stackBlurCanvasRGBA(f.canvas.id,e,h,g,d,this.blurRadius);document.body.removeChild(f.canvas)}};b.Element.feGaussianBlur.prototype=new b.Element.ElementBase;b.Element.title=function(c){};b.Element.title.prototype=new b.Element.ElementBase;b.Element.desc=function(c){};b.Element.desc.prototype=new b.Element.ElementBase;b.Element.MISSING=function(c){if(typeof(console)!="undefined"){console.log("ERROR: Element '"+c.nodeName+"' not yet implemented.")}};b.Element.MISSING.prototype=new b.Element.ElementBase;b.CreateElement=function(d){var c=d.nodeName.replace(/^[^:]+:/,"");c=c.replace(/\-/g,"");var f=null;if(typeof(b.Element[c])!="undefined"){f=new b.Element[c](d)}else{f=new b.Element.MISSING(d)}f.type=d.nodeName;return f};b.load=function(c,d){b.loadXml(c,b.ajax(d))};b.loadXml=function(c,d){b.loadXmlDoc(c,b.parseXml(d))};b.loadXmlDoc=function(g,k){b.init(g);var f=function(m){var l=g.canvas;while(l){m.x-=l.offsetLeft;m.y-=l.offsetTop;l=l.offsetParent}if(window.scrollX){m.x+=window.scrollX}if(window.scrollY){m.y+=window.scrollY}return m};if(b.opts.ignoreMouse!=true){g.canvas.onclick=function(m){var l=f(new b.Point(m!=null?m.clientX:event.clientX,m!=null?m.clientY:event.clientY));b.Mouse.onclick(l.x,l.y)};g.canvas.onmousemove=function(m){var l=f(new b.Point(m!=null?m.clientX:event.clientX,m!=null?m.clientY:event.clientY));b.Mouse.onmousemove(l.x,l.y)}}var j=b.CreateElement(k.documentElement);j.root=true;var h=true;var d=function(){b.ViewPort.Clear();if(g.canvas.parentNode){b.ViewPort.SetCurrent(g.canvas.parentNode.clientWidth,g.canvas.parentNode.clientHeight)}if(b.opts.ignoreDimensions!=true){if(j.style("width").hasValue()){g.canvas.width=j.style("width").toPixels("x");g.canvas.style.width=g.canvas.width+"px"}if(j.style("height").hasValue()){g.canvas.height=j.style("height").toPixels("y");g.canvas.style.height=g.canvas.height+"px"}}var m=g.canvas.clientWidth||g.canvas.width;var l=g.canvas.clientHeight||g.canvas.height;if(b.opts.ignoreDimensions==true&&j.style("width").hasValue()&&j.style("height").hasValue()){m=j.style("width").toPixels("x");l=j.style("height").toPixels("y")}b.ViewPort.SetCurrent(m,l);if(b.opts.offsetX!=null){j.attribute("x",true).value=b.opts.offsetX}if(b.opts.offsetY!=null){j.attribute("y",true).value=b.opts.offsetY}if(b.opts.scaleWidth!=null&&b.opts.scaleHeight!=null){var n=1,e=1,o=b.ToNumberArray(j.attribute("viewBox").value);if(j.attribute("width").hasValue()){n=j.attribute("width").toPixels("x")/b.opts.scaleWidth}else{if(!isNaN(o[2])){n=o[2]/b.opts.scaleWidth}}if(j.attribute("height").hasValue()){e=j.attribute("height").toPixels("y")/b.opts.scaleHeight}else{if(!isNaN(o[3])){e=o[3]/b.opts.scaleHeight}}j.attribute("width",true).value=b.opts.scaleWidth;j.attribute("height",true).value=b.opts.scaleHeight;j.attribute("viewBox",true).value="0 0 "+(m*n)+" "+(l*e);j.attribute("preserveAspectRatio",true).value="none"}if(b.opts.ignoreClear!=true){g.clearRect(0,0,m,l)}j.render(g);if(h){h=false;if(typeof(b.opts.renderCallback)=="function"){b.opts.renderCallback(k)}}};var c=true;if(b.ImagesLoaded()){c=false;d()}b.intervalID=setInterval(function(){var l=false;if(c&&b.ImagesLoaded()){c=false;l=true}if(b.opts.ignoreMouse!=true){l=l|b.Mouse.hasEvents()}if(b.opts.ignoreAnimation!=true){for(var e=0;e<b.Animations.length;e++){l=l|b.Animations[e].update(1000/b.FRAMERATE)}}if(typeof(b.opts.forceRedraw)=="function"){if(b.opts.forceRedraw()==true){l=true}}if(l){d();b.Mouse.runEvents()}},1000/b.FRAMERATE)};b.stop=function(){if(b.intervalID){clearInterval(b.intervalID)}};b.Mouse=new (function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(c,d){this.events.push({type:"onclick",x:c,y:d,run:function(f){if(f.onclick){f.onclick()}}})};this.onmousemove=function(c,d){this.events.push({type:"onmousemove",x:c,y:d,run:function(f){if(f.onmousemove){f.onmousemove()}}})};this.eventElements=[];this.checkPath=function(f,c){for(var d=0;d<this.events.length;d++){var g=this.events[d];if(c.isPointInPath&&c.isPointInPath(g.x,g.y)){this.eventElements[d]=f}}};this.checkBoundingBox=function(d,g){for(var c=0;c<this.events.length;c++){var f=this.events[c];if(g.isPointInBox(f.x,f.y)){this.eventElements[c]=d}}};this.runEvents=function(){b.ctx.canvas.style.cursor="";for(var d=0;d<this.events.length;d++){var f=this.events[d];var c=this.eventElements[d];while(c){f.run(c);c=c.parent}}this.events=[];this.eventElements=[]}});return b}})();if(typeof(CanvasRenderingContext2D)!="undefined"){CanvasRenderingContext2D.prototype.drawSvg=function(d,b,a,c,e){canvg(this.canvas,d,{ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,offsetX:b,offsetY:a,scaleWidth:c,scaleHeight:e})}}function X2JS(y){var s="1.1.5";y=y||{};h();t();function h(){if(y.escapeMode===undefined){y.escapeMode=true}y.attributePrefix=y.attributePrefix||"_";y.arrayAccessForm=y.arrayAccessForm||"none";y.emptyNodeForm=y.emptyNodeForm||"text";if(y.enableToStringFunc===undefined){y.enableToStringFunc=true}y.arrayAccessFormPaths=y.arrayAccessFormPaths||[];if(y.skipEmptyTextNodesForObj===undefined){y.skipEmptyTextNodesForObj=true}if(y.stripWhitespaces===undefined){y.stripWhitespaces=true}y.datetimeAccessFormPaths=y.datetimeAccessFormPaths||[]}var g={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function t(){function A(C){var B=String(C);if(B.length===1){B="0"+B}return B}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}}if(typeof Date.prototype.toISOString!=="function"){Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+A(this.getUTCMonth()+1)+"-"+A(this.getUTCDate())+"T"+A(this.getUTCHours())+":"+A(this.getUTCMinutes())+":"+A(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}}function w(A){var B=A.localName;if(B==null){B=A.baseName}if(B==null||B==""){B=A.nodeName}return B}function q(A){return A.prefix}function r(A){if(typeof(A)=="string"){return A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}else{return A}}function k(A){return A.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function m(E,B,D){switch(y.arrayAccessForm){case"property":if(!(E[B] instanceof Array)){E[B+"_asArray"]=[E[B]]}else{E[B+"_asArray"]=E[B]}break}if(!(E[B] instanceof Array)&&y.arrayAccessFormPaths.length>0){var A=0;for(;A<y.arrayAccessFormPaths.length;A++){var C=y.arrayAccessFormPaths[A];if(typeof C==="string"){if(C==D){break}}else{if(C instanceof RegExp){if(C.test(D)){break}}else{if(typeof C==="function"){if(C(E,B,D)){break}}}}}if(A!=y.arrayAccessFormPaths.length){E[B]=[E[B]]}}}function a(F){var D=F.split(/[-T:+Z]/g);var E=new Date(D[0],D[1]-1,D[2]);var C=D[5].split(".");E.setHours(D[3],D[4],C[0]);if(C.length>1){E.setMilliseconds(C[1])}if(D[6]&&D[7]){var B=D[6]*60+Number(D[7]);var A=/\d\d-\d\d:\d\d$/.test(F)?"-":"+";B=0+(A=="-"?-1*B:B);E.setMinutes(E.getMinutes()-B-E.getTimezoneOffset())}else{if(F.indexOf("Z",F.length-1)!==-1){E=new Date(Date.UTC(E.getFullYear(),E.getMonth(),E.getDate(),E.getHours(),E.getMinutes(),E.getSeconds(),E.getMilliseconds()))}}return E}function o(D,B,C){if(y.datetimeAccessFormPaths.length>0){var E=C.split(".#")[0];var A=0;for(;A<y.datetimeAccessFormPaths.length;A++){var F=y.datetimeAccessFormPaths[A];if(typeof F==="string"){if(F==E){break}}else{if(F instanceof RegExp){if(F.test(E)){break}}else{if(typeof F==="function"){if(F(obj,B,E)){break}}}}}if(A!=y.datetimeAccessFormPaths.length){return a(D)}else{return D}}else{return D}}function z(C,H){if(C.nodeType==g.DOCUMENT_NODE){var I=new Object;var A=C.childNodes;for(var J=0;J<A.length;J++){var B=A.item(J);if(B.nodeType==g.ELEMENT_NODE){var G=w(B);I[G]=z(B,G)}}return I}else{if(C.nodeType==g.ELEMENT_NODE){var I=new Object;I.__cnt=0;var A=C.childNodes;for(var J=0;J<A.length;J++){var B=A.item(J);var G=w(B);if(B.nodeType!=g.COMMENT_NODE){I.__cnt++;if(I[G]==null){I[G]=z(B,H+"."+G);m(I,G,H+"."+G)}else{if(I[G]!=null){if(!(I[G] instanceof Array)){I[G]=[I[G]];m(I,G,H+"."+G)}}(I[G])[I[G].length]=z(B,H+"."+G)}}}for(var D=0;D<C.attributes.length;D++){var E=C.attributes.item(D);I.__cnt++;I[y.attributePrefix+E.name]=E.value}var F=q(C);if(F!=null&&F!=""){I.__cnt++;I.__prefix=F}if(I["#text"]!=null){I.__text=I["#text"];if(I.__text instanceof Array){I.__text=I.__text.join("\n")}if(y.escapeMode){I.__text=k(I.__text)}if(y.stripWhitespaces){I.__text=I.__text.trim()}delete I["#text"];if(y.arrayAccessForm=="property"){delete I["#text_asArray"]}I.__text=o(I.__text,G,H+"."+G)}if(I["#cdata-section"]!=null){I.__cdata=I["#cdata-section"];delete I["#cdata-section"];if(y.arrayAccessForm=="property"){delete I["#cdata-section_asArray"]}}if(I.__cnt==1&&I.__text!=null){I=I.__text}else{if(I.__cnt==0&&y.emptyNodeForm=="text"){I=""}else{if(I.__cnt>1&&I.__text!=null&&y.skipEmptyTextNodesForObj){if((y.stripWhitespaces&&I.__text=="")||(I.__text.trim()=="")){delete I.__text}}}}delete I.__cnt;if(y.enableToStringFunc&&(I.__text!=null||I.__cdata!=null)){I.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}}return I}else{if(C.nodeType==g.TEXT_NODE||C.nodeType==g.CDATA_SECTION_NODE){return C.nodeValue}}}}function n(H,E,G,B){var D="<"+((H!=null&&H.__prefix!=null)?(H.__prefix+":"):"")+E;if(G!=null){for(var F=0;F<G.length;F++){var C=G[F];var A=H[C];if(y.escapeMode){A=r(A)}D+=" "+C.substr(y.attributePrefix.length)+"='"+A+"'"}}if(!B){D+=">"}else{D+="/>"}return D}function j(B,A){return"</"+(B.__prefix!=null?(B.__prefix+":"):"")+A+">"}function u(B,A){return B.indexOf(A,B.length-A.length)!==-1}function x(B,A){if((y.arrayAccessForm=="property"&&u(A.toString(),("_asArray")))||A.toString().indexOf(y.attributePrefix)==0||A.toString().indexOf("__")==0||(B[A] instanceof Function)){return true}else{return false}}function l(C){var B=0;if(C instanceof Object){for(var A in C){if(x(C,A)){continue}B++}}return B}function b(C){var B=[];if(C instanceof Object){for(var A in C){if(A.toString().indexOf("__")==-1&&A.toString().indexOf(y.attributePrefix)==0){B.push(A)}}}return B}function f(B){var A="";if(B.__cdata!=null){A+="<![CDATA["+B.__cdata+"]]>"}if(B.__text!=null){if(y.escapeMode){A+=r(B.__text)}else{A+=B.__text}}return A}function c(B){var A="";if(B instanceof Object){A+=f(B)}else{if(B!=null){if(y.escapeMode){A+=r(B)}else{A+=B}}}return A}function e(C,E,D){var A="";if(C.length==0){A+=n(C,E,D,true)}else{for(var B=0;B<C.length;B++){A+=n(C[B],E,b(C[B]),false);A+=d(C[B]);A+=j(C[B],E)}}return A}function d(G){var A="";var E=l(G);if(E>0){for(var D in G){if(x(G,D)){continue}var C=G[D];var F=b(C);if(C==null||C==undefined){A+=n(C,D,F,true)}else{if(C instanceof Object){if(C instanceof Array){A+=e(C,D,F)}else{if(C instanceof Date){A+=n(C,D,F,false);A+=C.toISOString();A+=j(C,D)}else{var B=l(C);if(B>0||C.__text!=null||C.__cdata!=null){A+=n(C,D,F,false);A+=d(C);A+=j(C,D)}else{A+=n(C,D,F,true)}}}}else{A+=n(C,D,F,false);A+=c(C);A+=j(C,D)}}}}A+=c(G);return A}this.parseXmlString=function(C){var E=window.ActiveXObject||"ActiveXObject" in window;if(C===undefined){return null}var D;if(window.DOMParser){var F=new window.DOMParser();var A=null;if(!E){try{A=F.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(B){A=null}}try{D=F.parseFromString(C,"text/xml");if(A!=null&&D.getElementsByTagNameNS(A,"parsererror").length>0){D=null}}catch(B){D=null}}else{if(C.indexOf("<?")==0){C=C.substr(C.indexOf("?>")+2)}D=new ActiveXObject("Microsoft.XMLDOM");D.async="false";D.loadXML(C)}return D};this.asArray=function(A){if(A instanceof Array){return A}else{return[A]}};this.toXmlDateTime=function(A){if(A instanceof Date){return A.toISOString()}else{if(typeof(A)==="number"){return new Date(A).toISOString()}else{return null}}};this.asDateTime=function(A){if(typeof(A)=="string"){return a(A)}else{return A}};this.xml2json=function(A){return z(A)};this.xml_str2json=function(A){var B=this.parseXmlString(A);if(B!=null){return this.xml2json(B)}else{return null}};this.json2xml_str=function(A){return d(A)};this.json2xml=function(B){var A=this.json2xml_str(B);return this.parseXmlString(A)};this.getVersion=function(){return s}}(function(a){var b=["setTimeout","setInterval","XMLHttpRequest","navigator","location","clearTimeout","clearInterval","applicationCache","importScripts","Worker","console","btoa","atob","unescape","encodeURIComponent","crypto","Uint8Array"];function c(g){var d={};var f={};for(p in b){f[b[p]]=true}for(p in a){if(!f[p]){d[p]="[[ Can't use window context in web worker! ]]"}}for(p in this){d[p]=this[p]}d.self=this;d.doEvents=function(h){setTimeout(function(){if(h){h()}},0)};var e=(new Function("with(this) { (function(){"+g+"})(); }"));e.call(d)}a.FakeWorker=function(d){var g=this;var f=false;var h={};this.addEventListener=function(o,n){if(!h[o]){h[o]=[]}h[o].push(n)};this.addEventListener("message",function(n){if(typeof g.onmessage!=="undefined"){g.onmessage(n)}});function m(){var n={};this.addEventListener=function(q,o){if(!n[q]){n[q]=[]}n[q].push(o)};this.addEventListener("message",function(o){if(typeof g.onmessage!=="undefined"){g.onmessage(o)}});this.postMessage=function(o){k(h,"message",o)};this.__processPostMessage=function(o){k(n,"message",o)};this.close=function(){}}var j=new m();this.postMessage=function(n){e(function(){j.__processPostMessage(n)})};this.terminate=function(){};function e(o){(function n(){if(f){o();return}setTimeout(n,50)})()}function k(q,s,o){var n={data:o};if(!q[s]){return}for(var r=0;r<q[s].length;r++){q[s][r](n)}}var l=d;c.call(j,l);f=true}})(window);var JSEncryptExports={};(function(ap){var bA;var o=244837814094590;var aS=((o&16777215)==15715070);function bc(z,t,bS){if(z!=null){if("number"==typeof z){this.fromNumber(z,t,bS)}else{if(t==null&&"string"!=typeof z){this.fromString(z,256)}else{this.fromString(z,t)}}}}function bj(){return new bc(null)}function a4(bU,t,z,bT,bW,bV){while(--bV>=0){var bS=t*this[bU++]+z[bT]+bW;bW=Math.floor(bS/67108864);z[bT++]=bS&67108863}return bW}function a3(bU,bZ,b0,bT,bX,t){var bW=bZ&32767,bY=bZ>>15;while(--t>=0){var bS=this[bU]&32767;var bV=this[bU++]>>15;var z=bY*bS+bV*bW;bS=bW*bS+((z&32767)<<15)+b0[bT]+(bX&1073741823);bX=(bS>>>30)+(z>>>15)+bY*bV+(bX>>>30);b0[bT++]=bS&1073741823}return bX}function a2(bU,bZ,b0,bT,bX,t){var bW=bZ&16383,bY=bZ>>14;while(--t>=0){var bS=this[bU]&16383;var bV=this[bU++]>>14;var z=bY*bS+bV*bW;bS=bW*bS+((z&16383)<<14)+b0[bT]+bX;bX=(bS>>28)+(z>>14)+bY*bV;b0[bT++]=bS&268435455}return bX}if(aS&&(navigator.appName=="Microsoft Internet Explorer")){bc.prototype.am=a3;bA=30}else{if(aS&&(navigator.appName!="Netscape")){bc.prototype.am=a4;bA=26}else{bc.prototype.am=a2;bA=28}}bc.prototype.DB=bA;bc.prototype.DM=((1<<bA)-1);bc.prototype.DV=(1<<bA);var bM=52;bc.prototype.FV=Math.pow(2,bM);bc.prototype.F1=bM-bA;bc.prototype.F2=2*bA-bM;var a="0123456789abcdefghijklmnopqrstuvwxyz";var g=new Array();var aE,G;aE="0".charCodeAt(0);for(G=0;G<=9;++G){g[aE++]=G}aE="a".charCodeAt(0);for(G=10;G<36;++G){g[aE++]=G}aE="A".charCodeAt(0);for(G=10;G<36;++G){g[aE++]=G}function Y(t){return a.charAt(t)}function aU(z,t){var bS=g[z.charCodeAt(t)];return(bS==null)?-1:bS}function d(z){for(var t=this.t-1;t>=0;--t){z[t]=this[t]}z.t=this.t;z.s=this.s}function h(t){this.t=1;this.s=(t<0)?-1:0;if(t>0){this[0]=t}else{if(t<-1){this[0]=t+DV}else{this.t=0}}}function bf(t){var z=bj();z.fromInt(t);return z}function bE(bW,z){var bT;if(z==16){bT=4}else{if(z==8){bT=3}else{if(z==256){bT=8}else{if(z==2){bT=1}else{if(z==32){bT=5}else{if(z==4){bT=2}else{this.fromRadix(bW,z);return}}}}}}this.t=0;this.s=0;var bV=bW.length,bS=false,bU=0;while(--bV>=0){var t=(bT==8)?bW[bV]&255:aU(bW,bV);if(t<0){if(bW.charAt(bV)=="-"){bS=true}continue}bS=false;if(bU==0){this[this.t++]=t}else{if(bU+bT>this.DB){this[this.t-1]|=(t&((1<<(this.DB-bU))-1))<<bU;this[this.t++]=(t>>(this.DB-bU))}else{this[this.t-1]|=t<<bU}}bU+=bT;if(bU>=this.DB){bU-=this.DB}}if(bT==8&&(bW[0]&128)!=0){this.s=-1;if(bU>0){this[this.t-1]|=((1<<(this.DB-bU))-1)<<bU}}this.clamp();if(bS){bc.ZERO.subTo(this,this)}}function bw(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t){--this.t}}function x(z){if(this.s<0){return"-"+this.negate().toString(z)}var bS;if(z==16){bS=4}else{if(z==8){bS=3}else{if(z==2){bS=1}else{if(z==32){bS=5}else{if(z==4){bS=2}else{return this.toRadix(z)}}}}}var bU=(1<<bS)-1,bX,t=false,bV="",bT=this.t;var bW=this.DB-(bT*this.DB)%bS;if(bT-->0){if(bW<this.DB&&(bX=this[bT]>>bW)>0){t=true;bV=Y(bX)}while(bT>=0){if(bW<bS){bX=(this[bT]&((1<<bW)-1))<<(bS-bW);bX|=this[--bT]>>(bW+=this.DB-bS)}else{bX=(this[bT]>>(bW-=bS))&bU;if(bW<=0){bW+=this.DB;--bT}}if(bX>0){t=true}if(t){bV+=Y(bX)}}}return t?bV:"0"}function by(){var t=bj();bc.ZERO.subTo(this,t);return t}function bx(){return(this.s<0)?this.negate():this}function bJ(t){var bS=this.s-t.s;if(bS!=0){return bS}var z=this.t;bS=z-t.t;if(bS!=0){return(this.s<0)?-bS:bS}while(--z>=0){if((bS=this[z]-t[z])!=0){return bS}}return 0}function s(z){var bT=1,bS;if((bS=z>>>16)!=0){z=bS;bT+=16}if((bS=z>>8)!=0){z=bS;bT+=8}if((bS=z>>4)!=0){z=bS;bT+=4}if((bS=z>>2)!=0){z=bS;bT+=2}if((bS=z>>1)!=0){z=bS;bT+=1}return bT}function bp(){if(this.t<=0){return 0}return this.DB*(this.t-1)+s(this[this.t-1]^(this.s&this.DM))}function br(bS,z){var t;for(t=this.t-1;t>=0;--t){z[t+bS]=this[t]}for(t=bS-1;t>=0;--t){z[t]=0}z.t=this.t+bS;z.s=this.s}function aZ(bS,z){for(var t=bS;t<this.t;++t){z[t-bS]=this[t]}z.t=Math.max(this.t-bS,0);z.s=this.s}function w(bX,bT){var z=bX%this.DB;var t=this.DB-z;var bV=(1<<t)-1;var bU=Math.floor(bX/this.DB),bW=(this.s<<z)&this.DM,bS;for(bS=this.t-1;bS>=0;--bS){bT[bS+bU+1]=(this[bS]>>t)|bW;bW=(this[bS]&bV)<<z}for(bS=bU-1;bS>=0;--bS){bT[bS]=0}bT[bU]=bW;bT.t=this.t+bU+1;bT.s=this.s;bT.clamp()}function bP(bW,bT){bT.s=this.s;var bU=Math.floor(bW/this.DB);if(bU>=this.t){bT.t=0;return}var z=bW%this.DB;var t=this.DB-z;var bV=(1<<z)-1;bT[0]=this[bU]>>z;for(var bS=bU+1;bS<this.t;++bS){bT[bS-bU-1]|=(this[bS]&bV)<<t;bT[bS-bU]=this[bS]>>z}if(z>0){bT[this.t-bU-1]|=(this.s&bV)<<t}bT.t=this.t-bU;bT.clamp()}function bo(z,bT){var bS=0,bU=0,t=Math.min(z.t,this.t);while(bS<t){bU+=this[bS]-z[bS];bT[bS++]=bU&this.DM;bU>>=this.DB}if(z.t<this.t){bU-=z.s;while(bS<this.t){bU+=this[bS];bT[bS++]=bU&this.DM;bU>>=this.DB}bU+=this.s}else{bU+=this.s;while(bS<z.t){bU-=z[bS];bT[bS++]=bU&this.DM;bU>>=this.DB}bU-=z.s}bT.s=(bU<0)?-1:0;if(bU<-1){bT[bS++]=this.DV+bU}else{if(bU>0){bT[bS++]=bU}}bT.t=bS;bT.clamp()}function bF(z,bT){var t=this.abs(),bU=z.abs();var bS=t.t;bT.t=bS+bU.t;while(--bS>=0){bT[bS]=0}for(bS=0;bS<bU.t;++bS){bT[bS+t.t]=t.am(0,bU[bS],bT,bS,0,t.t)}bT.s=0;bT.clamp();if(this.s!=z.s){bc.ZERO.subTo(bT,bT)}}function ar(bS){var t=this.abs();var z=bS.t=2*t.t;while(--z>=0){bS[z]=0}for(z=0;z<t.t-1;++z){var bT=t.am(z,t[z],bS,2*z,0,1);if((bS[z+t.t]+=t.am(z+1,2*t[z],bS,2*z+1,bT,t.t-z-1))>=t.DV){bS[z+t.t]-=t.DV;bS[z+t.t+1]=1}}if(bS.t>0){bS[bS.t-1]+=t.am(z,t[z],bS,2*z,0,1)}bS.s=0;bS.clamp()}function a6(b0,bX,bW){var b6=b0.abs();if(b6.t<=0){return}var bY=this.abs();if(bY.t<b6.t){if(bX!=null){bX.fromInt(0)}if(bW!=null){this.copyTo(bW)}return}if(bW==null){bW=bj()}var bU=bj(),z=this.s,bZ=b0.s;var b5=this.DB-s(b6[b6.t-1]);if(b5>0){b6.lShiftTo(b5,bU);bY.lShiftTo(b5,bW)}else{b6.copyTo(bU);bY.copyTo(bW)}var b2=bU.t;var bS=bU[b2-1];if(bS==0){return}var b1=bS*(1<<this.F1)+((b2>1)?bU[b2-2]>>this.F2:0);var b9=this.FV/b1,b8=(1<<this.F1)/b1,b7=1<<this.F2;var b4=bW.t,b3=b4-b2,bV=(bX==null)?bj():bX;bU.dlShiftTo(b3,bV);if(bW.compareTo(bV)>=0){bW[bW.t++]=1;bW.subTo(bV,bW)}bc.ONE.dlShiftTo(b2,bV);bV.subTo(bU,bU);while(bU.t<b2){bU[bU.t++]=0}while(--b3>=0){var bT=(bW[--b4]==bS)?this.DM:Math.floor(bW[b4]*b9+(bW[b4-1]+b7)*b8);if((bW[b4]+=bU.am(0,bT,bW,b3,0,b2))<bT){bU.dlShiftTo(b3,bV);bW.subTo(bV,bW);while(bW[b4]<--bT){bW.subTo(bV,bW)}}}if(bX!=null){bW.drShiftTo(b2,bX);if(z!=bZ){bc.ZERO.subTo(bX,bX)}}bW.t=b2;bW.clamp();if(b5>0){bW.rShiftTo(b5,bW)}if(z<0){bc.ZERO.subTo(bW,bW)}}function be(t){var z=bj();this.abs().divRemTo(t,null,z);if(this.s<0&&z.compareTo(bc.ZERO)>0){t.subTo(z,z)}return z}function aQ(t){this.m=t}function aF(t){if(t.s<0||t.compareTo(this.m)>=0){return t.mod(this.m)}else{return t}}function c(t){return t}function W(t){t.divRemTo(this.m,null,t)}function r(t,bS,z){t.multiplyTo(bS,z);this.reduce(z)}function aC(t,z){t.squareTo(z);this.reduce(z)}aQ.prototype.convert=aF;aQ.prototype.revert=c;aQ.prototype.reduce=W;aQ.prototype.mulTo=r;aQ.prototype.sqrTo=aC;function ab(){if(this.t<1){return 0}var t=this[0];if((t&1)==0){return 0}var z=t&3;z=(z*(2-(t&15)*z))&15;z=(z*(2-(t&255)*z))&255;z=(z*(2-(((t&65535)*z)&65535)))&65535;z=(z*(2-t*z%this.DV))%this.DV;return(z>0)?this.DV-z:-z}function M(t){this.m=t;this.mp=t.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<(t.DB-15))-1;this.mt2=2*t.t}function bu(t){var z=bj();t.abs().dlShiftTo(this.m.t,z);z.divRemTo(this.m,null,z);if(t.s<0&&z.compareTo(bc.ZERO)>0){this.m.subTo(z,z)}return z}function bi(t){var z=bj();t.copyTo(z);this.reduce(z);return z}function bR(t){while(t.t<=this.mt2){t[t.t++]=0}for(var bS=0;bS<this.m.t;++bS){var z=t[bS]&32767;var bT=(z*this.mpl+(((z*this.mph+(t[bS]>>15)*this.mpl)&this.um)<<15))&t.DM;z=bS+this.m.t;t[z]+=this.m.am(0,bT,t,bS,0,this.m.t);while(t[z]>=t.DV){t[z]-=t.DV;t[++z]++}}t.clamp();t.drShiftTo(this.m.t,t);if(t.compareTo(this.m)>=0){t.subTo(this.m,t)}}function ac(t,z){t.squareTo(z);this.reduce(z)}function bv(t,bS,z){t.multiplyTo(bS,z);this.reduce(z)}M.prototype.convert=bu;M.prototype.revert=bi;M.prototype.reduce=bR;M.prototype.mulTo=bv;M.prototype.sqrTo=ac;function ad(){return((this.t>0)?(this[0]&1):this.s)==0}function am(bX,bY){if(bX>4294967295||bX<1){return bc.ONE}var bW=bj(),bS=bj(),bV=bY.convert(this),bU=s(bX)-1;bV.copyTo(bW);while(--bU>=0){bY.sqrTo(bW,bS);if((bX&(1<<bU))>0){bY.mulTo(bS,bV,bW)}else{var bT=bW;bW=bS;bS=bT}}return bY.revert(bW)}function aD(bS,t){var bT;if(bS<256||t.isEven()){bT=new aQ(t)}else{bT=new M(t)}return this.exp(bS,bT)}bc.prototype.copyTo=d;bc.prototype.fromInt=h;bc.prototype.fromString=bE;bc.prototype.clamp=bw;bc.prototype.dlShiftTo=br;bc.prototype.drShiftTo=aZ;bc.prototype.lShiftTo=w;bc.prototype.rShiftTo=bP;bc.prototype.subTo=bo;bc.prototype.multiplyTo=bF;bc.prototype.squareTo=ar;bc.prototype.divRemTo=a6;bc.prototype.invDigit=ab;bc.prototype.isEven=ad;bc.prototype.exp=am;bc.prototype.toString=x;bc.prototype.negate=by;bc.prototype.abs=bx;bc.prototype.compareTo=bJ;bc.prototype.bitLength=bp;bc.prototype.mod=be;bc.prototype.modPowInt=aD;bc.ZERO=bf(0);bc.ONE=bf(1);function f(){var t=bj();this.copyTo(t);return t}function b(){if(this.s<0){if(this.t==1){return this[0]-this.DV}else{if(this.t==0){return -1}}}else{if(this.t==1){return this[0]}else{if(this.t==0){return 0}}}return((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0]}function bB(){return(this.t==0)?this.s:(this[0]<<24)>>24}function ag(){return(this.t==0)?this.s:(this[0]<<16)>>16}function aR(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function aW(){if(this.s<0){return -1}else{if(this.t<=0||(this.t==1&&this[0]<=0)){return 0}else{return 1}}}function K(t){if(t==null){t=10}if(this.signum()==0||t<2||t>36){return"0"}var bT=this.chunkSize(t);var bS=Math.pow(t,bT);var bW=bf(bS),bX=bj(),bV=bj(),bU="";this.divRemTo(bW,bX,bV);while(bX.signum()>0){bU=(bS+bV.intValue()).toString(t).substr(1)+bU;bX.divRemTo(bW,bX,bV)}return bV.intValue().toString(t)+bU}function at(bY,bV){this.fromInt(0);if(bV==null){bV=10}var bT=this.chunkSize(bV);var bU=Math.pow(bV,bT),bS=false,t=0,bX=0;for(var z=0;z<bY.length;++z){var bW=aU(bY,z);if(bW<0){if(bY.charAt(z)=="-"&&this.signum()==0){bS=true}continue}bX=bV*bX+bW;if(++t>=bT){this.dMultiply(bU);this.dAddOffset(bX,0);t=0;bX=0}}if(t>0){this.dMultiply(Math.pow(bV,t));this.dAddOffset(bX,0)}if(bS){bc.ZERO.subTo(this,this)}}function aM(bT,bS,bV){if("number"==typeof bS){if(bT<2){this.fromInt(1)}else{this.fromNumber(bT,bV);if(!this.testBit(bT-1)){this.bitwiseTo(bc.ONE.shiftLeft(bT-1),ak,this)}if(this.isEven()){this.dAddOffset(1,0)}while(!this.isProbablePrime(bS)){this.dAddOffset(2,0);if(this.bitLength()>bT){this.subTo(bc.ONE.shiftLeft(bT-1),this)}}}}else{var z=new Array(),bU=bT&7;z.length=(bT>>3)+1;bS.nextBytes(z);if(bU>0){z[0]&=((1<<bU)-1)}else{z[0]=0}this.fromString(z,256)}}function aH(){var z=this.t,bS=new Array();bS[0]=this.s;var bT=this.DB-(z*this.DB)%8,bU,t=0;if(z-->0){if(bT<this.DB&&(bU=this[z]>>bT)!=(this.s&this.DM)>>bT){bS[t++]=bU|(this.s<<(this.DB-bT))}while(z>=0){if(bT<8){bU=(this[z]&((1<<bT)-1))<<(8-bT);bU|=this[--z]>>(bT+=this.DB-8)}else{bU=(this[z]>>(bT-=8))&255;if(bT<=0){bT+=this.DB;--z}}if((bU&128)!=0){bU|=-256}if(t==0&&(this.s&128)!=(bU&128)){++t}if(t>0||bU!=this.s){bS[t++]=bU}}}return bS}function bC(t){return(this.compareTo(t)==0)}function X(t){return(this.compareTo(t)<0)?this:t}function bq(t){return(this.compareTo(t)>0)?this:t}function aG(z,bV,bT){var bS,bU,t=Math.min(z.t,this.t);for(bS=0;bS<t;++bS){bT[bS]=bV(this[bS],z[bS])}if(z.t<this.t){bU=z.s&this.DM;for(bS=t;bS<this.t;++bS){bT[bS]=bV(this[bS],bU)}bT.t=this.t}else{bU=this.s&this.DM;for(bS=t;bS<z.t;++bS){bT[bS]=bV(bU,z[bS])}bT.t=z.t}bT.s=bV(this.s,z.s);bT.clamp()}function q(t,z){return t&z}function bK(t){var z=bj();this.bitwiseTo(t,q,z);return z}function ak(t,z){return t|z}function aP(t){var z=bj();this.bitwiseTo(t,ak,z);return z}function aa(t,z){return t^z}function D(t){var z=bj();this.bitwiseTo(t,aa,z);return z}function j(t,z){return t&~z}function aA(t){var z=bj();this.bitwiseTo(t,j,z);return z}function U(){var z=bj();for(var t=0;t<this.t;++t){z[t]=this.DM&~this[t]}z.t=this.t;z.s=~this.s;return z}function aK(z){var t=bj();if(z<0){this.rShiftTo(-z,t)}else{this.lShiftTo(z,t)}return t}function S(z){var t=bj();if(z<0){this.lShiftTo(-z,t)}else{this.rShiftTo(z,t)}return t}function a9(t){if(t==0){return -1}var z=0;if((t&65535)==0){t>>=16;z+=16}if((t&255)==0){t>>=8;z+=8}if((t&15)==0){t>>=4;z+=4}if((t&3)==0){t>>=2;z+=2}if((t&1)==0){++z}return z}function aq(){for(var t=0;t<this.t;++t){if(this[t]!=0){return t*this.DB+a9(this[t])}}if(this.s<0){return this.t*this.DB}return -1}function bg(t){var z=0;while(t!=0){t&=t-1;++z}return z}function ao(){var bS=0,t=this.s&this.DM;for(var z=0;z<this.t;++z){bS+=bg(this[z]^t)}return bS}function aI(z){var t=Math.floor(z/this.DB);if(t>=this.t){return(this.s!=0)}return((this[t]&(1<<(z%this.DB)))!=0)}function V(bS,z){var t=bc.ONE.shiftLeft(bS);this.bitwiseTo(t,z,t);return t}function aY(t){return this.changeBit(t,ak)}function ah(t){return this.changeBit(t,j)}function aL(t){return this.changeBit(t,aa)}function T(z,bT){var bS=0,bU=0,t=Math.min(z.t,this.t);while(bS<t){bU+=this[bS]+z[bS];bT[bS++]=bU&this.DM;bU>>=this.DB}if(z.t<this.t){bU+=z.s;while(bS<this.t){bU+=this[bS];bT[bS++]=bU&this.DM;bU>>=this.DB}bU+=this.s}else{bU+=this.s;while(bS<z.t){bU+=z[bS];bT[bS++]=bU&this.DM;bU>>=this.DB}bU+=z.s}bT.s=(bU<0)?-1:0;if(bU>0){bT[bS++]=bU}else{if(bU<-1){bT[bS++]=this.DV+bU}}bT.t=bS;bT.clamp()}function bd(t){var z=bj();this.addTo(t,z);return z}function ax(t){var z=bj();this.subTo(t,z);return z}function bD(t){var z=bj();this.multiplyTo(t,z);return z}function bQ(){var t=bj();this.squareTo(t);return t}function ba(t){var z=bj();this.divRemTo(t,z,null);return z}function bL(t){var z=bj();this.divRemTo(t,null,z);return z}function bh(t){var bS=bj(),z=bj();this.divRemTo(t,bS,z);return new Array(bS,z)}function e(t){this[this.t]=this.am(0,t-1,this,0,0,this.t);++this.t;this.clamp()}function aO(z,t){if(z==0){return}while(this.t<=t){this[this.t++]=0}this[t]+=z;while(this[t]>=this.DV){this[t]-=this.DV;if(++t>=this.t){this[this.t++]=0}++this[t]}}function Z(){}function bs(t){return t}function bG(t,bS,z){t.multiplyTo(bS,z)}function ai(t,z){t.squareTo(z)}Z.prototype.convert=bs;Z.prototype.revert=bs;Z.prototype.mulTo=bG;Z.prototype.sqrTo=ai;function R(t){return this.exp(t,new Z())}function aN(t,bU,bT){var bS=Math.min(this.t+t.t,bU);bT.s=0;bT.t=bS;while(bS>0){bT[--bS]=0}var z;for(z=bT.t-this.t;bS<z;++bS){bT[bS+this.t]=this.am(0,t[bS],bT,bS,0,this.t)}for(z=Math.min(t.t,bU);bS<z;++bS){this.am(0,t[bS],bT,bS,0,bU-bS)}bT.clamp()}function aX(t,bT,bS){--bT;var z=bS.t=this.t+t.t-bT;bS.s=0;while(--z>=0){bS[z]=0}for(z=Math.max(bT-this.t,0);z<t.t;++z){bS[this.t+z-bT]=this.am(bT-z,t[z],bS,0,0,this.t+z-bT)}bS.clamp();bS.drShiftTo(1,bS)}function bN(t){this.r2=bj();this.q3=bj();bc.ONE.dlShiftTo(2*t.t,this.r2);this.mu=this.r2.divide(t);this.m=t}function J(t){if(t.s<0||t.t>2*this.m.t){return t.mod(this.m)}else{if(t.compareTo(this.m)<0){return t}else{var z=bj();t.copyTo(z);this.reduce(z);return z}}}function bI(t){return t}function F(t){t.drShiftTo(this.m.t-1,this.r2);if(t.t>this.m.t+1){t.t=this.m.t+1;t.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0){t.dAddOffset(1,this.m.t+1)}t.subTo(this.r2,t);while(t.compareTo(this.m)>=0){t.subTo(this.m,t)}}function aJ(t,z){t.squareTo(z);this.reduce(z)}function A(t,bS,z){t.multiplyTo(bS,z);this.reduce(z)}bN.prototype.convert=J;bN.prototype.revert=bI;bN.prototype.reduce=F;bN.prototype.mulTo=A;bN.prototype.sqrTo=aJ;function O(b1,bW){var bZ=b1.bitLength(),bX,bT=bf(1),b4;if(bZ<=0){return bT}else{if(bZ<18){bX=1}else{if(bZ<48){bX=3}else{if(bZ<144){bX=4}else{if(bZ<768){bX=5}else{bX=6}}}}}if(bZ<8){b4=new aQ(bW)}else{if(bW.isEven()){b4=new bN(bW)}else{b4=new M(bW)}}var b0=new Array(),bV=3,b2=bX-1,bS=(1<<bX)-1;b0[1]=b4.convert(this);if(bX>1){var b7=bj();b4.sqrTo(b0[1],b7);while(bV<=bS){b0[bV]=bj();b4.mulTo(b7,b0[bV-2],b0[bV]);bV+=2}}var bY=b1.t-1,b5,b3=true,bU=bj(),b6;bZ=s(b1[bY])-1;while(bY>=0){if(bZ>=b2){b5=(b1[bY]>>(bZ-b2))&bS}else{b5=(b1[bY]&((1<<(bZ+1))-1))<<(b2-bZ);if(bY>0){b5|=b1[bY-1]>>(this.DB+bZ-b2)}}bV=bX;while((b5&1)==0){b5>>=1;--bV}if((bZ-=bV)<0){bZ+=this.DB;--bY}if(b3){b0[b5].copyTo(bT);b3=false}else{while(bV>1){b4.sqrTo(bT,bU);b4.sqrTo(bU,bT);bV-=2}if(bV>0){b4.sqrTo(bT,bU)}else{b6=bT;bT=bU;bU=b6}b4.mulTo(bU,b0[b5],bT)}while(bY>=0&&(b1[bY]&(1<<bZ))==0){b4.sqrTo(bT,bU);b6=bT;bT=bU;bU=b6;if(--bZ<0){bZ=this.DB-1;--bY}}}return b4.revert(bT)}function ay(bS){var z=(this.s<0)?this.negate():this.clone();var bW=(bS.s<0)?bS.negate():bS.clone();if(z.compareTo(bW)<0){var bU=z;z=bW;bW=bU}var bT=z.getLowestSetBit(),bV=bW.getLowestSetBit();if(bV<0){return z}if(bT<bV){bV=bT}if(bV>0){z.rShiftTo(bV,z);bW.rShiftTo(bV,bW)}while(z.signum()>0){if((bT=z.getLowestSetBit())>0){z.rShiftTo(bT,z)}if((bT=bW.getLowestSetBit())>0){bW.rShiftTo(bT,bW)}if(z.compareTo(bW)>=0){z.subTo(bW,z);z.rShiftTo(1,z)}else{bW.subTo(z,bW);bW.rShiftTo(1,bW)}}if(bV>0){bW.lShiftTo(bV,bW)}return bW}function aj(bT){if(bT<=0){return 0}var bS=this.DV%bT,z=(this.s<0)?bT-1:0;if(this.t>0){if(bS==0){z=this[0]%bT}else{for(var t=this.t-1;t>=0;--t){z=(bS*z+this[t])%bT}}}return z}function bO(z){var bV=z.isEven();if((this.isEven()&&bV)||z.signum()==0){return bc.ZERO}var bU=z.clone(),bT=this.clone();var bS=bf(1),t=bf(0),bX=bf(0),bW=bf(1);while(bU.signum()!=0){while(bU.isEven()){bU.rShiftTo(1,bU);if(bV){if(!bS.isEven()||!t.isEven()){bS.addTo(this,bS);t.subTo(z,t)}bS.rShiftTo(1,bS)}else{if(!t.isEven()){t.subTo(z,t)}}t.rShiftTo(1,t)}while(bT.isEven()){bT.rShiftTo(1,bT);if(bV){if(!bX.isEven()||!bW.isEven()){bX.addTo(this,bX);bW.subTo(z,bW)}bX.rShiftTo(1,bX)}else{if(!bW.isEven()){bW.subTo(z,bW)}}bW.rShiftTo(1,bW)}if(bU.compareTo(bT)>=0){bU.subTo(bT,bU);if(bV){bS.subTo(bX,bS)}t.subTo(bW,t)}else{bT.subTo(bU,bT);if(bV){bX.subTo(bS,bX)}bW.subTo(t,bW)}}if(bT.compareTo(bc.ONE)!=0){return bc.ZERO}if(bW.compareTo(z)>=0){return bW.subtract(z)}if(bW.signum()<0){bW.addTo(z,bW)}else{return bW}if(bW.signum()<0){return bW.add(z)}else{return bW}}var aw=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var l=(1<<26)/aw[aw.length-1];function bH(bV){var bU,bS=this.abs();if(bS.t==1&&bS[0]<=aw[aw.length-1]){for(bU=0;bU<aw.length;++bU){if(bS[0]==aw[bU]){return true}}return false}if(bS.isEven()){return false}bU=1;while(bU<aw.length){var z=aw[bU],bT=bU+1;while(bT<aw.length&&z<l){z*=aw[bT++]}z=bS.modInt(z);while(bU<bT){if(z%aw[bU++]==0){return false}}}return bS.millerRabin(bV)}function aB(bV){var bW=this.subtract(bc.ONE);var bS=bW.getLowestSetBit();if(bS<=0){return false}var bX=bW.shiftRight(bS);bV=(bV+1)>>1;if(bV>aw.length){bV=aw.length}var z=bj();for(var bU=0;bU<bV;++bU){z.fromInt(aw[Math.floor(Math.random()*aw.length)]);var bY=z.modPow(bX,this);if(bY.compareTo(bc.ONE)!=0&&bY.compareTo(bW)!=0){var bT=1;while(bT++<bS&&bY.compareTo(bW)!=0){bY=bY.modPowInt(2,this);if(bY.compareTo(bc.ONE)==0){return false}}if(bY.compareTo(bW)!=0){return false}}}return true}bc.prototype.chunkSize=aR;bc.prototype.toRadix=K;bc.prototype.fromRadix=at;bc.prototype.fromNumber=aM;bc.prototype.bitwiseTo=aG;bc.prototype.changeBit=V;bc.prototype.addTo=T;bc.prototype.dMultiply=e;bc.prototype.dAddOffset=aO;bc.prototype.multiplyLowerTo=aN;bc.prototype.multiplyUpperTo=aX;bc.prototype.modInt=aj;bc.prototype.millerRabin=aB;bc.prototype.clone=f;bc.prototype.intValue=b;bc.prototype.byteValue=bB;bc.prototype.shortValue=ag;bc.prototype.signum=aW;bc.prototype.toByteArray=aH;bc.prototype.equals=bC;bc.prototype.min=X;bc.prototype.max=bq;bc.prototype.and=bK;bc.prototype.or=aP;bc.prototype.xor=D;bc.prototype.andNot=aA;bc.prototype.not=U;bc.prototype.shiftLeft=aK;bc.prototype.shiftRight=S;bc.prototype.getLowestSetBit=aq;bc.prototype.bitCount=ao;bc.prototype.testBit=aI;bc.prototype.setBit=aY;bc.prototype.clearBit=ah;bc.prototype.flipBit=aL;bc.prototype.add=bd;bc.prototype.subtract=ax;bc.prototype.multiply=bD;bc.prototype.divide=ba;bc.prototype.remainder=bL;bc.prototype.divideAndRemainder=bh;bc.prototype.modPow=O;bc.prototype.modInverse=bO;bc.prototype.pow=R;bc.prototype.gcd=ay;bc.prototype.isProbablePrime=bH;bc.prototype.square=bQ;function bl(){this.i=0;this.j=0;this.S=new Array()}function af(bU){var bT,z,bS;for(bT=0;bT<256;++bT){this.S[bT]=bT}z=0;for(bT=0;bT<256;++bT){z=(z+this.S[bT]+bU[bT%bU.length])&255;bS=this.S[bT];this.S[bT]=this.S[z];this.S[z]=bS}this.i=0;this.j=0}function bb(){var z;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;z=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=z;return this.S[(z+this.S[this.i])&255]}bl.prototype.init=af;bl.prototype.next=bb;function Q(){return new bl()}var B=256;var k;var m;var E;if(m==null){m=new Array();E=0;var a7;if(window.crypto&&window.crypto.getRandomValues){var a5=new Uint32Array(256);window.crypto.getRandomValues(a5);for(a7=0;a7<a5.length;++a7){m[E++]=a5[a7]&255}}var H=function(z){this.count=this.count||0;if(this.count>=256||E>=B){if(window.removeEventListener){window.removeEventListener("mousemove",H)}else{if(window.detachEvent){window.detachEvent("onmousemove",H)}}return}this.count+=1;var t=z.x+z.y;m[E++]=t&255};if(window.addEventListener){window.addEventListener("mousemove",H)}else{if(window.attachEvent){window.attachEvent("onmousemove",H)}}}function a8(){if(k==null){k=Q();while(E<B){var t=Math.floor(65536*Math.random());m[E++]=t&255}k.init(m);for(E=0;E<m.length;++E){m[E]=0}E=0}return k.next()}function aV(z){var t;for(t=0;t<z.length;++t){z[t]=a8()}}function I(){}I.prototype.nextBytes=aV;function y(z,t){return new bc(z,t)}function n(bS,bT){var t="";var z=0;while(z+bT<bS.length){t+=bS.substring(z,z+bT)+"\n";z+=bT}return t+bS.substring(z,bS.length)}function bn(t){if(t<16){return"0"+t.toString(16)}else{return t.toString(16)}}function bz(bT,bW){if(bW<bT.length+11){console.error("Message too long for RSA");return null}var bV=new Array();var bS=bT.length-1;while(bS>=0&&bW>0){var bU=bT.charCodeAt(bS--);if(bU<128){bV[--bW]=bU}else{if((bU>127)&&(bU<2048)){bV[--bW]=(bU&63)|128;bV[--bW]=(bU>>6)|192}else{bV[--bW]=(bU&63)|128;bV[--bW]=((bU>>6)&63)|128;bV[--bW]=(bU>>12)|224}}}bV[--bW]=0;var z=new I();var t=new Array();while(bW>2){t[0]=0;while(t[0]==0){z.nextBytes(t)}bV[--bW]=t[0]}bV[--bW]=2;bV[--bW]=0;return new bc(bV)}function C(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function an(z,t){if(z!=null&&t!=null&&z.length>0&&t.length>0){this.n=y(z,16);this.e=parseInt(t,16)}else{console.error("Invalid RSA public key")}}function bm(t){return t.modPowInt(this.e,this.n)}function al(bS){var t=bz(bS,(this.n.bitLength()+7)>>3);if(t==null){return null}var bT=this.doPublic(t);if(bT==null){return null}var z=bT.toString(16);if((z.length&1)==0){return z}else{return"0"+z}}C.prototype.doPublic=bm;C.prototype.setPublic=an;C.prototype.encrypt=al;function bk(bT,bV){var t=bT.toByteArray();var bS=0;while(bS<t.length&&t[bS]==0){++bS}if(t.length-bS!=bV-1||t[bS]!=2){return null}++bS;while(t[bS]!=0){if(++bS>=t.length){return null}}var z="";while(++bS<t.length){var bU=t[bS]&255;if(bU<128){z+=String.fromCharCode(bU)}else{if((bU>191)&&(bU<224)){z+=String.fromCharCode(((bU&31)<<6)|(t[bS+1]&63));++bS}else{z+=String.fromCharCode(((bU&15)<<12)|((t[bS+1]&63)<<6)|(t[bS+2]&63));bS+=2}}}return z}function az(bS,t,z){if(bS!=null&&t!=null&&bS.length>0&&t.length>0){this.n=y(bS,16);this.e=parseInt(t,16);this.d=y(z,16)}else{console.error("Invalid RSA private key")}}function P(bW,bT,bU,bS,z,t,bX,bV){if(bW!=null&&bT!=null&&bW.length>0&&bT.length>0){this.n=y(bW,16);this.e=parseInt(bT,16);this.d=y(bU,16);this.p=y(bS,16);this.q=y(z,16);this.dmp1=y(t,16);this.dmq1=y(bX,16);this.coeff=y(bV,16)}else{console.error("Invalid RSA private key")}}function au(bS,bZ){var z=new I();var bW=bS>>1;this.e=parseInt(bZ,16);var bT=new bc(bZ,16);for(;;){for(;;){this.p=new bc(bS-bW,1,z);if(this.p.subtract(bc.ONE).gcd(bT).compareTo(bc.ONE)==0&&this.p.isProbablePrime(10)){break}}for(;;){this.q=new bc(bW,1,z);if(this.q.subtract(bc.ONE).gcd(bT).compareTo(bc.ONE)==0&&this.q.isProbablePrime(10)){break}}if(this.p.compareTo(this.q)<=0){var bY=this.p;this.p=this.q;this.q=bY}var bX=this.p.subtract(bc.ONE);var bU=this.q.subtract(bc.ONE);var bV=bX.multiply(bU);if(bV.gcd(bT).compareTo(bc.ONE)==0){this.n=this.p.multiply(this.q);this.d=bT.modInverse(bV);this.dmp1=this.d.mod(bX);this.dmq1=this.d.mod(bU);this.coeff=this.q.modInverse(this.p);break}}}function av(t){if(this.p==null||this.q==null){return t.modPow(this.d,this.n)}var bS=t.mod(this.p).modPow(this.dmp1,this.p);var z=t.mod(this.q).modPow(this.dmq1,this.q);while(bS.compareTo(z)<0){bS=bS.add(this.p)}return bS.subtract(z).multiply(this.coeff).mod(this.p).multiply(this.q).add(z)}function u(z){var bS=y(z,16);var t=this.doPrivate(bS);if(t==null){return null}return bk(t,(this.n.bitLength()+7)>>3)}C.prototype.doPrivate=av;C.prototype.setPrivate=az;C.prototype.setPrivateEx=P;C.prototype.generate=au;C.prototype.decrypt=u;(function(){var z=function(b0,bY,bZ){var bW=new I();var bT=b0>>1;this.e=parseInt(bY,16);var bV=new bc(bY,16);var bX=this;var bU=function(){var b2=function(){if(bX.p.compareTo(bX.q)<=0){var b5=bX.p;bX.p=bX.q;bX.q=b5}var b7=bX.p.subtract(bc.ONE);var b4=bX.q.subtract(bc.ONE);var b6=b7.multiply(b4);if(b6.gcd(bV).compareTo(bc.ONE)==0){bX.n=bX.p.multiply(bX.q);bX.d=bV.modInverse(b6);bX.dmp1=bX.d.mod(b7);bX.dmq1=bX.d.mod(b4);bX.coeff=bX.q.modInverse(bX.p);setTimeout(function(){bZ()},0)}else{setTimeout(bU,0)}};var b3=function(){bX.q=bj();bX.q.fromNumberAsync(bT,1,bW,function(){bX.q.subtract(bc.ONE).gcda(bV,function(b4){if(b4.compareTo(bc.ONE)==0&&bX.q.isProbablePrime(10)){setTimeout(b2,0)}else{setTimeout(b3,0)}})})};var b1=function(){bX.p=bj();bX.p.fromNumberAsync(b0-bT,1,bW,function(){bX.p.subtract(bc.ONE).gcda(bV,function(b4){if(b4.compareTo(bc.ONE)==0&&bX.p.isProbablePrime(10)){setTimeout(b3,0)}else{setTimeout(b1,0)}})})};setTimeout(b1,0)};setTimeout(bU,0)};C.prototype.generateAsync=z;var t=function(bU,b0){var bT=(this.s<0)?this.negate():this.clone();var bZ=(bU.s<0)?bU.negate():bU.clone();if(bT.compareTo(bZ)<0){var bW=bT;bT=bZ;bZ=bW}var bV=bT.getLowestSetBit(),bX=bZ.getLowestSetBit();if(bX<0){b0(bT);return}if(bV<bX){bX=bV}if(bX>0){bT.rShiftTo(bX,bT);bZ.rShiftTo(bX,bZ)}var bY=function(){if((bV=bT.getLowestSetBit())>0){bT.rShiftTo(bV,bT)}if((bV=bZ.getLowestSetBit())>0){bZ.rShiftTo(bV,bZ)}if(bT.compareTo(bZ)>=0){bT.subTo(bZ,bT);bT.rShiftTo(1,bT)}else{bZ.subTo(bT,bZ);bZ.rShiftTo(1,bZ)}if(!(bT.signum()>0)){if(bX>0){bZ.lShiftTo(bX,bZ)}setTimeout(function(){b0(bZ)},0)}else{setTimeout(bY,0)}};setTimeout(bY,10)};bc.prototype.gcda=t;var bS=function(bX,bU,b0,bZ){if("number"==typeof bU){if(bX<2){this.fromInt(1)}else{this.fromNumber(bX,b0);if(!this.testBit(bX-1)){this.bitwiseTo(bc.ONE.shiftLeft(bX-1),ak,this)}if(this.isEven()){this.dAddOffset(1,0)}var bW=this;var bV=function(){bW.dAddOffset(2,0);if(bW.bitLength()>bX){bW.subTo(bc.ONE.shiftLeft(bX-1),bW)}if(bW.isProbablePrime(bU)){setTimeout(function(){bZ()},0)}else{setTimeout(bV,0)}};setTimeout(bV,0)}}else{var bT=new Array(),bY=bX&7;bT.length=(bX>>3)+1;bU.nextBytes(bT);if(bY>0){bT[0]&=((1<<bY)-1)}else{bT[0]=0}this.fromString(bT,256)}};bc.prototype.fromNumberAsync=bS})();var a1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var L="=";function ae(bS){var z;var bT;var t="";for(z=0;z+3<=bS.length;z+=3){bT=parseInt(bS.substring(z,z+3),16);t+=a1.charAt(bT>>6)+a1.charAt(bT&63)}if(z+1==bS.length){bT=parseInt(bS.substring(z,z+1),16);t+=a1.charAt(bT<<2)}else{if(z+2==bS.length){bT=parseInt(bS.substring(z,z+2),16);t+=a1.charAt(bT>>2)+a1.charAt((bT&3)<<4)}}while((t.length&3)>0){t+=L}return t}function aT(bU){var bS="";var bT;var t=0;var z;for(bT=0;bT<bU.length;++bT){if(bU.charAt(bT)==L){break}v=a1.indexOf(bU.charAt(bT));if(v<0){continue}if(t==0){bS+=Y(v>>2);z=v&3;t=1}else{if(t==1){bS+=Y((z<<2)|(v>>4));z=v&15;t=2}else{if(t==2){bS+=Y(z);bS+=Y(v>>2);z=v&3;t=3}else{bS+=Y((z<<2)|(v>>4));bS+=Y(v&15);t=0}}}}if(t==1){bS+=Y(z<<2)}return bS}function N(bT){var bS=aT(bT);var z;var t=new Array();for(z=0;2*z<bS.length;++z){t[z]=parseInt(bS.substring(2*z,2*z+2),16)}return t}(function(z){var t={},bS;t.decode=function(bT){var bV;if(bS===z){var bW="0123456789ABCDEF",b0=" \f\n\r\t\u00A0\u2028\u2029";bS=[];for(bV=0;bV<16;++bV){bS[bW.charAt(bV)]=bV}bW=bW.toLowerCase();for(bV=10;bV<16;++bV){bS[bW.charAt(bV)]=bV}for(bV=0;bV<b0.length;++bV){bS[b0.charAt(bV)]=-1}}var bU=[],bX=0,bZ=0;for(bV=0;bV<bT.length;++bV){var bY=bT.charAt(bV);if(bY=="="){break}bY=bS[bY];if(bY==-1){continue}if(bY===z){throw"Illegal character at offset "+bV}bX|=bY;if(++bZ>=2){bU[bU.length]=bX;bX=0;bZ=0}else{bX<<=4}}if(bZ){throw"Hex encoding incomplete: 4 bits missing"}return bU};window.Hex=t})();(function(z){var t={},bS;t.decode=function(bT){var bW;if(bS===z){var bV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b0="= \f\n\r\t\u00A0\u2028\u2029";bS=[];for(bW=0;bW<64;++bW){bS[bV.charAt(bW)]=bW}for(bW=0;bW<b0.length;++bW){bS[b0.charAt(bW)]=-1}}var bU=[];var bX=0,bZ=0;for(bW=0;bW<bT.length;++bW){var bY=bT.charAt(bW);if(bY=="="){break}bY=bS[bY];if(bY==-1){continue}if(bY===z){throw"Illegal character at offset "+bW}bX|=bY;if(++bZ>=4){bU[bU.length]=(bX>>16);bU[bU.length]=(bX>>8)&255;bU[bU.length]=bX&255;bX=0;bZ=0}else{bX<<=6}}switch(bZ){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:bU[bU.length]=(bX>>10);break;case 3:bU[bU.length]=(bX>>16);bU[bU.length]=(bX>>8)&255;break}return bU};t.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/;t.unarmor=function(bU){var bT=t.re.exec(bU);if(bT){if(bT[1]){bU=bT[1]}else{if(bT[2]){bU=bT[2]}else{throw"RegExp out of sync"}}}return t.decode(bU)};window.Base64=t})();(function(bV){var z=100,t="\u2026",bS={tag:function(bX,bY){var bW=document.createElement(bX);bW.className=bY;return bW},text:function(bW){return document.createTextNode(bW)}};function bU(bW,bX){if(bW instanceof bU){this.enc=bW.enc;this.pos=bW.pos}else{this.enc=bW;this.pos=bX}}bU.prototype.get=function(bW){if(bW===bV){bW=this.pos++}if(bW>=this.enc.length){throw"Requesting byte offset "+bW+" on a stream of length "+this.enc.length}return this.enc[bW]};bU.prototype.hexDigits="0123456789ABCDEF";bU.prototype.hexByte=function(bW){return this.hexDigits.charAt((bW>>4)&15)+this.hexDigits.charAt(bW&15)};bU.prototype.hexDump=function(b0,bW,bX){var bZ="";for(var bY=b0;bY<bW;++bY){bZ+=this.hexByte(this.get(bY));if(bX!==true){switch(bY&15){case 7:bZ+="  ";break;case 15:bZ+="\n";break;default:bZ+=" "}}}return bZ};bU.prototype.parseStringISO=function(bZ,bW){var bY="";for(var bX=bZ;bX<bW;++bX){bY+=String.fromCharCode(this.get(bX))}return bY};bU.prototype.parseStringUTF=function(b0,bW){var bY="";for(var bX=b0;bX<bW;){var bZ=this.get(bX++);if(bZ<128){bY+=String.fromCharCode(bZ)}else{if((bZ>191)&&(bZ<224)){bY+=String.fromCharCode(((bZ&31)<<6)|(this.get(bX++)&63))}else{bY+=String.fromCharCode(((bZ&15)<<12)|((this.get(bX++)&63)<<6)|(this.get(bX++)&63))}}}return bY};bU.prototype.parseStringBMP=function(b1,bX){var b0="";for(var bZ=b1;bZ<bX;bZ+=2){var bW=this.get(bZ);var bY=this.get(bZ+1);b0+=String.fromCharCode((bW<<8)+bY)}return b0};bU.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;bU.prototype.parseTime=function(bZ,bX){var bY=this.parseStringISO(bZ,bX),bW=this.reTime.exec(bY);if(!bW){return"Unrecognized time: "+bY}bY=bW[1]+"-"+bW[2]+"-"+bW[3]+" "+bW[4];if(bW[5]){bY+=":"+bW[5];if(bW[6]){bY+=":"+bW[6];if(bW[7]){bY+="."+bW[7]}}}if(bW[8]){bY+=" UTC";if(bW[8]!="Z"){bY+=bW[8];if(bW[9]){bY+=":"+bW[9]}}}return bY};bU.prototype.parseInteger=function(b1,bX){var bW=bX-b1;if(bW>4){bW<<=3;var bZ=this.get(b1);if(bZ===0){bW-=8}else{while(bZ<128){bZ<<=1;--bW}}return"("+bW+" bit)"}var b0=0;for(var bY=b1;bY<bX;++bY){b0=(b0<<8)|this.get(bY)}return b0};bU.prototype.parseBitString=function(bW,bX){var b1=this.get(bW),bZ=((bX-bW-1)<<3)-b1,b4="("+bZ+" bit)";if(bZ<=20){var b3=b1;b4+=" ";for(var b0=bX-1;b0>bW;--b0){var b2=this.get(b0);for(var bY=b3;bY<8;++bY){b4+=(b2>>bY)&1?"1":"0"}b3=0}}return b4};bU.prototype.parseOctetString=function(b0,bX){var bW=bX-b0,bZ="("+bW+" byte) ";if(bW>z){bX=b0+z}for(var bY=b0;bY<bX;++bY){bZ+=this.hexByte(this.get(bY))}if(bW>z){bZ+=t}return bZ};bU.prototype.parseOID=function(b3,bX){var b0="",b2=0,b1=0;for(var bZ=b3;bZ<bX;++bZ){var bY=this.get(bZ);b2=(b2<<7)|(bY&127);b1+=7;if(!(bY&128)){if(b0===""){var bW=b2<80?b2<40?0:1:2;b0=bW+"."+(b2-bW*40)}else{b0+="."+((b1>=31)?"bigint":b2)}b2=b1=0}}return b0};function bT(bZ,b0,bY,bW,bX){this.stream=bZ;this.header=b0;this.length=bY;this.tag=bW;this.sub=bX}bT.prototype.typeName=function(){if(this.tag===bV){return"unknown"}var bY=this.tag>>6,bW=(this.tag>>5)&1,bX=this.tag&31;switch(bY){case 0:switch(bX){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+bX.toString(16)}case 1:return"Application_"+bX.toString(16);case 2:return"["+bX+"]";case 3:return"Private_"+bX.toString(16)}};bT.prototype.reSeemsASCII=/^[ -~]+$/;bT.prototype.content=function(){if(this.tag===bV){return null}var b0=this.tag>>6,bX=this.tag&31,bZ=this.posContent(),bW=Math.abs(this.length);if(b0!==0){if(this.sub!==null){return"("+this.sub.length+" elem)"}var bY=this.stream.parseStringISO(bZ,bZ+Math.min(bW,z));if(this.reSeemsASCII.test(bY)){return bY.substring(0,2*z)+((bY.length>2*z)?t:"")}else{return this.stream.parseOctetString(bZ,bZ+bW)}}switch(bX){case 1:return(this.stream.get(bZ)===0)?"false":"true";case 2:return this.stream.parseInteger(bZ,bZ+bW);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(bZ,bZ+bW);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(bZ,bZ+bW);case 6:return this.stream.parseOID(bZ,bZ+bW);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(bZ,bZ+bW);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(bZ,bZ+bW);case 30:return this.stream.parseStringBMP(bZ,bZ+bW);case 23:case 24:return this.stream.parseTime(bZ,bZ+bW)}return null};bT.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+((this.sub===null)?"null":this.sub.length)+"]"};bT.prototype.print=function(bX){if(bX===bV){bX=""}document.writeln(bX+this);if(this.sub!==null){bX+="  ";for(var bY=0,bW=this.sub.length;bY<bW;++bY){this.sub[bY].print(bX)}}};bT.prototype.toPrettyString=function(bX){if(bX===bV){bX=""}var bZ=bX+this.typeName()+" @"+this.stream.pos;if(this.length>=0){bZ+="+"}bZ+=this.length;if(this.tag&32){bZ+=" (constructed)"}else{if(((this.tag==3)||(this.tag==4))&&(this.sub!==null)){bZ+=" (encapsulates)"}}bZ+="\n";if(this.sub!==null){bX+="  ";for(var bY=0,bW=this.sub.length;bY<bW;++bY){bZ+=this.sub[bY].toPrettyString(bX)}}return bZ};bT.prototype.toDOM=function(){var bX=bS.tag("div","node");bX.asn1=this;var b3=bS.tag("div","head");var b5=this.typeName().replace(/_/g," ");b3.innerHTML=b5;var b1=this.content();if(b1!==null){b1=String(b1).replace(/</g,"&lt;");var b0=bS.tag("span","preview");b0.appendChild(bS.text(b1));b3.appendChild(b0)}bX.appendChild(b3);this.node=bX;this.head=b3;var b4=bS.tag("div","value");b5="Offset: "+this.stream.pos+"<br/>";b5+="Length: "+this.header+"+";if(this.length>=0){b5+=this.length}else{b5+=(-this.length)+" (undefined)"}if(this.tag&32){b5+="<br/>(constructed)"}else{if(((this.tag==3)||(this.tag==4))&&(this.sub!==null)){b5+="<br/>(encapsulates)"}}if(b1!==null){b5+="<br/>Value:<br/><b>"+b1+"</b>";if((typeof oids==="object")&&(this.tag==6)){var bY=oids[b1];if(bY){if(bY.d){b5+="<br/>"+bY.d}if(bY.c){b5+="<br/>"+bY.c}if(bY.w){b5+="<br/>(warning!)"}}}}b4.innerHTML=b5;bX.appendChild(b4);var bW=bS.tag("div","sub");if(this.sub!==null){for(var bZ=0,b2=this.sub.length;bZ<b2;++bZ){bW.appendChild(this.sub[bZ].toDOM())}}bX.appendChild(bW);b3.onclick=function(){bX.className=(bX.className=="node collapsed")?"node":"node collapsed"};return bX};bT.prototype.posStart=function(){return this.stream.pos};bT.prototype.posContent=function(){return this.stream.pos+this.header};bT.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)};bT.prototype.fakeHover=function(bW){this.node.className+=" hover";if(bW){this.head.className+=" hover"}};bT.prototype.fakeOut=function(bX){var bW=/ ?hover/;this.node.className=this.node.className.replace(bW,"");if(bX){this.head.className=this.head.className.replace(bW,"")}};bT.prototype.toHexDOM_sub=function(bZ,bY,b0,b1,bW){if(b1>=bW){return}var bX=bS.tag("span",bY);bX.appendChild(bS.text(b0.hexDump(b1,bW)));bZ.appendChild(bX)};bT.prototype.toHexDOM=function(bX){var b0=bS.tag("span","hex");if(bX===bV){bX=b0}this.head.hexNode=b0;this.head.onmouseover=function(){this.hexNode.className="hexCurrent"};this.head.onmouseout=function(){this.hexNode.className="hex"};b0.asn1=this;b0.onmouseover=function(){var b2=!bX.selected;if(b2){bX.selected=this.asn1;this.className="hexCurrent"}this.asn1.fakeHover(b2)};b0.onmouseout=function(){var b2=(bX.selected==this.asn1);this.asn1.fakeOut(b2);if(b2){bX.selected=null;this.className="hex"}};this.toHexDOM_sub(b0,"tag",this.stream,this.posStart(),this.posStart()+1);this.toHexDOM_sub(b0,(this.length>=0)?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent());if(this.sub===null){b0.appendChild(bS.text(this.stream.hexDump(this.posContent(),this.posEnd())))}else{if(this.sub.length>0){var b1=this.sub[0];var bZ=this.sub[this.sub.length-1];this.toHexDOM_sub(b0,"intro",this.stream,this.posContent(),b1.posStart());for(var bY=0,bW=this.sub.length;bY<bW;++bY){b0.appendChild(this.sub[bY].toHexDOM(bX))}this.toHexDOM_sub(b0,"outro",this.stream,bZ.posEnd(),this.posEnd())}}return b0};bT.prototype.toHexString=function(bW){return this.stream.hexDump(this.posStart(),this.posEnd(),true)};bT.decodeLength=function(bZ){var bX=bZ.get(),bW=bX&127;if(bW==bX){return bW}if(bW>3){throw"Length over 24 bits not supported at position "+(bZ.pos-1)}if(bW===0){return -1}bX=0;for(var bY=0;bY<bW;++bY){bX=(bX<<8)|bZ.get()}return bX};bT.hasContent=function(bX,bW,b2){if(bX&32){return true}if((bX<3)||(bX>4)){return false}var b1=new bU(b2);if(bX==3){b1.get()}var b0=b1.get();if((b0>>6)&1){return false}try{var bZ=bT.decodeLength(b1);return((b1.pos-b2.pos)+bZ==bW)}catch(bY){return false}};bT.decode=function(b3){if(!(b3 instanceof bU)){b3=new bU(b3,0)}var b2=new bU(b3),b5=b3.get(),b0=bT.decodeLength(b3),bZ=b3.pos-b2.pos,bW=null;if(bT.hasContent(b5,b0,b3)){var bX=b3.pos;if(b5==3){b3.get()}bW=[];if(b0>=0){var bY=bX+b0;while(b3.pos<bY){bW[bW.length]=bT.decode(b3)}if(b3.pos!=bY){throw"Content size is not correct for container starting at offset "+bX}}else{try{for(;;){var b4=bT.decode(b3);if(b4.tag===0){break}bW[bW.length]=b4}b0=bX-b3.pos}catch(b1){throw"Exception while decoding undefined length content: "+b1}}}else{b3.pos+=b0}return new bT(b2,bZ,b0,b5,bW)};bT.test=function(){var b1=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}];for(var bY=0,bW=b1.length;bY<bW;++bY){var b0=0,bZ=new bU(b1[bY].value,0),bX=bT.decodeLength(bZ);if(bX!=b1[bY].expected){document.write("In test["+bY+"] expected "+b1[bY].expected+" got "+bX+"\n")}}};window.ASN1=bT})();ASN1.prototype.getHexStringValue=function(){var t=this.toHexString();var bS=this.header*2;var z=this.length*2;return t.substr(bS,z)};C.prototype.parseKey=function(bY){try{var b3=0;var bT=0;var t=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/;var b2=t.test(bY)?Hex.decode(bY):Base64.unarmor(bY);var bU=ASN1.decode(b2);if(bU.sub.length===9){b3=bU.sub[1].getHexStringValue();this.n=y(b3,16);bT=bU.sub[2].getHexStringValue();this.e=parseInt(bT,16);var z=bU.sub[3].getHexStringValue();this.d=y(z,16);var bX=bU.sub[4].getHexStringValue();this.p=y(bX,16);var bW=bU.sub[5].getHexStringValue();this.q=y(bW,16);var b0=bU.sub[6].getHexStringValue();this.dmp1=y(b0,16);var bZ=bU.sub[7].getHexStringValue();this.dmq1=y(bZ,16);var bS=bU.sub[8].getHexStringValue();this.coeff=y(bS,16)}else{if(bU.sub.length===2){var b4=bU.sub[1];var bV=b4.sub[0];b3=bV.sub[0].getHexStringValue();this.n=y(b3,16);bT=bV.sub[1].getHexStringValue();this.e=parseInt(bT,16)}else{return false}}return true}catch(b1){return false}};C.prototype.getPrivateBaseKey=function(){var z={array:[new KJUR.asn1.DERInteger({"int":0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]};var t=new KJUR.asn1.DERSequence(z);return t.getEncodedHex()};C.prototype.getPrivateBaseKeyB64=function(){return ae(this.getPrivateBaseKey())};C.prototype.getPublicBaseKey=function(){var bS={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull()]};var t=new KJUR.asn1.DERSequence(bS);bS={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({"int":this.e})]};var bU=new KJUR.asn1.DERSequence(bS);bS={hex:"00"+bU.getEncodedHex()};var bT=new KJUR.asn1.DERBitString(bS);bS={array:[t,bT]};var z=new KJUR.asn1.DERSequence(bS);return z.getEncodedHex()};C.prototype.getPublicBaseKeyB64=function(){return ae(this.getPublicBaseKey())};C.prototype.wordwrap=function(bS,t){t=t||64;if(!bS){return bS}var z="(.{1,"+t+"})( +|$\n?)|(.{1,"+t+"})";return bS.match(RegExp(z,"g")).join("\n")};C.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";t+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n";t+="-----END RSA PRIVATE KEY-----";return t};C.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";t+=this.wordwrap(this.getPublicBaseKeyB64())+"\n";t+="-----END PUBLIC KEY-----";return t};C.prototype.hasPublicKeyProperty=function(t){t=t||{};return(t.hasOwnProperty("n")&&t.hasOwnProperty("e"))};C.prototype.hasPrivateKeyProperty=function(t){t=t||{};return(t.hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff"))};C.prototype.parsePropertiesFrom=function(t){this.n=t.n;this.e=t.e;if(t.hasOwnProperty("d")){this.d=t.d;this.p=t.p;this.q=t.q;this.dmp1=t.dmp1;this.dmq1=t.dmq1;this.coeff=t.coeff}};var bt=function(t){C.call(this);if(t){if(typeof t==="string"){this.parseKey(t)}else{if(this.hasPrivateKeyProperty(t)||this.hasPublicKeyProperty(t)){this.parsePropertiesFrom(t)}}}};bt.prototype=new C();bt.prototype.constructor=bt;var a0=function(t){t=t||{};this.default_key_size=parseInt(t.default_key_size)||1024;this.default_public_exponent=t.default_public_exponent||"010001";this.log=t.log||false;this.key=null};a0.prototype.setKey=function(t){if(this.log&&this.key){console.warn("A key was already set, overriding existing.")}this.key=new bt(t)};a0.prototype.setPrivateKey=function(t){this.setKey(t)};a0.prototype.setPublicKey=function(t){this.setKey(t)};a0.prototype.decrypt=function(t){try{return this.getKey().decrypt(aT(t))}catch(z){return false}};a0.prototype.encrypt=function(t){try{return ae(this.getKey().encrypt(t))}catch(z){return false}};a0.prototype.getKey=function(t){if(!this.key){this.key=new bt();if(t&&{}.toString.call(t)==="[object Function]"){this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);return}this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key};a0.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()};a0.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()};a0.prototype.getPublicKey=function(){return this.getKey().getPublicKey()};a0.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()};ap.JSEncrypt=a0})(JSEncryptExports);var JSEncrypt=JSEncryptExports.JSEncrypt;